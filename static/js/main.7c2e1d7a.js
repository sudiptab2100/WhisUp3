/*! For license information please see main.7c2e1d7a.js.LICENSE.txt */
(()=>{var __webpack_modules__={2956:(e,t)=>{"use strict";function r(e){if(Array.isArray(e)){const t=[];let n=0;for(let i=0;i<e.length;i++){const o=r(e[i]);t.push(o),n+=o.length}return h(o(n,192),...t)}const t=m(e);return 1===t.length&&t[0]<128?t:h(o(t.length,128),t)}function n(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function i(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return l(u(e))}function o(e,t){if(e<56)return Uint8Array.from([e+t]);const r=p(e),n=p(t+55+r.length/2);return Uint8Array.from(d(n+r))}function s(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"===typeof e||null===e||0===e.length)return Uint8Array.from([]);const r=a(m(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function a(e){let t,r,o,s,c;const u=[],l=e[0];if(l<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(l<=183){if(t=l-127,o=128===l?Uint8Array.from([]):n(e,1,t),2===t&&o[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:o,remainder:e.slice(t)}}if(l<=191){if(r=l-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=i(n(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return o=n(e,r,t+r),{data:o,remainder:e.slice(t+r)}}if(l<=247){for(t=l-191,s=n(e,1,t);s.length;)c=a(s),u.push(c.data),s=c.remainder;return{data:u,remainder:e.slice(t)}}{if(r=l-246,t=i(n(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const o=r+t;if(o>e.length)throw new Error("invalid RLP: total length is larger than the data");for(s=n(e,r,o);s.length;)c=a(s),u.push(c.data),s=c.remainder;return{data:u,remainder:e.slice(o)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.RLP=t.utils=t.decode=t.encode=void 0,t.encode=r,t.decode=s;const c=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){let t="";for(let r=0;r<e.length;r++)t+=c[e[r]];return t}function l(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function d(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=l(e.slice(n,n+2))}return t}function h(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length)return t[0];const n=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(n);for(let o=0,s=0;o<t.length;o++){const e=t[o];i.set(e,s),s+=e.length}return i}function f(e){return(new TextEncoder).encode(e)}function p(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?"0".concat(t):t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function m(e){if(e instanceof Uint8Array)return e;if("string"===typeof e)return g(e)?d((t="string"!==typeof(r=e)?r:g(r)?r.slice(2):r).length%2?"0".concat(t):t):f(e);var t,r;if("number"===typeof e||"bigint"===typeof e)return e?d(p(e)):Uint8Array.from([]);if(null===e||void 0===e)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}t.utils={bytesToHex:u,concatBytes:h,hexToBytes:d,utf8ToBytes:f},t.RLP={encode:r,decode:s}},5904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountBodyToRLP=t.accountBodyToSlim=t.accountBodyFromSlim=t.isZeroAddress=t.zeroAddress=t.importPublic=t.privateToAddress=t.privateToPublic=t.publicToAddress=t.pubToAddress=t.isValidPublic=t.isValidPrivate=t.generateAddress2=t.generateAddress=t.isValidChecksumAddress=t.toChecksumAddress=t.isValidAddress=t.Account=void 0;const n=r(2956),i=r(7285),o=r(13),s=r(3720),a=r(6522),c=r(5106),u=r(8522),l=r(3970),d=BigInt(0);class h{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.KECCAK256_RLP,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.KECCAK256_NULL;this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:i}=e;return new h(void 0!==t?(0,a.bufferToBigInt)((0,a.toBuffer)(t)):void 0,void 0!==r?(0,a.bufferToBigInt)((0,a.toBuffer)(r)):void 0,void 0!==n?(0,a.toBuffer)(n):void 0,void 0!==i?(0,a.toBuffer)(i):void 0)}static fromRlpSerializedAccount(e){const t=(0,a.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,i]=e;return new h((0,a.bufferToBigInt)(t),(0,a.bufferToBigInt)(r),n,i)}_validate(){if(this.nonce<d)throw new Error("nonce must be greater than zero");if(this.balance<d)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,a.bigIntToUnpaddedBuffer)(this.nonce),(0,a.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return Buffer.from(n.RLP.encode((0,a.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===d&&this.nonce===d&&this.codeHash.equals(c.KECCAK256_NULL)}}t.Account=h;t.isValidAddress=function(e){try{(0,u.assertIsString)(e)}catch(t){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};t.toChecksumAddress=function(e,t){(0,u.assertIsHexString)(e);const r=(0,l.stripHexPrefix)(e).toLowerCase();let n="";if(void 0!==t){n=(0,a.bufferToBigInt)((0,a.toBuffer)(t)).toString()+"0x"}const o=Buffer.from(n+r,"utf8"),c=(0,s.bytesToHex)((0,i.keccak256)(o));let d="0x";for(let i=0;i<r.length;i++)parseInt(c[i],16)>=8?d+=r[i].toUpperCase():d+=r[i];return d};t.isValidChecksumAddress=function(e,r){return(0,t.isValidAddress)(e)&&(0,t.toChecksumAddress)(e,r)===e};t.generateAddress=function(e,t){return(0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(t),(0,a.bufferToBigInt)(t)===BigInt(0)?Buffer.from((0,i.keccak256)(n.RLP.encode((0,a.bufArrToArr)([e,null])))).slice(-20):Buffer.from((0,i.keccak256)(n.RLP.encode((0,a.bufArrToArr)([e,t])))).slice(-20)};t.generateAddress2=function(e,t,r){if((0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(t),(0,u.assertIsBuffer)(r),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==t.length)throw new Error("Expected salt to be of length 32");const n=(0,i.keccak256)(Buffer.concat([Buffer.from("ff","hex"),e,t,(0,i.keccak256)(r)]));return(0,a.toBuffer)(n).slice(-20)};t.isValidPrivate=function(e){return o.secp256k1.utils.isValidPrivateKey(e)};t.isValidPublic=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,u.assertIsBuffer)(e),64===e.length)try{return o.secp256k1.ProjectivePoint.fromHex(Buffer.concat([Buffer.from([4]),e])),!0}catch(r){return!1}if(!t)return!1;try{return o.secp256k1.ProjectivePoint.fromHex(e),!0}catch(r){return!1}};t.pubToAddress=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if((0,u.assertIsBuffer)(e),t&&64!==e.length&&(e=Buffer.from(o.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return Buffer.from((0,i.keccak256)(e)).slice(-20)},t.publicToAddress=t.pubToAddress;t.privateToPublic=function(e){return(0,u.assertIsBuffer)(e),Buffer.from(o.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};t.privateToAddress=function(e){return(0,t.publicToAddress)((0,t.privateToPublic)(e))};t.importPublic=function(e){return(0,u.assertIsBuffer)(e),64!==e.length&&(e=Buffer.from(o.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};t.zeroAddress=function(){const e=(0,a.zeros)(20);return(0,a.bufferToHex)(e)};function f(e){const[t,r,n,i]=e;return[t,r,0===(0,a.arrToBufArr)(n).length?c.KECCAK256_RLP:n,0===(0,a.arrToBufArr)(i).length?c.KECCAK256_NULL:i]}t.isZeroAddress=function(e){try{(0,u.assertIsString)(e)}catch(r){return!1}return(0,t.zeroAddress)()===e},t.accountBodyFromSlim=f;const p=new Uint8Array(0);t.accountBodyToSlim=function(e){const[t,r,n,i]=e;return[t,r,(0,a.arrToBufArr)(n).equals(c.KECCAK256_RLP)?p:n,(0,a.arrToBufArr)(i).equals(c.KECCAK256_NULL)?p:i]},t.accountBodyToRLP=function(e){const t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?f(e):e;return(0,a.arrToBufArr)(n.RLP.encode(t))}},3281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;const n=r(5904),i=r(6522);class o{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new o((0,i.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new o((0,i.toBuffer)(e))}static fromPublicKey(e){if(!Buffer.isBuffer(e))throw new Error("Public key should be Buffer");const t=(0,n.pubToAddress)(e);return new o(t)}static fromPrivateKey(e){if(!Buffer.isBuffer(e))throw new Error("Private key should be Buffer");const t=(0,n.privateToAddress)(e);return new o(t)}static generate(e,t){if("bigint"!==typeof t)throw new Error("Expected nonce to be a bigint");return new o((0,n.generateAddress)(e.buf,(0,i.bigIntToBuffer)(t)))}static generate2(e,t,r){if(!Buffer.isBuffer(t))throw new Error("Expected salt to be a Buffer");if(!Buffer.isBuffer(r))throw new Error("Expected initCode to be a Buffer");return new o((0,n.generateAddress2)(e.buf,t,r))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(o.zero())}isPrecompileOrSystemAddress(){const e=(0,i.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return Buffer.from(this.buf)}}t.Address=o},8014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncEventEmitter=void 0;const n=r(7465);class i extends n.EventEmitter{emit(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];let[o,s]=n;const a=this;let c=null!==(t=a._events[e])&&void 0!==t?t:[];return void 0===s&&"function"===typeof o&&(s=o,o=void 0),"newListener"!==e&&"removeListener"!==e||(o={event:o,fn:s},s=void 0),c=Array.isArray(c)?c:[c],async function(e,t,r){let n;for await(const o of t)try{o.length<2?o.call(e,r):await new Promise(((t,n)=>{o.call(e,r,(e=>{e?n(e):t()}))}))}catch(i){n=i}if(n)throw n}(a,c.slice(),o).then(s).catch(s),a.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!==typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(i,o){r.removeListener(e,n),t(i,o)}:function(i){r.removeListener(e,n),t(i,n)},r.on(e,n),r}first(e,t){var r;let n=null!==(r=this._events[e])&&void 0!==r?r:[];if("function"!==typeof t)throw new TypeError("listener must be a function");return Array.isArray(n)||(this._events[e]=n=[n]),n.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){var i;let o,s,a=null!==(i=this._events[e])&&void 0!==i?i:[];const c="after"===n?1:0;if("function"!==typeof r)throw new TypeError("listener must be a function");if("function"!==typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),s=a.length,o=a.length;o--;)if(a[o]===t){s=o+c;break}return a.splice(s,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}t.AsyncEventEmitter=i},6522:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intToUnpaddedBuffer=t.bigIntToUnpaddedBuffer=t.bigIntToHex=t.bufArrToArr=t.arrToBufArr=t.validateNoLeadingZeroes=t.baToJSON=t.toUtf8=t.short=t.addHexPrefix=t.toUnsigned=t.fromSigned=t.bufferToInt=t.bigIntToBuffer=t.bufferToBigInt=t.bufferToHex=t.toBuffer=t.unpadHexString=t.unpadArray=t.unpadBuffer=t.setLengthRight=t.setLengthLeft=t.zeros=t.intToBuffer=t.intToHex=void 0;const n=r(8522),i=r(3970);t.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};t.intToBuffer=function(e){const r=(0,t.intToHex)(e);return Buffer.from((0,i.padToEven)(r.slice(2)),"hex")};t.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};const o=function(e,r,n){const i=(0,t.zeros)(r);return n?e.length<r?(e.copy(i),i):e.slice(0,r):e.length<r?(e.copy(i,r-e.length),i):e.slice(-r)};t.setLengthLeft=function(e,t){return(0,n.assertIsBuffer)(e),o(e,t,!1)};t.setLengthRight=function(e,t){return(0,n.assertIsBuffer)(e),o(e,t,!0)};const s=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};t.unpadBuffer=function(e){return(0,n.assertIsBuffer)(e),s(e)};t.unpadArray=function(e){return(0,n.assertIsArray)(e),s(e)};t.unpadHexString=function(e){return(0,n.assertIsHexString)(e),e=(0,i.stripHexPrefix)(e),"0x"+s(e)};t.toBuffer=function(e){if(null===e||void 0===e)return Buffer.allocUnsafe(0);if(Buffer.isBuffer(e))return Buffer.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return Buffer.from(e);if("string"===typeof e){if(!(0,i.isHexString)(e))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(e));return Buffer.from((0,i.padToEven)((0,i.stripHexPrefix)(e)),"hex")}if("number"===typeof e)return(0,t.intToBuffer)(e);if("bigint"===typeof e){if(e<BigInt(0))throw new Error("Cannot convert negative bigint to buffer. Given: ".concat(e));let t=e.toString(16);return t.length%2&&(t="0"+t),Buffer.from(t,"hex")}if(e.toArray)return Buffer.from(e.toArray());if(e.toBuffer)return Buffer.from(e.toBuffer());throw new Error("invalid type")};function a(e){const r=(0,t.bufferToHex)(e);return"0x"===r?BigInt(0):BigInt(r)}function c(e){return(0,t.toBuffer)("0x"+e.toString(16))}t.bufferToHex=function(e){return"0x"+(e=(0,t.toBuffer)(e)).toString("hex")},t.bufferToBigInt=a,t.bigIntToBuffer=c;t.bufferToInt=function(e){const t=Number(a(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};t.fromSigned=function(e){return BigInt.asIntN(256,a(e))};t.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};t.addHexPrefix=function(e){return"string"!==typeof e||(0,i.isHexPrefixed)(e)?e:"0x"+e},t.short=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const r=Buffer.isBuffer(e)?e.toString("hex"):e;return r.length<=t?r:r.slice(0,t)+"\u2026"};t.toUtf8=function(e){if((e=(0,i.stripHexPrefix)(e)).length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return Buffer.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};t.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x".concat(e.toString("hex"));if(e instanceof Array){const r=[];for(let n=0;n<e.length;n++)r.push((0,t.baToJSON)(e[n]));return r}};t.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(void 0!==r&&r.length>0&&0===r[0])throw new Error("".concat(t," cannot have leading zeroes, received: ").concat(r.toString("hex")))},t.arrToBufArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Buffer.from(t)},t.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(null!==t&&void 0!==t?t:[])};t.bigIntToHex=e=>"0x"+e.toString(16),t.bigIntToUnpaddedBuffer=function(e){return(0,t.unpadBuffer)(c(e))},t.intToUnpaddedBuffer=function(e){return(0,t.unpadBuffer)((0,t.intToBuffer)(e))}},5106:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_WITHDRAWALS_PER_PAYLOAD=t.RLP_EMPTY_STRING=t.KECCAK256_RLP=t.KECCAK256_RLP_S=t.KECCAK256_RLP_ARRAY=t.KECCAK256_RLP_ARRAY_S=t.KECCAK256_NULL=t.KECCAK256_NULL_S=t.TWO_POW256=t.SECP256K1_ORDER_DIV_2=t.SECP256K1_ORDER=t.MAX_INTEGER_BIGINT=t.MAX_INTEGER=t.MAX_UINT64=void 0;const n=r(9778),i=r(13);t.MAX_UINT64=BigInt("0xffffffffffffffff"),t.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),t.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),t.SECP256K1_ORDER=i.secp256k1.CURVE.n,t.SECP256K1_ORDER_DIV_2=i.secp256k1.CURVE.n/BigInt(2),t.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.KECCAK256_NULL=n.Buffer.from(t.KECCAK256_NULL_S,"hex"),t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.KECCAK256_RLP_ARRAY=n.Buffer.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.KECCAK256_RLP=n.Buffer.from(t.KECCAK256_RLP_S,"hex"),t.RLP_EMPTY_STRING=n.Buffer.from([128]),t.MAX_WITHDRAWALS_PER_PAYLOAD=16},7066:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compactBytesToNibbles=t.bytesToNibbles=t.nibblesToCompactBytes=t.nibblesToBytes=t.hasTerminator=void 0;t.hasTerminator=e=>e.length>0&&16===e[e.length-1];t.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};t.nibblesToCompactBytes=e=>{let r=0;(0,t.hasTerminator)(e)&&(r=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=r<<5,1===(1&e.length)&&(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,t.nibblesToBytes)(e,n.subarray(1)),n};t.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let n=0;n<e.length;n++){const t=e[n];r[2*n]=t/16,r[2*n+1]=t%16}return r[t-1]=16,r};t.compactBytesToNibbles=e=>{if(0===e.length)return e;let r=(0,t.bytesToNibbles)(e);r[0]<2&&(r=r.subarray(0,r.length-1));const n=2-(1&r[0]);return r.subarray(n)}},8522:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsString=t.assertIsArray=t.assertIsBuffer=t.assertIsHexString=void 0;const n=r(3970);t.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){const t="This method only supports 0x-prefixed hex strings but input was: ".concat(e);throw new Error(t)}};t.assertIsBuffer=function(e){if(!Buffer.isBuffer(e)){const t="This method only supports Buffer but input was: ".concat(e);throw new Error(t)}};t.assertIsArray=function(e){if(!Array.isArray(e)){const t="This method only supports number arrays but input was: ".concat(e);throw new Error(t)}};t.assertIsString=function(e){if("string"!==typeof e){const t="This method only supports strings but input was: ".concat(e);throw new Error(t)}}},8922:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.toAscii=t.stripHexPrefix=t.padToEven=t.isHexString=t.isHexPrefixed=t.getKeys=t.getBinarySize=t.fromUtf8=t.fromAscii=t.arrayContainsArray=void 0,i(r(5106),t),i(r(8751),t),i(r(5904),t),i(r(3281),t),i(r(1277),t),i(r(3687),t),i(r(6522),t),i(r(2235),t),i(r(7066),t),i(r(8014),t);var o=r(3970);Object.defineProperty(t,"arrayContainsArray",{enumerable:!0,get:function(){return o.arrayContainsArray}}),Object.defineProperty(t,"fromAscii",{enumerable:!0,get:function(){return o.fromAscii}}),Object.defineProperty(t,"fromUtf8",{enumerable:!0,get:function(){return o.fromUtf8}}),Object.defineProperty(t,"getBinarySize",{enumerable:!0,get:function(){return o.getBinarySize}}),Object.defineProperty(t,"getKeys",{enumerable:!0,get:function(){return o.getKeys}}),Object.defineProperty(t,"isHexPrefixed",{enumerable:!0,get:function(){return o.isHexPrefixed}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return o.isHexString}}),Object.defineProperty(t,"padToEven",{enumerable:!0,get:function(){return o.padToEven}}),Object.defineProperty(t,"stripHexPrefix",{enumerable:!0,get:function(){return o.stripHexPrefix}}),Object.defineProperty(t,"toAscii",{enumerable:!0,get:function(){return o.toAscii}}),i(r(8725),t),i(r(804),t)},3970:(e,t)=>{"use strict";function r(e){if("string"!==typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return"0"===e[0]&&"x"===e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,t.isHexPrefixed=r;function n(e){let t=e;if("string"!==typeof t)throw new Error("[padToEven] value must be type 'string', received ".concat(typeof t));return t.length%2&&(t="0".concat(t)),t}t.stripHexPrefix=e=>{if("string"!==typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return r(e)?e.slice(2):e},t.padToEven=n,t.getBinarySize=function(e){if("string"!==typeof e)throw new Error("[getBinarySize] method requires input type 'string', received ".concat(typeof e));return Buffer.byteLength(e,"utf8")},t.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof e,"'"));if(!0!==Array.isArray(t))throw new Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof t,"'"));return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},t.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},t.fromUtf8=function(e){const t=Buffer.from(e,"utf8");return"0x".concat(n(t.toString("hex")).replace(/^0+|0+$/g,""))},t.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?"0".concat(n):n}return"0x".concat(t)},t.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof e));if("string"!==typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof e));const n=[];for(let i=0;i<e.length;i++){let o=e[i][t];if(!0!==r||o){if("string"!==typeof o)throw new Error("invalid abi - expected type 'string', received ".concat(typeof o))}else o="";n.push(o)}return n},t.isHexString=function(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!("undefined"!==typeof t&&t>0&&e.length!==2+2*t)}},8725:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Lock=void 0;t.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}},804:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProvider=t.fetchFromProvider=void 0;const n=r(6501);t.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;t.getProvider=e=>{var t;if("string"===typeof e)return e;if(void 0!==(null===e||void 0===e||null===(t=e.connection)||void 0===t?void 0:t.url))return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}},3687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashPersonalMessage=t.isValidSignature=t.fromRpcSig=t.toCompactSig=t.toRpcSig=t.ecrecover=t.ecsign=void 0;const n=r(7285),i=r(13),o=r(6522),s=r(5106),a=r(8522);function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:void 0===t?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function u(e){return e===BigInt(0)||e===BigInt(1)}t.ecsign=function(e,t,r){const n=i.secp256k1.sign(e,t),o=n.toCompactRawBytes();return{r:Buffer.from(o.slice(0,32)),s:Buffer.from(o.slice(32,64)),v:void 0===r?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*BigInt(2)}};t.ecrecover=function(e,t,r,n,s){const a=Buffer.concat([(0,o.setLengthLeft)(r,32),(0,o.setLengthLeft)(n,32)],64),l=c(t,s);if(!u(l))throw new Error("Invalid signature v value");const d=i.secp256k1.Signature.fromCompact(a).addRecoveryBit(Number(l)).recoverPublicKey(e);return Buffer.from(d.toRawBytes(!1).slice(1))};t.toRpcSig=function(e,t,r,n){if(!u(c(e,n)))throw new Error("Invalid signature v value");return(0,o.bufferToHex)(Buffer.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(r,32),(0,o.toBuffer)(e)]))};t.toCompactSig=function(e,t,r,n){if(!u(c(e,n)))throw new Error("Invalid signature v value");let i=r;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(i=Buffer.from(r),i[0]|=128),(0,o.bufferToHex)(Buffer.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(i,32)]))};t.fromRpcSig=function(e){const t=(0,o.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,o.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,o.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return i<27&&(i+=BigInt(27)),{v:i,r:r,s:n}};t.isValidSignature=function(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0;if(32!==t.length||32!==r.length)return!1;if(!u(c(e,i)))return!1;const a=(0,o.bufferToBigInt)(t),l=(0,o.bufferToBigInt)(r);return!(a===BigInt(0)||a>=s.SECP256K1_ORDER||l===BigInt(0)||l>=s.SECP256K1_ORDER)&&!(n&&l>=s.SECP256K1_ORDER_DIV_2)};t.hashPersonalMessage=function(e){(0,a.assertIsBuffer)(e);const t=Buffer.from("\x19Ethereum Signed Message:\n".concat(e.length),"utf-8");return Buffer.from((0,n.keccak256)(Buffer.concat([t,e])))}},2235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toType=t.TypeOutput=void 0;const n=r(6522),i=r(3970);var o;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(o=t.TypeOutput||(t.TypeOutput={})),t.toType=function(e,t){if(null===e)return null;if(void 0===e)return;if("string"===typeof e&&!(0,i.isHexString)(e))throw new Error("A string must be provided with a 0x-prefix, given: ".concat(e));if("number"===typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case o.Buffer:return r;case o.BigInt:return(0,n.bufferToBigInt)(r);case o.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case o.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}},8751:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GWEI_TO_WEI=void 0,t.GWEI_TO_WEI=BigInt(1e9)},1277:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Withdrawal=void 0;const n=r(3281),i=r(6522),o=r(2235);class s{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:a}=e,c=(0,o.toType)(t,o.TypeOutput.BigInt),u=(0,o.toType)(r,o.TypeOutput.BigInt),l=new n.Address((0,o.toType)(i,o.TypeOutput.Buffer)),d=(0,o.toType)(a,o.TypeOutput.BigInt);return new s(c,u,l,d)}static fromValuesArray(e){if(4!==e.length)throw Error("Invalid withdrawalArray length expected=4 actual=".concat(e.length));const[t,r,n,i]=e;return s.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBufferArray(e){const{index:t,validatorIndex:r,address:i,amount:s}=e,a=(0,o.toType)(t,o.TypeOutput.BigInt)===BigInt(0)?Buffer.alloc(0):(0,o.toType)(t,o.TypeOutput.Buffer),c=(0,o.toType)(r,o.TypeOutput.BigInt)===BigInt(0)?Buffer.alloc(0):(0,o.toType)(r,o.TypeOutput.Buffer);let u;u=i instanceof n.Address?i.buf:(0,o.toType)(i,o.TypeOutput.Buffer);return[a,c,u,(0,o.toType)(s,o.TypeOutput.BigInt)===BigInt(0)?Buffer.alloc(0):(0,o.toType)(s,o.TypeOutput.Buffer)]}raw(){return s.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,i.bigIntToHex)(this.index),validatorIndex:(0,i.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,i.bigIntToHex)(this.amount)}}}t.Withdrawal=s},9061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSingle=t.decode=t.encodePacked=t.encodeSingle=t.encode=void 0;const n=r(3030),i=r(7304),o=r(1527);t.encode=(e,t,r,n)=>{try{return(0,o.pack)({types:e,values:t,packed:r,tight:n})}catch(s){if(s instanceof i.ParserError)throw new i.ParserError("Unable to encode value: ".concat(s.message),s);throw new i.ParserError("An unexpected error occurred: ".concat((0,i.getErrorMessage)(s)),s)}};t.encodeSingle=(e,r)=>(0,t.encode)([e],[r]);t.encodePacked=(e,r,n)=>(0,t.encode)(e,r,!0,n);t.decode=(e,t)=>{const r=(0,n.createBytes)(t);try{return(0,o.unpack)(e,r)}catch(s){if(s instanceof i.ParserError)throw new i.ParserError("Unable to decode value: ".concat(s.message),s);throw new i.ParserError("An unexpected error occurred: ".concat((0,i.getErrorMessage)(s)),s)}};t.decodeSingle=(e,r)=>{const o=(0,t.decode)([e],r);return(0,n.assert)(1===o.length,new i.ParserError("Decoded value array has unexpected length.")),o[0]}},7304:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParserError=t.getErrorStack=t.getErrorMessage=void 0;const n=r(3030);t.getErrorMessage=e=>"string"===typeof e?e:e instanceof Error||(0,n.isObject)(e)&&(0,n.hasProperty)(e,"message")&&"string"===typeof e.message?e.message:"Unknown error.";t.getErrorStack=e=>{if(e instanceof Error)return e.stack};class i extends Error{constructor(e,r){super(e),this.name="ParserError";const n=(0,t.getErrorStack)(r);n&&(this.stack=n)}}t.ParserError=i},5698:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9061),t),i(r(7304),t),i(r(7353),t)},1723:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iterate=void 0;const n=r(3030);t.iterate=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return function*(){for(let r=0;r<e.length;r+=t){const i=e=>{(0,n.assert)(e>=0,"Cannot skip a negative number of bytes."),(0,n.assert)(e%t===0,"Length must be a multiple of the size."),r+=e},o=e.subarray(r);yield{skip:i,value:o}}return{skip:()=>{},value:new Uint8Array}}()}},1527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unpack=t.pack=t.isDynamicParser=t.getParser=void 0;const n=r(3030),i=r(7304),o=r(1723),s=r(5716),a=r(9811);t.getParser=e=>{const t={address:s.address,array:s.array,bool:s.bool,bytes:s.bytes,fixedBytes:s.fixedBytes,function:s.fn,number:s.number,string:s.string,tuple:s.tuple},r=t[e];if(r)return r;const n=Object.values(t).find((t=>t.isType(e)));if(n)return n;throw new i.ParserError('The type "'.concat(e,'" is not supported.'))};t.isDynamicParser=(e,t)=>{const{isDynamic:r}=e;return"function"===typeof r?r(t):r};t.pack=e=>{let{types:r,values:o,packed:s=!1,tight:c=!1,arrayPacked:u=!1,byteArray:l=new Uint8Array}=e;(0,n.assert)(r.length===o.length,new i.ParserError("The number of types (".concat(r.length,") does not match the number of values (").concat(o.length,").")));const{staticBuffer:d,dynamicBuffer:h,pointers:f}=r.reduce(((e,r,i)=>{let{staticBuffer:a,dynamicBuffer:l,pointers:d}=e;const h=(0,t.getParser)(r),f=o[i];if(s||u||!(0,t.isDynamicParser)(h,r))return{staticBuffer:h.encode({buffer:a,value:f,type:r,packed:s,tight:c}),dynamicBuffer:l,pointers:d};return{staticBuffer:(0,n.concatBytes)([a,new Uint8Array(32)]),dynamicBuffer:h.encode({buffer:l,value:f,type:r,packed:s,tight:c}),pointers:[...d,{position:a.length,pointer:l.length}]}}),{staticBuffer:new Uint8Array,dynamicBuffer:new Uint8Array,pointers:[]});(0,n.assert)(!s&&!u||0===h.length,new i.ParserError("Invalid pack state."));const p=d.length,g=f.reduce(((e,t)=>{let{pointer:r,position:i}=t;const o=(0,a.padStart)((0,n.numberToBytes)(p+r));return(0,a.set)(e,o,i)}),d);return(0,n.concatBytes)([l,g,h])};t.unpack=(e,r)=>{const s=(0,o.iterate)(r);return e.map((e=>{const{value:{value:o,skip:a},done:c}=s.next();(0,n.assert)(!c,new i.ParserError('The encoded value is invalid for the provided types. Reached end of buffer while attempting to parse "'.concat(e,'".')));const u=(0,t.getParser)(e);if((0,t.isDynamicParser)(u,e)){const t=(0,n.bytesToNumber)(o.subarray(0,32)),i=r.subarray(t);return u.decode({type:e,value:i,skip:a})}return u.decode({type:e,value:o,skip:a})}))}},7668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.address=t.getAddress=void 0;const n=r(3030),i=r(7304),o=r(9811);t.getAddress=e=>{const t=(0,n.createBytes)(e);return(0,n.assert)(t.length<=20,new i.ParserError("Invalid address value. Expected address to be 20 bytes long, but received ".concat(t.length," bytes."))),(0,o.padStart)(t,20)},t.address={isDynamic:!1,isType:e=>"address"===e,getByteLength:()=>32,encode(e){let{buffer:r,value:i,packed:s}=e;const a=(0,t.getAddress)(i);if(s)return(0,n.concatBytes)([r,a]);const c=(0,o.padStart)(a);return(0,n.concatBytes)([r,c])},decode(e){let{value:t}=e;return(0,n.add0x)((0,n.bytesToHex)(t.slice(12,32)))}}},3351:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.array=t.getTupleType=t.getArrayType=t.isArrayType=void 0;const n=r(3030),i=r(7304),o=r(1527),s=r(9811),a=r(6201),c=r(621),u=/^(?<type>.*)\[(?<length>\d*?)\]$/u;t.isArrayType=e=>u.test(e);t.getArrayType=e=>{var t;const r=e.match(u);return(0,n.assert)(null===r||void 0===r||null===(t=r.groups)||void 0===t?void 0:t.type,new i.ParserError('Invalid array type. Expected an array type, but received "'.concat(e,'".'))),[r.groups.type,r.groups.length?parseInt(r.groups.length,10):void 0]};t.getTupleType=(e,t)=>"(".concat(new Array(t).fill(e).join(","),")"),t.array={isDynamic(e){const[r,n]=(0,t.getArrayType)(e);return void 0===n||(0,o.isDynamicParser)((0,o.getParser)(r),r)},isType:e=>(0,t.isArrayType)(e),getByteLength(e){(0,n.assert)((0,t.isArrayType)(e),new i.ParserError('Expected an array type, but received "'.concat(e,'".')));const[r,s]=(0,t.getArrayType)(e);return(0,o.isDynamicParser)(this,e)||void 0===s?32:c.tuple.getByteLength((0,t.getTupleType)(r,s))},encode(e){let{type:r,buffer:u,value:l,packed:d,tight:h}=e;const[f,p]=(0,t.getArrayType)(r);if((0,n.assert)(!d||!(0,t.isArrayType)(f),new i.ParserError("Cannot pack nested arrays.")),d&&(0,o.isDynamicParser)((0,o.getParser)(f),f))return(0,o.pack)({types:new Array(l.length).fill(f),values:l,byteArray:u,packed:d,arrayPacked:!0,tight:h});if(p)return(0,n.assert)(p===l.length,new i.ParserError("Array length does not match type length. Expected a length of ".concat(p,", but received ").concat(l.length,"."))),c.tuple.encode({type:(0,t.getTupleType)(f,p),buffer:u,value:l,packed:a.fixedBytes.isType(f)&&h,tight:h});if(d)return(0,o.pack)({types:new Array(l.length).fill(f),values:l,byteArray:u,packed:a.fixedBytes.isType(f)&&h,arrayPacked:!0,tight:h});const g=(0,s.padStart)((0,n.numberToBytes)(l.length));return(0,o.pack)({types:new Array(l.length).fill(f),values:l,byteArray:(0,n.concatBytes)([u,g]),packed:d,tight:h})},decode(e){let{type:r,value:s,...a}=e;const[u,l]=(0,t.getArrayType)(r);if(l){const e=c.tuple.decode({type:(0,t.getTupleType)(u,l),value:s,...a});return(0,n.assert)(e.length===l,new i.ParserError("Array length does not match type length. Expected a length of ".concat(l,", but received ").concat(e.length,"."))),e}const d=(0,n.bytesToNumber)(s.subarray(0,32));return(0,o.unpack)(new Array(d).fill(u),s.subarray(32))}}},5272:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bool=t.getBooleanValue=void 0;const n=r(3030),i=r(8680),o=r(7304),s=r(3660),a=(0,i.coerce)((0,i.boolean)(),(0,i.union)([(0,i.literal)("true"),(0,i.literal)("false")]),(e=>"true"===e));t.getBooleanValue=e=>{try{return(0,i.create)(e,a)?BigInt(1):BigInt(0)}catch{throw new o.ParserError('Invalid boolean value. Expected a boolean literal, or the string "true" or "false", but received "'.concat(e,'".'))}},t.bool={isDynamic:!1,isType:e=>"bool"===e,getByteLength:()=>32,encode(e){let{buffer:r,value:i,packed:o,tight:a}=e;const c=(0,t.getBooleanValue)(i);return o?(0,n.concatBytes)([r,(0,n.bigIntToBytes)(c)]):s.number.encode({type:"uint256",buffer:r,value:c,packed:o,tight:a})},decode:e=>s.number.decode({...e,type:"uint256"})===BigInt(1)}},731:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=void 0;const n=r(3030),i=r(9811);t.bytes={isDynamic:!0,isType:e=>"bytes"===e,getByteLength:()=>32,encode(e){let{buffer:t,value:r,packed:o}=e;const s=(0,n.createBytes)(r);if(o)return(0,n.concatBytes)([t,s]);const a=32*Math.ceil(s.byteLength/32);return(0,n.concatBytes)([t,(0,i.padStart)((0,n.numberToBytes)(s.byteLength)),(0,i.padEnd)(s,a)])},decode(e){let{value:t}=e;const r=t.subarray(0,32),i=(0,n.bytesToNumber)(r);return t.slice(32,32+i)}}},6201:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixedBytes=t.getByteLength=void 0;const n=r(3030),i=r(7304),o=r(9811),s=/^bytes([0-9]{1,2})$/u;t.getByteLength=e=>{var t;const r=null===(t=e.match(s))||void 0===t?void 0:t[1];(0,n.assert)(r,'Invalid byte length. Expected a number between 1 and 32, but received "'.concat(e,'".'));const o=Number(r);return(0,n.assert)(o>0&&o<=32,new i.ParserError('Invalid byte length. Expected a number between 1 and 32, but received "'.concat(e,'".'))),o},t.fixedBytes={isDynamic:!1,isType:e=>s.test(e),getByteLength:()=>32,encode(e){let{type:r,buffer:s,value:a,packed:c}=e;const u=(0,t.getByteLength)(r),l=(0,n.createBytes)(a);return(0,n.assert)(l.length<=u,new i.ParserError("Expected a value of length ".concat(u,", but received a value of length ").concat(l.length,"."))),c?(0,n.concatBytes)([s,(0,o.padEnd)(l,u)]):(0,n.concatBytes)([s,(0,o.padEnd)(l)])},decode(e){let{type:r,value:n}=e;const i=(0,t.getByteLength)(r);return n.slice(0,i)}}},893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fn=t.getFunction=void 0;const n=r(3030),i=r(8680),o=r(7304),s=r(6201),a=(0,i.coerce)((0,i.object)({address:n.StrictHexStruct,selector:n.StrictHexStruct}),(0,i.union)([n.StrictHexStruct,(0,i.instance)(Uint8Array)]),(e=>{const t=(0,n.createBytes)(e);return(0,n.assert)(24===t.length,new o.ParserError("Invalid Solidity function. Expected function to be 24 bytes long, but received ".concat(t.length," bytes."))),{address:(0,n.bytesToHex)(t.subarray(0,20)),selector:(0,n.bytesToHex)(t.subarray(20,24))}}));t.getFunction=e=>{const t=(0,i.create)(e,a);return(0,n.concatBytes)([(0,n.hexToBytes)(t.address),(0,n.hexToBytes)(t.selector)])},t.fn={isDynamic:!1,isType:e=>"function"===e,getByteLength:()=>32,encode(e){let{buffer:r,value:n,packed:i,tight:o}=e;const a=(0,t.getFunction)(n);return s.fixedBytes.encode({type:"bytes24",buffer:r,value:a,packed:i,tight:o})},decode(e){let{value:t}=e;return{address:(0,n.bytesToHex)(t.slice(0,20)),selector:(0,n.bytesToHex)(t.slice(20,24))}}}},5716:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(7668),t),i(r(3351),t),i(r(5272),t),i(r(731),t),i(r(6201),t),i(r(893),t),i(r(3660),t),i(r(9462),t),i(r(3489),t),i(r(621),t)},3660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.number=t.getBigInt=t.assertNumberLength=t.getLength=t.isSigned=void 0;const n=r(3030),i=r(7304),o=r(9811),s=/^u?int(?<length>[0-9]*)?$/u;t.isSigned=e=>!e.startsWith("u");t.getLength=e=>{var t;if("int"===e||"uint"===e)return 256;const r=e.match(s);(0,n.assert)(null===r||void 0===r||null===(t=r.groups)||void 0===t?void 0:t.length,new i.ParserError('Invalid number type. Expected a number type, but received "'.concat(e,'".')));const o=parseInt(r.groups.length,10);return(0,n.assert)(o>=8&&o<=256,new i.ParserError('Invalid number length. Expected a number between 8 and 256, but received "'.concat(e,'".'))),(0,n.assert)(o%8===0,new i.ParserError('Invalid number length. Expected a multiple of 8, but received "'.concat(e,'".'))),o};t.assertNumberLength=(e,r)=>{const o=(0,t.getLength)(r),s=BigInt(2)**BigInt(o-((0,t.isSigned)(r)?1:0))-BigInt(1);(0,t.isSigned)(r)?(0,n.assert)(e>=-(s+BigInt(1))&&e<=s,new i.ParserError('Number "'.concat(e,'" is out of range for type "').concat(r,'".'))):(0,n.assert)(e<=s,new i.ParserError('Number "'.concat(e,'" is out of range for type "').concat(r,'".')))};t.getBigInt=e=>{try{return(0,n.createBigInt)(e)}catch{throw new i.ParserError('Invalid number. Expected a valid number value, but received "'.concat(e,'".'))}},t.number={isDynamic:!1,isType:e=>s.test(e),getByteLength:()=>32,encode(e){let{type:r,buffer:i,value:s,packed:a}=e;const c=(0,t.getBigInt)(s);if((0,t.assertNumberLength)(c,r),(0,t.isSigned)(r)){if(a){const e=(0,t.getLength)(r)/8;return(0,n.concatBytes)([i,(0,n.signedBigIntToBytes)(c,e)])}return(0,n.concatBytes)([i,(0,o.padStart)((0,n.signedBigIntToBytes)(c,32))])}if(a){const e=(0,t.getLength)(r)/8;return(0,n.concatBytes)([i,(0,o.padStart)((0,n.bigIntToBytes)(c),e)])}return(0,n.concatBytes)([i,(0,o.padStart)((0,n.bigIntToBytes)(c))])},decode(e){let{type:r,value:i}=e;const o=i.subarray(0,32);if((0,t.isSigned)(r)){const e=(0,n.bytesToSignedBigInt)(o);return(0,t.assertNumberLength)(e,r),e}const s=(0,n.bytesToBigInt)(o);return(0,t.assertNumberLength)(s,r),s}}},9462:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.string=void 0;const n=r(3030),i=r(731);t.string={isDynamic:!0,isType:e=>"string"===e,getByteLength:()=>32,encode(e){let{buffer:t,value:r,packed:o,tight:s}=e;return i.bytes.encode({type:"bytes",buffer:t,value:(0,n.stringToBytes)(r),packed:o,tight:s})},decode:e=>(0,n.bytesToString)(i.bytes.decode(e))}},621:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tuple=t.getTupleElements=void 0;const n=r(3030),i=r(7304),o=r(1527),s=/^\((.+)\)$/u;t.getTupleElements=e=>{(0,n.assert)(e.startsWith("(")&&e.endsWith(")"),new i.ParserError('Invalid tuple type. Expected tuple type, but received "'.concat(e,'".')));const t=[];let r="",o=0;for(let n=1;n<e.length-1;n++){const i=e[n];","===i&&0===o?(t.push(r.trim()),r=""):(r+=i,"("===i?o+=1:")"===i&&(o-=1))}return r.trim()&&t.push(r.trim()),t},t.tuple={isDynamic:e=>(0,t.getTupleElements)(e).some((e=>{const t=(0,o.getParser)(e);return(0,o.isDynamicParser)(t,e)})),isType:e=>(e=>s.test(e))(e),getByteLength(e){if((0,o.isDynamicParser)(this,e))return 32;return(0,t.getTupleElements)(e).reduce(((e,t)=>e+(0,o.getParser)(t).getByteLength(t)),0)},encode(e){let{type:r,buffer:n,value:i,packed:s,tight:a}=e;const c=(0,t.getTupleElements)(r);return(0,o.pack)({types:c,values:i,byteArray:n,packed:s,tight:a})},decode(e){let{type:r,value:n,skip:i}=e;const s=(0,t.getTupleElements)(r);return i(this.getByteLength(r)-32),(0,o.unpack)(s,n)}}},5024:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7353:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(5024),t)},6838:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.padEnd=t.padStart=t.set=void 0;const n=r(3030);t.set=(e,t,r)=>(0,n.concatBytes)([e.subarray(0,r),t,e.subarray(r+t.length)]);t.padStart=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([r,e])};t.padEnd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;const r=new Uint8Array(Math.max(t-e.length,0)).fill(0);return(0,n.concatBytes)([e,r])}},9811:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6838),t)},7809:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getEncryptionPublicKey=t.decryptSafely=t.decrypt=t.encryptSafely=t.encrypt=void 0;const s=o(r(2826)),a=o(r(3528)),c=r(6679);function u(e){let{publicKey:t,data:r,version:n}=e;if((0,c.isNullish)(t))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("x25519-xsalsa20-poly1305"===n){if("string"!==typeof r)throw new Error("Message data must be given as a string");const e=s.box.keyPair();let n;try{n=a.decodeBase64(t)}catch(i){throw new Error("Bad public key")}const o=a.decodeUTF8(r),c=s.randomBytes(s.box.nonceLength),u=s.box(o,c,n,e.secretKey);return{version:"x25519-xsalsa20-poly1305",nonce:a.encodeBase64(c),ephemPublicKey:a.encodeBase64(e.publicKey),ciphertext:a.encodeBase64(u)}}throw new Error("Encryption type/version not supported")}function l(e){let{encryptedData:t,privateKey:r}=e;if((0,c.isNullish)(t))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(r))throw new Error("Missing privateKey parameter");if("x25519-xsalsa20-poly1305"===t.version){const e=d(r),i=s.box.keyPair.fromSecretKey(e).secretKey,o=a.decodeBase64(t.nonce),c=a.decodeBase64(t.ciphertext),u=a.decodeBase64(t.ephemPublicKey),l=s.box.open(c,o,u,i);try{if(!l)throw new Error;const e=a.encodeUTF8(l);if(!e)throw new Error;return e}catch(n){if(n&&"string"===typeof n.message&&n.message.length)throw new Error("Decryption failed: ".concat(n.message));throw new Error("Decryption failed.")}}throw new Error("Encryption type/version not supported.")}function d(e){const t=Buffer.from(e,"hex").toString("base64");return a.decodeBase64(t)}t.encrypt=u,t.encryptSafely=function(e){let{publicKey:t,data:r,version:n}=e;if((0,c.isNullish)(t))throw new Error("Missing publicKey parameter");if((0,c.isNullish)(r))throw new Error("Missing data parameter");if((0,c.isNullish)(n))throw new Error("Missing version parameter");if("object"===typeof r&&r&&"toJSON"in r)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");const i={data:r,padding:""},o=Buffer.byteLength(JSON.stringify(i),"utf-8")%2048;let s=0;return o>0&&(s=2048-o-16),i.padding="0".repeat(s),u({publicKey:t,data:JSON.stringify(i),version:n})},t.decrypt=l,t.decryptSafely=function(e){let{encryptedData:t,privateKey:r}=e;if((0,c.isNullish)(t))throw new Error("Missing encryptedData parameter");if((0,c.isNullish)(r))throw new Error("Missing privateKey parameter");return JSON.parse(l({encryptedData:t,privateKey:r})).data},t.getEncryptionPublicKey=function(e){const t=d(e),r=s.box.keyPair.fromSecretKey(t).publicKey;return a.encodeBase64(r)}},1766:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=t.concatSig=void 0,i(r(9747),t),i(r(3139),t),i(r(7809),t);var o=r(6679);Object.defineProperty(t,"concatSig",{enumerable:!0,get:function(){return o.concatSig}}),Object.defineProperty(t,"normalize",{enumerable:!0,get:function(){return o.normalize}})},9747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractPublicKey=t.recoverPersonalSignature=t.personalSign=void 0;const n=r(8922),i=r(6679);function o(e,t){const r=(0,n.hashPersonalMessage)((0,i.legacyToBuffer)(e));return(0,i.recoverPublicKey)(r,t)}t.personalSign=function(e){let{privateKey:t,data:r}=e;if((0,i.isNullish)(r))throw new Error("Missing data parameter");if((0,i.isNullish)(t))throw new Error("Missing privateKey parameter");const o=(0,i.legacyToBuffer)(r),s=(0,n.hashPersonalMessage)(o),a=(0,n.ecsign)(s,t);return(0,i.concatSig)((0,n.toBuffer)(a.v),a.r,a.s)},t.recoverPersonalSignature=function(e){let{data:t,signature:r}=e;if((0,i.isNullish)(t))throw new Error("Missing data parameter");if((0,i.isNullish)(r))throw new Error("Missing signature parameter");const s=o(t,r),a=(0,n.publicToAddress)(s);return(0,n.bufferToHex)(a)},t.extractPublicKey=function(e){let{data:t,signature:r}=e;if((0,i.isNullish)(t))throw new Error("Missing data parameter");if((0,i.isNullish)(r))throw new Error("Missing signature parameter");const n=o(t,r);return"0x".concat(n.toString("hex"))}},3139:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recoverTypedSignature=t.signTypedData=t.typedSignatureHash=t.TypedDataUtils=t.TYPED_MESSAGE_SCHEMA=t.SignTypedDataVersion=void 0;const n=r(8922),i=r(5698),o=r(5716),s=r(9811),a=r(3030),c=r(7285),u=r(6679);var l;function d(e,t){if(!Object.keys(l).includes(e))throw new Error("Invalid version: '".concat(e,"'"));if(t&&!t.includes(e))throw new Error("SignTypedDataVersion not allowed: '".concat(e,"'. Allowed versions are: ").concat(t.join(", ")))}function h(e,t){(0,a.assert)(null!==t,'Unable to encode value: Invalid number. Expected a valid number value, but received "'.concat(t,'".'));const r=BigInt(t),n=(0,o.getLength)(e),i=BigInt(2)**BigInt(n)-BigInt(1);return(0,a.assert)(r>=-i&&r<=i,'Unable to encode value: Number "'.concat(t,'" is out of range for type "').concat(e,'".')),r}function f(e){let t=BigInt(0);for(let r=0;r<e.length;r++){const n=BigInt(e.charCodeAt(r)-48);t*=BigInt(10),t+=n>=49?n-BigInt(49)+BigInt(10):n>=17?n-BigInt(17)+BigInt(10):n}return(0,s.padStart)((0,a.bigIntToBytes)(t),20)}function p(e,t,r,o,u){if(d(u,[l.V3,l.V4]),void 0!==e[r])return["bytes32",u===l.V4&&null==o?"0x0000000000000000000000000000000000000000000000000000000000000000":(0,n.arrToBufArr)((0,c.keccak256)(g(r,o,e,u)))];if("function"===r)throw new Error('Unsupported or invalid type: "function"');if(void 0===o)throw new Error("missing value for field ".concat(t," of type ").concat(r));if("address"===r){if("number"===typeof o)return["address",(0,s.padStart)((0,a.numberToBytes)(o),20)];if((0,a.isStrictHexString)(o))return["address",(0,a.add0x)(o)];if("string"===typeof o)return["address",f(o).subarray(0,20)]}if("bool"===r)return["bool",Boolean(o)];if("bytes"===r)return"number"===typeof o?o=(0,a.numberToBytes)(o):(0,a.isStrictHexString)(o)||"0x"===o?o=(0,a.hexToBytes)(o):"string"===typeof o&&(o=(0,a.stringToBytes)(o)),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(o))];if(r.startsWith("bytes")&&"bytes"!==r&&!r.includes("["))return"number"===typeof o?o<0?["bytes32",new Uint8Array(32)]:["bytes32",(0,a.bigIntToBytes)(BigInt(o))]:(0,a.isStrictHexString)(o)?["bytes32",(0,a.hexToBytes)(o)]:["bytes32",o];if(r.startsWith("int")&&!r.includes("[")){const e=h(r,o);return e>=BigInt(0)?["uint256",e]:["int256",e]}if("string"===r)return o="number"===typeof o?(0,a.numberToBytes)(o):(0,a.stringToBytes)(null!==o&&void 0!==o?o:""),["bytes32",(0,n.arrToBufArr)((0,c.keccak256)(o))];if(r.endsWith("]")){if(u===l.V3)throw new Error("Arrays are unimplemented in encodeData; use V4 extension");const s=r.slice(0,r.lastIndexOf("[")),a=o.map((r=>p(e,t,s,r,u)));return["bytes32",(0,n.arrToBufArr)((0,c.keccak256)((0,i.encode)(a.map((e=>{let[t]=e;return t})),a.map((e=>{let[,t]=e;return t})))))]}return[r,o]}function g(e,t,r,o){d(o,[l.V3,l.V4]);const s=["bytes32"],a=[b(e,r)];for(const n of r[e]){if(o===l.V3&&void 0===t[n.name])continue;const[e,i]=p(r,n.name,n.type,t[n.name],o);s.push(e),a.push(i)}return(0,n.arrToBufArr)((0,i.encode)(s,a))}function m(e,t){let r="";const n=y(e,t);n.delete(e);const i=[e,...Array.from(n).sort()];for(const o of i){if(!t[o])throw new Error("No type definition specified: ".concat(o));r+="".concat(o,"(").concat(t[o].map((e=>{let{name:t,type:r}=e;return"".concat(r," ").concat(t)})).join(","),")")}return r}function y(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if("string"!==typeof e)throw new Error("Invalid findTypeDependencies input ".concat(JSON.stringify(e)));const n=e.match(/^\w*/u);if([e]=n,r.has(e)||void 0===t[e])return r;r.add(e);for(const i of t[e])y(i.type,t,r);return r}function v(e,t,r,i){d(i,[l.V3,l.V4]);const o=g(e,t,r,i),s=(0,c.keccak256)(o);return(0,n.arrToBufArr)(s)}function b(e,t){const r=(0,a.stringToBytes)(m(e,t));return(0,n.arrToBufArr)((0,c.keccak256)(r))}function w(e){const r={};for(const n in t.TYPED_MESSAGE_SCHEMA.properties)e[n]&&(r[n]=e[n]);return"types"in r&&(r.types=Object.assign({EIP712Domain:[]},r.types)),r}function _(e,t){d(t,[l.V3,l.V4]);const r=w(e),{domain:n}=r;return v("EIP712Domain",n,{EIP712Domain:r.types.EIP712Domain},t)}function E(e,t){if((0,o.isArrayType)(e)&&Array.isArray(t)){const[r]=(0,o.getArrayType)(e);return t.map((e=>E(r,e)))}if("address"===e){if("number"===typeof t)return(0,s.padStart)((0,a.numberToBytes)(t),20);if((0,a.isStrictHexString)(t))return(0,s.padStart)((0,a.hexToBytes)(t).subarray(0,20),20);if(t instanceof Uint8Array)return(0,s.padStart)(t.subarray(0,20),20)}if("bool"===e)return Boolean(t);if(e.startsWith("bytes")&&"bytes"!==e){const r=(0,o.getByteLength)(e);if("number"===typeof t)return t<0?new Uint8Array:(0,a.numberToBytes)(t).subarray(0,r);if((0,a.isStrictHexString)(t))return(0,a.hexToBytes)(t).subarray(0,r);if(t instanceof Uint8Array)return t.subarray(0,r)}if(e.startsWith("uint")&&"number"===typeof t)return Math.abs(t);if(e.startsWith("int")&&"number"===typeof t){const r=(0,o.getLength)(e);return BigInt.asIntN(r,BigInt(t))}return t}function A(e,t){return t.map((t=>{if("string"===typeof t||"number"===typeof t||"bigint"===typeof t){const r=h(e,t);if(r>=BigInt(0))return(0,s.padStart)((0,a.bigIntToBytes)(r),32);const n=(0,o.getLength)(e),i=BigInt.asIntN(n,r);return(0,a.signedBigIntToBytes)(i,32)}return t}))}function S(e){const t=new Error("Expect argument to be non-empty array");if("object"!==typeof e||!("length"in e)||!e.length)throw t;const r=e.map((e=>{let{name:t,type:r,value:n}=e;if("address[]"===r)return{name:t,type:"bytes32[]",value:(i=n,i.map((e=>"number"===typeof e?(0,s.padStart)((0,a.numberToBytes)(e),32):(0,a.isStrictHexString)(e)?(0,s.padStart)((0,a.hexToBytes)(e).subarray(0,32),32):e instanceof Uint8Array?(0,s.padStart)(e.subarray(0,32),32):e)))};var i;if(r.startsWith("int")&&(0,o.isArrayType)(r)){const[e,i]=(0,o.getArrayType)(r);return{name:t,type:"bytes32[".concat(null!==i&&void 0!==i?i:"","]"),value:A(e,n)}}return{name:t,type:r,value:E(r,n)}})),l=r.map((e=>"bytes"!==e.type?e.value:(0,u.legacyToBuffer)(e.value))),d=r.map((e=>{if("function"===e.type)throw new Error('Unsupported or invalid type: "function"');return e.type})),h=e.map((e=>{if(!e.name)throw t;return"".concat(e.type," ").concat(e.name)}));return(0,n.arrToBufArr)((0,c.keccak256)((0,i.encodePacked)(["bytes32","bytes32"],[(0,c.keccak256)((0,i.encodePacked)(["string[]"],[h],!0)),(0,c.keccak256)((0,i.encodePacked)(d,l,!0))])))}!function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(l=t.SignTypedDataVersion||(t.SignTypedDataVersion={})),t.TYPED_MESSAGE_SCHEMA={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},t.TypedDataUtils={encodeData:g,encodeType:m,findTypeDependencies:y,hashStruct:v,hashType:b,sanitizeData:w,eip712Hash:function(e,t){d(t,[l.V3,l.V4]);const r=w(e),i=[(0,a.hexToBytes)("1901")];return i.push(_(e,t)),"EIP712Domain"!==r.primaryType&&i.push(v(r.primaryType,r.message,r.types,t)),(0,n.arrToBufArr)((0,c.keccak256)((0,a.concatBytes)(i)))},eip712DomainHash:_},t.typedSignatureHash=function(e){const t=S(e);return(0,a.bytesToHex)(t)},t.signTypedData=function(e){let{privateKey:r,data:i,version:o}=e;if(d(o),(0,u.isNullish)(i))throw new Error("Missing data parameter");if((0,u.isNullish)(r))throw new Error("Missing private key parameter");const s=o===l.V1?S(i):t.TypedDataUtils.eip712Hash(i,o),c=(0,n.ecsign)(s,r);return(0,u.concatSig)((0,n.arrToBufArr)((0,a.bigIntToBytes)(c.v)),c.r,c.s)},t.recoverTypedSignature=function(e){let{data:r,signature:i,version:o}=e;if(d(o),(0,u.isNullish)(r))throw new Error("Missing data parameter");if((0,u.isNullish)(i))throw new Error("Missing signature parameter");const s=o===l.V1?S(r):t.TypedDataUtils.eip712Hash(r,o),c=(0,u.recoverPublicKey)(s,i),h=(0,n.publicToAddress)(c);return(0,a.bytesToHex)(h)}},6679:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalize=t.recoverPublicKey=t.concatSig=t.legacyToBuffer=t.isNullish=t.padWithZeroes=void 0;const n=r(8922),i=r(3030);function o(e,t){if(""!==e&&!/^[a-f0-9]+$/iu.test(e))throw new Error("Expected an unprefixed hex string. Received: ".concat(e));if(t<0)throw new Error("Expected a non-negative integer target length. Received: ".concat(t));return String.prototype.padStart.call(e,t,"0")}function s(e){return null===e||void 0===e}t.padWithZeroes=o,t.isNullish=s,t.legacyToBuffer=function(e){return"string"!==typeof e||(0,n.isHexString)(e)?(0,n.toBuffer)(e):Buffer.from(e)},t.concatSig=function(e,t,r){const s=(0,n.fromSigned)(t),a=(0,n.fromSigned)(r),c=(0,n.bufferToInt)(e),u=o((0,n.toUnsigned)(s).toString("hex"),64),l=o((0,n.toUnsigned)(a).toString("hex"),64),d=(0,i.remove0x)((0,i.numberToHex)(c));return(0,i.add0x)(u.concat(l,d))},t.recoverPublicKey=function(e,t){const r=(0,n.fromRpcSig)(t);return(0,n.ecrecover)(e,r.v,r.r,r.s)},t.normalize=function(e){if(!s(e)){if("number"===typeof e){if(e<0)return"0x";const t=(0,i.numberToBytes)(e);e=(0,i.bytesToHex)(t)}if("string"!==typeof e){let t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=" received ".concat(typeof e,": ").concat(e),new Error(t)}return(0,i.add0x)(e.toLowerCase())}}},9094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(8392),o=((n=i)&&n.__esModule?n:{default:n}).default.call(void 0,"metamask");t.createProjectLogger=function(e){return o.extend(e)},t.createModuleLogger=function(e,t){return e.extend(t)}},2536:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};t.__privateGet=(e,t,n)=>(r(e,t,"read from private field"),n?n.call(e):t.get(e)),t.__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},t.__privateSet=(e,t,n,i)=>(r(e,t,"write to private field"),i?i.call(e,n):t.set(e,n),n)},8613:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8265),i=r(724),o=r(8680),s=o.refine.call(void 0,o.string.call(void 0),"Version",(e=>null!==i.valid.call(void 0,e)||'Expected SemVer version, got "'.concat(e,'"'))),a=o.refine.call(void 0,o.string.call(void 0),"Version range",(e=>null!==i.validRange.call(void 0,e)||'Expected SemVer range, got "'.concat(e,'"')));t.VersionStruct=s,t.VersionRangeStruct=a,t.isValidSemVerVersion=function(e){return o.is.call(void 0,e,s)},t.isValidSemVerRange=function(e){return o.is.call(void 0,e,a)},t.assertIsSemVerVersion=function(e){n.assertStruct.call(void 0,e,s)},t.assertIsSemVerRange=function(e){n.assertStruct.call(void 0,e,a)},t.gtVersion=function(e,t){return i.gt.call(void 0,e,t)},t.gtRange=function(e,t){return i.gtr.call(void 0,e,t)},t.satisfiesVersionRange=function(e,t){return i.satisfies.call(void 0,e,t,{includePrerelease:!0})}},7746:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDeferredPromise=function(){let e,t,{suppressUnhandledRejection:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=new Promise(((r,n)=>{e=r,t=n}));return r&&n.catch((e=>{})),{promise:n,resolve:e,reject:t}}},6533:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(e=>(e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year",e))(r||{}),n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error('"'.concat(t,'" must be a non-negative integer. Received: "').concat(e,'".'))};t.Duration=r,t.inMilliseconds=function(e,t){return n(e,"count"),e*t},t.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}},5605:()=>{},751:(e,t,r)=>{"use strict";var n,i,o=r(9400).default;function s(e,t){return null!=e?e:t()}Object.defineProperty(t,"__esModule",{value:!0});var a=r(8265),c=r(8680);t.base64=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=s(t.paddingRequired,(()=>!1)),u=s(t.characterSet,(()=>"base64"));let l,d;return"base64"===u?l=String.raw(n||(n=o(["[A-Za-z0-9+/]"],["[A-Za-z0-9+\\/]"]))):(a.assert.call(void 0,"base64url"===u),l=String.raw(i||(i=o(["[-_A-Za-z0-9]"])))),d=r?new RegExp("^(?:".concat(l,"{4})*(?:").concat(l,"{3}=|").concat(l,"{2}==)?$"),"u"):new RegExp("^(?:".concat(l,"{4})*(?:").concat(l,"{2,3}|").concat(l,"{3}=|").concat(l,"{2}==)?$"),"u"),c.pattern.call(void 0,e,d)}},8265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7506),i=r(8680);function o(e){return Boolean("string"===typeof function(e){let t,r=e[0],n=1;for(;n<e.length;){const i=e[n],o=e[n+1];if(n+=2,("optionalAccess"===i||"optionalCall"===i)&&null==r)return;"access"===i||"optionalAccess"===i?(t=r,r=o(r)):"call"!==i&&"optionalCall"!==i||(r=o((function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return r.call(t,...n)})),t=void 0)}return r}([e,"optionalAccess",e=>e.prototype,"optionalAccess",e=>e.constructor,"optionalAccess",e=>e.name]))}function s(e,t){return o(e)?new e({message:t}):e({message:t})}var a=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};t.AssertionError=a,t.assert=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Assertion failed.";if(!e){if(t instanceof Error)throw t;throw s(arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,t)}},t.assertStruct=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Assertion failed",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a;try{i.assert.call(void 0,e,t)}catch(c){throw s(o,"".concat(r,": ").concat(function(e){return n.getErrorMessage.call(void 0,e).replace(/\.$/u,"")}(c),"."))}},t.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}},4617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7309),i=r(8265),o=r(8680),s=o.union.call(void 0,[o.number.call(void 0),o.bigint.call(void 0),o.string.call(void 0),n.StrictHexStruct]),a=o.coerce.call(void 0,o.number.call(void 0),s,Number),c=o.coerce.call(void 0,o.bigint.call(void 0),s,BigInt),u=(o.union.call(void 0,[n.StrictHexStruct,o.instance.call(void 0,Uint8Array)]),o.coerce.call(void 0,o.instance.call(void 0,Uint8Array),o.union.call(void 0,[n.StrictHexStruct]),n.hexToBytes)),l=o.coerce.call(void 0,n.StrictHexStruct,o.instance.call(void 0,Uint8Array),n.bytesToHex);t.createNumber=function(e){try{const t=o.create.call(void 0,e,a);return i.assert.call(void 0,Number.isFinite(t),'Expected a number-like value, got "'.concat(e,'".')),t}catch(t){if(t instanceof o.StructError)throw new Error('Expected a number-like value, got "'.concat(e,'".'));throw t}},t.createBigInt=function(e){try{return o.create.call(void 0,e,c)}catch(t){if(t instanceof o.StructError)throw new Error('Expected a number-like value, got "'.concat(String(t.value),'".'));throw t}},t.createBytes=function(e){if("string"===typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return o.create.call(void 0,e,u)}catch(t){if(t instanceof o.StructError)throw new Error('Expected a bytes-like value, got "'.concat(String(t.value),'".'));throw t}},t.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"===typeof e&&"0x"===e.toLowerCase())return"0x";try{return o.create.call(void 0,e,l)}catch(t){if(t instanceof o.StructError)throw new Error('Expected a bytes-like value, got "'.concat(String(t.value),'".'));throw t}}},7029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(751),i=r(8680),o=i.size.call(void 0,n.base64.call(void 0,i.string.call(void 0),{paddingRequired:!0}),44,44);t.ChecksumStruct=o},6746:()=>{},7506:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6039),i=r(6701);function o(e){return"object"===typeof e&&null!==e&&"code"in e}function s(e){return"object"===typeof e&&null!==e&&"message"in e}t.isErrorWithCode=o,t.isErrorWithMessage=s,t.isErrorWithStack=function(e){return"object"===typeof e&&null!==e&&"stack"in e},t.getErrorMessage=function(e){return s(e)&&"string"===typeof e.message?e.message:n.isNullOrUndefined.call(void 0,e)?"":String(e)},t.wrapError=function(e,t){if((r=e)instanceof Error||n.isObject.call(void 0,r)&&"Error"===r.constructor.name){let r;return r=2===Error.length?new Error(t,{cause:e}):new(0,i.ErrorWithCause)(t,{cause:e}),o(e)&&(r.code=e.code),r}var r;return t.length>0?new Error("".concat(String(e),": ").concat(t)):new Error(String(e))}},5982:()=>{},5677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8265),i=r(6039),o=r(8680),s=e=>o.object.call(void 0,e);function a(e){let{path:t,branch:r}=e;const n=t[t.length-1];return i.hasProperty.call(void 0,r[r.length-2],n)}function c(e){return new(0,o.Struct)({...e,type:"optional ".concat(e.type),validator:(t,r)=>!a(r)||e.validator(t,r),refiner:(t,r)=>!a(r)||e.refiner(t,r)})}var u=o.union.call(void 0,[o.literal.call(void 0,null),o.boolean.call(void 0),o.define.call(void 0,"finite number",(e=>o.is.call(void 0,e,o.number.call(void 0))&&Number.isFinite(e))),o.string.call(void 0),o.array.call(void 0,o.lazy.call(void 0,(()=>u))),o.record.call(void 0,o.string.call(void 0),o.lazy.call(void 0,(()=>u)))]),l=o.coerce.call(void 0,u,o.any.call(void 0),(e=>(n.assertStruct.call(void 0,e,u),JSON.parse(JSON.stringify(e,((e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))))));function d(e){return o.create.call(void 0,e,l)}var h=o.literal.call(void 0,"2.0"),f=o.nullable.call(void 0,o.union.call(void 0,[o.number.call(void 0),o.string.call(void 0)])),p=s({code:o.integer.call(void 0),message:o.string.call(void 0),data:c(l),stack:c(o.string.call(void 0))}),g=o.union.call(void 0,[o.record.call(void 0,o.string.call(void 0),l),o.array.call(void 0,l)]),m=s({id:f,jsonrpc:h,method:o.string.call(void 0),params:c(g)}),y=s({jsonrpc:h,method:o.string.call(void 0),params:c(g)});var v=o.object.call(void 0,{id:f,jsonrpc:h,result:o.optional.call(void 0,o.unknown.call(void 0)),error:o.optional.call(void 0,p)}),b=s({id:f,jsonrpc:h,result:l}),w=s({id:f,jsonrpc:h,error:p}),_=o.union.call(void 0,[b,w]);t.object=s,t.exactOptional=c,t.UnsafeJsonStruct=u,t.JsonStruct=l,t.isValidJson=function(e){try{return d(e),!0}catch(t){return!1}},t.getSafeJson=d,t.getJsonSize=function(e){n.assertStruct.call(void 0,e,l,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},t.jsonrpc2="2.0",t.JsonRpcVersionStruct=h,t.JsonRpcIdStruct=f,t.JsonRpcErrorStruct=p,t.JsonRpcParamsStruct=g,t.JsonRpcRequestStruct=m,t.JsonRpcNotificationStruct=y,t.isJsonRpcNotification=function(e){return o.is.call(void 0,e,y)},t.assertIsJsonRpcNotification=function(e,t){n.assertStruct.call(void 0,e,y,"Invalid JSON-RPC notification",t)},t.isJsonRpcRequest=function(e){return o.is.call(void 0,e,m)},t.assertIsJsonRpcRequest=function(e,t){n.assertStruct.call(void 0,e,m,"Invalid JSON-RPC request",t)},t.PendingJsonRpcResponseStruct=v,t.JsonRpcSuccessStruct=b,t.JsonRpcFailureStruct=w,t.JsonRpcResponseStruct=_,t.isPendingJsonRpcResponse=function(e){return o.is.call(void 0,e,v)},t.assertIsPendingJsonRpcResponse=function(e,t){n.assertStruct.call(void 0,e,v,"Invalid pending JSON-RPC response",t)},t.isJsonRpcResponse=function(e){return o.is.call(void 0,e,_)},t.assertIsJsonRpcResponse=function(e,t){n.assertStruct.call(void 0,e,_,"Invalid JSON-RPC response",t)},t.isJsonRpcSuccess=function(e){return o.is.call(void 0,e,b)},t.assertIsJsonRpcSuccess=function(e,t){n.assertStruct.call(void 0,e,b,"Invalid JSON-RPC success response",t)},t.isJsonRpcFailure=function(e){return o.is.call(void 0,e,w)},t.assertIsJsonRpcFailure=function(e,t){n.assertStruct.call(void 0,e,w,"Invalid JSON-RPC failure response",t)},t.isJsonRpcError=function(e){return o.is.call(void 0,e,p)},t.assertIsJsonRpcError=function(e,t){n.assertStruct.call(void 0,e,p,"Invalid JSON-RPC error",t)},t.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:r,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"===typeof e&&(r||Number.isInteger(e))||"string"===typeof e&&(t||e.length>0)||n&&null===e)}},7309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8265),i=r(7883),o=r(8680),s=r(4848),a=48,c=58,u=87;var l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function d(e){return e instanceof Uint8Array}function h(e){n.assert.call(void 0,d(e),"Value must be a Uint8Array.")}function f(e){if(h(e),0===e.length)return"0x";const t=l(),r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=t[e[n]];return P(r.join(""))}function p(e){h(e);const t=f(e);return BigInt(t)}function g(e){if("0x"===function(e){let t,r=e[0],n=1;for(;n<e.length;){const i=e[n],o=e[n+1];if(n+=2,("optionalAccess"===i||"optionalCall"===i)&&null==r)return;"access"===i||"optionalAccess"===i?(t=r,r=o(r)):"call"!==i&&"optionalCall"!==i||(r=o((function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return r.call(t,...n)})),t=void 0)}return r}([e,"optionalAccess",e=>e.toLowerCase,"optionalCall",e=>e()]))return new Uint8Array;x(e);const t=R(e).toLowerCase(),r=t.length%2===0?t:"0".concat(t),n=new Uint8Array(r.length/2);for(let i=0;i<n.length;i++){const e=r.charCodeAt(2*i),t=r.charCodeAt(2*i+1),o=e-(e<c?a:u),s=t-(t<c?a:u);n[i]=16*o+s}return n}function m(e){n.assert.call(void 0,"bigint"===typeof e,"Value must be a bigint."),n.assert.call(void 0,e>=BigInt(0),"Value must be a non-negative bigint.");return g(e.toString(16))}function y(e){n.assert.call(void 0,"number"===typeof e,"Value must be a number."),n.assert.call(void 0,e>=0,"Value must be a non-negative number."),n.assert.call(void 0,Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return g(e.toString(16))}function v(e){return n.assert.call(void 0,"string"===typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function b(e){if("bigint"===typeof e)return m(e);if("number"===typeof e)return y(e);if("string"===typeof e)return e.startsWith("0x")?g(e):v(e);if(d(e))return e;throw new TypeError('Unsupported value type: "'.concat(typeof e,'".'))}var w=o.pattern.call(void 0,o.string.call(void 0),/^(?:0x)?[0-9a-f]+$/iu),_=o.pattern.call(void 0,o.string.call(void 0),/^0x[0-9a-f]+$/iu),E=o.pattern.call(void 0,o.string.call(void 0),/^0x[0-9a-f]{40}$/u),A=o.pattern.call(void 0,o.string.call(void 0),/^0x[0-9a-fA-F]{40}$/u);function S(e){return o.is.call(void 0,e,w)}function k(e){return o.is.call(void 0,e,_)}function x(e){n.assert.call(void 0,S(e),"Value must be a hexadecimal string.")}function I(e){n.assert.call(void 0,o.is.call(void 0,e,A),"Invalid hex address.");const t=R(e.toLowerCase()),r=R(f(i.keccak_256.call(void 0,t)));return"0x".concat(t.split("").map(((e,t)=>{const i=r[t];return n.assert.call(void 0,o.is.call(void 0,i,o.string.call(void 0)),"Hash shorter than address."),parseInt(i,16)>7?e.toUpperCase():e})).join(""))}function T(e){return!!o.is.call(void 0,e,A)&&I(e)===e}function P(e){return e.startsWith("0x")?e:e.startsWith("0X")?"0x".concat(e.substring(2)):"0x".concat(e)}function R(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}t.HexStruct=w,t.StrictHexStruct=_,t.HexAddressStruct=E,t.HexChecksumAddressStruct=A,t.isHexString=S,t.isStrictHexString=k,t.assertIsHexString=x,t.assertIsStrictHexString=function(e){n.assert.call(void 0,k(e),'Value must be a hexadecimal string, starting with "0x".')},t.isValidHexAddress=function(e){return o.is.call(void 0,e,E)||T(e)},t.getChecksumAddress=I,t.isValidChecksumAddress=T,t.add0x=P,t.remove0x=R,t.isBytes=d,t.assertIsBytes=h,t.bytesToHex=f,t.bytesToBigInt=p,t.bytesToSignedBigInt=function(e){h(e);let t=BigInt(0);for(const r of e)t=(t<<BigInt(8))+BigInt(r);return BigInt.asIntN(8*e.length,t)},t.bytesToNumber=function(e){h(e);const t=p(e);return n.assert.call(void 0,t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},t.bytesToString=function(e){return h(e),(new TextDecoder).decode(e)},t.bytesToBase64=function(e){return h(e),s.base64.encode(e)},t.hexToBytes=g,t.bigIntToBytes=m,t.signedBigIntToBytes=function(e,t){n.assert.call(void 0,"bigint"===typeof e,"Value must be a bigint."),n.assert.call(void 0,"number"===typeof t,"Byte length must be a number."),n.assert.call(void 0,t>0,"Byte length must be greater than 0."),n.assert.call(void 0,function(e,t){n.assert.call(void 0,t>0);const r=e>>BigInt(31);return!((~e&r)+(e&~r)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let r=e;const i=new Uint8Array(t);for(let n=0;n<i.length;n++)i[n]=Number(BigInt.asUintN(8,r)),r>>=BigInt(8);return i.reverse()},t.numberToBytes=y,t.stringToBytes=v,t.base64ToBytes=function(e){return n.assert.call(void 0,"string"===typeof e,"Value must be a string."),s.base64.decode(e)},t.valueToBytes=b,t.concatBytes=function(e){const t=new Array(e.length);let r=0;for(let i=0;i<e.length;i++){const n=b(e[i]);t[i]=n,r+=n.length}const n=new Uint8Array(r);for(let i=0,o=0;i<t.length;i++)n.set(t[i],o),o+=t[i].length;return n},t.createDataView=function(e){if("undefined"!==typeof Buffer&&e instanceof Buffer){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}},6039:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(e=>(e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date",e))(r||{}),n=/"|\\|\n|\r|\t/gu;function i(e){return e.charCodeAt(0)<=127}t.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},t.isNullOrUndefined=function(e){return null===e||void 0===e},t.isObject=function(e){return Boolean(e)&&"object"===typeof e&&!Array.isArray(e)},t.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),t.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},t.JsonSize=r,t.ESCAPE_CHARACTERS_REGEXP=n,t.isPlainObject=function(e){if("object"!==typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(t){return!1}},t.isASCII=i,t.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>i(t)?e+1:e+2),0)+(t=e.match(n),r=()=>[],null!=t?t:r()).length;var t,r},t.calculateNumberSize=function(e){return e.toString().length}},5519:()=>{},4882:(e,t,r)=>{"use strict";function n(e){let t,r=e[0],n=1;for(;n<e.length;){const i=e[n],o=e[n+1];if(n+=2,("optionalAccess"===i||"optionalCall"===i)&&null==r)return;"access"===i||"optionalAccess"===i?(t=r,r=o(r)):"call"!==i&&"optionalCall"!==i||(r=o((function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return r.call(t,...n)})),t=void 0)}return r}Object.defineProperty(t,"__esModule",{value:!0});var i=r(8680),o=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,s=/^[-a-z0-9]{3,8}$/u,a=/^[-_a-zA-Z0-9]{1,32}$/u,c=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,u=/^[-.%a-zA-Z0-9]{1,128}$/u,l=i.pattern.call(void 0,i.string.call(void 0),o),d=i.pattern.call(void 0,i.string.call(void 0),s),h=i.pattern.call(void 0,i.string.call(void 0),a),f=i.pattern.call(void 0,i.string.call(void 0),c),p=i.pattern.call(void 0,i.string.call(void 0),u);t.CAIP_CHAIN_ID_REGEX=o,t.CAIP_NAMESPACE_REGEX=s,t.CAIP_REFERENCE_REGEX=a,t.CAIP_ACCOUNT_ID_REGEX=c,t.CAIP_ACCOUNT_ADDRESS_REGEX=u,t.CaipChainIdStruct=l,t.CaipNamespaceStruct=d,t.CaipReferenceStruct=h,t.CaipAccountIdStruct=f,t.CaipAccountAddressStruct=p,t.isCaipChainId=function(e){return i.is.call(void 0,e,l)},t.isCaipNamespace=function(e){return i.is.call(void 0,e,d)},t.isCaipReference=function(e){return i.is.call(void 0,e,h)},t.isCaipAccountId=function(e){return i.is.call(void 0,e,f)},t.isCaipAccountAddress=function(e){return i.is.call(void 0,e,p)},t.parseCaipChainId=function(e){const t=o.exec(e);if(!n([t,"optionalAccess",e=>e.groups]))throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},t.parseCaipAccountId=function(e){const t=c.exec(e);if(!n([t,"optionalAccess",e=>e.groups]))throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}}},1683:()=>{},6037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7309),i=r(8265);t.numberToHex=e=>(i.assert.call(void 0,"number"===typeof e,"Value must be a number."),i.assert.call(void 0,e>=0,"Value must be a non-negative number."),i.assert.call(void 0,Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),n.add0x.call(void 0,e.toString(16))),t.bigIntToHex=e=>(i.assert.call(void 0,"bigint"===typeof e,"Value must be a bigint."),i.assert.call(void 0,e>=0,"Value must be a non-negative bigint."),n.add0x.call(void 0,e.toString(16))),t.hexToNumber=e=>{n.assertIsHexString.call(void 0,e);const t=parseInt(e,16);return i.assert.call(void 0,Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t},t.hexToBigInt=e=>(n.assertIsHexString.call(void 0,e),BigInt(n.add0x.call(void 0,e)))},1139:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i,o=r(2536),s=class{constructor(e){o.__privateAdd.call(void 0,this,n,void 0),o.__privateSet.call(void 0,this,n,new Map(e)),Object.freeze(this)}get size(){return o.__privateGet.call(void 0,this,n).size}[Symbol.iterator](){return o.__privateGet.call(void 0,this,n)[Symbol.iterator]()}entries(){return o.__privateGet.call(void 0,this,n).entries()}forEach(e,t){return o.__privateGet.call(void 0,this,n).forEach(((r,n,i)=>e.call(t,r,n,this)))}get(e){return o.__privateGet.call(void 0,this,n).get(e)}has(e){return o.__privateGet.call(void 0,this,n).has(e)}keys(){return o.__privateGet.call(void 0,this,n).keys()}values(){return o.__privateGet.call(void 0,this,n).values()}toString(){return"FrozenMap(".concat(this.size,") {").concat(this.size>0?" ".concat([...this.entries()].map((e=>{let[t,r]=e;return"".concat(String(t)," => ").concat(String(r))})).join(", ")," "):"","}")}};n=new WeakMap;var a=class{constructor(e){o.__privateAdd.call(void 0,this,i,void 0),o.__privateSet.call(void 0,this,i,new Set(e)),Object.freeze(this)}get size(){return o.__privateGet.call(void 0,this,i).size}[Symbol.iterator](){return o.__privateGet.call(void 0,this,i)[Symbol.iterator]()}entries(){return o.__privateGet.call(void 0,this,i).entries()}forEach(e,t){return o.__privateGet.call(void 0,this,i).forEach(((r,n,i)=>e.call(t,r,n,this)))}has(e){return o.__privateGet.call(void 0,this,i).has(e)}keys(){return o.__privateGet.call(void 0,this,i).keys()}values(){return o.__privateGet.call(void 0,this,i).values()}toString(){return"FrozenSet(".concat(this.size,") {").concat(this.size>0?" ".concat([...this.values()].map((e=>String(e))).join(", ")," "):"","}")}};i=new WeakMap,Object.freeze(s),Object.freeze(s.prototype),Object.freeze(a),Object.freeze(a.prototype),t.FrozenMap=s,t.FrozenSet=a},3030:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(5605);var n=r(6037);r(5982);var i=r(7746),o=r(6533);r(1683);var s=r(8613),a=r(5677);r(5519);var c=r(9094),u=r(4882),l=r(7029),d=r(751),h=r(4617),f=r(7309),p=r(8265),g=r(7506),m=r(6039),y=r(1139);r(2536),r(6746),t.AssertionError=p.AssertionError,t.CAIP_ACCOUNT_ADDRESS_REGEX=u.CAIP_ACCOUNT_ADDRESS_REGEX,t.CAIP_ACCOUNT_ID_REGEX=u.CAIP_ACCOUNT_ID_REGEX,t.CAIP_CHAIN_ID_REGEX=u.CAIP_CHAIN_ID_REGEX,t.CAIP_NAMESPACE_REGEX=u.CAIP_NAMESPACE_REGEX,t.CAIP_REFERENCE_REGEX=u.CAIP_REFERENCE_REGEX,t.CaipAccountAddressStruct=u.CaipAccountAddressStruct,t.CaipAccountIdStruct=u.CaipAccountIdStruct,t.CaipChainIdStruct=u.CaipChainIdStruct,t.CaipNamespaceStruct=u.CaipNamespaceStruct,t.CaipReferenceStruct=u.CaipReferenceStruct,t.ChecksumStruct=l.ChecksumStruct,t.Duration=o.Duration,t.ESCAPE_CHARACTERS_REGEXP=m.ESCAPE_CHARACTERS_REGEXP,t.FrozenMap=y.FrozenMap,t.FrozenSet=y.FrozenSet,t.HexAddressStruct=f.HexAddressStruct,t.HexChecksumAddressStruct=f.HexChecksumAddressStruct,t.HexStruct=f.HexStruct,t.JsonRpcErrorStruct=a.JsonRpcErrorStruct,t.JsonRpcFailureStruct=a.JsonRpcFailureStruct,t.JsonRpcIdStruct=a.JsonRpcIdStruct,t.JsonRpcNotificationStruct=a.JsonRpcNotificationStruct,t.JsonRpcParamsStruct=a.JsonRpcParamsStruct,t.JsonRpcRequestStruct=a.JsonRpcRequestStruct,t.JsonRpcResponseStruct=a.JsonRpcResponseStruct,t.JsonRpcSuccessStruct=a.JsonRpcSuccessStruct,t.JsonRpcVersionStruct=a.JsonRpcVersionStruct,t.JsonSize=m.JsonSize,t.JsonStruct=a.JsonStruct,t.PendingJsonRpcResponseStruct=a.PendingJsonRpcResponseStruct,t.StrictHexStruct=f.StrictHexStruct,t.UnsafeJsonStruct=a.UnsafeJsonStruct,t.VersionRangeStruct=s.VersionRangeStruct,t.VersionStruct=s.VersionStruct,t.add0x=f.add0x,t.assert=p.assert,t.assertExhaustive=p.assertExhaustive,t.assertIsBytes=f.assertIsBytes,t.assertIsHexString=f.assertIsHexString,t.assertIsJsonRpcError=a.assertIsJsonRpcError,t.assertIsJsonRpcFailure=a.assertIsJsonRpcFailure,t.assertIsJsonRpcNotification=a.assertIsJsonRpcNotification,t.assertIsJsonRpcRequest=a.assertIsJsonRpcRequest,t.assertIsJsonRpcResponse=a.assertIsJsonRpcResponse,t.assertIsJsonRpcSuccess=a.assertIsJsonRpcSuccess,t.assertIsPendingJsonRpcResponse=a.assertIsPendingJsonRpcResponse,t.assertIsSemVerRange=s.assertIsSemVerRange,t.assertIsSemVerVersion=s.assertIsSemVerVersion,t.assertIsStrictHexString=f.assertIsStrictHexString,t.assertStruct=p.assertStruct,t.base64=d.base64,t.base64ToBytes=f.base64ToBytes,t.bigIntToBytes=f.bigIntToBytes,t.bigIntToHex=n.bigIntToHex,t.bytesToBase64=f.bytesToBase64,t.bytesToBigInt=f.bytesToBigInt,t.bytesToHex=f.bytesToHex,t.bytesToNumber=f.bytesToNumber,t.bytesToSignedBigInt=f.bytesToSignedBigInt,t.bytesToString=f.bytesToString,t.calculateNumberSize=m.calculateNumberSize,t.calculateStringSize=m.calculateStringSize,t.concatBytes=f.concatBytes,t.createBigInt=h.createBigInt,t.createBytes=h.createBytes,t.createDataView=f.createDataView,t.createDeferredPromise=i.createDeferredPromise,t.createHex=h.createHex,t.createModuleLogger=c.createModuleLogger,t.createNumber=h.createNumber,t.createProjectLogger=c.createProjectLogger,t.exactOptional=a.exactOptional,t.getChecksumAddress=f.getChecksumAddress,t.getErrorMessage=g.getErrorMessage,t.getJsonRpcIdValidator=a.getJsonRpcIdValidator,t.getJsonSize=a.getJsonSize,t.getKnownPropertyNames=m.getKnownPropertyNames,t.getSafeJson=a.getSafeJson,t.gtRange=s.gtRange,t.gtVersion=s.gtVersion,t.hasProperty=m.hasProperty,t.hexToBigInt=n.hexToBigInt,t.hexToBytes=f.hexToBytes,t.hexToNumber=n.hexToNumber,t.inMilliseconds=o.inMilliseconds,t.isASCII=m.isASCII,t.isBytes=f.isBytes,t.isCaipAccountAddress=u.isCaipAccountAddress,t.isCaipAccountId=u.isCaipAccountId,t.isCaipChainId=u.isCaipChainId,t.isCaipNamespace=u.isCaipNamespace,t.isCaipReference=u.isCaipReference,t.isErrorWithCode=g.isErrorWithCode,t.isErrorWithMessage=g.isErrorWithMessage,t.isErrorWithStack=g.isErrorWithStack,t.isHexString=f.isHexString,t.isJsonRpcError=a.isJsonRpcError,t.isJsonRpcFailure=a.isJsonRpcFailure,t.isJsonRpcNotification=a.isJsonRpcNotification,t.isJsonRpcRequest=a.isJsonRpcRequest,t.isJsonRpcResponse=a.isJsonRpcResponse,t.isJsonRpcSuccess=a.isJsonRpcSuccess,t.isNonEmptyArray=m.isNonEmptyArray,t.isNullOrUndefined=m.isNullOrUndefined,t.isObject=m.isObject,t.isPendingJsonRpcResponse=a.isPendingJsonRpcResponse,t.isPlainObject=m.isPlainObject,t.isStrictHexString=f.isStrictHexString,t.isValidChecksumAddress=f.isValidChecksumAddress,t.isValidHexAddress=f.isValidHexAddress,t.isValidJson=a.isValidJson,t.isValidSemVerRange=s.isValidSemVerRange,t.isValidSemVerVersion=s.isValidSemVerVersion,t.jsonrpc2=a.jsonrpc2,t.numberToBytes=f.numberToBytes,t.numberToHex=n.numberToHex,t.object=a.object,t.parseCaipAccountId=u.parseCaipAccountId,t.parseCaipChainId=u.parseCaipChainId,t.remove0x=f.remove0x,t.satisfiesVersionRange=s.satisfiesVersionRange,t.signedBigIntToBytes=f.signedBigIntToBytes,t.stringToBytes=f.stringToBytes,t.timeSince=o.timeSince,t.valueToBytes=f.valueToBytes,t.wrapError=g.wrapError},7525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCurve=t.getHash=void 0;const n=r(5968),i=r(4361),o=r(2846);function s(e){return{hash:e,hmac:function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return(0,n.hmac)(e,t,(0,i.concatBytes)(...o))},randomBytes:i.randomBytes}}t.getHash=s,t.createCurve=function(e,t){const r=t=>(0,o.weierstrass)({...e,...s(t)});return Object.freeze({...r(t),create:r})}},369:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateBasic=t.wNAF=void 0;const n=r(7701),i=r(3500),o=BigInt(0),s=BigInt(1);t.wNAF=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>o;)r&s&&(n=n.add(i)),i=i.double(),r>>=s;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),o=[];let s=e,a=s;for(let n=0;n<r;n++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){const{windows:a,windowSize:c}=n(t);let u=e.ZERO,l=e.BASE;const d=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let e=0;e<a;e++){const t=e*c;let n=Number(o&d);o>>=f,n>c&&(n-=h,o+=s);const a=t,p=t+Math.abs(n)-1,g=e%2!==0,m=n<0;0===n?l=l.add(r(g,i[a])):u=u.add(r(m,i[p]))}return{p:u,f:l}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,n(o))),this.wNAF(i,o,r)}}},t.validateBasic=function(e){return(0,n.validateField)(e.Fp),(0,i.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}},4464:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHasher=t.isogenyMap=t.hash_to_field=t.expand_message_xof=t.expand_message_xmd=void 0;const n=r(7701),i=r(3500);const o=i.bytesToNumberBE;function s(e,t){if(e<0||e>=1<<8*t)throw new Error("bad I2OSP call: value=".concat(e," length=").concat(t));const r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function a(e,t){const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}function c(e){if(!(0,i.isBytes)(e))throw new Error("Uint8Array expected")}function u(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function l(e,t,r,n){c(e),c(t),u(r),t.length>255&&(t=n((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:o,blockLen:l}=n,d=Math.ceil(r/o);if(d>255)throw new Error("Invalid xmd length");const h=(0,i.concatBytes)(t,s(t.length,1)),f=s(0,l),p=s(r,2),g=new Array(d),m=n((0,i.concatBytes)(f,e,p,s(0,1),h));g[0]=n((0,i.concatBytes)(m,s(1,1),h));for(let c=1;c<=d;c++){const e=[a(m,g[c-1]),s(c+1,1),h];g[c]=n((0,i.concatBytes)(...e))}return(0,i.concatBytes)(...g).slice(0,r)}function d(e,t,r,n,o){if(c(e),c(t),u(r),t.length>255){const e=Math.ceil(2*n/8);t=o.create({dkLen:e}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return o.create({dkLen:r}).update(e).update(s(r,2)).update(t).update(s(t.length,1)).digest()}function h(e,t,r){(0,i.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:s,k:a,m:h,hash:f,expand:p,DST:g}=r;c(e),u(t);const m=function(e){if((0,i.isBytes)(e))return e;if("string"===typeof e)return(0,i.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}(g),y=s.toString(2).length,v=Math.ceil((y+a)/8),b=t*h*v;let w;if("xmd"===p)w=l(e,m,b,f);else if("xof"===p)w=d(e,m,b,a,f);else{if("_internal_pass"!==p)throw new Error('expand must be "xmd" or "xof"');w=e}const _=new Array(t);for(let i=0;i<t;i++){const e=new Array(h);for(let t=0;t<h;t++){const r=v*(t+i*h),a=w.subarray(r,r+v);e[t]=(0,n.mod)(o(a),s)}_[i]=e}return _}t.expand_message_xmd=l,t.expand_message_xof=d,t.hash_to_field=h,t.isogenyMap=function(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,n)=>{const[i,o,s,a]=r.map((r=>r.reduce(((r,n)=>e.add(e.mul(r,t),n)))));return t=e.div(i,o),n=e.mul(n,e.div(s,a)),{x:t,y:n}}},t.createHasher=function(e,t,r){if("function"!==typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){const o=h(n,2,{...r,DST:r.DST,...i}),s=e.fromAffine(t(o[0])),a=e.fromAffine(t(o[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,i){const o=h(n,1,{...r,DST:r.encodeDST,...i}),s=e.fromAffine(t(o[0])).clearCofactor();return s.assertValidity(),s}}}},7701:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHashToField=t.getMinHashLength=t.getFieldBytesLength=t.hashToPrivateScalar=t.FpSqrtEven=t.FpSqrtOdd=t.Field=t.nLength=t.FpIsSquare=t.FpDiv=t.FpInvertBatch=t.FpPow=t.validateField=t.isNegativeLE=t.FpSqrt=t.tonelliShanks=t.invert=t.pow2=t.pow=t.mod=void 0;const n=r(3500),i=BigInt(0),o=BigInt(1),s=BigInt(2),a=BigInt(3),c=BigInt(4),u=BigInt(5),l=BigInt(8);BigInt(9),BigInt(16);function d(e,t){const r=e%t;return r>=i?r:t+r}function h(e,t,r){if(r<=i||t<i)throw new Error("Expected power/modulo > 0");if(r===o)return i;let n=o;for(;t>i;)t&o&&(n=n*e%r),e=e*e%r,t>>=o;return n}function f(e,t){if(e===i||t<=i)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));let r=d(e,t),n=t,s=i,a=o,c=o,u=i;for(;r!==i;){const e=n/r,t=n%r,i=s-c*e,o=a-u*e;n=r,r=t,s=c,a=u,c=i,u=o}if(n!==o)throw new Error("invert: does not exist");return d(s,t)}function p(e){const t=(e-o)/s;let r,n,a;for(r=e-o,n=0;r%s===i;r/=s,n++);for(a=s;a<e&&h(a,t,e)!==e-o;a++);if(1===n){const t=(e+o)/c;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const u=(r+o)/s;return function(e,i){if(e.pow(i,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=n,c=e.pow(e.mul(e.ONE,a),r),l=e.pow(i,u),d=e.pow(i,r);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<s&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const r=e.pow(c,o<<BigInt(s-t-1));c=e.sqr(r),l=e.mul(l,r),d=e.mul(d,c),s=t}return l}}function g(e){if(e%c===a){const t=(e+o)/c;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%l===u){const t=(e-u)/l;return function(e,r){const n=e.mul(r,s),i=e.pow(n,t),o=e.mul(r,i),a=e.mul(e.mul(o,s),i),c=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(c),r))throw new Error("Cannot find square root");return c}}return p(e)}t.mod=d,t.pow=h,t.pow2=function(e,t,r){let n=e;for(;t-- >i;)n*=n,n%=r;return n},t.invert=f,t.tonelliShanks=p,t.FpSqrt=g;t.isNegativeLE=(e,t)=>(d(e,t)&o)===o;const m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,r){if(r<i)throw new Error("Expected power > 0");if(r===i)return e.ONE;if(r===o)return t;let n=e.ONE,s=t;for(;r>i;)r&o&&(n=e.mul(n,s)),s=e.sqr(s),r>>=o;return n}function v(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}function b(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function w(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function _(e){const t=w(e);return t+Math.ceil(t/2)}t.validateField=function(e){const t=m.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},t.FpPow=y,t.FpInvertBatch=v,t.FpDiv=function(e,t,r){return e.mul(t,"bigint"===typeof r?f(r,e.ORDER):e.inv(r))},t.FpIsSquare=function(e){const t=(e.ORDER-o)/s;return r=>{const n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},t.nLength=b,t.Field=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=i)throw new Error("Expected Field ORDER > 0, got ".concat(e));const{nBitLength:a,nByteLength:c}=b(e,t);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=g(e),l=Object.freeze({ORDER:e,BITS:a,BYTES:c,MASK:(0,n.bitMask)(a),ZERO:i,ONE:o,create:t=>d(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got ".concat(typeof t));return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&o)===o,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>y(l,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:s.sqrt||(e=>u(l,e)),invertBatch:e=>v(l,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.numberToBytesLE)(e,c):(0,n.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error("Fp.fromBytes: expected ".concat(c,", got ").concat(e.length));return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(l)},t.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},t.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},t.hashToPrivateScalar=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=(e=(0,n.ensureBytes)("privateHash",e)).length,s=b(t).nByteLength+8;if(s<24||i<s||i>1024)throw new Error("hashToPrivateScalar: expected ".concat(s,"-1024 bytes of input, got ").concat(i));return d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-o)+o},t.getFieldBytesLength=w,t.getMinHashLength=_,t.mapHashToField=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.length,s=w(t),a=_(t);if(i<16||i<a||i>1024)throw new Error("expected ".concat(a,"-1024 bytes of input, got ").concat(i));const c=d(r?(0,n.bytesToNumberBE)(e):(0,n.bytesToNumberLE)(e),t-o)+o;return r?(0,n.numberToBytesLE)(c,s):(0,n.numberToBytesBE)(c,s)}},3500:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateObject=t.createHmacDrbg=t.bitMask=t.bitSet=t.bitGet=t.bitLen=t.utf8ToBytes=t.equalBytes=t.concatBytes=t.ensureBytes=t.numberToVarBytesBE=t.numberToBytesLE=t.numberToBytesBE=t.bytesToNumberLE=t.bytesToNumberBE=t.hexToBytes=t.hexToNumber=t.numberToHexUnpadded=t.bytesToHex=t.isBytes=void 0;const r=BigInt(0),n=BigInt(1),i=BigInt(2);function o(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}t.isBytes=o;const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e){if(!o(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t}function c(e){const t=e.toString(16);return 1&t.length?"0".concat(t):t}function u(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x".concat(e))}t.bytesToHex=a,t.numberToHexUnpadded=c,t.hexToNumber=u;const l={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function d(e){return e>=l._0&&e<=l._9?e-l._0:e>=l._A&&e<=l._F?e-(l._A-10):e>=l._a&&e<=l._f?e-(l._a-10):void 0}function h(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const t=d(e.charCodeAt(o)),r=d(e.charCodeAt(o+1));if(void 0===t||void 0===r){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}n[i]=16*t+r}return n}function f(e,t){return h(e.toString(16).padStart(2*t,"0"))}function p(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];if(!o(t))throw new Error("Uint8Array expected");e+=t.length}let t=new Uint8Array(e),r=0;for(let n=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}t.hexToBytes=h,t.bytesToNumberBE=function(e){return u(a(e))},t.bytesToNumberLE=function(e){if(!o(e))throw new Error("Uint8Array expected");return u(a(Uint8Array.from(e).reverse()))},t.numberToBytesBE=f,t.numberToBytesLE=function(e,t){return f(e,t).reverse()},t.numberToVarBytesBE=function(e){return h(c(e))},t.ensureBytes=function(e,t,r){let n;if("string"===typeof t)try{n=h(t)}catch(s){throw new Error("".concat(e,' must be valid hex string, got "').concat(t,'". Cause: ').concat(s))}else{if(!o(t))throw new Error("".concat(e," must be hex string or Uint8Array"));n=Uint8Array.from(t)}const i=n.length;if("number"===typeof r&&i!==r)throw new Error("".concat(e," expected ").concat(r," bytes, got ").concat(i));return n},t.concatBytes=p,t.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},t.utf8ToBytes=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got ".concat(typeof e));return new Uint8Array((new TextEncoder).encode(e))},t.bitLen=function(e){let t;for(t=0;e>r;e>>=n,t+=1);return t},t.bitGet=function(e,t){return e>>BigInt(t)&n};t.bitSet=(e,t,i)=>e|(i?n:r)<<BigInt(t);t.bitMask=e=>(i<<BigInt(e-1))-n;const g=e=>new Uint8Array(e),m=e=>Uint8Array.from(e);t.createHmacDrbg=function(e,t,r){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof r)throw new Error("hmacFn must be a function");let n=g(e),i=g(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r(i,n,...t)},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g();i=a(m([0]),e),n=a(),0!==e.length&&(i=a(m([1]),e),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return p(...r)};return(e,t)=>{let r;for(s(),c(e);!(r=t(u()));)c();return s(),r}};const y={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||o(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};t.validateObject=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=(t,r,n)=>{const i=y[r];if("function"!==typeof i)throw new Error('Invalid validator "'.concat(r,'", expected function'));const o=e[t];if((!n||void 0!==o)&&!i(o,e))throw new Error("Invalid param ".concat(String(t),"=").concat(o," (").concat(typeof o,"), expected ").concat(r))};for(const[i,o]of Object.entries(t))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return e}},2846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapToCurveSimpleSWU=t.SWUFpSqrtRatio=t.weierstrass=t.weierstrassPoints=t.DER=void 0;const n=r(7701),i=r(3500),o=r(3500),s=r(369);const{bytesToNumberBE:a,hexToBytes:c}=i;t.DER={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(e){const{Err:r}=t.DER;if(e.length<2||2!==e[0])throw new r("Invalid signature integer tag");const n=e[1],i=e.subarray(2,n+2);if(!n||i.length!==n)throw new r("Invalid signature integer: wrong length");if(128&i[0])throw new r("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new r("Invalid signature integer: unnecessary leading zero");return{d:a(i),l:e.subarray(n+2)}},toSig(e){const{Err:r}=t.DER,n="string"===typeof e?c(e):e;if(!i.isBytes(n))throw new Error("ui8a expected");let o=n.length;if(o<2||48!=n[0])throw new r("Invalid signature tag");if(n[1]!==o-2)throw new r("Invalid signature: incorrect length");const{d:s,l:a}=t.DER._parseInt(n.subarray(2)),{d:u,l:l}=t.DER._parseInt(a);if(l.length)throw new r("Invalid signature: left bytes after parsing");return{r:s,s:u}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?"0".concat(t):t},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return"30".concat(r(s+o+4),"02").concat(c).concat(i,"02").concat(a).concat(n)}};const u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(3),f=BigInt(4);function p(e){const t=function(e){const t=(0,s.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof r||"bigint"!==typeof r.beta||"function"!==typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,a=t.toBytes||((e,t,n)=>{const o=t.toAffine();return i.concatBytes(Uint8Array.from([4]),r.toBytes(o.x),r.toBytes(o.y))}),c=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function d(e){const{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),d(t.Gx)))throw new Error("bad generator point: equation left != right");function f(e){return"bigint"===typeof e&&u<e&&e<t.n}function p(e){if(!f(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(e){const{allowedPrivateKeyLengths:r,nByteLength:s,wrapPrivateKey:a,n:c}=t;if(r&&"bigint"!==typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!==typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*s,"0")}let u;try{u="bigint"===typeof e?e:i.bytesToNumberBE((0,o.ensureBytes)("private key",e,s))}catch(l){throw new Error("private key must be ".concat(s," bytes, hex or bigint, not ").concat(typeof e))}return a&&(u=n.mod(u,c)),p(u),u}const m=new Map;function y(e){if(!(e instanceof v))throw new Error("ProjectivePoint expected")}class v{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof v)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?v.ZERO:new v(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(v.fromAffine)}static fromHex(e){const t=v.fromAffine(c((0,o.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return v.BASE.multiply(g(e))}_setWindowSize(e){this._WINDOW_SIZE=e,m.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),o=d(e);if(!r.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){y(e);const{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(o,i)),u=r.eql(r.mul(n,a),r.mul(s,i));return c&&u}negate(){return new v(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,h),{px:o,py:s,pz:a}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,d=r.mul(o,o),f=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),l=r.mul(o,a),l=r.add(l,l),c=r.mul(e,l),u=r.mul(i,p),u=r.add(c,u),c=r.sub(f,u),u=r.add(f,u),u=r.mul(c,u),c=r.mul(g,c),l=r.mul(i,l),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,l),l=r.add(d,d),d=r.add(l,d),d=r.add(d,p),d=r.mul(d,g),u=r.add(u,d),p=r.mul(s,a),p=r.add(p,p),d=r.mul(p,g),c=r.sub(c,d),l=r.mul(p,f),l=r.add(l,l),l=r.add(l,l),new v(c,u,l)}add(e){y(e);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:c}=e;let u=r.ZERO,l=r.ZERO,d=r.ZERO;const f=t.a,p=r.mul(t.b,h);let g=r.mul(n,s),m=r.mul(i,a),b=r.mul(o,c),w=r.add(n,i),_=r.add(s,a);w=r.mul(w,_),_=r.add(g,m),w=r.sub(w,_),_=r.add(n,o);let E=r.add(s,c);return _=r.mul(_,E),E=r.add(g,b),_=r.sub(_,E),E=r.add(i,o),u=r.add(a,c),E=r.mul(E,u),u=r.add(m,b),E=r.sub(E,u),d=r.mul(f,_),u=r.mul(p,b),d=r.add(u,d),u=r.sub(m,d),d=r.add(m,d),l=r.mul(u,d),m=r.add(g,g),m=r.add(m,g),b=r.mul(f,b),_=r.mul(p,_),m=r.add(m,b),b=r.sub(g,b),b=r.mul(f,b),_=r.add(_,b),g=r.mul(m,_),l=r.add(l,g),g=r.mul(E,_),u=r.mul(w,u),u=r.sub(u,g),g=r.mul(w,m),d=r.mul(E,d),d=r.add(d,g),new v(u,l,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(v.ZERO)}wNAF(e){return w.wNAFCached(this,m,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(v.fromAffine)}))}multiplyUnsafe(e){const n=v.ZERO;if(e===u)return n;if(p(e),e===l)return this;const{endo:i}=t;if(!i)return w.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:a,k2:c}=i.splitScalar(e),d=n,h=n,f=this;for(;s>u||c>u;)s&l&&(d=d.add(f)),c&l&&(h=h.add(f)),f=f.double(),s>>=l,c>>=l;return o&&(d=d.negate()),a&&(h=h.negate()),h=new v(r.mul(h.px,i.beta),h.py,h.pz),d.add(h)}multiply(e){p(e);let n,i,o=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:c}=s.splitScalar(o);let{p:u,f:l}=this.wNAF(t),{p:d,f:h}=this.wNAF(c);u=w.constTimeNegate(e,u),d=w.constTimeNegate(a,d),d=new v(r.mul(d.px,s.beta),d.py,d.pz),n=u.add(d),i=l.add(h)}else{const{p:e,f:t}=this.wNAF(o);n=e,i=t}return v.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=v.BASE,i=(e,t)=>t!==u&&t!==l&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){const{px:t,py:n,pz:i}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(i));const s=r.mul(t,e),a=r.mul(n,e),c=r.mul(i,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===l)return!0;if(r)return r(v,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===l?this:r?r(v,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),a(v,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i.bytesToHex(this.toRawBytes(e))}}v.BASE=new v(t.Gx,t.Gy,r.ONE),v.ZERO=new v(r.ZERO,r.ONE,r.ZERO);const b=t.nBitLength,w=(0,s.wNAF)(v,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:v,normPrivateKeyToScalar:g,weierstrassEquation:d,isWithinCurveOrder:f}}function g(e,t){const r=e.ORDER;let n=u;for(let h=r-l;h%d===u;h/=d)n+=l;const i=n,o=d<<i-l-l,s=o*d,a=(r-l)/s,c=(a-l)/d,p=s-l,g=o,m=e.pow(t,a),y=e.pow(t,(a+l)/d);let v=(t,r)=>{let n=m,o=e.pow(r,p),s=e.sqr(o);s=e.mul(s,r);let a=e.mul(t,s);a=e.pow(a,c),a=e.mul(a,o),o=e.mul(a,r),s=e.mul(a,t);let u=e.mul(s,o);a=e.pow(u,g);let h=e.eql(a,e.ONE);o=e.mul(s,y),a=e.mul(u,n),s=e.cmov(o,s,h),u=e.cmov(a,u,h);for(let c=i;c>l;c--){let t=c-d;t=d<<t-l;let r=e.pow(u,t);const i=e.eql(r,e.ONE);o=e.mul(s,n),n=e.mul(n,n),r=e.mul(u,n),s=e.cmov(o,s,i),u=e.cmov(r,u,i)}return{isValid:h,value:s}};if(e.ORDER%f===h){const r=(e.ORDER-h)/f,n=e.sqrt(e.neg(t));v=(t,i)=>{let o=e.sqr(i);const s=e.mul(t,i);o=e.mul(o,s);let a=e.pow(o,r);a=e.mul(a,s);const c=e.mul(a,n),u=e.mul(e.sqr(a),i),l=e.eql(u,t);return{isValid:l,value:e.cmov(c,a,l)}}}return v}t.weierstrassPoints=p,t.weierstrass=function(e){const r=function(e){const t=(0,s.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:a,n:c}=r,d=a.BYTES+1,h=2*a.BYTES+1;function f(e){return n.mod(e,c)}function g(e){return n.invert(e,c)}const{ProjectivePoint:m,normPrivateKeyToScalar:y,weierstrassEquation:v,isWithinCurveOrder:b}=p({...r,toBytes(e,t,r){const n=t.toAffine(),o=a.toBytes(n.x),s=i.concatBytes;return r?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,a.toBytes(n.y))},fromBytes(e){const t=e.length,r=e[0],n=e.subarray(1);if(t!==d||2!==r&&3!==r){if(t===h&&4===r){return{x:a.fromBytes(n.subarray(0,a.BYTES)),y:a.fromBytes(n.subarray(a.BYTES,2*a.BYTES))}}throw new Error("Point of length ".concat(t," was invalid. Expected ").concat(d," compressed bytes or ").concat(h," uncompressed bytes"))}{const e=i.bytesToNumberBE(n);if(!(u<(o=e)&&o<a.ORDER))throw new Error("Point is not on curve");const t=v(e);let s=a.sqrt(t);return 1===(1&r)!==((s&l)===l)&&(s=a.neg(s)),{x:e,y:s}}var o}}),w=e=>i.bytesToHex(i.numberToBytesBE(e,r.nByteLength));function _(e){return e>c>>l}const E=(e,t,r)=>i.bytesToNumberBE(e.slice(t,r));class A{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const t=r.nByteLength;return e=(0,o.ensureBytes)("compactSignature",e,2*t),new A(E(e,0,t),E(e,t,2*t))}static fromDER(e){const{r:r,s:n}=t.DER.toSig((0,o.ensureBytes)("DER",e));return new A(r,n)}assertValidity(){if(!b(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!b(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new A(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:n,recovery:i}=this,s=I((0,o.ensureBytes)("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const c=2===i||3===i?t+r.n:t;if(c>=a.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=0===(1&i)?"02":"03",l=m.fromHex(u+w(c)),d=g(c),h=f(-s*d),p=f(n*d),y=m.BASE.multiplyAndAddUnsafe(l,h,p);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const S={isValidPrivateKey(e){try{return y(e),!0}catch(t){return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const e=n.getMinHashLength(r.n);return n.mapHashToField(r.randomBytes(e),r.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function k(e){const t=i.isBytes(e),r="string"===typeof e,n=(t||r)&&e.length;return t?n===d||n===h:r?n===2*d||n===2*h:e instanceof m}const x=r.bits2int||function(e){const t=i.bytesToNumberBE(e),n=8*e.length-r.nBitLength;return n>0?t>>BigInt(n):t},I=r.bits2int_modN||function(e){return f(x(e))},T=i.bitMask(r.nBitLength);function P(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(u<=e&&e<T))throw new Error("bigint expected < 2^".concat(r.nBitLength));return i.numberToBytesBE(e,r.nByteLength)}function R(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;if(["recovered","canonical"].some((e=>e in n)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:c}=r;let{lowS:d,prehash:h,extraEntropy:p}=n;null==d&&(d=!0),e=(0,o.ensureBytes)("msgHash",e),h&&(e=(0,o.ensureBytes)("prehashed msgHash",s(e)));const v=I(e),w=y(t),E=[P(w),P(v)];if(null!=p){const e=!0===p?c(a.BYTES):p;E.push((0,o.ensureBytes)("extraEntropy",e))}const S=i.concatBytes(...E),k=v;return{seed:S,k2sig:function(e){const t=x(e);if(!b(t))return;const r=g(t),n=m.BASE.multiply(t).toAffine(),i=f(n.x);if(i===u)return;const o=f(r*f(k+i*w));if(o===u)return;let s=(n.x===i?0:2)|Number(n.y&l),a=o;return d&&_(o)&&(a=function(e){return _(e)?f(-e):e}(o),s^=1),new A(i,a,s)}}}const C={lowS:r.lowS,prehash:!1},B={lowS:r.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(k(e))throw new Error("first arg must be private key");if(!k(t))throw new Error("second arg must be public key");return m.fromHex(t).multiply(y(e)).toRawBytes(r)},sign:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C;const{seed:o,k2sig:s}=R(e,t,n),a=r;return i.createHmacDrbg(a.hash.outputLen,a.nByteLength,a.hmac)(o,s)},verify:function(e,n,s){var a;let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:B;const u=e;if(n=(0,o.ensureBytes)("msgHash",n),s=(0,o.ensureBytes)("publicKey",s),"strict"in c)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:d}=c;let h,p;try{if("string"===typeof u||i.isBytes(u))try{h=A.fromDER(u)}catch(k){if(!(k instanceof t.DER.Err))throw k;h=A.fromCompact(u)}else{if("object"!==typeof u||"bigint"!==typeof u.r||"bigint"!==typeof u.s)throw new Error("PARSE");{const{r:e,s:t}=u;h=new A(e,t)}}p=m.fromHex(s)}catch(x){if("PARSE"===x.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;d&&(n=r.hash(n));const{r:y,s:v}=h,b=I(n),w=g(v),_=f(b*w),E=f(y*w),S=null===(a=m.BASE.multiplyAndAddUnsafe(p,_,E))||void 0===a?void 0:a.toAffine();return!!S&&f(S.x)===y},ProjectivePoint:m,Signature:A,utils:S}},t.SWUFpSqrtRatio=g,t.mapToCurveSimpleSWU=function(e,t){if(n.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=g(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,o,s,a,c,u,l,d;i=e.sqr(n),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),s=e.add(o,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),a=e.mul(a,t.A),o=e.sqr(s),u=e.sqr(a),c=e.mul(u,t.A),o=e.add(o,c),o=e.mul(o,s),u=e.mul(u,a),c=e.mul(u,t.B),o=e.add(o,c),l=e.mul(i,s);const{isValid:h,value:f}=r(o,u);d=e.mul(i,n),d=e.mul(d,f),l=e.cmov(l,s,h),d=e.cmov(d,f,h);const p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),l=e.div(l,a),{x:l,y:d}}}},6088:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const n=r(4304),i=r(4361),o=r(7701),s=r(2846),a=r(3500),c=r(4464),u=r(7525),l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(e,t)=>(e+t/f)/t;function g(e){const t=l,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),d=e*e*e%t,h=d*d*e%t,p=(0,o.pow2)(h,r,t)*h%t,g=(0,o.pow2)(p,r,t)*h%t,y=(0,o.pow2)(g,f,t)*d%t,v=(0,o.pow2)(y,i,t)*y%t,b=(0,o.pow2)(v,s,t)*v%t,w=(0,o.pow2)(b,c,t)*b%t,_=(0,o.pow2)(w,u,t)*w%t,E=(0,o.pow2)(_,c,t)*b%t,A=(0,o.pow2)(E,r,t)*h%t,S=(0,o.pow2)(A,a,t)*v%t,k=(0,o.pow2)(S,n,t)*d%t,x=(0,o.pow2)(k,f,t);if(!m.eql(m.sqr(x),e))throw new Error("Cannot find square root");return x}const m=(0,o.Field)(l,void 0,void 0,{sqrt:g});t.secp256k1=(0,u.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=d,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),c=p(s*e,t),u=p(-n*e,t);let l=(0,o.mod)(e-c*r-u*i,t),f=(0,o.mod)(-c*n-u*s,t);const g=l>a,m=f>a;if(g&&(l=t-l),m&&(f=t-f),l>a||f>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:g,k1:l,k2neg:m,k2:f}}}},n.sha256);const y=BigInt(0),v=e=>"bigint"===typeof e&&y<e&&e<l,b=e=>"bigint"===typeof e&&y<e&&e<d,w={};function _(e){let t=w[e];if(void 0===t){const r=(0,n.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=(0,a.concatBytes)(r,r),w[e]=t}for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(0,n.sha256)((0,a.concatBytes)(t,...i))}const E=e=>e.toRawBytes(!0).slice(1),A=e=>(0,a.numberToBytesBE)(e,32),S=e=>(0,o.mod)(e,l),k=e=>(0,o.mod)(e,d),x=t.secp256k1.ProjectivePoint,I=(e,t,r)=>x.BASE.multiplyAndAddUnsafe(e,t,r);function T(e){let r=t.secp256k1.utils.normPrivateKeyToScalar(e),n=x.fromPrivateKey(r);return{scalar:n.hasEvenY()?r:k(-r),bytes:E(n)}}function P(e){if(!v(e))throw new Error("bad x: need 0 < x < p");const t=S(e*e);let r=g(S(t*e+BigInt(7)));r%f!==y&&(r=S(-r));const n=new x(e,r,h);return n.assertValidity(),n}function R(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k((0,a.bytesToNumberBE)(_("BIP0340/challenge",...t)))}function C(e){return T(e).bytes}function B(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.randomBytes)(32);const n=(0,a.ensureBytes)("message",e),{bytes:o,scalar:s}=T(t),c=(0,a.ensureBytes)("auxRand",r,32),u=A(s^(0,a.bytesToNumberBE)(_("BIP0340/aux",c))),l=_("BIP0340/nonce",u,o,n),d=k((0,a.bytesToNumberBE)(l));if(d===y)throw new Error("sign failed: k is zero");const{bytes:h,scalar:f}=T(d),p=R(h,o,n),g=new Uint8Array(64);if(g.set(h,0),g.set(A(k(f+p*s)),32),!M(g,n,o))throw new Error("sign: Invalid signature produced");return g}function M(e,t,r){const n=(0,a.ensureBytes)("signature",e,64),i=(0,a.ensureBytes)("message",t),o=(0,a.ensureBytes)("publicKey",r,32);try{const e=P((0,a.bytesToNumberBE)(o)),t=(0,a.bytesToNumberBE)(n.subarray(0,32));if(!v(t))return!1;const r=(0,a.bytesToNumberBE)(n.subarray(32,64));if(!b(r))return!1;const s=R(A(t),E(e),i),c=I(e,r,k(-s));return!(!c||!c.hasEvenY()||c.toAffine().x!==t)}catch(s){return!1}}t.schnorr={getPublicKey:C,sign:B,verify:M,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:P,pointToBytes:E,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:_,mod:o.mod}};const N=(()=>(0,c.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),O=(()=>(0,s.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}))(),D=(()=>(0,c.createHasher)(t.secp256k1.ProjectivePoint,(e=>{const{x:t,y:r}=O(m.create(e[0]));return N(t,r)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256}))();t.hashToCurve=D.hashToCurve,t.encodeToCurve=D.encodeToCurve},4337:(e,t)=>{"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: ".concat(e))}function n(e){if("boolean"!==typeof e)throw new Error("Expected boolean, not ".concat(e))}function i(e){if(!((t=e)instanceof Uint8Array||null!=t&&"object"===typeof t&&"Uint8Array"===t.constructor.name))throw new Error("Expected Uint8Array");for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(n.length>0&&!n.includes(e.length))throw new Error("Expected Uint8Array of length ".concat(n,", not of length=").concat(e.length))}function o(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function s(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least ".concat(r))}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=r,t.bool=n,t.bytes=i,t.hash=o,t.exists=s,t.output=a;const c={number:r,bool:n,bytes:i,hash:o,exists:s,output:a};t.default=c},747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;const n=r(4337),i=r(4361);class o extends i.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){(0,n.exists)(this);const{view:t,buffer:r,blockLen:o}=this,s=(e=(0,i.toBytes)(e)).length;for(let n=0;n<s;){const a=Math.min(o-this.pos,s-n);if(a!==o)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===o&&(this.process(t,0),this.pos=0);else{const t=(0,i.createView)(e);for(;o<=s-n;n+=o)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.exists)(this),(0,n.output)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:o,isLE:s}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(r,0),a=0);for(let n=a;n<o;n++)t[n]=0;!function(e,t,r,n){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,o-8,BigInt(8*this.length),s),this.process(r,0);const c=(0,i.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let n=0;n<l;n++)c.setUint32(4*n,d[n],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}t.SHA2=o},4995:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.add=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=t.split=t.fromBig=void 0;const r=BigInt(2**32-1),n=BigInt(32);function i(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&r),l:Number(e>>n&r)}:{h:0|Number(e>>n&r),l:0|Number(e&r)}}function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let o=0;o<e.length;o++){const{h:s,l:a}=i(e[o],t);[r[o],n[o]]=[s,a]}return[r,n]}t.fromBig=i,t.split=o;const s=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);t.toBig=s;const a=(e,t,r)=>e>>>r;t.shrSH=a;const c=(e,t,r)=>e<<32-r|t>>>r;t.shrSL=c;const u=(e,t,r)=>e>>>r|t<<32-r;t.rotrSH=u;const l=(e,t,r)=>e<<32-r|t>>>r;t.rotrSL=l;const d=(e,t,r)=>e<<64-r|t>>>r-32;t.rotrBH=d;const h=(e,t,r)=>e>>>r-32|t<<64-r;t.rotrBL=h;const f=(e,t)=>t;t.rotr32H=f;const p=(e,t)=>e;t.rotr32L=p;const g=(e,t,r)=>e<<r|t>>>32-r;t.rotlSH=g;const m=(e,t,r)=>t<<r|e>>>32-r;t.rotlSL=m;const y=(e,t,r)=>t<<r-32|e>>>64-r;t.rotlBH=y;const v=(e,t,r)=>e<<r-32|t>>>64-r;function b(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}}t.rotlBL=v,t.add=b;const w=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t.add3L=w;const _=(e,t,r,n)=>t+r+n+(e/2**32|0)|0;t.add3H=_;const E=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);t.add4L=E;const A=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0;t.add4H=A;const S=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);t.add5L=S;const k=(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0;t.add5H=k;const x={fromBig:i,split:o,toBig:s,shrSH:a,shrSL:c,rotrSH:u,rotrSL:l,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:m,rotlBH:y,rotlBL:v,add:b,add3L:w,add3H:_,add4L:E,add4H:A,add5H:k,add5L:S};t.default=x},6164:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},5968:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const n=r(4337),i=r(4361);class o extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.hash)(e);const r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,s=new Uint8Array(o);s.set(r.length>o?e.create().update(r).digest():r);for(let n=0;n<s.length;n++)s[n]^=54;this.iHash.update(s),this.oHash=e.create();for(let n=0;n<s.length;n++)s[n]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,n.exists)(this),this.iHash.update(e),this}digestInto(e){(0,n.exists)(this),(0,n.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=o;t.hmac=(e,t,r)=>new o(e,t).update(r).digest(),t.hmac.create=(e,t)=>new o(e,t)},4304:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const n=r(747),i=r(4361),o=(e,t,r)=>e&t^e&r^t&r,s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class u extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let i=0;i<16;i++,t+=4)c[i]=e.getUint32(t,!1);for(let o=16;o<64;o++){const e=c[o-15],t=c[o-2],r=(0,i.rotr)(e,7)^(0,i.rotr)(e,18)^e>>>3,n=(0,i.rotr)(t,17)^(0,i.rotr)(t,19)^t>>>10;c[o]=n+c[o-7]+r+c[o-16]|0}let{A:r,B:n,C:a,D:u,E:l,F:d,G:h,H:f}=this;for(let g=0;g<64;g++){const e=f+((0,i.rotr)(l,6)^(0,i.rotr)(l,11)^(0,i.rotr)(l,25))+((p=l)&d^~p&h)+s[g]+c[g]|0,t=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+o(r,n,a)|0;f=h,h=d,d=l,l=u+e|0,u=a,a=n,n=r,r=e+t|0}var p;r=r+this.A|0,n=n+this.B|0,a=a+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,n,a,u,l,d,h,f)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class l extends u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,i.wrapConstructor)((()=>new u)),t.sha224=(0,i.wrapConstructor)((()=>new l))},7883:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=t.keccakP=void 0;const n=r(4337),i=r(4995),o=r(4361),[s,a,c]=[[],[],[]],u=BigInt(0),l=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let A=0,S=l,k=1,x=0;A<24;A++){[k,x]=[x,(2*k+3*x)%5],s.push(2*(5*x+k)),a.push((A+1)*(A+2)/2%64);let e=u;for(let t=0;t<7;t++)S=(S<<l^(S>>h)*p)%f,S&d&&(e^=l<<(l<<BigInt(t))-l);c.push(e)}const[g,m]=(0,i.split)(c,!0),y=(e,t,r)=>r>32?(0,i.rotlBH)(e,t,r):(0,i.rotlSH)(e,t,r),v=(e,t,r)=>r>32?(0,i.rotlBL)(e,t,r):(0,i.rotlSL)(e,t,r);function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)r[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,i=(n+2)%10,o=r[i],s=r[i+1],a=y(o,s,1)^r[t],c=v(o,s,1)^r[t+1];for(let r=0;r<50;r+=10)e[n+r]^=a,e[n+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=a[r],o=y(t,i,n),c=v(t,i,n),u=s[r];t=e[u],i=e[u+1],e[u]=o,e[u+1]=c}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)r[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~r[(t+2)%10]&r[(t+4)%10]}e[0]^=g[n],e[1]^=m[n]}r.fill(0)}t.keccakP=b;class w extends o.Hash{constructor(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,o.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,n.exists)(this);const{blockLen:t,state:r}=this,i=(e=(0,o.toBytes)(e)).length;for(let n=0;n<i;){const o=Math.min(t-this.pos,i-n);for(let t=0;t<o;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!==(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.exists)(this,!1),(0,n.bytes)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.output)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new w(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}t.Keccak=w;const _=(e,t,r)=>(0,o.wrapConstructor)((()=>new w(t,e,r)));t.sha3_224=_(6,144,28),t.sha3_256=_(6,136,32),t.sha3_384=_(6,104,48),t.sha3_512=_(6,72,64),t.keccak_224=_(1,144,28),t.keccak_256=_(1,136,32),t.keccak_384=_(1,104,48),t.keccak_512=_(1,72,64);const E=(e,t,r)=>(0,o.wrapXOFConstructorWithOpts)((function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new w(t,e,void 0===n.dkLen?r:n.dkLen,!0)}));t.shake128=E(31,168,16),t.shake256=E(31,136,32)},4361:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const n=r(6164);t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);function i(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));t.bytesToHex=function(e){if(!i(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=o[e[r]];return t};const s={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function a(e){return e>=s._0&&e<=s._9?e-s._0:e>=s._A&&e<=s._F?e-(s._A-10):e>=s._a&&e<=s._f?e-(s._a-10):void 0}t.hexToBytes=function(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const t=a(e.charCodeAt(o)),r=a(e.charCodeAt(o+1));if(void 0===t||void 0===r){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}n[i]=16*t+r}return n};function c(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got ".concat(typeof e));return new Uint8Array((new TextEncoder).encode(e))}function u(e){if("string"===typeof e&&(e=c(e)),!i(e))throw new Error("expected Uint8Array, got ".concat(typeof e));return e}t.nextTick=async()=>{},t.asyncLoop=async function(e,r,n){let i=Date.now();for(let o=0;o<e;o++){n(o);const e=Date.now()-i;e>=0&&e<r||(await(0,t.nextTick)(),i+=e)}},t.utf8ToBytes=c,t.toBytes=u,t.concatBytes=function(){let e=0;for(let r=0;r<arguments.length;r++){const t=r<0||arguments.length<=r?void 0:arguments[r];if(!i(t))throw new Error("Uint8Array expected");e+=t.length}const t=new Uint8Array(e);for(let r=0,n=0;r<arguments.length;r++){const e=r<0||arguments.length<=r?void 0:arguments[r];t.set(e,n),n+=e.length}return t};t.Hash=class{clone(){return this._cloneInto()}};const l={}.toString;t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==l.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(u(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(u(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.randomBytes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(n.crypto&&"function"===typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},7206:e=>{"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),n=0,i=2,o=!0;for(;i<arguments.length;)r[n++]=arguments[i++];return new Promise((function(i,s){r[n]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(a){o&&(o=!1,s(a))}}))}},1:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),i=new Array(123),o=0;o<64;)i[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(e,t,r){for(var i,o=null,s=[],a=0,c=0;t<r;){var u=e[t++];switch(c){case 0:s[a++]=n[u>>2],i=(3&u)<<4,c=1;break;case 1:s[a++]=n[i|u>>4],i=(15&u)<<2,c=2;break;case 2:s[a++]=n[i|u>>6],s[a++]=n[63&u],c=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=n[i],s[a++]=61,1===c&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(e,t,r){for(var n,o=r,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=i[u]))throw Error(s);switch(a){case 0:n=u,a=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,a=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,a=3;break;case 3:t[r++]=(3&n)<<6|u,a=0}}if(1===a)throw Error(s);return r-o},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},3297:e=>{"use strict";function t(e,r){"string"===typeof e&&(r=e,e=void 0);var n=[];function i(e){if("string"!==typeof e){var r=o();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var s=Object.keys(e),a=new Array(s.length+1),c=new Array(s.length),u=0;u<s.length;)a[u]=s[u],c[u]=e[s[u++]];return a[u]=r,Function.apply(null,a).apply(null,c)}return Function(r)()}for(var l=new Array(arguments.length-1),d=0;d<l.length;)l[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var r=l[d++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"})),d!==l.length)throw Error("parameter count mismatch");return n.push(e),i}function o(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=o,i}e.exports=t,t.verbose=!1},7111:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},7635:(e,t,r)=>{"use strict";e.exports=o;var n=r(7206),i=r(7172)("fs");function o(e,t,r){return"function"===typeof t?(r=t,t={}):t||(t={}),r?!t.xhr&&i&&i.readFile?i.readFile(e,(function(n,i){return n&&"undefined"!==typeof XMLHttpRequest?o.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))})):o.xhr(e,t,r):n(o,this,e,t)}o.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!==typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},802:e=>{"use strict";function t(e){return"undefined"!==typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function o(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(e,t,r,n){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,n)}}function s(e,t,r){var n=e(t,r),i=2*(n>>31)+1,o=n>>>23&255,s=8388607&n;return 255===o?s?NaN:i*(1/0):0===o?1401298464324817e-60*i*s:i*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=s.bind(null,i),e.readFloatBE=s.bind(null,o)}(),"undefined"!==typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function o(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(e,t,r,n,i,o){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,i,o+t),e(1/n>0?0:2147483648,i,o+r);else if(isNaN(n))e(0,i,o+t),e(2146959360,i,o+r);else if(n>17976931348623157e292)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,i,o+t),e((s<<31|a/4294967296)>>>0,i,o+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,i,o+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,i,o+r)}}}function s(e,t,r,n,i){var o=e(n,i+t),s=e(n,i+r),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+o;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=s.bind(null,i,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7172:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},7468:(e,t)=>{"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),i="";r&&(i=t.shift()+"/");for(var o=0;o<t.length;)".."===t[o]?o>0&&".."!==t[o-1]?t.splice(--o,2):r?t.splice(o,1):++o:"."===t[o]?t.splice(o,1):++o;return i+t.join("/")};r.resolve=function(e,t,r){return r||(t=i(t)),n(t)?t:(r||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},8236:e=>{"use strict";e.exports=function(e,t,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(r){if(r<1||r>i)return e(r);s+r>n&&(o=e(n),s=0);var a=t.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},3861:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296===(64512&r)&&56320===(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,o=[],s=0;t<r;)(n=e[t++])<128?o[s++]=n:n>191&&n<224?o[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(n>>10),o[s++]=56320+(1023&n)):o[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,r){for(var n,i,o=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296===(64512&n)&&56320===(64512&(i=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&i),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-o}},4848:(e,t)=>{"use strict";function r(e){if(!Number.isSafeInteger(e))throw new Error("Wrong integer: ".concat(e))}function n(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}function i(){const e=e=>e,t=(e,t)=>r=>e(t(r));for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return{encode:n.map((e=>e.encode)).reduceRight(t,e),decode:n.map((e=>e.decode)).reduce(t,e)}}function o(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(r(t),t<0||t>=e.length)throw new Error("Digit index outside alphabet: ".concat(t," (alphabet: ").concat(e.length,")"));return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!==typeof t)throw new Error("alphabet.decode: not string element=".concat(t));const r=e.indexOf(t);if(-1===r)throw new Error('Unknown letter: "'.concat(t,'". Allowed: ').concat(e));return r}))}}}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!==typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!==typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!==typeof e)throw new Error("join.encode: non-string input=".concat(e));return t.join(e)},decode:t=>{if("string"!==typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";if(r(e),"string"!==typeof t)throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&"string"!==typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!==typeof e)throw new Error("padding.encode: non-string input=".concat(e));for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&"string"!==typeof r[0])throw new Error("padding.encode input should be array of strings");for(let e of r)if("string"!==typeof e)throw new Error("padding.decode: non-string input=".concat(e));let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function c(e){if("function"!==typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function u(e,t,n){if(t<2)throw new Error("convertRadix: wrong from=".concat(t,", base cannot be less than 2"));if(n<2)throw new Error("convertRadix: wrong to=".concat(n,", base cannot be less than 2"));if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let i=0;const o=[],s=Array.from(e);for(s.forEach((e=>{if(r(e),e<0||e>=t)throw new Error("Wrong integer: ".concat(e))}));;){let e=0,r=!0;for(let o=i;o<s.length;o++){const a=s[o],c=t*e+a;if(!Number.isSafeInteger(c)||t*e/t!==e||c-a!==t*e)throw new Error("convertRadix: carry overflow");e=c%n;const u=Math.floor(c/n);if(s[o]=u,!Number.isSafeInteger(u)||u*n+e!==c)throw new Error("convertRadix: carry overflow");r&&(u?r=!1:i=o)}if(o.push(e),r)break}for(let r=0;r<e.length-1&&0===e[r];r++)o.push(0);return o.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64=t.base32crockford=t.base32hex=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=r;const l=(e,t)=>t?l(t,e%t):e,d=(e,t)=>e+(t-l(e,t));function h(e,t,n,i){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error("convertRadix2: wrong from=".concat(t));if(n<=0||n>32)throw new Error("convertRadix2: wrong to=".concat(n));if(d(t,n)>32)throw new Error("convertRadix2: carry overflow from=".concat(t," to=").concat(n," carryBits=").concat(d(t,n)));let o=0,s=0;const a=2**n-1,c=[];for(const u of e){if(r(u),u>=2**t)throw new Error("convertRadix2: invalid data word=".concat(u," from=").concat(t));if(o=o<<t|u,s+t>32)throw new Error("convertRadix2: carry overflow pos=".concat(s," from=").concat(t));for(s+=t;s>=n;s-=n)c.push((o>>s-n&a)>>>0);o&=2**s-1}if(o=o<<n-s&a,!i&&s>=t)throw new Error("Excess padding");if(!i&&o)throw new Error("Non-zero padding: ".concat(o));return i&&s>0&&c.push(o>>>0),c}function f(e){return r(e),{encode:t=>{if(!n(t))throw new Error("radix.encode input should be Uint8Array");return u(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!==typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(u(t,e,256))}}}function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(d(8,e)>32||d(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw new Error("radix2.encode input should be Uint8Array");return h(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&"number"!==typeof r[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(h(r,e,8,t))}}}function g(e){if("function"!==typeof e)throw new Error("unsafeWrapper fn should be function");return function(){try{for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(null,r)}catch(i){}}}function m(e,t){if(r(e),"function"!==typeof t)throw new Error("checksum fn should be function");return{encode(r){if(!n(r))throw new Error("checksum.encode: input should be Uint8Array");const i=t(r).slice(0,e),o=new Uint8Array(r.length+e);return o.set(r),o.set(i,r.length),o},decode(r){if(!n(r))throw new Error("checksum.decode: input should be Uint8Array");const i=r.slice(0,-e),o=t(i).slice(0,e),s=r.slice(-e);for(let t=0;t<e;t++)if(o[t]!==s[t])throw new Error("Invalid checksum");return i}}}t.utils={alphabet:o,chain:i,checksum:m,convertRadix:u,convertRadix2:h,radix:f,radix2:p,join:s,padding:a},t.base16=i(p(4),o("0123456789ABCDEF"),s("")),t.base32=i(p(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),a(5),s("")),t.base32hex=i(p(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),a(5),s("")),t.base32crockford=i(p(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),s(""),c((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),t.base64=i(p(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),a(6),s("")),t.base64url=i(p(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),a(6),s("")),t.base64urlnopad=i(p(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),s(""));const y=e=>i(f(58),o(e),s(""));t.base58=y("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=y("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=y("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const v=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let r="";for(let n=0;n<e.length;n+=8){const i=e.subarray(n,n+8);r+=t.base58.encode(i).padStart(v[i.length],"1")}return r},decode(e){let r=[];for(let n=0;n<e.length;n+=11){const i=e.slice(n,n+11),o=v.indexOf(i.length),s=t.base58.decode(i);for(let e=0;e<s.length-o;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");r=r.concat(Array.from(s.slice(s.length-o)))}return Uint8Array.from(r)}};t.createBase58check=e=>i(m(4,(t=>e(e(t)))),t.base58),t.base58check=t.createBase58check;const b=i(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),s("")),w=[996825010,642813549,513874426,1027748829,705979059];function _(e){const t=e>>25;let r=(33554431&e)<<5;for(let n=0;n<w.length;n++)1===(t>>n&1)&&(r^=w[n]);return r}function E(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=e.length;let i=1;for(let o=0;o<n;o++){const t=e.charCodeAt(o);if(t<33||t>126)throw new Error("Invalid prefix (".concat(e,")"));i=_(i)^t>>5}i=_(i);for(let o=0;o<n;o++)i=_(i)^31&e.charCodeAt(o);for(let o of t)i=_(i)^o;for(let o=0;o<6;o++)i=_(i);return i^=r,b.encode(h([i%2**30],30,5,!1))}function A(e){const t="bech32"===e?1:734539939,r=p(5),n=r.decode,i=r.encode,o=g(n);function s(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;if("string"!==typeof e)throw new Error("bech32.decode input should be string, not ".concat(typeof e));if(e.length<8||!1!==r&&e.length>r)throw new TypeError("Wrong string length: ".concat(e.length," (").concat(e,"). Expected (8..").concat(r,")"));const n=e.toLowerCase();if(e!==n&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const i=(e=n).lastIndexOf("1");if(0===i||-1===i)throw new Error('Letter "1" must be present between prefix and data only');const o=e.slice(0,i),s=e.slice(i+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=b.decode(s).slice(0,-6),c=E(o,a,t);if(!s.endsWith(c))throw new Error("Invalid checksum in ".concat(e,': expected "').concat(c,'"'));return{prefix:o,words:a}}return{encode:function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;if("string"!==typeof e)throw new Error("bech32.encode prefix should be string, not ".concat(typeof e));if(!Array.isArray(r)||r.length&&"number"!==typeof r[0])throw new Error("bech32.encode words should be array of numbers, not ".concat(typeof r));const i=e.length+7+r.length;if(!1!==n&&i>n)throw new TypeError("Length ".concat(i," exceeds limit ").concat(n));const o=e.toLowerCase(),s=E(o,r,t);return"".concat(o,"1").concat(b.encode(r)).concat(s)},decode:s,decodeToBytes:function(e){const{prefix:t,words:r}=s(e,!1);return{prefix:t,words:r,bytes:n(r)}},decodeUnsafe:g(s),fromWords:n,fromWordsUnsafe:o,toWords:i}}t.bech32=A("bech32"),t.bech32m=A("bech32m"),t.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},t.hex=i(p(4),o("0123456789abcdef"),s(""),c((e=>{if("string"!==typeof e||e.length%2)throw new TypeError("hex.decode: expected string, got ".concat(typeof e," with length ").concat(e.length));return e.toLowerCase()})));const S={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},k="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";t.bytesToString=(e,t)=>{if("string"!==typeof e||!S.hasOwnProperty(e))throw new TypeError(k);if(!n(t))throw new TypeError("bytesToString() expects Uint8Array");return S[e].encode(t)},t.str=t.bytesToString;t.stringToBytes=(e,t)=>{if(!S.hasOwnProperty(e))throw new TypeError(k);if("string"!==typeof t)throw new TypeError("stringToBytes() expects string");return S[e].decode(t)},t.bytes=t.stringToBytes},2009:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=a(e),s=o[0],c=o[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,c)),l=0,d=c>0?s-4:s;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===c&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===c&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(c(e,a,a+s>u?u:a+s));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},518:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"===typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(6601).Buffer}catch(T){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function u(e,t,r,i){for(var o=0,s=0,a=Math.min(e.length,r),c=t;c<a;c++){var u=e.charCodeAt(c)-48;o*=i,s=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&s<i,"Invalid character"),o+=s}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"===typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(e.length-t)%2===0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=u(e,l,e.length,t),l=0;l<s;l++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){l(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(T){o.prototype.inspect=d}else o.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),r=0!==o||s!==this.length-1?h[6-c.length]+c+r:c+r}for(0!==o&&(r=o.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=f[e],l=p[e];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var g=d.modrn(l).toString(e);r=(d=d.idivn(l)).isZero()?g+r:h[u-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}o.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,i),s},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===o?(r<e.length&&(e[r++]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===o?(r>=0&&(e[r--]=s>>24&255),n=0,o=0):(n=s>>>24,o+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,o,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,h=l>>>13,f=0|s[1],p=8191&f,g=f>>>13,m=0|s[2],y=8191&m,v=m>>>13,b=0|s[3],w=8191&b,_=b>>>13,E=0|s[4],A=8191&E,S=E>>>13,k=0|s[5],x=8191&k,I=k>>>13,T=0|s[6],P=8191&T,R=T>>>13,C=0|s[7],B=8191&C,M=C>>>13,N=0|s[8],O=8191&N,D=N>>>13,L=0|s[9],U=8191&L,F=L>>>13,j=0|a[0],q=8191&j,z=j>>>13,H=0|a[1],K=8191&H,V=H>>>13,G=0|a[2],W=8191&G,Q=G>>>13,J=0|a[3],Z=8191&J,Y=J>>>13,X=0|a[4],$=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,ge=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(u+(n=Math.imul(d,q))|0)+((8191&(i=(i=Math.imul(d,z))+Math.imul(h,q)|0))<<13)|0;u=((o=Math.imul(h,z))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,q),i=(i=Math.imul(p,z))+Math.imul(g,q)|0,o=Math.imul(g,z);var ye=(u+(n=n+Math.imul(d,K)|0)|0)+((8191&(i=(i=i+Math.imul(d,V)|0)+Math.imul(h,K)|0))<<13)|0;u=((o=o+Math.imul(h,V)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,q),i=(i=Math.imul(y,z))+Math.imul(v,q)|0,o=Math.imul(v,z),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(g,K)|0,o=o+Math.imul(g,V)|0;var ve=(u+(n=n+Math.imul(d,W)|0)|0)+((8191&(i=(i=i+Math.imul(d,Q)|0)+Math.imul(h,W)|0))<<13)|0;u=((o=o+Math.imul(h,Q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(_,q)|0,o=Math.imul(_,z),n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,Q)|0)+Math.imul(g,W)|0,o=o+Math.imul(g,Q)|0;var be=(u+(n=n+Math.imul(d,Z)|0)|0)+((8191&(i=(i=i+Math.imul(d,Y)|0)+Math.imul(h,Z)|0))<<13)|0;u=((o=o+Math.imul(h,Y)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(A,q),i=(i=Math.imul(A,z))+Math.imul(S,q)|0,o=Math.imul(S,z),n=n+Math.imul(w,K)|0,i=(i=i+Math.imul(w,V)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,Q)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,Q)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,Y)|0;var we=(u+(n=n+Math.imul(d,$)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,$)|0))<<13)|0;u=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(x,q),i=(i=Math.imul(x,z))+Math.imul(I,q)|0,o=Math.imul(I,z),n=n+Math.imul(A,K)|0,i=(i=i+Math.imul(A,V)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,V)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,Q)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,Q)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,ee)|0;var _e=(u+(n=n+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((o=o+Math.imul(h,ne)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(P,q),i=(i=Math.imul(P,z))+Math.imul(R,q)|0,o=Math.imul(R,z),n=n+Math.imul(x,K)|0,i=(i=i+Math.imul(x,V)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,V)|0,n=n+Math.imul(A,W)|0,i=(i=i+Math.imul(A,Q)|0)+Math.imul(S,W)|0,o=o+Math.imul(S,Q)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,o=o+Math.imul(g,ne)|0;var Ee=(u+(n=n+Math.imul(d,oe)|0)|0)+((8191&(i=(i=i+Math.imul(d,se)|0)+Math.imul(h,oe)|0))<<13)|0;u=((o=o+Math.imul(h,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(B,q),i=(i=Math.imul(B,z))+Math.imul(M,q)|0,o=Math.imul(M,z),n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,V)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,V)|0,n=n+Math.imul(x,W)|0,i=(i=i+Math.imul(x,Q)|0)+Math.imul(I,W)|0,o=o+Math.imul(I,Q)|0,n=n+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,se)|0;var Ae=(u+(n=n+Math.imul(d,ce)|0)|0)+((8191&(i=(i=i+Math.imul(d,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((o=o+Math.imul(h,ue)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(D,q)|0,o=Math.imul(D,z),n=n+Math.imul(B,K)|0,i=(i=i+Math.imul(B,V)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,V)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,Q)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,Q)|0,n=n+Math.imul(x,Z)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,Y)|0,n=n+Math.imul(A,$)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(y,oe)|0,i=(i=i+Math.imul(y,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(g,ce)|0,o=o+Math.imul(g,ue)|0;var Se=(u+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(U,q),i=(i=Math.imul(U,z))+Math.imul(F,q)|0,o=Math.imul(F,z),n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,V)|0,n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,Q)|0)+Math.imul(M,W)|0,o=o+Math.imul(M,Q)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(S,re)|0,o=o+Math.imul(S,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,ue)|0)+Math.imul(v,ce)|0,o=o+Math.imul(v,ue)|0,n=n+Math.imul(p,de)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(g,de)|0,o=o+Math.imul(g,he)|0;var ke=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(i=(i=i+Math.imul(d,ge)|0)+Math.imul(h,pe)|0))<<13)|0;u=((o=o+Math.imul(h,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,K),i=(i=Math.imul(U,V))+Math.imul(F,K)|0,o=Math.imul(F,V),n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,Q)|0)+Math.imul(D,W)|0,o=o+Math.imul(D,Q)|0,n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,Y)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(x,re)|0,i=(i=i+Math.imul(x,ne)|0)+Math.imul(I,re)|0,o=o+Math.imul(I,ne)|0,n=n+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(S,oe)|0,o=o+Math.imul(S,se)|0,n=n+Math.imul(w,ce)|0,i=(i=i+Math.imul(w,ue)|0)+Math.imul(_,ce)|0,o=o+Math.imul(_,ue)|0,n=n+Math.imul(y,de)|0,i=(i=i+Math.imul(y,he)|0)+Math.imul(v,de)|0,o=o+Math.imul(v,he)|0;var xe=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;u=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,Q))+Math.imul(F,W)|0,o=Math.imul(F,Q),n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,Y)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,ee)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,n=n+Math.imul(A,ce)|0,i=(i=i+Math.imul(A,ue)|0)+Math.imul(S,ce)|0,o=o+Math.imul(S,ue)|0,n=n+Math.imul(w,de)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(_,de)|0,o=o+Math.imul(_,he)|0;var Ie=(u+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(v,pe)|0))<<13)|0;u=((o=o+Math.imul(v,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,Y))+Math.imul(F,Z)|0,o=Math.imul(F,Y),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,ee)|0,n=n+Math.imul(B,re)|0,i=(i=i+Math.imul(B,ne)|0)+Math.imul(M,re)|0,o=o+Math.imul(M,ne)|0,n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,n=n+Math.imul(x,ce)|0,i=(i=i+Math.imul(x,ue)|0)+Math.imul(I,ce)|0,o=o+Math.imul(I,ue)|0,n=n+Math.imul(A,de)|0,i=(i=i+Math.imul(A,he)|0)+Math.imul(S,de)|0,o=o+Math.imul(S,he)|0;var Te=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ge)|0)+Math.imul(_,pe)|0))<<13)|0;u=((o=o+Math.imul(_,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,ee))+Math.imul(F,$)|0,o=Math.imul(F,ee),n=n+Math.imul(O,re)|0,i=(i=i+Math.imul(O,ne)|0)+Math.imul(D,re)|0,o=o+Math.imul(D,ne)|0,n=n+Math.imul(B,oe)|0,i=(i=i+Math.imul(B,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,n=n+Math.imul(P,ce)|0,i=(i=i+Math.imul(P,ue)|0)+Math.imul(R,ce)|0,o=o+Math.imul(R,ue)|0,n=n+Math.imul(x,de)|0,i=(i=i+Math.imul(x,he)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,he)|0;var Pe=(u+(n=n+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,ge)|0)+Math.imul(S,pe)|0))<<13)|0;u=((o=o+Math.imul(S,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(F,re)|0,o=Math.imul(F,ne),n=n+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,n=n+Math.imul(B,ce)|0,i=(i=i+Math.imul(B,ue)|0)+Math.imul(M,ce)|0,o=o+Math.imul(M,ue)|0,n=n+Math.imul(P,de)|0,i=(i=i+Math.imul(P,he)|0)+Math.imul(R,de)|0,o=o+Math.imul(R,he)|0;var Re=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,ge)|0)+Math.imul(I,pe)|0))<<13)|0;u=((o=o+Math.imul(I,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,oe),i=(i=Math.imul(U,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),n=n+Math.imul(O,ce)|0,i=(i=i+Math.imul(O,ue)|0)+Math.imul(D,ce)|0,o=o+Math.imul(D,ue)|0,n=n+Math.imul(B,de)|0,i=(i=i+Math.imul(B,he)|0)+Math.imul(M,de)|0,o=o+Math.imul(M,he)|0;var Ce=(u+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(R,pe)|0))<<13)|0;u=((o=o+Math.imul(R,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(U,ce),i=(i=Math.imul(U,ue))+Math.imul(F,ce)|0,o=Math.imul(F,ue),n=n+Math.imul(O,de)|0,i=(i=i+Math.imul(O,he)|0)+Math.imul(D,de)|0,o=o+Math.imul(D,he)|0;var Be=(u+(n=n+Math.imul(B,pe)|0)|0)+((8191&(i=(i=i+Math.imul(B,ge)|0)+Math.imul(M,pe)|0))<<13)|0;u=((o=o+Math.imul(M,ge)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(U,de),i=(i=Math.imul(U,he))+Math.imul(F,de)|0,o=Math.imul(F,he);var Me=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,ge)|0)+Math.imul(D,pe)|0))<<13)|0;u=((o=o+Math.imul(D,ge)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863;var Ne=(u+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,ge))+Math.imul(F,pe)|0))<<13)|0;return u=((o=Math.imul(F,ge))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,c[0]=me,c[1]=ye,c[2]=ve,c[3]=be,c[4]=we,c[5]=_e,c[6]=Ee,c[7]=Ae,c[8]=Se,c[9]=ke,c[10]=xe,c[11]=Ie,c[12]=Te,c[13]=Pe,c[14]=Re,c[15]=Ce,c[16]=Be,c[17]=Me,c[18]=Ne,0!==u&&(c[19]=u,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var l=o-u,d=(0|e.words[l])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),i+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r._strip()}function v(e,t,r){return y(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(m=g),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?g(this,e,t):r<1024?y(this,e,t):v(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},b.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},b.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var d=c,h=u,f=0;f<s;f++){var p=r[l+f],g=n[l+f],m=r[l+f+s],y=n[l+f+s],v=d*m-h*y;y=d*y+h*m,m=v,r[l+f]=p+m,n[l+f]=g+y,r[l+f+s]=p-m,n[l+f+s]=g-y,f!==a&&(v=c*d-u*h,h=c*h+u*d,d=v)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},b.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,r,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,l,d,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),v(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"===typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<r;this.words[t]=c|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var d=0|this.words[u];this.words[u]=l<<26-o|d>>>o,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,s=e.length+r;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);a&&(a.words[d]=h)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/e|0,r=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var l=r.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var p=0,g=1;0===(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),s.isub(c)):(r.isub(t),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0===(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(a)):(r.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new x(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function _(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function E(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function A(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"===typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},_.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(e,t){e.iushrn(this.n,0,t)},_.prototype.imulK=function(e){return e.imul(this.k)},i(E,_),E.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},E.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(A,_),i(S,_),i(k,_),k.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new E;else if("p224"===e)t=new A;else if("p192"===e)t=new S;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return w[e]=t,t},x.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},x.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<p);var y=this.pow(d,new o(1).iushln(p-m-1));h=h.redMul(y),d=y.redSqr(),f=f.redMul(d),p=m}return h},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var d=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new I(e)},i(I,x),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},6084:(e,t,r)=>{var n;function i(e){this.rand=e}if(e.exports=function(e){return n||(n=new i(null)),n.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"===typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"===typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=r(9214);if("function"!==typeof o.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return o.randomBytes(e)}}catch(s){}},9778:(e,t,r)=>{"use strict";const n=r(2009),i=r(4038),o="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return u(e,t,r)}function u(e,t,r){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(J(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,ArrayBuffer)||e&&J(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!==typeof SharedArrayBuffer&&(J(e,SharedArrayBuffer)||e&&J(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const i=function(e){if(c.isBuffer(e)){const t=0|p(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!==typeof e.length||Z(e.length)?a(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return l(e),a(e<0?0:0|p(e))}function h(e){const t=e.length<0?0:0|p(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||J(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return W(e).length;default:if(i)return n?-1:G(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return T(this,t,r);case"latin1":case"binary":return P(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Z(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let o,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(u(e,o)===u(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===c)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){let r=!0;for(let n=0;n<c;n++)if(u(e,o+n)!==u(t,n)){r=!1;break}if(r)return o}return-1}function w(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(Z(n))return s;e[r+s]=n}return s}function _(e,t,r,n){return Q(G(t,e.length-r),e,r,n)}function E(e,t,r,n){return Q(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return Q(W(t),e,r,n)}function S(e,t,r,n){return Q(function(e,t){let r,n,i;const o=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function k(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function x(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128===(192&r)&&(c=(31&t)<<6|63&r,c>127&&(o=c));break;case 3:r=e[i+1],n=e[i+2],128===(192&r)&&128===(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128===(192&r)&&128===(192&n)&&128===(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=I));return r}(n)}t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?a(e):void 0!==t?"string"===typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),J(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?x(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(c.prototype[o]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(J(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const a=Math.min(o,s),u=this.slice(n,i),l=e.slice(t,r);for(let c=0;c<a;++c)if(u[c]!==l[c]){o=u[c],s=l[c];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return E(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function T(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function P(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function R(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let o=t;o<r;++o)i+=Y[e[o]];return i}function C(e,t,r){const n=e.slice(t,r);let i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function B(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n,i){z(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function O(e,t,r,n,i){z(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function D(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,o){return t=+t,r>>>=0,o||D(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function U(e,t,r,n,o){return t=+t,r>>>=0,o||D(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=X((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||B(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||B(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=X((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||K(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||B(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||B(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||B(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||B(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=X((function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=X((function(e){return O(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"===typeof e){if("string"===typeof t?(n=t,t=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=c.isBuffer(e)?e:c.from(e,n),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};const F={};function j(e,t,r){F[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name="".concat(this.name," [").concat(e,"]"),this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}}function q(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t="_".concat(e.slice(r-3,r)).concat(t);return"".concat(e.slice(0,r)).concat(t)}function z(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"===typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?">= 0".concat(n," and < 2").concat(n," ** ").concat(8*(o+1)).concat(n):">= -(2".concat(n," ** ").concat(8*(o+1)-1).concat(n,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(n):">= ".concat(t).concat(n," and <= ").concat(r).concat(n),new F.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||K(t,e.length-(r+1))}(n,i,o)}function H(e,t){if("number"!==typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function K(e,t,r){if(Math.floor(e)!==e)throw H(e,r),new F.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(t),e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,r){let n='The value of "'.concat(e,'" is out of range.'),i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=q(String(r)):"bigint"===typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=q(i)),i+="n"),n+=" It must be ".concat(t,". Received ").concat(i),n}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function G(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function W(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function Q(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!==e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"===typeof BigInt?$:e}function $(){throw new Error("BigInt not supported")}},4037:(e,t,r)=>{"use strict";var n=r(2506),i=r(9722),o=i(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"===typeof r&&o(e,".prototype.")>-1?i(r):r}},9722:(e,t,r)=>{"use strict";var n=r(3350),i=r(2506),o=r(5986),s=i("%TypeError%"),a=i("%Function.prototype.apply%"),c=i("%Function.prototype.call%"),u=i("%Reflect.apply%",!0)||n.call(c,a),l=i("%Object.defineProperty%",!0),d=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(f){l=null}e.exports=function(e){if("function"!==typeof e)throw new s("a function is required");var t=u(n,c,arguments);return o(t,1+d(0,e.length-(arguments.length-1)),!0)};var h=function(){return u(n,a,arguments)};l?l(e.exports,"apply",{value:h}):e.exports.apply=h},2221:(e,t,r)=>{var n=r(2543).Buffer,i=r(2263).Transform,o=r(5948).s;function s(e){i.call(this),this.hashMode="string"===typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}r(2534)(s,i),s.prototype.update=function(e,t,r){"string"===typeof e&&(e=n.from(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(i){n=i}finally{r(n)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(r){t=r}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new o(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var n=this._decoder.write(e);return r&&(n+=this._decoder.end()),n},e.exports=s},3685:(e,t)=>{var r;r=function(e){e.version="1.2.2";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}(),r=function(e){var t=0,r=0,n=0,i="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)i[n]=e[n];for(n=0;256!=n;++n)for(r=e[n],t=256+n;t<4096;t+=256)r=i[t]=r>>>8^e[255&r];var o=[];for(n=1;16!=n;++n)o[n-1]="undefined"!==typeof Int32Array?i.subarray(256*n,256*n+256):i.slice(256*n,256*n+256);return o}(t),n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],c=r[5],u=r[6],l=r[7],d=r[8],h=r[9],f=r[10],p=r[11],g=r[12],m=r[13],y=r[14];e.table=t,e.bstr=function(e,r){for(var n=-1^r,i=0,o=e.length;i<o;)n=n>>>8^t[255&(n^e.charCodeAt(i++))];return~n},e.buf=function(e,r){for(var v=-1^r,b=e.length-15,w=0;w<b;)v=y[e[w++]^255&v]^m[e[w++]^v>>8&255]^g[e[w++]^v>>16&255]^p[e[w++]^v>>>24]^f[e[w++]]^h[e[w++]]^d[e[w++]]^l[e[w++]]^u[e[w++]]^c[e[w++]]^a[e[w++]]^s[e[w++]]^o[e[w++]]^i[e[w++]]^n[e[w++]]^t[e[w++]];for(b+=15;w<b;)v=v>>>8^t[255&(v^e[w++])];return~v},e.str=function(e,r){for(var n=-1^r,i=0,o=e.length,s=0,a=0;i<o;)(s=e.charCodeAt(i++))<128?n=n>>>8^t[255&(n^s)]:s<2048?n=(n=n>>>8^t[255&(n^(192|s>>6&31))])>>>8^t[255&(n^(128|63&s))]:s>=55296&&s<57344?(s=64+(1023&s),a=1023&e.charCodeAt(i++),n=(n=(n=(n=n>>>8^t[255&(n^(240|s>>8&7))])>>>8^t[255&(n^(128|s>>2&63))])>>>8^t[255&(n^(128|a>>6&15|(3&s)<<4))])>>>8^t[255&(n^(128|63&a))]):n=(n=(n=n>>>8^t[255&(n^(224|s>>12&15))])>>>8^t[255&(n^(128|s>>6&63))])>>>8^t[255&(n^(128|63&s))];return~n}},"undefined"===typeof DO_NOT_EXPORT_CRC?r(t):r({})},3569:(e,t,r)=>{"use strict";var n=r(2534),i=r(8437),o=r(3375),s=r(997),a=r(2221);function c(e){a.call(this,"digest"),this._hash=e}n(c,a),c.prototype._update=function(e){this._hash.update(e)},c.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new o:new c(s(e))}},4255:(e,t,r)=>{var n="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||"undefined"!==typeof r&&r,n="URLSearchParams"in r,i="Symbol"in r&&"iterator"in Symbol,o="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in r,a="ArrayBuffer"in r;if(a)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function l(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!==typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function m(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&o&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(m)}),this.text=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=g(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=l(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[l(e)]},f.prototype.get=function(e){return e=l(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(l(e))},f.prototype.set=function(e,t){this.map[l(e)]=d(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},i&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=function(e){var t=e.toUpperCase();return b.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function E(e){var t=new f;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t}function A(e,t){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},v.call(w.prototype),v.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},A.error=function(){var e=new A(null,{status:0,statusText:""});return e.type="error",e};var S=[301,302,303,307,308];A.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new A(null,{status:t,headers:{location:e}})},t.DOMException=r.DOMException;try{new t.DOMException}catch(x){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function k(e,n){return new Promise((function(i,s){var c=new w(e,n);if(c.signal&&c.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function l(){u.abort()}u.onload=function(){var e={status:u.status,statusText:u.statusText,headers:E(u.getAllResponseHeaders()||"")};e.url="responseURL"in u?u.responseURL:e.headers.get("X-Request-URL");var t="response"in u?u.response:u.responseText;setTimeout((function(){i(new A(t,e))}),0)},u.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},u.onabort=function(){setTimeout((function(){s(new t.DOMException("Aborted","AbortError"))}),0)},u.open(c.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?u.withCredentials=!0:"omit"===c.credentials&&(u.withCredentials=!1),"responseType"in u&&(o?u.responseType="blob":a&&c.headers.get("Content-Type")&&-1!==c.headers.get("Content-Type").indexOf("application/octet-stream")&&(u.responseType="arraybuffer")),!n||"object"!==typeof n.headers||n.headers instanceof f?c.headers.forEach((function(e,t){u.setRequestHeader(t,e)})):Object.getOwnPropertyNames(n.headers).forEach((function(e){u.setRequestHeader(e,d(n.headers[e]))})),c.signal&&(c.signal.addEventListener("abort",l),u.onreadystatechange=function(){4===u.readyState&&c.signal.removeEventListener("abort",l)}),u.send("undefined"===typeof c._bodyInit?null:c._bodyInit)}))}k.polyfill=!0,r.fetch||(r.fetch=k,r.Headers=f,r.Request=w,r.Response=A),t.Headers=f,t.Request=w,t.Response=A,t.fetch=k}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=n.fetch?n:i;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},8392:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(r){}!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"/WhisUp3",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG);return e},t.useColors=function(){if("undefined"!==typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(8472)(t);const{formatters:n}=e.exports;n.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},8472:(e,t,r)=>{e.exports=function(e){function t(e){let r,i,o,s=null;function a(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!a.enabled)return;const o=a,s=Number(new Date),c=s-(r||s);o.diff=c,o.prev=r,o.curr=s,r=s,n[0]=t.coerce(n[0]),"string"!==typeof n[0]&&n.unshift("%O");let u=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,((e,r)=>{if("%%"===e)return"%";u++;const i=t.formatters[r];if("function"===typeof i){const t=n[u];e=i.call(o,t),n.splice(u,1),u--}return e})),t.formatArgs.call(o,n);(o.log||t.log).apply(o,n)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{s=e}}),"function"===typeof t.init&&t.init(a),a}function n(e,r){const n=t(this.namespace+("undefined"===typeof r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"===typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(8193),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},2651:(e,t,r)=>{"use strict";var n=r(4510)(),i=r(2506),o=n&&i("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch(u){o=!1}var s=i("%SyntaxError%"),a=i("%TypeError%"),c=r(3347);e.exports=function(e,t,r){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new a("`obj` must be an object or a function`");if("string"!==typeof t&&"symbol"!==typeof t)throw new a("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new a("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new a("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new a("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new a("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],d=!!c&&c(e,t);if(o)o(e,t,{configurable:null===u&&d?d.configurable:!u,enumerable:null===n&&d?d.enumerable:!n,value:r,writable:null===i&&d?d.writable:!i});else{if(!l&&(n||i||u))throw new s("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},8718:e=>{"use strict";function t(e,t){t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=new Array(4))}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r||t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(0===arguments.length)return this.size();var t=this._list.length;return this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(0===arguments.length)return this.size();var t=this._tail;return this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},t.prototype.removeOne=function(e){var t=e;if(t===(0|t)&&this._head!==this._tail){var r=this.size(),n=this._list.length;if(!(t>=r||t<-r)){t<0&&(t+=r),t=this._head+t&this._capacityMask;var i,o=this._list[t];if(e<r/2){for(i=e;i>0;i--)this._list[t]=this._list[t=t-1+n&this._capacityMask];this._list[t]=void 0,this._head=this._head+1+n&this._capacityMask}else{for(i=r-1-e;i>0;i--)this._list[t]=this._list[t=t+1+n&this._capacityMask];this._list[t]=void 0,this._tail=this._tail-1+n&this._capacityMask}return o}}},t.prototype.remove=function(e,t){var r,n=e,i=t;if(n===(0|n)&&this._head!==this._tail){var o=this.size(),s=this._list.length;if(!(n>=o||n<-o||t<1)){if(n<0&&(n+=o),1===t||!t)return(r=new Array(1))[0]=this.removeOne(n),r;if(0===n&&n+t>=o)return r=this.toArray(),this.clear(),r;var a;for(n+t>o&&(t=o-n),r=new Array(t),a=0;a<t;a++)r[a]=this._list[this._head+n+a&this._capacityMask];if(n=this._head+n&this._capacityMask,e+t===o){for(this._tail=this._tail-t+s&this._capacityMask,a=t;a>0;a--)this._list[n=n+1+s&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+s&this._capacityMask,a=t-1;a>0;a--)this._list[n=n+1+s&this._capacityMask]=void 0;return r}if(n<o/2){for(this._head=this._head+e+t+s&this._capacityMask,a=e;a>0;a--)this.unshift(this._list[n=n-1+s&this._capacityMask]);for(n=this._head-1+s&this._capacityMask;i>0;)this._list[n=n-1+s&this._capacityMask]=void 0,i--;e<0&&(this._tail=n)}else{for(this._tail=n,n=n+t+s&this._capacityMask,a=o-(t+e);a>0;a--)this.push(this._list[n++]);for(n=this._tail;i>0;)this._list[n=n+1+s&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=s>>>2&&this._shrinkArray(),r}}},t.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(arguments.length>2){var i,o,s,a=arguments.length,c=this._list.length,u=2;if(!n||r<n/2){for(o=new Array(r),i=0;i<r;i++)o[i]=this._list[this._head+i&this._capacityMask];for(0===t?(s=[],r>0&&(this._head=this._head+r+c&this._capacityMask)):(s=this.remove(r,t),this._head=this._head+r+c&this._capacityMask);a>u;)this.unshift(arguments[--a]);for(i=r;i>0;i--)this.unshift(o[i-1])}else{var l=(o=new Array(n-(r+t))).length;for(i=0;i<l;i++)o[i]=this._list[this._head+r+t+i&this._capacityMask];for(0===t?(s=[],r!=n&&(this._tail=this._head+r+c&this._capacityMask)):(s=this.remove(r,t),this._tail=this._tail-l+c&this._capacityMask);u<a;)this.push(arguments[u++]);for(i=0;i<l;i++)this.push(o[i])}return s}return this.remove(r,t)}}},t.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){var t=e.length,r=this._nextPowerOf2(t);this._list=new Array(r),this._capacityMask=r-1,this._tail=t;for(var n=0;n<t;n++)this._list[n]=e[n]},t.prototype._copyArray=function(e,t){var r=this._list,n=r.length,i=this.length;if((t|=i)==i&&this._head<this._tail)return this._list.slice(this._head,this._tail);var o,s=new Array(t),a=0;if(e||this._head>this._tail){for(o=this._head;o<n;o++)s[a++]=r[o];for(o=0;o<this._tail;o++)s[a++]=r[o]}else for(o=this._head;o<this._tail;o++)s[a++]=r[o];return s},t.prototype._growArray=function(){if(0!=this._head){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.prototype._nextPowerOf2=function(e){var t=1<<Math.log(e)/Math.log(2)+1;return Math.max(t,4)},e.exports=t},6289:(e,t,r)=>{"use strict";var n=t;n.version=r(8597).i8,n.utils=r(2629),n.rand=r(6084),n.curve=r(7075),n.curves=r(3377),n.ec=r(4170),n.eddsa=r(156)},5950:(e,t,r)=>{"use strict";var n=r(7548),i=r(2629),o=i.getNAF,s=i.getJSF,a=i.assert;function c(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){a(e.precomputed);var r=e._getDoubles(),n=o(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var s,c,u=[];for(s=0;s<n.length;s+=r.step){c=0;for(var l=s+r.step-1;l>=s;l--)c=(c<<1)+n[l];u.push(c)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),f=i;f>0;f--){for(s=0;s<u.length;s++)(c=u[s])===f?h=h.mixedAdd(r.points[s]):c===-f&&(h=h.mixedAdd(r.points[s].neg()));d=d.add(h)}return d.toP()},c.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,s=o(t,r,this._bitLength),c=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(var l=0;u>=0&&0===s[u];u--)l++;if(u>=0&&l++,c=c.dblp(l),u<0)break;var d=s[u];a(0!==d),c="affine"===e.type?d>0?c.mixedAdd(i[d-1>>1]):c.mixedAdd(i[-d-1>>1].neg()):d>0?c.add(i[d-1>>1]):c.add(i[-d-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,r,n,i){var a,c,u,l=this._wnafT1,d=this._wnafT2,h=this._wnafT3,f=0;for(a=0;a<n;a++){var p=(u=t[a])._getNAFPoints(e);l[a]=p.wnd,d[a]=p.points}for(a=n-1;a>=1;a-=2){var g=a-1,m=a;if(1===l[g]&&1===l[m]){var y=[t[g],null,null,t[m]];0===t[g].y.cmp(t[m].y)?(y[1]=t[g].add(t[m]),y[2]=t[g].toJ().mixedAdd(t[m].neg())):0===t[g].y.cmp(t[m].y.redNeg())?(y[1]=t[g].toJ().mixedAdd(t[m]),y[2]=t[g].add(t[m].neg())):(y[1]=t[g].toJ().mixedAdd(t[m]),y[2]=t[g].toJ().mixedAdd(t[m].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],b=s(r[g],r[m]);for(f=Math.max(b[0].length,f),h[g]=new Array(f),h[m]=new Array(f),c=0;c<f;c++){var w=0|b[0][c],_=0|b[1][c];h[g][c]=v[3*(w+1)+(_+1)],h[m][c]=0,d[g]=y}}else h[g]=o(r[g],l[g],this._bitLength),h[m]=o(r[m],l[m],this._bitLength),f=Math.max(h[g].length,f),f=Math.max(h[m].length,f)}var E=this.jpoint(null,null,null),A=this._wnafT4;for(a=f;a>=0;a--){for(var S=0;a>=0;){var k=!0;for(c=0;c<n;c++)A[c]=0|h[c][a],0!==A[c]&&(k=!1);if(!k)break;S++,a--}if(a>=0&&S++,E=E.dblp(S),a<0)break;for(c=0;c<n;c++){var x=A[c];0!==x&&(x>0?u=d[c][x-1>>1]:x<0&&(u=d[c][-x-1>>1].neg()),E="affine"===u.type?E.mixedAdd(u):E.add(u))}}for(a=0;a<n;a++)d[a]=null;return i?E:E.toP()},c.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r)return 6===e[0]?a(e[e.length-1]%2===0):7===e[0]&&a(e[e.length-1]%2===1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(e){return this.encode(e,!0)},u.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},u.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},u.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},u.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},u.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},u.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},2124:(e,t,r)=>{"use strict";var n=r(2629),i=r(7548),o=r(2534),s=r(5950),a=n.assert;function c(e){this.twisted=1!==(0|e.a),this.mOneA=this.twisted&&-1===(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|e.c)}function u(e,t,r,n,o){s.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===n?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(r,16),this.z=n?new i(n,16):this.curve.one,this.t=o&&new i(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(c,s),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=this.c2.redSub(this.a.redMul(r)),o=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=n.redMul(o.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(t&&!c||!t&&c)&&(a=a.redNeg()),this.point(e,a)},c.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),n=r.redSub(this.c2),o=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=n.redMul(o.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==t&&(a=a.redNeg()),this.point(a,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(i)},o(u,s.BasePoint),c.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},c.prototype.point=function(e,t,r,n){return new u(this,e,t,r,n)},u.fromJSON=function(e,t){return new u(e,t[0],t[1],t[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),o=n.redAdd(t),s=o.redSub(r),a=n.redSub(t),c=i.redMul(s),u=o.redMul(a),l=i.redMul(a),d=s.redMul(o);return this.curve.point(c,u,d,l)},u.prototype._projDbl=function(){var e,t,r,n,i,o,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var u=(n=this.curve._mulA(a)).redAdd(c);this.zOne?(e=s.redSub(a).redSub(c).redMul(u.redSub(this.curve.two)),t=u.redMul(n.redSub(c)),r=u.redSqr().redSub(u).redSub(u)):(i=this.z.redSqr(),o=u.redSub(i).redISub(i),e=s.redSub(a).redISub(c).redMul(o),t=u.redMul(n.redSub(c)),r=u.redMul(o))}else n=a.redAdd(c),i=this.curve._mulC(this.z).redSqr(),o=n.redSub(i).redSub(i),e=this.curve._mulC(s.redISub(n)).redMul(o),t=this.curve._mulC(n).redMul(a.redISub(c)),r=n.redMul(o);return this.curve.point(e,t,r)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),o=r.redSub(t),s=i.redSub(n),a=i.redAdd(n),c=r.redAdd(t),u=o.redMul(s),l=a.redMul(c),d=o.redMul(c),h=s.redMul(a);return this.curve.point(u,l,h,d)},u.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),i=n.redSqr(),o=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(o).redMul(s),c=i.redSub(a),u=i.redAdd(a),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(s),d=n.redMul(c).redMul(l);return this.curve.twisted?(t=n.redMul(u).redMul(s.redSub(this.curve._mulA(o))),r=c.redMul(u)):(t=n.redMul(u).redMul(s.redSub(o)),r=this.curve._mulC(c).redMul(u)),this.curve.point(d,t,r)},u.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},u.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},u.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},u.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add},7075:(e,t,r)=>{"use strict";var n=t;n.base=r(5950),n.short=r(5536),n.mont=r(9113),n.edwards=r(2124)},9113:(e,t,r)=>{"use strict";var n=r(7548),i=r(2534),o=r(5950),s=r(2629);function a(e){o.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,r){o.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(a,o),e.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},i(c,o.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},a.prototype.point=function(e,t){return new c(this,e,t)},a.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),i=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,i)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),i=e.x.redAdd(e.z),o=e.x.redSub(e.z).redMul(r),s=i.redMul(n),a=t.z.redMul(o.redAdd(s).redSqr()),c=t.x.redMul(o.redISub(s).redSqr());return this.curve.point(a,c)},c.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var o=i.length-1;o>=0;o--)0===i[o]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},5536:(e,t,r)=>{"use strict";var n=r(2629),i=r(7548),o=r(2534),s=r(5950),a=n.assert;function c(e){s.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(e,t,r,n){s.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function l(e,t,r,n){s.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(r,16),this.z=new i(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(c,s),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new i(e.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))?r=o[0]:(r=o[1],a(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(r)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),r=new i(2).toRed(t).redInvm(),n=r.redNeg(),o=new i(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(o).fromRed(),n.redSub(o).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,r,n,o,s,a,c,u,l,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),p=new i(1),g=new i(0),m=new i(0),y=new i(1),v=0;0!==h.cmpn(0);){var b=f.div(h);u=f.sub(b.mul(h)),l=m.sub(b.mul(p));var w=y.sub(b.mul(g));if(!n&&u.cmp(d)<0)t=c.neg(),r=p,n=u.neg(),o=l;else if(n&&2===++v)break;c=u,f=h,h=u,m=p,p=l,y=g,g=w}s=u.neg(),a=l;var _=n.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(_)>=0&&(s=t,a=r),n.negative&&(n=n.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:n,b:o},{a:s,b:a}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=i.mul(r.a),a=o.mul(n.a),c=i.mul(r.b),u=o.mul(n.b);return{k1:e.sub(s).sub(a),k2:c.add(u).neg()}},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var o=n.fromRed().isOdd();return(t&&!o||!t&&o)&&(n=n.redNeg()),this.point(e,n)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),n[2*o]=a,n[2*o+1]=c,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,n,i,2*o,r),l=0;l<2*o;l++)n[l]=null,i[l]=null;return u},o(u,s.BasePoint),c.prototype.point=function(e,t,r){return new u(this,e,t,r)},c.prototype.pointFromJSON=function(e,t){return u.fromJSON(this,e,t)},u.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},u.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},u.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},u.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},u.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(l,s.BasePoint),c.prototype.jpoint=function(e,t,r){return new l(this,e,t,r)},l.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},l.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},l.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(i),c=o.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),d=n.redMul(u),h=c.redSqr().redIAdd(l).redISub(d).redISub(d),f=c.redMul(d.redISub(h)).redISub(o.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(h,f,p)},l.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),l=r.redMul(c),d=a.redSqr().redIAdd(u).redISub(l).redISub(l),h=a.redMul(l.redISub(d)).redISub(i.redMul(u)),f=this.z.redMul(s);return this.curve.jpoint(d,h,f)},l.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(t=0;t<e;t++){var l=o.redSqr(),d=u.redSqr(),h=d.redSqr(),f=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(c)),p=o.redMul(d),g=f.redSqr().redISub(p.redAdd(p)),m=p.redISub(g),y=f.redMul(m);y=y.redIAdd(y).redISub(h);var v=u.redMul(a);t+1<e&&(c=c.redMul(h)),o=g,a=v,u=y}return this.curve.jpoint(o,u.redMul(i),a)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},l.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),f=this.x.redAdd(d).redSqr().redISub(l).redISub(h);f=f.redIAdd(f);var p=l.redAdd(l).redIAdd(l),g=p.redSqr(),m=h.redIAdd(h);m=(m=m.redIAdd(m)).redIAdd(m),e=g.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},l.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(n).redISub(o);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),f=this.x.redSub(l).redMul(this.x.redAdd(l));f=f.redAdd(f).redIAdd(f);var p=h.redIAdd(h),g=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(g),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(l);var m=d.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=f.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},l.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(s),l=a.redSqr().redISub(u.redAdd(u)),d=u.redISub(l),h=s.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=a.redMul(d).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,f,p)},l.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(c),l=t.redMul(u);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.x.redMul(a).redISub(l);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(d,h,f)},l.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},l.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},l.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},l.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},3377:(e,t,r)=>{"use strict";var n,i=t,o=r(3125),s=r(7075),a=r(2629).assert;function c(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new c(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=c,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:o.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:o.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:o.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:o.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:o.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:o.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=r(1025)}catch(l){n=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:o.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})},4170:(e,t,r)=>{"use strict";var n=r(7548),i=r(7411),o=r(2629),s=r(3377),a=r(6084),c=o.assert,u=r(615),l=r(3198);function d(e){if(!(this instanceof d))return new d(e);"string"===typeof e&&(c(Object.prototype.hasOwnProperty.call(s,e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new u(this,e)},d.prototype.keyFromPrivate=function(e,t){return u.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return u.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),o=this.n.sub(new n(2));;){var s=new n(t.generate(r));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},d.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,r,o){"object"===typeof r&&(o=r,r=null),o||(o={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new n(e,16));for(var s=this.n.byteLength(),a=t.getPrivate().toArray("be",s),c=e.toArray("be",s),u=new i({hash:this.hash,entropy:a,nonce:c,pers:o.pers,persEnc:o.persEnc||"utf8"}),d=this.n.sub(new n(1)),h=0;;h++){var f=o.k?o.k(h):new n(u.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(d)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var g=p.getX(),m=g.umod(this.n);if(0!==m.cmpn(0)){var y=f.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var v=(p.getY().isOdd()?1:0)|(0!==g.cmp(m)?2:0);return o.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),v^=1),new l({r:m,s:y,recoveryParam:v})}}}}}},d.prototype.verify=function(e,t,r,i){e=this._truncateToN(new n(e,16)),r=this.keyFromPublic(r,i);var o=(t=new l(t,"hex")).r,s=t.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,c=s.invm(this.n),u=c.mul(e).umod(this.n),d=c.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),d)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(u,r.getPublic(),d)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},d.prototype.recoverPubKey=function(e,t,r,i){c((3&r)===r,"The recovery param is more than two bits"),t=new l(t,i);var o=this.n,s=new n(e),a=t.r,u=t.s,d=1&r,h=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");a=h?this.curve.pointFromX(a.add(this.curve.n),d):this.curve.pointFromX(a,d);var f=t.r.invm(o),p=o.sub(s).mul(f).umod(o),g=u.mul(f).umod(o);return this.g.mulAdd(p,a,g)},d.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new l(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")}},615:(e,t,r)=>{"use strict";var n=r(7548),i=r(2629).assert;function o(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=o,o.fromPublic=function(e,t,r){return t instanceof o?t:new o(e,{pub:t,pubEnc:r})},o.fromPrivate=function(e,t,r){return t instanceof o?t:new o(e,{priv:t,privEnc:r})},o.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},o.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},o.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},o.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},o.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},o.prototype.derive=function(e){return e.validate()||i(e.validate(),"public point not validated"),e.mul(this.priv).getX()},o.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},o.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},o.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},3198:(e,t,r)=>{"use strict";var n=r(7548),i=r(2629),o=i.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(o(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function c(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,s=t.place;o<n;o++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function u(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function l(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=i.toArray(e,t);var r=new a;if(48!==e[r.place++])return!1;var o=c(e,r);if(!1===o)return!1;if(o+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var s=c(e,r);if(!1===s)return!1;var u=e.slice(r.place,s+r.place);if(r.place+=s,2!==e[r.place++])return!1;var l=c(e,r);if(!1===l)return!1;if(e.length!==l+r.place)return!1;var d=e.slice(r.place,l+r.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new n(u),this.s=new n(d),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=u(t),r=u(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];l(n,t.length),(n=n.concat(t)).push(2),l(n,r.length);var o=n.concat(r),s=[48];return l(s,o.length),s=s.concat(o),i.encode(s,e)}},156:(e,t,r)=>{"use strict";var n=r(3125),i=r(3377),o=r(2629),s=o.assert,a=o.parseBytes,c=r(1722),u=r(8574);function l(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof l))return new l(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}e.exports=l,l.prototype.sign=function(e,t){e=a(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),o=this.encodePoint(i),s=this.hashInt(o,r.pubBytes(),e).mul(r.priv()),c=n.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:o})},l.prototype.verify=function(e,t,r){e=a(e),t=this.makeSignature(t);var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),o=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(o)},l.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return o.intFromLE(e.digest()).umod(this.curve.n)},l.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},l.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},l.prototype.makeSignature=function(e){return e instanceof u?e:new u(this,e)},l.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},l.prototype.decodePoint=function(e){var t=(e=o.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),n=0!==(128&e[t]),i=o.intFromLE(r);return this.curve.pointFromY(i,n)},l.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(e){return o.intFromLE(e)},l.prototype.isPoint=function(e){return e instanceof this.pointClass}},1722:(e,t,r)=>{"use strict";var n=r(2629),i=n.assert,o=n.parseBytes,s=n.cachedProperty;function a(e,t){this.eddsa=e,this._secret=o(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=o(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},s(a,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(a,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(a,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n})),s(a,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(a,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(a,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),a.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},a.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},e.exports=a},8574:(e,t,r)=>{"use strict";var n=r(7548),i=r(2629),o=i.assert,s=i.cachedProperty,a=i.parseBytes;function c(e,t){this.eddsa=e,"object"!==typeof t&&(t=a(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),o(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},1025:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},2629:(e,t,r)=>{"use strict";var n=t,i=r(7548),o=r(2325),s=r(4034);n.assert=o,n.toArray=s.toArray,n.zero2=s.zero2,n.toHex=s.toHex,n.encode=s.encode,n.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),s=0;s<n.length;s++){var a,c=o.andln(i-1);o.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,o.isubn(a)):a=0,n[s]=a,o.iushrn(1)}return n},n.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var s,a,c=e.andln(3)+i&3,u=t.andln(3)+o&3;3===c&&(c=-1),3===u&&(u=-1),s=0===(1&c)?0:3!==(n=e.andln(7)+i&7)&&5!==n||2!==u?c:-c,r[0].push(s),a=0===(1&u)?0:3!==(n=t.andln(7)+o&7)&&5!==n||2!==c?u:-u,r[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},n.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},n.parseBytes=function(e){return"string"===typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new i(e,"hex","le")}},7548:function(e,t,r){!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"===typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:r(5568).Buffer}catch(k){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function u(e,t,r,n){for(var i=0,o=Math.min(e.length,r),s=t;s<o;s++){var a=e.charCodeAt(s)-48;i*=n,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(e){return e instanceof o||null!==e&&"object"===typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=e.length-1,o=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,o=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(n=(e.length-t)%2===0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var o=e.length-r,s=o%n,a=Math.min(o,o-s)+r,c=0,l=r;l<a;l+=n)c=u(e,l,l+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=u(e,l,e.length,t),l=0;l<s;l++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],o=0|t.words[0],s=i*o,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;l+=(s=(i=0|e.words[p])*(o=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);r=0!==(o=a>>>24-i&16777215)||s!==this.length-1?l[6-c.length]+c+r:c+r,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=d[e],f=h[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(f).toString(e);r=(p=p.idivn(f)).isZero()?g+r:l[u-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return n("undefined"!==typeof s),this.toArrayLike(s,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,u=new e(o),l=this.clone();if(c){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-i;a++)u[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,o=0;o<n.length;o++)t=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<r.length;o++)t=(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var o=0,s=0;s<n.length;s++)o=(t=(0|r.words[s])-(0|n.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var n,i,o,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,h=l>>>13,f=0|s[1],p=8191&f,g=f>>>13,m=0|s[2],y=8191&m,v=m>>>13,b=0|s[3],w=8191&b,_=b>>>13,E=0|s[4],A=8191&E,S=E>>>13,k=0|s[5],x=8191&k,I=k>>>13,T=0|s[6],P=8191&T,R=T>>>13,C=0|s[7],B=8191&C,M=C>>>13,N=0|s[8],O=8191&N,D=N>>>13,L=0|s[9],U=8191&L,F=L>>>13,j=0|a[0],q=8191&j,z=j>>>13,H=0|a[1],K=8191&H,V=H>>>13,G=0|a[2],W=8191&G,Q=G>>>13,J=0|a[3],Z=8191&J,Y=J>>>13,X=0|a[4],$=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],oe=8191&ie,se=ie>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,ge=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(u+(n=Math.imul(d,q))|0)+((8191&(i=(i=Math.imul(d,z))+Math.imul(h,q)|0))<<13)|0;u=((o=Math.imul(h,z))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(p,q),i=(i=Math.imul(p,z))+Math.imul(g,q)|0,o=Math.imul(g,z);var ye=(u+(n=n+Math.imul(d,K)|0)|0)+((8191&(i=(i=i+Math.imul(d,V)|0)+Math.imul(h,K)|0))<<13)|0;u=((o=o+Math.imul(h,V)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,q),i=(i=Math.imul(y,z))+Math.imul(v,q)|0,o=Math.imul(v,z),n=n+Math.imul(p,K)|0,i=(i=i+Math.imul(p,V)|0)+Math.imul(g,K)|0,o=o+Math.imul(g,V)|0;var ve=(u+(n=n+Math.imul(d,W)|0)|0)+((8191&(i=(i=i+Math.imul(d,Q)|0)+Math.imul(h,W)|0))<<13)|0;u=((o=o+Math.imul(h,Q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(w,q),i=(i=Math.imul(w,z))+Math.imul(_,q)|0,o=Math.imul(_,z),n=n+Math.imul(y,K)|0,i=(i=i+Math.imul(y,V)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,V)|0,n=n+Math.imul(p,W)|0,i=(i=i+Math.imul(p,Q)|0)+Math.imul(g,W)|0,o=o+Math.imul(g,Q)|0;var be=(u+(n=n+Math.imul(d,Z)|0)|0)+((8191&(i=(i=i+Math.imul(d,Y)|0)+Math.imul(h,Z)|0))<<13)|0;u=((o=o+Math.imul(h,Y)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(A,q),i=(i=Math.imul(A,z))+Math.imul(S,q)|0,o=Math.imul(S,z),n=n+Math.imul(w,K)|0,i=(i=i+Math.imul(w,V)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,V)|0,n=n+Math.imul(y,W)|0,i=(i=i+Math.imul(y,Q)|0)+Math.imul(v,W)|0,o=o+Math.imul(v,Q)|0,n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,Y)|0)+Math.imul(g,Z)|0,o=o+Math.imul(g,Y)|0;var we=(u+(n=n+Math.imul(d,$)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,$)|0))<<13)|0;u=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(x,q),i=(i=Math.imul(x,z))+Math.imul(I,q)|0,o=Math.imul(I,z),n=n+Math.imul(A,K)|0,i=(i=i+Math.imul(A,V)|0)+Math.imul(S,K)|0,o=o+Math.imul(S,V)|0,n=n+Math.imul(w,W)|0,i=(i=i+Math.imul(w,Q)|0)+Math.imul(_,W)|0,o=o+Math.imul(_,Q)|0,n=n+Math.imul(y,Z)|0,i=(i=i+Math.imul(y,Y)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,Y)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,ee)|0;var _e=(u+(n=n+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((o=o+Math.imul(h,ne)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(P,q),i=(i=Math.imul(P,z))+Math.imul(R,q)|0,o=Math.imul(R,z),n=n+Math.imul(x,K)|0,i=(i=i+Math.imul(x,V)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,V)|0,n=n+Math.imul(A,W)|0,i=(i=i+Math.imul(A,Q)|0)+Math.imul(S,W)|0,o=o+Math.imul(S,Q)|0,n=n+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,Y)|0,n=n+Math.imul(y,$)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,ee)|0,n=n+Math.imul(p,re)|0,i=(i=i+Math.imul(p,ne)|0)+Math.imul(g,re)|0,o=o+Math.imul(g,ne)|0;var Ee=(u+(n=n+Math.imul(d,oe)|0)|0)+((8191&(i=(i=i+Math.imul(d,se)|0)+Math.imul(h,oe)|0))<<13)|0;u=((o=o+Math.imul(h,se)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(B,q),i=(i=Math.imul(B,z))+Math.imul(M,q)|0,o=Math.imul(M,z),n=n+Math.imul(P,K)|0,i=(i=i+Math.imul(P,V)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,V)|0,n=n+Math.imul(x,W)|0,i=(i=i+Math.imul(x,Q)|0)+Math.imul(I,W)|0,o=o+Math.imul(I,Q)|0,n=n+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,Y)|0)+Math.imul(S,Z)|0,o=o+Math.imul(S,Y)|0,n=n+Math.imul(w,$)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(v,re)|0,o=o+Math.imul(v,ne)|0,n=n+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,se)|0)+Math.imul(g,oe)|0,o=o+Math.imul(g,se)|0;var Ae=(u+(n=n+Math.imul(d,ce)|0)|0)+((8191&(i=(i=i+Math.imul(d,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((o=o+Math.imul(h,ue)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(O,q),i=(i=Math.imul(O,z))+Math.imul(D,q)|0,o=Math.imul(D,z),n=n+Math.imul(B,K)|0,i=(i=i+Math.imul(B,V)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,V)|0,n=n+Math.imul(P,W)|0,i=(i=i+Math.imul(P,Q)|0)+Math.imul(R,W)|0,o=o+Math.imul(R,Q)|0,n=n+Math.imul(x,Z)|0,i=(i=i+Math.imul(x,Y)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,Y)|0,n=n+Math.imul(A,$)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(S,$)|0,o=o+Math.imul(S,ee)|0,n=n+Math.imul(w,re)|0,i=(i=i+Math.imul(w,ne)|0)+Math.imul(_,re)|0,o=o+Math.imul(_,ne)|0,n=n+Math.imul(y,oe)|0,i=(i=i+Math.imul(y,se)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,se)|0,n=n+Math.imul(p,ce)|0,i=(i=i+Math.imul(p,ue)|0)+Math.imul(g,ce)|0,o=o+Math.imul(g,ue)|0;var Se=(u+(n=n+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(U,q),i=(i=Math.imul(U,z))+Math.imul(F,q)|0,o=Math.imul(F,z),n=n+Math.imul(O,K)|0,i=(i=i+Math.imul(O,V)|0)+Math.imul(D,K)|0,o=o+Math.imul(D,V)|0,n=n+Math.imul(B,W)|0,i=(i=i+Math.imul(B,Q)|0)+Math.imul(M,W)|0,o=o+Math.imul(M,Q)|0,n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,Y)|0)+Math.imul(R,Z)|0,o=o+Math.imul(R,Y)|0,n=n+Math.imul(x,$)|0,i=(i=i+Math.imul(x,ee)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(S,re)|0,o=o+Math.imul(S,ne)|0,n=n+Math.imul(w,oe)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(_,oe)|0,o=o+Math.imul(_,se)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,ue)|0)+Math.imul(v,ce)|0,o=o+Math.imul(v,ue)|0,n=n+Math.imul(p,de)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(g,de)|0,o=o+Math.imul(g,he)|0;var ke=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(i=(i=i+Math.imul(d,ge)|0)+Math.imul(h,pe)|0))<<13)|0;u=((o=o+Math.imul(h,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(U,K),i=(i=Math.imul(U,V))+Math.imul(F,K)|0,o=Math.imul(F,V),n=n+Math.imul(O,W)|0,i=(i=i+Math.imul(O,Q)|0)+Math.imul(D,W)|0,o=o+Math.imul(D,Q)|0,n=n+Math.imul(B,Z)|0,i=(i=i+Math.imul(B,Y)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,Y)|0,n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,ee)|0,n=n+Math.imul(x,re)|0,i=(i=i+Math.imul(x,ne)|0)+Math.imul(I,re)|0,o=o+Math.imul(I,ne)|0,n=n+Math.imul(A,oe)|0,i=(i=i+Math.imul(A,se)|0)+Math.imul(S,oe)|0,o=o+Math.imul(S,se)|0,n=n+Math.imul(w,ce)|0,i=(i=i+Math.imul(w,ue)|0)+Math.imul(_,ce)|0,o=o+Math.imul(_,ue)|0,n=n+Math.imul(y,de)|0,i=(i=i+Math.imul(y,he)|0)+Math.imul(v,de)|0,o=o+Math.imul(v,he)|0;var xe=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ge)|0)+Math.imul(g,pe)|0))<<13)|0;u=((o=o+Math.imul(g,ge)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,Q))+Math.imul(F,W)|0,o=Math.imul(F,Q),n=n+Math.imul(O,Z)|0,i=(i=i+Math.imul(O,Y)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,Y)|0,n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,ee)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,ee)|0,n=n+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ne)|0)+Math.imul(R,re)|0,o=o+Math.imul(R,ne)|0,n=n+Math.imul(x,oe)|0,i=(i=i+Math.imul(x,se)|0)+Math.imul(I,oe)|0,o=o+Math.imul(I,se)|0,n=n+Math.imul(A,ce)|0,i=(i=i+Math.imul(A,ue)|0)+Math.imul(S,ce)|0,o=o+Math.imul(S,ue)|0,n=n+Math.imul(w,de)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(_,de)|0,o=o+Math.imul(_,he)|0;var Ie=(u+(n=n+Math.imul(y,pe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(v,pe)|0))<<13)|0;u=((o=o+Math.imul(v,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(U,Z),i=(i=Math.imul(U,Y))+Math.imul(F,Z)|0,o=Math.imul(F,Y),n=n+Math.imul(O,$)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,ee)|0,n=n+Math.imul(B,re)|0,i=(i=i+Math.imul(B,ne)|0)+Math.imul(M,re)|0,o=o+Math.imul(M,ne)|0,n=n+Math.imul(P,oe)|0,i=(i=i+Math.imul(P,se)|0)+Math.imul(R,oe)|0,o=o+Math.imul(R,se)|0,n=n+Math.imul(x,ce)|0,i=(i=i+Math.imul(x,ue)|0)+Math.imul(I,ce)|0,o=o+Math.imul(I,ue)|0,n=n+Math.imul(A,de)|0,i=(i=i+Math.imul(A,he)|0)+Math.imul(S,de)|0,o=o+Math.imul(S,he)|0;var Te=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(i=(i=i+Math.imul(w,ge)|0)+Math.imul(_,pe)|0))<<13)|0;u=((o=o+Math.imul(_,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(U,$),i=(i=Math.imul(U,ee))+Math.imul(F,$)|0,o=Math.imul(F,ee),n=n+Math.imul(O,re)|0,i=(i=i+Math.imul(O,ne)|0)+Math.imul(D,re)|0,o=o+Math.imul(D,ne)|0,n=n+Math.imul(B,oe)|0,i=(i=i+Math.imul(B,se)|0)+Math.imul(M,oe)|0,o=o+Math.imul(M,se)|0,n=n+Math.imul(P,ce)|0,i=(i=i+Math.imul(P,ue)|0)+Math.imul(R,ce)|0,o=o+Math.imul(R,ue)|0,n=n+Math.imul(x,de)|0,i=(i=i+Math.imul(x,he)|0)+Math.imul(I,de)|0,o=o+Math.imul(I,he)|0;var Pe=(u+(n=n+Math.imul(A,pe)|0)|0)+((8191&(i=(i=i+Math.imul(A,ge)|0)+Math.imul(S,pe)|0))<<13)|0;u=((o=o+Math.imul(S,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(U,re),i=(i=Math.imul(U,ne))+Math.imul(F,re)|0,o=Math.imul(F,ne),n=n+Math.imul(O,oe)|0,i=(i=i+Math.imul(O,se)|0)+Math.imul(D,oe)|0,o=o+Math.imul(D,se)|0,n=n+Math.imul(B,ce)|0,i=(i=i+Math.imul(B,ue)|0)+Math.imul(M,ce)|0,o=o+Math.imul(M,ue)|0,n=n+Math.imul(P,de)|0,i=(i=i+Math.imul(P,he)|0)+Math.imul(R,de)|0,o=o+Math.imul(R,he)|0;var Re=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(i=(i=i+Math.imul(x,ge)|0)+Math.imul(I,pe)|0))<<13)|0;u=((o=o+Math.imul(I,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(U,oe),i=(i=Math.imul(U,se))+Math.imul(F,oe)|0,o=Math.imul(F,se),n=n+Math.imul(O,ce)|0,i=(i=i+Math.imul(O,ue)|0)+Math.imul(D,ce)|0,o=o+Math.imul(D,ue)|0,n=n+Math.imul(B,de)|0,i=(i=i+Math.imul(B,he)|0)+Math.imul(M,de)|0,o=o+Math.imul(M,he)|0;var Ce=(u+(n=n+Math.imul(P,pe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(R,pe)|0))<<13)|0;u=((o=o+Math.imul(R,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(U,ce),i=(i=Math.imul(U,ue))+Math.imul(F,ce)|0,o=Math.imul(F,ue),n=n+Math.imul(O,de)|0,i=(i=i+Math.imul(O,he)|0)+Math.imul(D,de)|0,o=o+Math.imul(D,he)|0;var Be=(u+(n=n+Math.imul(B,pe)|0)|0)+((8191&(i=(i=i+Math.imul(B,ge)|0)+Math.imul(M,pe)|0))<<13)|0;u=((o=o+Math.imul(M,ge)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,n=Math.imul(U,de),i=(i=Math.imul(U,he))+Math.imul(F,de)|0,o=Math.imul(F,he);var Me=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(i=(i=i+Math.imul(O,ge)|0)+Math.imul(D,pe)|0))<<13)|0;u=((o=o+Math.imul(D,ge)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863;var Ne=(u+(n=Math.imul(U,pe))|0)+((8191&(i=(i=Math.imul(U,ge))+Math.imul(F,pe)|0))<<13)|0;return u=((o=Math.imul(F,ge))+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,c[0]=me,c[1]=ye,c[2]=ve,c[3]=be,c[4]=we,c[5]=_e,c[6]=Ee,c[7]=Ae,c[8]=Se,c[9]=ke,c[10]=xe,c[11]=Ie,c[12]=Te,c[13]=Pe,c[14]=Re,c[15]=Ce,c[16]=Be,c[17]=Me,c[18]=Ne,0!==u&&(c[19]=u,r.length++),r};function g(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(p=f),o.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?p(this,e,t):n<63?f(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var s=i;i=0;for(var a=67108863&n,c=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=c;u++){var l=o-u,d=(0|e.words[l])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),i+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[o]=a,n=s,s=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,e,t):g(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,i,o){for(var s=0;s<o;s++)n[s]=t[e[s]],i[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,i,o){this.permute(o,e,t,r,n,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<i;l+=a)for(var d=c,h=u,f=0;f<s;f++){var p=r[l+f],g=n[l+f],m=r[l+f+s],y=n[l+f+s],v=d*m-h*y;y=d*y+h*m,m=v,r[l+f]=p+m,n[l+f]=g+y,r[l+f+s]=p-m,n[l+f+s]=g-y,f!==a&&(v=c*d-u*h,h=c*h+u*d,d=v)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},m.prototype.convert13b=function(e,t,r,i){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<i;++s)r[s]=0;n(0===o),n(0===(-8192&o))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),o=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,o,a,c,n,i),this.transform(u,o,l,d,n,i);for(var f=0;f<n;f++){var p=a[f]*l[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),g(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){n("number"===typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,o=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=o>>>26,this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=(e.words[n]&1<<i)>>>i}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,c=(0|this.words[t])-a<<r;this.words[t]=c|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){var i;n("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var d=0|this.words[u];this.words[u]=l<<26-o|d>>>o,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var i,o,s=e.length+r;this._expand(s);var a=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this.strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!==(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);a&&(a.words[d]=h)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},o.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var l=r.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var p=0,g=1;0===(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),s.isub(c)):(r.isub(t),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},o.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0===(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(a)):(r.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var o=t;t=r,r=o}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new A(e)},o.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function v(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function A(e){if("string"===typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){A.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},v.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},v.prototype.split=function(e,t){e.iushrn(this.n,0,t)},v.prototype.imulK=function(e){return e.imul(this.k)},i(b,v),b.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,v),i(_,v),i(E,v),E.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new w;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return y[e]=t,t},A.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},A.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},A.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},A.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},A.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},A.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},A.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},A.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},A.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},A.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},A.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},A.prototype.isqr=function(e){return this.imul(e,e.clone())},A.prototype.sqr=function(e){return this.mul(e,e)},A.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);n(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var g=f,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<p);var y=this.pow(d,new o(1).iushln(p-m-1));h=h.redMul(y),d=y.redSqr(),f=f.redMul(d),p=m}return h},A.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},A.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var d=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},A.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},A.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new S(e)},i(S,A),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},7963:e=>{"use strict";function t(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,n){if(!e||"string"===typeof e)throw new TypeError("Please pass an Error to err-code");n||(n={}),"object"===typeof r&&(n=r,r=""),r&&(n.code=r);try{return t(e,n)}catch(i){n.message=e.message,n.stack=e.stack;const r=function(){};r.prototype=Object.create(Object.getPrototypeOf(e));return t(new r,n)}}},7285:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keccak512=t.keccak384=t.keccak256=t.keccak224=void 0;const n=r(7883),i=r(3720);t.keccak224=(0,i.wrapHash)(n.keccak_224),t.keccak256=(()=>{const e=(0,i.wrapHash)(n.keccak_256);return e.create=n.keccak_256.create,e})(),t.keccak384=(0,i.wrapHash)(n.keccak_384),t.keccak512=(0,i.wrapHash)(n.keccak_512)},13:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secp256k1=void 0;var n=r(6088);Object.defineProperty(t,"secp256k1",{enumerable:!0,get:function(){return n.secp256k1}})},3720:function(e,t,r){"use strict";e=r.nmd(e);var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.wrapHash=t.equalsBytes=t.hexToBytes=t.bytesToUtf8=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0;const i=n(r(4337)),o=r(4361),s=i.default.bool;t.assertBool=s;const a=i.default.bytes;t.assertBytes=a;var c=r(4361);Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),t.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got ".concat(typeof e));return(new TextDecoder).decode(e)},t.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,o.hexToBytes)(t)},t.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.wrapHash=function(e){return t=>(i.default.bytes(t),e(t))},t.crypto=(()=>{const t="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,r="function"===typeof e.require&&e.require.bind(e);return{node:r&&!t?r("crypto"):void 0,web:t}})()},4251:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isZeroAddress=t.zeroAddress=t.importPublic=t.privateToAddress=t.privateToPublic=t.publicToAddress=t.pubToAddress=t.isValidPublic=t.isValidPrivate=t.generateAddress2=t.generateAddress=t.isValidChecksumAddress=t.toChecksumAddress=t.isValidAddress=t.Account=void 0;var o=i(r(6622)),s=r(1393),a=r(3856),c=r(2328),u=r(9625),l=r(8971),d=r(32),h=r(8944),f=r(5311),p=function(){function e(e,t,r,n){void 0===e&&(e=new s.BN(0)),void 0===t&&(t=new s.BN(0)),void 0===r&&(r=u.KECCAK256_RLP),void 0===n&&(n=u.KECCAK256_NULL),this.nonce=e,this.balance=t,this.stateRoot=r,this.codeHash=n,this._validate()}return e.fromAccountData=function(t){var r=t.nonce,n=t.balance,i=t.stateRoot,o=t.codeHash;return new e(r?new s.BN((0,l.toBuffer)(r)):void 0,n?new s.BN((0,l.toBuffer)(n)):void 0,i?(0,l.toBuffer)(i):void 0,o?(0,l.toBuffer)(o):void 0)},e.fromRlpSerializedAccount=function(e){var t=s.rlp.decode(e);if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)},e.fromValuesArray=function(t){var r=n(t,4),i=r[0],o=r[1],a=r[2],c=r[3];return new e(new s.BN(i),new s.BN(o),a,c)},e.prototype._validate=function(){if(this.nonce.lt(new s.BN(0)))throw new Error("nonce must be greater than zero");if(this.balance.lt(new s.BN(0)))throw new Error("balance must be greater than zero");if(32!==this.stateRoot.length)throw new Error("stateRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")},e.prototype.raw=function(){return[(0,f.bnToUnpaddedBuffer)(this.nonce),(0,f.bnToUnpaddedBuffer)(this.balance),this.stateRoot,this.codeHash]},e.prototype.serialize=function(){return s.rlp.encode(this.raw())},e.prototype.isContract=function(){return!this.codeHash.equals(u.KECCAK256_NULL)},e.prototype.isEmpty=function(){return this.balance.isZero()&&this.nonce.isZero()&&this.codeHash.equals(u.KECCAK256_NULL)},e}();t.Account=p;t.isValidAddress=function(e){try{(0,h.assertIsString)(e)}catch(t){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};t.toChecksumAddress=function(e,t){(0,h.assertIsHexString)(e);var r=(0,c.stripHexPrefix)(e).toLowerCase(),n="";t&&(n=(0,f.toType)(t,f.TypeOutput.BN).toString()+"0x");for(var i=(0,d.keccakFromString)(n+r).toString("hex"),o="0x",s=0;s<r.length;s++)parseInt(i[s],16)>=8?o+=r[s].toUpperCase():o+=r[s];return o};t.isValidChecksumAddress=function(e,r){return(0,t.isValidAddress)(e)&&(0,t.toChecksumAddress)(e,r)===e};t.generateAddress=function(e,t){(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(t);var r=new s.BN(t);return r.isZero()?(0,d.rlphash)([e,null]).slice(-20):(0,d.rlphash)([e,Buffer.from(r.toArray())]).slice(-20)};t.generateAddress2=function(e,t,r){return(0,h.assertIsBuffer)(e),(0,h.assertIsBuffer)(t),(0,h.assertIsBuffer)(r),(0,o.default)(20===e.length),(0,o.default)(32===t.length),(0,d.keccak256)(Buffer.concat([Buffer.from("ff","hex"),e,t,(0,d.keccak256)(r)])).slice(-20)};t.isValidPrivate=function(e){return(0,a.privateKeyVerify)(e)};t.isValidPublic=function(e,t){return void 0===t&&(t=!1),(0,h.assertIsBuffer)(e),64===e.length?(0,a.publicKeyVerify)(Buffer.concat([Buffer.from([4]),e])):!!t&&(0,a.publicKeyVerify)(e)};t.pubToAddress=function(e,t){return void 0===t&&(t=!1),(0,h.assertIsBuffer)(e),t&&64!==e.length&&(e=Buffer.from((0,a.publicKeyConvert)(e,!1).slice(1))),(0,o.default)(64===e.length),(0,d.keccak)(e).slice(-20)},t.publicToAddress=t.pubToAddress;t.privateToPublic=function(e){return(0,h.assertIsBuffer)(e),Buffer.from((0,a.publicKeyCreate)(e,!1)).slice(1)};t.privateToAddress=function(e){return(0,t.publicToAddress)((0,t.privateToPublic)(e))};t.importPublic=function(e){return(0,h.assertIsBuffer)(e),64!==e.length&&(e=Buffer.from((0,a.publicKeyConvert)(e,!1).slice(1))),e};t.zeroAddress=function(){var e=(0,l.zeros)(20);return(0,l.bufferToHex)(e)};t.isZeroAddress=function(e){try{(0,h.assertIsString)(e)}catch(r){return!1}return(0,t.zeroAddress)()===e}},1899:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;var i=n(r(6622)),o=r(1393),s=r(8971),a=r(4251),c=function(){function e(e){(0,i.default)(20===e.length,"Invalid address length"),this.buf=e}return e.zero=function(){return new e((0,s.zeros)(20))},e.fromString=function(t){return(0,i.default)((0,a.isValidAddress)(t),"Invalid address"),new e((0,s.toBuffer)(t))},e.fromPublicKey=function(t){return(0,i.default)(Buffer.isBuffer(t),"Public key should be Buffer"),new e((0,a.pubToAddress)(t))},e.fromPrivateKey=function(t){return(0,i.default)(Buffer.isBuffer(t),"Private key should be Buffer"),new e((0,a.privateToAddress)(t))},e.generate=function(t,r){return(0,i.default)(o.BN.isBN(r)),new e((0,a.generateAddress)(t.buf,r.toArrayLike(Buffer)))},e.generate2=function(t,r,n){return(0,i.default)(Buffer.isBuffer(r)),(0,i.default)(Buffer.isBuffer(n)),new e((0,a.generateAddress2)(t.buf,r,n))},e.prototype.equals=function(e){return this.buf.equals(e.buf)},e.prototype.isZero=function(){return this.equals(e.zero())},e.prototype.isPrecompileOrSystemAddress=function(){var e=new o.BN(this.buf),t=new o.BN(0),r=new o.BN("ffff","hex");return e.gte(t)&&e.lte(r)},e.prototype.toString=function(){return"0x"+this.buf.toString("hex")},e.prototype.toBuffer=function(){return Buffer.from(this.buf)},e}();t.Address=c},8971:function(e,t,r){"use strict";var n=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.bufArrToArr=t.arrToBufArr=t.validateNoLeadingZeroes=t.baToJSON=t.toUtf8=t.addHexPrefix=t.toUnsigned=t.fromSigned=t.bufferToHex=t.bufferToInt=t.toBuffer=t.unpadHexString=t.unpadArray=t.unpadBuffer=t.setLengthRight=t.setLengthLeft=t.zeros=t.intToBuffer=t.intToHex=void 0;var o=r(1393),s=r(2328),a=r(8944);t.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};t.intToBuffer=function(e){var r=(0,t.intToHex)(e);return Buffer.from((0,s.padToEven)(r.slice(2)),"hex")};t.zeros=function(e){return Buffer.allocUnsafe(e).fill(0)};var c=function(e,r,n){var i=(0,t.zeros)(r);return n?e.length<r?(e.copy(i),i):e.slice(0,r):e.length<r?(e.copy(i,r-e.length),i):e.slice(-r)};t.setLengthLeft=function(e,t){return(0,a.assertIsBuffer)(e),c(e,t,!1)};t.setLengthRight=function(e,t){return(0,a.assertIsBuffer)(e),c(e,t,!0)};var u=function(e){for(var t=e[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};t.unpadBuffer=function(e){return(0,a.assertIsBuffer)(e),u(e)};t.unpadArray=function(e){return(0,a.assertIsArray)(e),u(e)};t.unpadHexString=function(e){return(0,a.assertIsHexString)(e),e=(0,s.stripHexPrefix)(e),u(e)};t.toBuffer=function(e){if(null===e||void 0===e)return Buffer.allocUnsafe(0);if(Buffer.isBuffer(e))return Buffer.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return Buffer.from(e);if("string"===typeof e){if(!(0,s.isHexString)(e))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ".concat(e));return Buffer.from((0,s.padToEven)((0,s.stripHexPrefix)(e)),"hex")}if("number"===typeof e)return(0,t.intToBuffer)(e);if(o.BN.isBN(e)){if(e.isNeg())throw new Error("Cannot convert negative BN to buffer. Given: ".concat(e));return e.toArrayLike(Buffer)}if(e.toArray)return Buffer.from(e.toArray());if(e.toBuffer)return Buffer.from(e.toBuffer());throw new Error("invalid type")};t.bufferToInt=function(e){return new o.BN((0,t.toBuffer)(e)).toNumber()};t.bufferToHex=function(e){return"0x"+(e=(0,t.toBuffer)(e)).toString("hex")};t.fromSigned=function(e){return new o.BN(e).fromTwos(256)};t.toUnsigned=function(e){return Buffer.from(e.toTwos(256).toArray())};t.addHexPrefix=function(e){return"string"!==typeof e||(0,s.isHexPrefixed)(e)?e:"0x"+e};t.toUtf8=function(e){if((e=(0,s.stripHexPrefix)(e)).length%2!==0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return Buffer.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};t.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x".concat(e.toString("hex"));if(e instanceof Array){for(var r=[],n=0;n<e.length;n++)r.push((0,t.baToJSON)(e[n]));return r}};t.validateNoLeadingZeroes=function(e){var t,r;try{for(var o=n(Object.entries(e)),s=o.next();!s.done;s=o.next()){var a=i(s.value,2),c=a[0],u=a[1];if(void 0!==u&&u.length>0&&0===u[0])throw new Error("".concat(c," cannot have leading zeroes, received: ").concat(u.toString("hex")))}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},t.arrToBufArr=function e(t){return Array.isArray(t)?t.map((function(t){return e(t)})):Buffer.from(t)},t.bufArrToArr=function e(t){return Array.isArray(t)?t.map((function(t){return e(t)})):Uint8Array.from(null!==t&&void 0!==t?t:[])}},9625:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KECCAK256_RLP=t.KECCAK256_RLP_S=t.KECCAK256_RLP_ARRAY=t.KECCAK256_RLP_ARRAY_S=t.KECCAK256_NULL=t.KECCAK256_NULL_S=t.TWO_POW256=t.MAX_INTEGER=t.MAX_UINT64=void 0;var n=r(9778),i=r(1393);t.MAX_UINT64=new i.BN("ffffffffffffffff",16),t.MAX_INTEGER=new i.BN("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),t.TWO_POW256=new i.BN("10000000000000000000000000000000000000000000000000000000000000000",16),t.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",t.KECCAK256_NULL=n.Buffer.from(t.KECCAK256_NULL_S,"hex"),t.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",t.KECCAK256_RLP_ARRAY=n.Buffer.from(t.KECCAK256_RLP_ARRAY_S,"hex"),t.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",t.KECCAK256_RLP=n.Buffer.from(t.KECCAK256_RLP_S,"hex")},1393:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.rlp=t.BN=void 0;var a=s(r(518));t.BN=a.default;var c=o(r(6445));t.rlp=c},32:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rlphash=t.ripemd160FromArray=t.ripemd160FromString=t.ripemd160=t.sha256FromArray=t.sha256FromString=t.sha256=t.keccakFromArray=t.keccakFromHexString=t.keccakFromString=t.keccak256=t.keccak=void 0;var n=r(8002),i=r(3569),o=r(1393),s=r(8971),a=r(8944);t.keccak=function(e,t){switch(void 0===t&&(t=256),(0,a.assertIsBuffer)(e),t){case 224:return(0,n.keccak224)(e);case 256:return(0,n.keccak256)(e);case 384:return(0,n.keccak384)(e);case 512:return(0,n.keccak512)(e);default:throw new Error("Invald algorithm: keccak".concat(t))}};t.keccak256=function(e){return(0,t.keccak)(e)};t.keccakFromString=function(e,r){void 0===r&&(r=256),(0,a.assertIsString)(e);var n=Buffer.from(e,"utf8");return(0,t.keccak)(n,r)};t.keccakFromHexString=function(e,r){return void 0===r&&(r=256),(0,a.assertIsHexString)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};t.keccakFromArray=function(e,r){return void 0===r&&(r=256),(0,a.assertIsArray)(e),(0,t.keccak)((0,s.toBuffer)(e),r)};var c=function(e){return e=(0,s.toBuffer)(e),i("sha256").update(e).digest()};t.sha256=function(e){return(0,a.assertIsBuffer)(e),c(e)};t.sha256FromString=function(e){return(0,a.assertIsString)(e),c(e)};t.sha256FromArray=function(e){return(0,a.assertIsArray)(e),c(e)};var u=function(e,t){e=(0,s.toBuffer)(e);var r=i("rmd160").update(e).digest();return!0===t?(0,s.setLengthLeft)(r,32):r};t.ripemd160=function(e,t){return(0,a.assertIsBuffer)(e),u(e,t)};t.ripemd160FromString=function(e,t){return(0,a.assertIsString)(e),u(e,t)};t.ripemd160FromArray=function(e,t){return(0,a.assertIsArray)(e),u(e,t)};t.rlphash=function(e){return(0,t.keccak)(o.rlp.encode(e))}},8944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsString=t.assertIsArray=t.assertIsBuffer=t.assertIsHexString=void 0;var n=r(2328);t.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){var t="This method only supports 0x-prefixed hex strings but input was: ".concat(e);throw new Error(t)}};t.assertIsBuffer=function(e){if(!Buffer.isBuffer(e)){var t="This method only supports Buffer but input was: ".concat(e);throw new Error(t)}};t.assertIsArray=function(e){if(!Array.isArray(e)){var t="This method only supports number arrays but input was: ".concat(e);throw new Error(t)}};t.assertIsString=function(e){if("string"!==typeof e){var t="This method only supports strings but input was: ".concat(e);throw new Error(t)}}},927:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,i(r(9625),t),i(r(4251),t),i(r(1899),t),i(r(32),t),i(r(2296),t),i(r(8971),t),i(r(7327),t),i(r(1393),t),i(r(5311),t);var o=r(2328);Object.defineProperty(t,"isHexPrefixed",{enumerable:!0,get:function(){return o.isHexPrefixed}}),Object.defineProperty(t,"stripHexPrefix",{enumerable:!0,get:function(){return o.stripHexPrefix}}),Object.defineProperty(t,"padToEven",{enumerable:!0,get:function(){return o.padToEven}}),Object.defineProperty(t,"getBinarySize",{enumerable:!0,get:function(){return o.getBinarySize}}),Object.defineProperty(t,"arrayContainsArray",{enumerable:!0,get:function(){return o.arrayContainsArray}}),Object.defineProperty(t,"toAscii",{enumerable:!0,get:function(){return o.toAscii}}),Object.defineProperty(t,"fromUtf8",{enumerable:!0,get:function(){return o.fromUtf8}}),Object.defineProperty(t,"fromAscii",{enumerable:!0,get:function(){return o.fromAscii}}),Object.defineProperty(t,"getKeys",{enumerable:!0,get:function(){return o.getKeys}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return o.isHexString}})},2328:(e,t)=>{"use strict";function r(e){if("string"!==typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return"0"===e[0]&&"x"===e[1]}Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=t.getKeys=t.fromAscii=t.fromUtf8=t.toAscii=t.arrayContainsArray=t.getBinarySize=t.padToEven=t.stripHexPrefix=t.isHexPrefixed=void 0,t.isHexPrefixed=r;function n(e){var t=e;if("string"!==typeof t)throw new Error("[padToEven] value must be type 'string', received ".concat(typeof t));return t.length%2&&(t="0".concat(t)),t}t.stripHexPrefix=function(e){if("string"!==typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return r(e)?e.slice(2):e},t.padToEven=n,t.getBinarySize=function(e){if("string"!==typeof e)throw new Error("[getBinarySize] method requires input type 'string', recieved ".concat(typeof e));return Buffer.byteLength(e,"utf8")},t.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error("[arrayContainsArray] method requires input 'superset' to be an array, got type '".concat(typeof e,"'"));if(!0!==Array.isArray(t))throw new Error("[arrayContainsArray] method requires input 'subset' to be an array, got type '".concat(typeof t,"'"));return t[r?"some":"every"]((function(t){return e.indexOf(t)>=0}))},t.toAscii=function(e){var t="",r=0,n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){var i=parseInt(e.substr(r,2),16);t+=String.fromCharCode(i)}return t},t.fromUtf8=function(e){var t=Buffer.from(e,"utf8");return"0x".concat(n(t.toString("hex")).replace(/^0+|0+$/g,""))},t.fromAscii=function(e){for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r).toString(16);t+=n.length<2?"0".concat(n):n}return"0x".concat(t)},t.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got ".concat(typeof e));if("string"!==typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got ".concat(typeof e));for(var n=[],i=0;i<e.length;i++){var o=e[i][t];if(r&&!o)o="";else if("string"!==typeof o)throw new Error("invalid abi - expected type 'string', received ".concat(typeof o));n.push(o)}return n},t.isHexString=function(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}},7327:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperties=void 0;var i=n(r(6622)),o=r(2328),s=r(1393),a=r(8971);t.defineProperties=function(e,t,r){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(void 0===t&&(t=!1),t){var r={};return e._fields.forEach((function(t){r[t]="0x".concat(e[t].toString("hex"))})),r}return(0,a.baToJSON)(e.raw)},e.serialize=function(){return s.rlp.encode(e.raw)},t.forEach((function(t,r){function n(){return e.raw[r]}function o(n){"00"!==(n=(0,a.toBuffer)(n)).toString("hex")||t.allowZero||(n=Buffer.allocUnsafe(0)),t.allowLess&&t.length?(n=(0,a.unpadBuffer)(n),(0,i.default)(t.length>=n.length,"The field ".concat(t.name," must not have more ").concat(t.length," bytes"))):t.allowZero&&0===n.length||!t.length||(0,i.default)(t.length===n.length,"The field ".concat(t.name," must have byte length of ").concat(t.length)),e.raw[r]=n}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:n,set:o}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:o,get:n})})),r)if("string"===typeof r&&(r=Buffer.from((0,o.stripHexPrefix)(r),"hex")),Buffer.isBuffer(r)&&(r=s.rlp.decode(r)),Array.isArray(r)){if(r.length>e._fields.length)throw new Error("wrong number of fields in data");r.forEach((function(t,r){e[e._fields[r]]=(0,a.toBuffer)(t)}))}else{if("object"!==typeof r)throw new Error("invalid data");var n=Object.keys(r);t.forEach((function(t){-1!==n.indexOf(t.name)&&(e[t.name]=r[t.name]),-1!==n.indexOf(t.alias)&&(e[t.alias]=r[t.alias])}))}}},2296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashPersonalMessage=t.isValidSignature=t.fromRpcSig=t.toCompactSig=t.toRpcSig=t.ecrecover=t.ecsign=void 0;var n=r(3856),i=r(1393),o=r(8971),s=r(32),a=r(8944),c=r(5311);function u(e,t){var r=(0,c.toType)(e,c.TypeOutput.BN);if(r.eqn(0)||r.eqn(1))return(0,c.toType)(e,c.TypeOutput.BN);if(!t)return r.subn(27);var n=(0,c.toType)(t,c.TypeOutput.BN);return r.sub(n.muln(2).addn(35))}function l(e){var t=new i.BN(e);return t.eqn(0)||t.eqn(1)}t.ecsign=function(e,t,r){var i=(0,n.ecdsaSign)(e,t),o=i.signature,s=i.recid,a=Buffer.from(o.slice(0,32)),u=Buffer.from(o.slice(32,64));if(!r||"number"===typeof r){if(r&&!Number.isSafeInteger(r))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");return{r:a,s:u,v:r?s+(2*r+35):s+27}}return{r:a,s:u,v:(0,c.toType)(r,c.TypeOutput.BN).muln(2).addn(35).addn(s).toArrayLike(Buffer)}};t.ecrecover=function(e,t,r,i,s){var a=Buffer.concat([(0,o.setLengthLeft)(r,32),(0,o.setLengthLeft)(i,32)],64),c=u(t,s);if(!l(c))throw new Error("Invalid signature v value");var d=(0,n.ecdsaRecover)(a,c.toNumber(),e);return Buffer.from((0,n.publicKeyConvert)(d,!1).slice(1))};t.toRpcSig=function(e,t,r,n){if(!l(u(e,n)))throw new Error("Invalid signature v value");return(0,o.bufferToHex)(Buffer.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(r,32),(0,o.toBuffer)(e)]))};t.toCompactSig=function(e,t,r,n){if(!l(u(e,n)))throw new Error("Invalid signature v value");var i=(0,c.toType)(e,c.TypeOutput.Number),s=r;return(i>28&&i%2===1||1===i||28===i)&&((s=Buffer.from(r))[0]|=128),(0,o.bufferToHex)(Buffer.concat([(0,o.setLengthLeft)(t,32),(0,o.setLengthLeft)(s,32)]))};t.fromRpcSig=function(e){var t,r,n,i=(0,o.toBuffer)(e);if(i.length>=65)t=i.slice(0,32),r=i.slice(32,64),n=(0,o.bufferToInt)(i.slice(64));else{if(64!==i.length)throw new Error("Invalid signature length");t=i.slice(0,32),r=i.slice(32,64),n=(0,o.bufferToInt)(i.slice(32,33))>>7,r[0]&=127}return n<27&&(n+=27),{v:n,r:t,s:r}};t.isValidSignature=function(e,t,r,n,o){void 0===n&&(n=!0);var s=new i.BN("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),a=new i.BN("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==t.length||32!==r.length)return!1;if(!l(u(e,o)))return!1;var c=new i.BN(t),d=new i.BN(r);return!(c.isZero()||c.gt(a)||d.isZero()||d.gt(a))&&(!n||1!==d.cmp(s))};t.hashPersonalMessage=function(e){(0,a.assertIsBuffer)(e);var t=Buffer.from("\x19Ethereum Signed Message:\n".concat(e.length),"utf-8");return(0,s.keccak)(Buffer.concat([t,e]))}},5311:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toType=t.TypeOutput=t.bnToRlp=t.bnToUnpaddedBuffer=t.bnToHex=void 0;var n,i=r(1393),o=r(2328),s=r(8971);function a(e){return(0,s.unpadBuffer)(e.toArrayLike(Buffer))}t.bnToHex=function(e){return"0x".concat(e.toString(16))},t.bnToUnpaddedBuffer=a,t.bnToRlp=function(e){return a(e)},function(e){e[e.Number=0]="Number",e[e.BN=1]="BN",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(n=t.TypeOutput||(t.TypeOutput={})),t.toType=function(e,t){if(null===e)return null;if(void 0!==e){if("string"===typeof e&&!(0,o.isHexString)(e))throw new Error("A string must be provided with a 0x-prefix, given: ".concat(e));if("number"===typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");var r=(0,s.toBuffer)(e);if(t===n.Buffer)return r;if(t===n.BN)return new i.BN(r);if(t===n.Number){var a=new i.BN(r),c=new i.BN(Number.MAX_SAFE_INTEGER.toString());if(a.gt(c))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return a.toNumber()}return"0x".concat(r.toString("hex"))}}},8263:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHashFunction=function(e){return function(t){var r=e();return r.update(t),Buffer.from(r.digest())}}},8002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8263),i=r(1321);t.keccak224=n.createHashFunction((function(){return i("keccak224")})),t.keccak256=n.createHashFunction((function(){return i("keccak256")})),t.keccak384=n.createHashFunction((function(){return i("keccak384")})),t.keccak512=n.createHashFunction((function(){return i("keccak512")}))},5307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2525);t.getRandomBytes=function(e){return new Promise((function(t,r){n(e,(function(e,n){e?r(e):t(n)}))}))},t.getRandomBytesSync=function(e){return n(e)}},3856:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(1113),s=r(5307);t.createPrivateKey=function(){return n(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,s.getRandomBytes(32)];case 1:return e=t.sent(),o.privateKeyVerify(e)?[2,e]:[3,0];case 2:return[2]}}))}))},t.createPrivateKeySync=function(){for(;;){var e=s.getRandomBytesSync(32);if(o.privateKeyVerify(e))return e}},function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(1113))},3634:(e,t,r)=>{"use strict";const n=r(5413);t.zN=n.EventIterator,n.EventIterator},5413:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;const t={value:e,done:!1};if(this.pullQueue.length){const e=this.pullQueue.shift();e&&e.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn("EventIterator queue reached ".concat(this.pushQueue.length," items")))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const t of this.pullQueue)t.reject(e);this.pullQueue.length=0}else{const t=Promise.reject(e);t.catch((()=>{})),this.pushQueue.push(t)}}remove(){Promise.resolve().then((()=>{this.removeCallback&&this.removeCallback()}))}[Symbol.asyncIterator](){return{next:e=>{const t=this.pushQueue.shift();return t?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),t):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise(((e,t)=>{this.pullQueue.push({resolve:e,reject:t})}))},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class n{constructor(e){let{highWaterMark:t=100,lowWaterMark:n=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new r;i.highWaterMark=t,i.lowWaterMark=n,i.removeCallback=e({push:e=>i.push(e),stop:()=>i.stop(),fail:e=>i.fail(e),on:(e,t)=>{i.eventHandlers[e]=t}})||(()=>{}),this[Symbol.asyncIterator]=()=>i[Symbol.asyncIterator](),Object.freeze(this)}}t.EventIterator=n,t.default=n},7465:e=>{"use strict";var t,r="object"===typeof Reflect?Reflect:null,n=r&&"function"===typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,o),n(r)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&g(e,"error",t,r)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var i,o,s,u;if(a(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"===typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=l.bind(n);return i.listener=r,n.wrapFn=i,i}function h(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"===typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"===typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){n.once&&e.removeEventListener(t,i),r(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(void 0===c)return!1;if("function"===typeof c)n(c,this,t);else{var u=c.length,l=p(c,u);for(r=0;r<u;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return u(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return u(this,e,t,!0)},o.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,i,o,s;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},5369:(e,t,r)=>{"use strict";var n=r(460),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var s;arguments.length>=3&&(s=r),"[object Array]"===i.call(e)?function(e,t,r){for(var n=0,i=e.length;n<i;n++)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,s):"string"===typeof e?function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(e,t,s):function(e,t,r){for(var n in e)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))}(e,t,s)}},4898:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,n=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r};e.exports=function(e){var i=this;if("function"!==typeof i||"[object Function]"!==t.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,s=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r}(arguments,1),a=r(0,i.length-s.length),c=[],u=0;u<a;u++)c[u]="$"+u;if(o=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(c,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var t=i.apply(this,n(s,arguments));return Object(t)===t?t:this}return i.apply(e,n(s,arguments))})),i.prototype){var l=function(){};l.prototype=i.prototype,o.prototype=new l,l.prototype=null}return o}},3350:(e,t,r)=>{"use strict";var n=r(4898);e.exports=Function.prototype.bind||n},2506:(e,t,r)=>{"use strict";var n,i=SyntaxError,o=Function,s=TypeError,a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(t){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(R){c=null}var u=function(){throw new s},l=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(t){return u}}}():u,d=r(697)(),h=r(2203)(),f=Object.getPrototypeOf||(h?function(e){return e.__proto__}:null),p={},g="undefined"!==typeof Uint8Array&&f?f(Uint8Array):n,m={"%AggregateError%":"undefined"===typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":d&&f?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"===typeof Atomics?n:Atomics,"%BigInt%":"undefined"===typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"===typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d&&f?f(f([][Symbol.iterator]())):n,"%JSON%":"object"===typeof JSON?JSON:n,"%Map%":"undefined"===typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&d&&f?f((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?n:Promise,"%Proxy%":"undefined"===typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&d&&f?f((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d&&f?f(""[Symbol.iterator]()):n,"%Symbol%":d?Symbol:n,"%SyntaxError%":i,"%ThrowTypeError%":l,"%TypedArray%":g,"%TypeError%":s,"%Uint8Array%":"undefined"===typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?n:WeakSet};if(f)try{null.error}catch(R){var y=f(f(R));m["%Error.prototype%"]=y}var v=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&f&&(r=f(i.prototype))}return m[t]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=r(3350),_=r(9670),E=w.call(Function.call,Array.prototype.concat),A=w.call(Function.apply,Array.prototype.splice),S=w.call(Function.call,String.prototype.replace),k=w.call(Function.call,String.prototype.slice),x=w.call(Function.call,RegExp.prototype.exec),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,P=function(e,t){var r,n=e;if(_(b,n)&&(n="%"+(r=b[n])[0]+"%"),_(m,n)){var o=m[n];if(o===p&&(o=v(n)),"undefined"===typeof o&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new s('"allowMissing" argument must be a boolean');if(null===x(/^%?[^%]*%?$/,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=k(e,0,1),r=k(e,-1);if("%"===t&&"%"!==r)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var n=[];return S(e,I,(function(e,t,r,i){n[n.length]=r?S(i,T,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=P("%"+n+"%",t),a=o.name,u=o.value,l=!1,d=o.alias;d&&(n=d[0],A(r,E([0,1],d)));for(var h=1,f=!0;h<r.length;h+=1){var p=r[h],g=k(p,0,1),y=k(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===y||"'"===y||"`"===y)&&g!==y)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&f||(l=!0),_(m,a="%"+(n+="."+p)+"%"))u=m[a];else if(null!=u){if(!(p in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&h+1>=r.length){var v=c(u,p);u=(f=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[p]}else f=_(u,p),u=u[p];f&&!l&&(m[a]=u)}}return u}},3347:(e,t,r)=>{"use strict";var n=r(2506)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(i){n=null}e.exports=n},4510:(e,t,r)=>{"use strict";var n=r(2506)("%Object.defineProperty%",!0),i=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},2203:e=>{"use strict";var t={foo:{}},r=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!({__proto__:null}instanceof r)}},697:(e,t,r)=>{"use strict";var n="undefined"!==typeof Symbol&&Symbol,i=r(9564);e.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},9564:e=>{"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},4707:(e,t,r)=>{"use strict";var n=r(9564);e.exports=function(){return n()&&!!Symbol.toStringTag}},6266:(e,t,r)=>{"use strict";var n=r(2543).Buffer,i=r(723).Transform;function o(e){i.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}r(2534)(o,i),o.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(i){n=i}r(n)},o.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(r){t=r}e(t)},o.prototype.update=function(e,t){if(function(e,t){if(!n.isBuffer(e)&&"string"!==typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var s=0,a=8*e.length;a>0;++s)this._length[s]+=a,(a=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*a);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},o.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=o},3125:(e,t,r)=>{var n=t;n.utils=r(9046),n.common=r(9684),n.sha=r(9194),n.ripemd=r(6645),n.hmac=r(3609),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},9684:(e,t,r)=>{"use strict";var n=r(9046),i=r(2325);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var i=1;i<r;i++)n[i]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)n[i++]=0;n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=e>>>24&255,n[i++]=e>>>16&255,n[i++]=e>>>8&255,n[i++]=255&e}else for(n[i++]=255&e,n[i++]=e>>>8&255,n[i++]=e>>>16&255,n[i++]=e>>>24&255,n[i++]=0,n[i++]=0,n[i++]=0,n[i++]=0,o=8;o<this.padLength;o++)n[i++]=0;return n}},3609:(e,t,r)=>{"use strict";var n=r(9046),i=r(2325);function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}e.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},6645:(e,t,r)=>{"use strict";var n=r(9046),i=r(9684),o=n.rotl32,s=n.sum32,a=n.sum32_3,c=n.sum32_4,u=i.BlockHash;function l(){if(!(this instanceof l))return new l;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(l,u),t.ripemd160=l,l.blockSize=512,l.outSize=160,l.hmacStrength=192,l.padLength=64,l.prototype._update=function(e,t){for(var r=this.h[0],n=this.h[1],i=this.h[2],u=this.h[3],l=this.h[4],v=r,b=n,w=i,_=u,E=l,A=0;A<80;A++){var S=s(o(c(r,d(A,n,i,u),e[p[A]+t],h(A)),m[A]),l);r=l,l=u,u=o(i,10),i=n,n=S,S=s(o(c(v,d(79-A,b,w,_),e[g[A]+t],f(A)),y[A]),E),v=E,E=_,_=o(w,10),w=b,b=S}S=a(this.h[1],i,_),this.h[1]=a(this.h[2],u,E),this.h[2]=a(this.h[3],l,v),this.h[3]=a(this.h[4],r,b),this.h[4]=a(this.h[0],n,w),this.h[0]=S},l.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},9194:(e,t,r)=>{"use strict";t.sha1=r(7361),t.sha224=r(7753),t.sha256=r(6966),t.sha384=r(1233),t.sha512=r(9063)},7361:(e,t,r)=>{"use strict";var n=r(9046),i=r(9684),o=r(4343),s=n.rotl32,a=n.sum32,c=n.sum32_5,u=o.ft_1,l=i.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(h,l),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=s(r[n-3]^r[n-8]^r[n-14]^r[n-16],1);var i=this.h[0],o=this.h[1],l=this.h[2],h=this.h[3],f=this.h[4];for(n=0;n<r.length;n++){var p=~~(n/20),g=c(s(i,5),u(p,o,l,h),f,r[n],d[p]);f=h,h=l,l=s(o,30),o=i,i=g}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],l),this.h[3]=a(this.h[3],h),this.h[4]=a(this.h[4],f)},h.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},7753:(e,t,r)=>{"use strict";var n=r(9046),i=r(6966);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,i),e.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},6966:(e,t,r)=>{"use strict";var n=r(9046),i=r(9684),o=r(4343),s=r(2325),a=n.sum32,c=n.sum32_4,u=n.sum32_5,l=o.ch32,d=o.maj32,h=o.s0_256,f=o.s1_256,p=o.g0_256,g=o.g1_256,m=i.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(v,m),e.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var r=this.W,n=0;n<16;n++)r[n]=e[t+n];for(;n<r.length;n++)r[n]=c(g(r[n-2]),r[n-7],p(r[n-15]),r[n-16]);var i=this.h[0],o=this.h[1],m=this.h[2],y=this.h[3],v=this.h[4],b=this.h[5],w=this.h[6],_=this.h[7];for(s(this.k.length===r.length),n=0;n<r.length;n++){var E=u(_,f(v),l(v,b,w),this.k[n],r[n]),A=a(h(i),d(i,o,m));_=w,w=b,b=v,v=a(y,E),y=m,m=o,o=i,i=a(E,A)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],y),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],_)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},1233:(e,t,r)=>{"use strict";var n=r(9046),i=r(9063);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,i),e.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},9063:(e,t,r)=>{"use strict";var n=r(9046),i=r(9684),o=r(2325),s=n.rotr64_hi,a=n.rotr64_lo,c=n.shr64_hi,u=n.shr64_lo,l=n.sum64,d=n.sum64_hi,h=n.sum64_lo,f=n.sum64_4_hi,p=n.sum64_4_lo,g=n.sum64_5_hi,m=n.sum64_5_lo,y=i.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function w(e,t,r,n,i){var o=e&r^~e&i;return o<0&&(o+=4294967296),o}function _(e,t,r,n,i,o){var s=t&n^~t&o;return s<0&&(s+=4294967296),s}function E(e,t,r,n,i){var o=e&r^e&i^r&i;return o<0&&(o+=4294967296),o}function A(e,t,r,n,i,o){var s=t&n^t&o^n&o;return s<0&&(s+=4294967296),s}function S(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=4294967296),r}function k(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function x(e,t){var r=s(e,t,14)^s(e,t,18)^s(t,e,9);return r<0&&(r+=4294967296),r}function I(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function T(e,t){var r=s(e,t,1)^s(e,t,8)^c(e,t,7);return r<0&&(r+=4294967296),r}function P(e,t){var r=a(e,t,1)^a(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r}function R(e,t){var r=s(e,t,19)^s(t,e,29)^c(e,t,6);return r<0&&(r+=4294967296),r}function C(e,t){var r=a(e,t,19)^a(t,e,29)^u(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(b,y),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var i=R(r[n-4],r[n-3]),o=C(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],c=T(r[n-30],r[n-29]),u=P(r[n-30],r[n-29]),l=r[n-32],d=r[n-31];r[n]=f(i,o,s,a,c,u,l,d),r[n+1]=p(i,o,s,a,c,u,l,d)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,n=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],c=this.h[4],u=this.h[5],f=this.h[6],p=this.h[7],y=this.h[8],v=this.h[9],b=this.h[10],T=this.h[11],P=this.h[12],R=this.h[13],C=this.h[14],B=this.h[15];o(this.k.length===r.length);for(var M=0;M<r.length;M+=2){var N=C,O=B,D=x(y,v),L=I(y,v),U=w(y,v,b,T,P),F=_(y,v,b,T,P,R),j=this.k[M],q=this.k[M+1],z=r[M],H=r[M+1],K=g(N,O,D,L,U,F,j,q,z,H),V=m(N,O,D,L,U,F,j,q,z,H);N=S(n,i),O=k(n,i),D=E(n,i,s,a,c),L=A(n,i,s,a,c,u);var G=d(N,O,D,L),W=h(N,O,D,L);C=P,B=R,P=b,R=T,b=y,T=v,y=d(f,p,K,V),v=h(p,p,K,V),f=c,p=u,c=s,u=a,s=n,a=i,n=d(K,V,G,W),i=h(K,V,G,W)}l(this.h,0,n,i),l(this.h,2,s,a),l(this.h,4,c,u),l(this.h,6,f,p),l(this.h,8,y,v),l(this.h,10,b,T),l(this.h,12,P,R),l(this.h,14,C,B)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},4343:(e,t,r)=>{"use strict";var n=r(9046).rotr32;function i(e,t,r){return e&t^~e&r}function o(e,t,r){return e&t^e&r^t&r}function s(e,t,r){return e^t^r}t.ft_1=function(e,t,r,n){return 0===e?i(t,r,n):1===e||3===e?s(t,r,n):2===e?o(t,r,n):void 0},t.ch32=i,t.maj32=o,t.p32=s,t.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},t.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},t.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},t.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}},9046:(e,t,r)=>{"use strict";var n=r(2325),i=r(2534);function o(e,t){return 55296===(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320===(64512&e.charCodeAt(t+1)))}function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"===typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(var n=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=63&s|128):o(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=63&s|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=63&s|128)}else for(i=0;i<e.length;i++)r[i]=0|e[i];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var r="",n=0;n<e.length;n++){var i=e[n];"little"===t&&(i=s(i)),r+=c(i.toString(16))}return r},t.zero2=a,t.zero8=c,t.join32=function(e,t,r,i){var o=r-t;n(o%4===0);for(var s=new Array(o/4),a=0,c=t;a<s.length;a++,c+=4){var u;u="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],s[a]=u>>>0}return s},t.split32=function(e,t){for(var r=new Array(4*e.length),n=0,i=0;n<e.length;n++,i+=4){var o=e[n];"big"===t?(r[i]=o>>>24,r[i+1]=o>>>16&255,r[i+2]=o>>>8&255,r[i+3]=255&o):(r[i+3]=o>>>24,r[i+2]=o>>>16&255,r[i+1]=o>>>8&255,r[i]=255&o)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},t.sum32_5=function(e,t,r,n,i){return e+t+r+n+i>>>0},t.sum64=function(e,t,r,n){var i=e[t],o=n+e[t+1]>>>0,s=(o<n?1:0)+r+i;e[t]=s>>>0,e[t+1]=o},t.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,n){return t+n>>>0},t.sum64_4_hi=function(e,t,r,n,i,o,s,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+o>>>0)<o?1:0,e+r+i+s+(c+=(u=u+a>>>0)<a?1:0)>>>0},t.sum64_4_lo=function(e,t,r,n,i,o,s,a){return t+n+o+a>>>0},t.sum64_5_hi=function(e,t,r,n,i,o,s,a,c,u){var l=0,d=t;return l+=(d=d+n>>>0)<t?1:0,l+=(d=d+o>>>0)<o?1:0,l+=(d=d+a>>>0)<a?1:0,e+r+i+s+c+(l+=(d=d+u>>>0)<u?1:0)>>>0},t.sum64_5_lo=function(e,t,r,n,i,o,s,a,c,u){return t+n+o+a+u>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},9670:(e,t,r)=>{"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=r(3350);e.exports=o.call(n,i)},9437:(e,t,r)=>{var n;!function(){"use strict";var t="object"===typeof window?window:{};!t.HI_BASE32_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node&&(t=r.g);var i=!t.HI_BASE32_NO_COMMON_JS&&e.exports,o=r.amdO,s="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),a={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},c=[0,0,0,0,0,0,0,0],u=function(e,t){t.length>10&&(t="..."+t.substr(-10));var r=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+e+" bytes: "+t+" <-");throw r.position=e,r},l=function(e){if(""===e)return[];if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");for(var t,r,n,i,o,s,c,u,l=[],d=0,h=(e=e.replace(/=/g,"")).length,f=0,p=h>>3<<3;f<p;)t=a[e.charAt(f++)],r=a[e.charAt(f++)],n=a[e.charAt(f++)],i=a[e.charAt(f++)],o=a[e.charAt(f++)],s=a[e.charAt(f++)],c=a[e.charAt(f++)],u=a[e.charAt(f++)],l[d++]=255&(t<<3|r>>>2),l[d++]=255&(r<<6|n<<1|i>>>4),l[d++]=255&(i<<4|o>>>1),l[d++]=255&(o<<7|s<<2|c>>>3),l[d++]=255&(c<<5|u);var g=h-p;return 2===g?(t=a[e.charAt(f++)],r=a[e.charAt(f++)],l[d++]=255&(t<<3|r>>>2)):4===g?(t=a[e.charAt(f++)],r=a[e.charAt(f++)],n=a[e.charAt(f++)],i=a[e.charAt(f++)],l[d++]=255&(t<<3|r>>>2),l[d++]=255&(r<<6|n<<1|i>>>4)):5===g?(t=a[e.charAt(f++)],r=a[e.charAt(f++)],n=a[e.charAt(f++)],i=a[e.charAt(f++)],o=a[e.charAt(f++)],l[d++]=255&(t<<3|r>>>2),l[d++]=255&(r<<6|n<<1|i>>>4),l[d++]=255&(i<<4|o>>>1)):7===g&&(t=a[e.charAt(f++)],r=a[e.charAt(f++)],n=a[e.charAt(f++)],i=a[e.charAt(f++)],o=a[e.charAt(f++)],s=a[e.charAt(f++)],c=a[e.charAt(f++)],l[d++]=255&(t<<3|r>>>2),l[d++]=255&(r<<6|n<<1|i>>>4),l[d++]=255&(i<<4|o>>>1),l[d++]=255&(o<<7|s<<2|c>>>3)),l},d=function(e,t){if(!t)return function(e){for(var t,r,n="",i=e.length,o=0,s=0;o<i;)if((t=e[o++])<=127)n+=String.fromCharCode(t);else{t>191&&t<=223?(r=31&t,s=1):t<=239?(r=15&t,s=2):t<=247?(r=7&t,s=3):u(o,n);for(var a=0;a<s;++a)((t=e[o++])<128||t>191)&&u(o,n),r<<=6,r+=63&t;r>=55296&&r<=57343&&u(o,n),r>1114111&&u(o,n),r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+(1023&r)))}return n}(l(e));if(""===e)return"";if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");var r,n,i,o,s,c,d,h,f="",p=e.indexOf("=");-1===p&&(p=e.length);for(var g=0,m=p>>3<<3;g<m;)r=a[e.charAt(g++)],n=a[e.charAt(g++)],i=a[e.charAt(g++)],o=a[e.charAt(g++)],s=a[e.charAt(g++)],c=a[e.charAt(g++)],d=a[e.charAt(g++)],h=a[e.charAt(g++)],f+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))+String.fromCharCode(255&(o<<4|s>>>1))+String.fromCharCode(255&(s<<7|c<<2|d>>>3))+String.fromCharCode(255&(d<<5|h));var y=p-m;return 2===y?(r=a[e.charAt(g++)],n=a[e.charAt(g++)],f+=String.fromCharCode(255&(r<<3|n>>>2))):4===y?(r=a[e.charAt(g++)],n=a[e.charAt(g++)],i=a[e.charAt(g++)],o=a[e.charAt(g++)],f+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))):5===y?(r=a[e.charAt(g++)],n=a[e.charAt(g++)],i=a[e.charAt(g++)],o=a[e.charAt(g++)],s=a[e.charAt(g++)],f+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))+String.fromCharCode(255&(o<<4|s>>>1))):7===y&&(r=a[e.charAt(g++)],n=a[e.charAt(g++)],i=a[e.charAt(g++)],o=a[e.charAt(g++)],s=a[e.charAt(g++)],c=a[e.charAt(g++)],d=a[e.charAt(g++)],f+=String.fromCharCode(255&(r<<3|n>>>2))+String.fromCharCode(255&(n<<6|i<<1|o>>>4))+String.fromCharCode(255&(o<<4|s>>>1))+String.fromCharCode(255&(s<<7|c<<2|d>>>3))),f},h={encode:function(e,t){var r="string"!==typeof e;return r&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),r?function(e){for(var t,r,n,i,o,a="",c=e.length,u=0,l=5*parseInt(c/5);u<l;)t=e[u++],r=e[u++],n=e[u++],i=e[u++],o=e[u++],a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[31&(i<<3|o>>>5)]+s[31&o];var d=c-l;return 1===d?(t=e[u],a+=s[t>>>3]+s[t<<2&31]+"======"):2===d?(t=e[u++],r=e[u],a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[r<<4&31]+"===="):3===d?(t=e[u++],r=e[u++],n=e[u],a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[n<<1&31]+"==="):4===d&&(t=e[u++],r=e[u++],n=e[u++],i=e[u],a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[i<<3&31]+"="),a}(e):t?function(e){for(var t,r,n,i,o,a="",c=e.length,u=0,l=5*parseInt(c/5);u<l;)t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u++),o=e.charCodeAt(u++),a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[31&(i<<3|o>>>5)]+s[31&o];var d=c-l;return 1===d?(t=e.charCodeAt(u),a+=s[t>>>3]+s[t<<2&31]+"======"):2===d?(t=e.charCodeAt(u++),r=e.charCodeAt(u),a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[r<<4&31]+"===="):3===d?(t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u),a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[n<<1&31]+"==="):4===d&&(t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u),a+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[i<<3&31]+"="),a}(e):function(e){var t,r,n,i,o,a,u,l=!1,d="",h=0,f=0,p=e.length;if(""===e)return d;do{for(c[0]=c[5],c[1]=c[6],c[2]=c[7],u=f;h<p&&u<5;++h)(a=e.charCodeAt(h))<128?c[u++]=a:a<2048?(c[u++]=192|a>>6,c[u++]=128|63&a):a<55296||a>=57344?(c[u++]=224|a>>12,c[u++]=128|a>>6&63,c[u++]=128|63&a):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++h)),c[u++]=240|a>>18,c[u++]=128|a>>12&63,c[u++]=128|a>>6&63,c[u++]=128|63&a);f=u-5,h===p&&++h,h>p&&u<6&&(l=!0),t=c[0],u>4?(r=c[1],n=c[2],i=c[3],o=c[4],d+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[31&(i<<3|o>>>5)]+s[31&o]):1===u?d+=s[t>>>3]+s[t<<2&31]+"======":2===u?(r=c[1],d+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[r<<4&31]+"===="):3===u?(r=c[1],n=c[2],d+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[n<<1&31]+"==="):(r=c[1],n=c[2],i=c[3],d+=s[t>>>3]+s[31&(t<<2|r>>>6)]+s[r>>>1&31]+s[31&(r<<4|n>>>4)]+s[31&(n<<1|i>>>7)]+s[i>>>2&31]+s[i<<3&31]+"=")}while(!l);return d}(e)},decode:d};d.asBytes=l,i?e.exports=h:(t.base32=h,o&&(void 0===(n=function(){return h}.call(h,r,h,e))||(e.exports=n)))}()},7411:(e,t,r)=>{"use strict";var n=r(3125),i=r(4034),o=r(2325);function s(e){if(!(this instanceof s))return new s(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),r=i.toArray(e.nonce,e.nonceEnc||"hex"),n=i.toArray(e.pers,e.persEnc||"hex");o(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}e.exports=s,s.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(e,t,r,n){"string"!==typeof t&&(n=r,r=t,t=null),e=i.toArray(e,t),r=i.toArray(r,n),o(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},s.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(n=r,r=t,t=null),r&&(r=i.toArray(r,n||"hex"),this._update(r));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var s=o.slice(0,e);return this._update(r),this._reseed++,i.encode(s,t)}},4038:(e,t)=>{t.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?i-1:0,h=r?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-l)-1,f>>=-l,l+=a;l>0;o=256*o+e[t+d],d+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=h,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=u}return(f?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,i),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[r+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*g}},2534:e=>{"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},7201:function(e){!function(t){"use strict";const r="(0?\\d+|0x[a-f0-9]+)",n={fourOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),threeOctet:new RegExp("^".concat(r,"\\.").concat(r,"\\.").concat(r,"$"),"i"),twoOctet:new RegExp("^".concat(r,"\\.").concat(r,"$"),"i"),longValue:new RegExp("^".concat(r,"$"),"i")},i=new RegExp("^0[0-7]+$","i"),o=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",c={zoneIndex:new RegExp(s,"i"),native:new RegExp("^(::)?(".concat(a,")?([0-9a-f]+)?(::)?(").concat(s,")?$"),"i"),deprecatedTransitional:new RegExp("^(?:::)(".concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(s,")?)$"),"i"),transitional:new RegExp("^((?:".concat(a,")|(?:::)(?:").concat(a,")?)").concat(r,"\\.").concat(r,"\\.").concat(r,"\\.").concat(r,"(").concat(s,")?$"),"i")};function u(e,t){if(e.indexOf("::")!==e.lastIndexOf("::"))return null;let r,n,i=0,o=-1,s=(e.match(c.zoneIndex)||[])[0];for(s&&(s=s.substring(1),e=e.replace(/%.+$/,""));(o=e.indexOf(":",o+1))>=0;)i++;if("::"===e.substr(0,2)&&i--,"::"===e.substr(-2,2)&&i--,i>t)return null;for(n=t-i,r=":";n--;)r+="0:";return":"===(e=e.replace("::",r))[0]&&(e=e.slice(1)),":"===e[e.length-1]&&(e=e.slice(0,-1)),{parts:t=function(){const t=e.split(":"),r=[];for(let e=0;e<t.length;e++)r.push(parseInt(t[e],16));return r}(),zoneId:s}}function l(e,t,r,n){if(e.length!==t.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let i,o=0;for(;n>0;){if(i=r-n,i<0&&(i=0),e[o]>>i!==t[o]>>i)return!1;n-=r,o+=1}return!0}function d(e){if(o.test(e))return parseInt(e,16);if("0"===e[0]&&!isNaN(parseInt(e[1],10))){if(i.test(e))return parseInt(e,8);throw new Error("ipaddr: cannot parse ".concat(e," as octal"))}return parseInt(e,10)}function h(e,t){for(;e.length<t;)e="0".concat(e);return e}const f={};f.IPv4=function(){function e(e){if(4!==e.length)throw new Error("ipaddr: ipv4 octet count should be 4");let t,r;for(t=0;t<e.length;t++)if(r=e[t],!(0<=r&&r<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=e}return e.prototype.SpecialRanges={unspecified:[[new e([0,0,0,0]),8]],broadcast:[[new e([255,255,255,255]),32]],multicast:[[new e([224,0,0,0]),4]],linkLocal:[[new e([169,254,0,0]),16]],loopback:[[new e([127,0,0,0]),8]],carrierGradeNat:[[new e([100,64,0,0]),10]],private:[[new e([10,0,0,0]),8],[new e([172,16,0,0]),12],[new e([192,168,0,0]),16]],reserved:[[new e([192,0,0,0]),24],[new e([192,0,2,0]),24],[new e([192,88,99,0]),24],[new e([198,18,0,0]),15],[new e([198,51,100,0]),24],[new e([203,0,113,0]),24],[new e([240,0,0,0]),4]]},e.prototype.kind=function(){return"ipv4"},e.prototype.match=function(e,t){let r;if(void 0===t&&(r=e,e=r[0],t=r[1]),"ipv4"!==e.kind())throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return l(this.octets,e.octets,8,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const r={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let n,i,o;for(n=3;n>=0;n-=1){if(i=this.octets[n],!(i in r))return null;if(o=r[i],t&&0!==o)return null;8!==o&&(t=!0),e+=o}return 32-e},e.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){return this.octets.slice(0)},e.prototype.toIPv4MappedAddress=function(){return f.IPv6.parse("::ffff:".concat(this.toString()))},e.prototype.toNormalizedString=function(){return this.toString()},e.prototype.toString=function(){return this.octets.join(".")},e}(),f.IPv4.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[];let o=0;for(;o<4;)i.push(parseInt(r[o],10)|255^parseInt(n[o],10)),o++;return new this(i)}catch(t){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.isIPv4=function(e){return null!==this.parser(e)},f.IPv4.isValid=function(e){try{return new this(this.parser(e)),!0}catch(t){return!1}},f.IPv4.isValidFourPartDecimal=function(e){return!(!f.IPv4.isValid(e)||!e.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},f.IPv4.networkAddressFromCIDR=function(e){let t,r,n,i,o;try{for(t=this.parseCIDR(e),n=t[0].toByteArray(),o=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[],r=0;r<4;)i.push(parseInt(n[r],10)&parseInt(o[r],10)),r++;return new this(i)}catch(s){throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.parse=function(e){const t=this.parser(e);if(null===t)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(t)},f.IPv4.parseCIDR=function(e){let t;if(t=e.match(/^(.+)\/(\d+)$/)){const e=parseInt(t[2]);if(e>=0&&e<=32){const r=[this.parse(t[1]),e];return Object.defineProperty(r,"toString",{value:function(){return this.join("/")}}),r}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},f.IPv4.parser=function(e){let t,r,i;if(t=e.match(n.fourOctet))return function(){const e=t.slice(1,6),n=[];for(let t=0;t<e.length;t++)r=e[t],n.push(d(r));return n}();if(t=e.match(n.longValue)){if(i=d(t[1]),i>4294967295||i<0)throw new Error("ipaddr: address outside defined range");return function(){const e=[];let t;for(t=0;t<=24;t+=8)e.push(i>>t&255);return e}().reverse()}return(t=e.match(n.twoOctet))?function(){const e=t.slice(1,4),r=[];if(i=d(e[1]),i>16777215||i<0)throw new Error("ipaddr: address outside defined range");return r.push(d(e[0])),r.push(i>>16&255),r.push(i>>8&255),r.push(255&i),r}():(t=e.match(n.threeOctet))?function(){const e=t.slice(1,5),r=[];if(i=d(e[2]),i>65535||i<0)throw new Error("ipaddr: address outside defined range");return r.push(d(e[0])),r.push(d(e[1])),r.push(i>>8&255),r.push(255&i),r}():null},f.IPv4.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>32)throw new Error("ipaddr: invalid IPv4 prefix length");const t=[0,0,0,0];let r=0;const n=Math.floor(e/8);for(;r<n;)t[r]=255,r++;return n<4&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},f.IPv6=function(){function e(e,t){let r,n;if(16===e.length)for(this.parts=[],r=0;r<=14;r+=2)this.parts.push(e[r]<<8|e[r+1]);else{if(8!==e.length)throw new Error("ipaddr: ipv6 part count should be 8 or 16");this.parts=e}for(r=0;r<this.parts.length;r++)if(n=this.parts[r],!(0<=n&&n<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");t&&(this.zoneId=t)}return e.prototype.SpecialRanges={unspecified:[new e([0,0,0,0,0,0,0,0]),128],linkLocal:[new e([65152,0,0,0,0,0,0,0]),10],multicast:[new e([65280,0,0,0,0,0,0,0]),8],loopback:[new e([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new e([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new e([0,0,0,0,0,65535,0,0]),96],rfc6145:[new e([0,0,0,0,65535,0,0,0]),96],rfc6052:[new e([100,65435,0,0,0,0,0,0]),96],"6to4":[new e([8194,0,0,0,0,0,0,0]),16],teredo:[new e([8193,0,0,0,0,0,0,0]),32],reserved:[[new e([8193,3512,0,0,0,0,0,0]),32]],benchmarking:[new e([8193,2,0,0,0,0,0,0]),48],amt:[new e([8193,3,0,0,0,0,0,0]),32],as112v6:[new e([8193,4,274,0,0,0,0,0]),48],deprecated:[new e([8193,16,0,0,0,0,0,0]),28],orchid2:[new e([8193,32,0,0,0,0,0,0]),28]},e.prototype.isIPv4MappedAddress=function(){return"ipv4Mapped"===this.range()},e.prototype.kind=function(){return"ipv6"},e.prototype.match=function(e,t){let r;if(void 0===t&&(r=e,e=r[0],t=r[1]),"ipv6"!==e.kind())throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return l(this.parts,e.parts,16,t)},e.prototype.prefixLengthFromSubnetMask=function(){let e=0,t=!1;const r={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let n,i;for(let o=7;o>=0;o-=1){if(n=this.parts[o],!(n in r))return null;if(i=r[n],t&&0!==i)return null;16!==i&&(t=!0),e+=i}return 128-e},e.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},e.prototype.toByteArray=function(){let e;const t=[],r=this.parts;for(let n=0;n<r.length;n++)e=r[n],t.push(e>>8),t.push(255&e);return t},e.prototype.toFixedLengthString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(h(this.parts[t].toString(16),4));return e}.call(this).join(":");let t="";return this.zoneId&&(t="%".concat(this.zoneId)),e+t},e.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const e=this.parts.slice(-2),t=e[0],r=e[1];return new f.IPv4([t>>8,255&t,r>>8,255&r])},e.prototype.toNormalizedString=function(){const e=function(){const e=[];for(let t=0;t<this.parts.length;t++)e.push(this.parts[t].toString(16));return e}.call(this).join(":");let t="";return this.zoneId&&(t="%".concat(this.zoneId)),e+t},e.prototype.toRFC5952String=function(){const e=/((^|:)(0(:|$)){2,})/g,t=this.toNormalizedString();let r,n=0,i=-1;for(;r=e.exec(t);)r[0].length>i&&(n=r.index,i=r[0].length);return i<0?t:"".concat(t.substring(0,n),"::").concat(t.substring(n+i))},e.prototype.toString=function(){return this.toRFC5952String()},e}(),f.IPv6.broadcastAddressFromCIDR=function(e){try{const t=this.parseCIDR(e),r=t[0].toByteArray(),n=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[];let o=0;for(;o<16;)i.push(parseInt(r[o],10)|255^parseInt(n[o],10)),o++;return new this(i)}catch(t){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(t,")"))}},f.IPv6.isIPv6=function(e){return null!==this.parser(e)},f.IPv6.isValid=function(e){if("string"===typeof e&&-1===e.indexOf(":"))return!1;try{const t=this.parser(e);return new this(t.parts,t.zoneId),!0}catch(t){return!1}},f.IPv6.networkAddressFromCIDR=function(e){let t,r,n,i,o;try{for(t=this.parseCIDR(e),n=t[0].toByteArray(),o=this.subnetMaskFromPrefixLength(t[1]).toByteArray(),i=[],r=0;r<16;)i.push(parseInt(n[r],10)&parseInt(o[r],10)),r++;return new this(i)}catch(s){throw new Error("ipaddr: the address does not have IPv6 CIDR format (".concat(s,")"))}},f.IPv6.parse=function(e){const t=this.parser(e);if(null===t.parts)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(t.parts,t.zoneId)},f.IPv6.parseCIDR=function(e){let t,r,n;if((r=e.match(/^(.+)\/(\d+)$/))&&(t=parseInt(r[2]),t>=0&&t<=128))return n=[this.parse(r[1]),t],Object.defineProperty(n,"toString",{value:function(){return this.join("/")}}),n;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},f.IPv6.parser=function(e){let t,r,n,i,o,s;if(n=e.match(c.deprecatedTransitional))return this.parser("::ffff:".concat(n[1]));if(c.native.test(e))return u(e,8);if((n=e.match(c.transitional))&&(s=n[6]||"",t=u(n[1].slice(0,-1)+s,6),t.parts)){for(o=[parseInt(n[2]),parseInt(n[3]),parseInt(n[4]),parseInt(n[5])],r=0;r<o.length;r++)if(i=o[r],!(0<=i&&i<=255))return null;return t.parts.push(o[0]<<8|o[1]),t.parts.push(o[2]<<8|o[3]),{parts:t.parts,zoneId:t.zoneId}}return null},f.IPv6.subnetMaskFromPrefixLength=function(e){if((e=parseInt(e))<0||e>128)throw new Error("ipaddr: invalid IPv6 prefix length");const t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let r=0;const n=Math.floor(e/8);for(;r<n;)t[r]=255,r++;return n<16&&(t[n]=Math.pow(2,e%8)-1<<8-e%8),new this(t)},f.fromByteArray=function(e){const t=e.length;if(4===t)return new f.IPv4(e);if(16===t)return new f.IPv6(e);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},f.isValid=function(e){return f.IPv6.isValid(e)||f.IPv4.isValid(e)},f.parse=function(e){if(f.IPv6.isValid(e))return f.IPv6.parse(e);if(f.IPv4.isValid(e))return f.IPv4.parse(e);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},f.parseCIDR=function(e){try{return f.IPv6.parseCIDR(e)}catch(t){try{return f.IPv4.parseCIDR(e)}catch(r){throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},f.process=function(e){const t=this.parse(e);return"ipv6"===t.kind()&&t.isIPv4MappedAddress()?t.toIPv4Address():t},f.subnetMatch=function(e,t,r){let n,i,o,s;for(i in void 0!==r&&null!==r||(r="unicast"),t)if(Object.prototype.hasOwnProperty.call(t,i))for(o=t[i],!o[0]||o[0]instanceof Array||(o=[o]),n=0;n<o.length;n++)if(s=o[n],e.kind()===s[0].kind()&&e.match.apply(e,s))return i;return r},e.exports?e.exports=f:t.ipaddr=f}(this)},5450:(e,t,r)=>{"use strict";var n=r(4707)(),i=r(4037)("Object.prototype.toString"),o=function(e){return!(n&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},s=function(e){return!!o(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,e.exports=a?o:s},460:e=>{"use strict";var t,r,n=Function.prototype.toString,i="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof i&&"function"===typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},i((function(){throw 42}),null,t)}catch(f){f!==r&&(i=null)}else i=null;var o=/^\s*class\b/,s=function(e){try{var t=n.call(e);return o.test(t)}catch(r){return!1}},a=function(e){try{return!s(e)&&(n.call(e),!0)}catch(t){return!1}},c=Object.prototype.toString,u="function"===typeof Symbol&&!!Symbol.toStringTag,l=!(0 in[,]),d=function(){return!1};if("object"===typeof document){var h=document.all;c.call(h)===c.call(document.all)&&(d=function(e){if((l||!e)&&("undefined"===typeof e||"object"===typeof e))try{var t=c.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(r){}return!1})}e.exports=i?function(e){if(d(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;try{i(e,null,t)}catch(n){if(n!==r)return!1}return!s(e)&&a(e)}:function(e){if(d(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if(u)return a(e);if(s(e))return!1;var t=c.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&a(e)}},2193:e=>{e.exports=function(){return"undefined"!==typeof window&&"object"===typeof window.process&&"renderer"===window.process.type||(!("undefined"===typeof process||"object"!==typeof process.versions||!process.versions.electron)||"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},5718:(e,t,r)=>{"use strict";var n,i=Object.prototype.toString,o=Function.prototype.toString,s=/^\s*(?:function)?\*/,a=r(4707)(),c=Object.getPrototypeOf;e.exports=function(e){if("function"!==typeof e)return!1;if(s.test(o.call(e)))return!0;if(!a)return"[object GeneratorFunction]"===i.call(e);if(!c)return!1;if("undefined"===typeof n){var t=function(){if(!a)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&c(t)}return c(e)===n}},6218:(e,t,r)=>{"use strict";var n=r(8264);e.exports=function(e){return!!n(e)}},7898:(e,t,r)=>{var n;!function(){"use strict";var i="input is invalid type",o="object"===typeof window,s=o?window:{};s.JS_SHA3_NO_WINDOW&&(o=!1);var a=!o&&"object"===typeof self;!s.JS_SHA3_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node?s=r.g:a&&(s=self);for(var c=!s.JS_SHA3_NO_COMMON_JS&&e.exports,u=r.amdO,l=!s.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,d="0123456789abcdef".split(""),h=[4,1024,262144,67108864],f=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],g=[224,256,384,512],m=[128,256],y=["hex","buffer","arrayBuffer","array","digest"],v={128:168,256:136},b=s.JS_SHA3_NO_NODE_JS||!Array.isArray?function(e){return"[object Array]"===Object.prototype.toString.call(e)}:Array.isArray,w=!l||!s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView?ArrayBuffer.isView:function(e){return"object"===typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer},_=function(e){var t=typeof e;if("string"===t)return[e,!0];if("object"!==t||null===e)throw new Error(i);if(l&&e.constructor===ArrayBuffer)return[new Uint8Array(e),!1];if(!b(e)&&!w(e))throw new Error(i);return[e,!1]},E=function(e){return 0===_(e)[0].length},A=function(e){for(var t=[],r=0;r<e.length;++r)t[r]=e[r];return t},S=function(e,t,r){return function(n){return new F(e,t,e).update(n)[r]()}},k=function(e,t,r){return function(n,i){return new F(e,t,i).update(n)[r]()}},x=function(e,t,r){return function(t,n,i,o){return C["cshake"+e].update(t,n,i,o)[r]()}},I=function(e,t,r){return function(t,n,i,o){return C["kmac"+e].update(t,n,i,o)[r]()}},T=function(e,t,r,n){for(var i=0;i<y.length;++i){var o=y[i];e[o]=t(r,n,o)}return e},P=function(e,t){var r=S(e,t,"hex");return r.create=function(){return new F(e,t,e)},r.update=function(e){return r.create().update(e)},T(r,S,e,t)},R=[{name:"keccak",padding:[1,256,65536,16777216],bits:g,createMethod:P},{name:"sha3",padding:[6,1536,393216,100663296],bits:g,createMethod:P},{name:"shake",padding:[31,7936,2031616,520093696],bits:m,createMethod:function(e,t){var r=k(e,t,"hex");return r.create=function(r){return new F(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},T(r,k,e,t)}},{name:"cshake",padding:h,bits:m,createMethod:function(e,t){var r=v[e],n=x(e,0,"hex");return n.create=function(n,i,o){return E(i)&&E(o)?C["shake"+e].create(n):new F(e,t,n).bytepad([i,o],r)},n.update=function(e,t,r,i){return n.create(t,r,i).update(e)},T(n,x,e,t)}},{name:"kmac",padding:h,bits:m,createMethod:function(e,t){var r=v[e],n=I(e,0,"hex");return n.create=function(n,i,o){return new j(e,t,i).bytepad(["KMAC",o],r).bytepad([n],r)},n.update=function(e,t,r,i){return n.create(e,r,i).update(t)},T(n,I,e,t)}}],C={},B=[],M=0;M<R.length;++M)for(var N=R[M],O=N.bits,D=0;D<O.length;++D){var L=N.name+"_"+O[D];if(B.push(L),C[L]=N.createMethod(O[D],N.padding),"sha3"!==N.name){var U=N.name+O[D];B.push(U),C[U]=C[L]}}function F(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function j(e,t,r){F.call(this,e,t,r)}F.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var t=_(e);e=t[0];for(var r,n,i=t[1],o=this.blocks,s=this.byteCount,a=e.length,c=this.blockCount,u=0,l=this.s;u<a;){if(this.reset)for(this.reset=!1,o[0]=this.block,r=1;r<c+1;++r)o[r]=0;if(i)for(r=this.start;u<a&&r<s;++u)(n=e.charCodeAt(u))<128?o[r>>2]|=n<<f[3&r++]:n<2048?(o[r>>2]|=(192|n>>6)<<f[3&r++],o[r>>2]|=(128|63&n)<<f[3&r++]):n<55296||n>=57344?(o[r>>2]|=(224|n>>12)<<f[3&r++],o[r>>2]|=(128|n>>6&63)<<f[3&r++],o[r>>2]|=(128|63&n)<<f[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++u)),o[r>>2]|=(240|n>>18)<<f[3&r++],o[r>>2]|=(128|n>>12&63)<<f[3&r++],o[r>>2]|=(128|n>>6&63)<<f[3&r++],o[r>>2]|=(128|63&n)<<f[3&r++]);else for(r=this.start;u<a&&r<s;++u)o[r>>2]|=e[u]<<f[3&r++];if(this.lastByteIndex=r,r>=s){for(this.start=r-s,this.block=o[c],r=0;r<c;++r)l[r]^=o[r];q(l),this.reset=!0}else this.start=r}return this},F.prototype.encode=function(e,t){var r=255&e,n=1,i=[r];for(r=255&(e>>=8);r>0;)i.unshift(r),r=255&(e>>=8),++n;return t?i.push(n):i.unshift(n),this.update(i),i.length},F.prototype.encodeString=function(e){var t=_(e);e=t[0];var r=t[1],n=0,i=e.length;if(r)for(var o=0;o<e.length;++o){var s=e.charCodeAt(o);s<128?n+=1:s<2048?n+=2:s<55296||s>=57344?n+=3:(s=65536+((1023&s)<<10|1023&e.charCodeAt(++o)),n+=4)}else n=i;return n+=this.encode(8*n),this.update(e),n},F.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var i=(t-r%t)%t,o=[];return o.length=i,this.update(o),this},F.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];q(n)}},F.prototype.toString=F.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a="";s<n;){for(o=0;o<t&&s<n;++o,++s)e=r[o],a+=d[e>>4&15]+d[15&e]+d[e>>12&15]+d[e>>8&15]+d[e>>20&15]+d[e>>16&15]+d[e>>28&15]+d[e>>24&15];s%t===0&&(r=A(r),q(r),o=0)}return i&&(e=r[o],a+=d[e>>4&15]+d[15&e],i>1&&(a+=d[e>>12&15]+d[e>>8&15]),i>2&&(a+=d[e>>20&15]+d[e>>16&15])),a},F.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=i?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(o=0;o<t&&s<n;++o,++s)c[s]=r[o];s%t===0&&(r=A(r),q(r))}return i&&(c[s]=r[o],e=e.slice(0,a)),e},F.prototype.buffer=F.prototype.arrayBuffer,F.prototype.digest=F.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,c=[];a<i;){for(s=0;s<r&&a<i;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r===0&&(n=A(n),q(n))}return o&&(e=a<<2,t=n[s],c[e]=255&t,o>1&&(c[e+1]=t>>8&255),o>2&&(c[e+2]=t>>16&255)),c},j.prototype=new F,j.prototype.finalize=function(){return this.encode(this.outputBits,!0),F.prototype.finalize.call(this)};var q=function(e){var t,r,n,i,o,s,a,c,u,l,d,h,f,g,m,y,v,b,w,_,E,A,S,k,x,I,T,P,R,C,B,M,N,O,D,L,U,F,j,q,z,H,K,V,G,W,Q,J,Z,Y,X,$,ee,te,re,ne,ie,oe,se,ae,ce,ue,le;for(n=0;n<48;n+=2)i=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(f=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=i^(c<<1|u>>>31),r=o^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|f>>>31),r=u^(f<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(i<<1|o>>>31),r=d^(o<<1|i>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,g=e[0],m=e[1],W=e[11]<<4|e[10]>>>28,Q=e[10]<<4|e[11]>>>28,P=e[20]<<3|e[21]>>>29,R=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,H=e[40]<<18|e[41]>>>14,K=e[41]<<18|e[40]>>>14,O=e[2]<<1|e[3]>>>31,D=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,v=e[12]<<12|e[13]>>>20,J=e[22]<<10|e[23]>>>22,Z=e[23]<<10|e[22]>>>22,C=e[33]<<13|e[32]>>>19,B=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,L=e[14]<<6|e[15]>>>26,U=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,X=e[35]<<15|e[34]>>>17,M=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,k=e[6]<<28|e[7]>>>4,x=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,ie=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,_=e[36]<<21|e[37]>>>11,E=e[37]<<21|e[36]>>>11,$=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,V=e[8]<<27|e[9]>>>5,G=e[9]<<27|e[8]>>>5,I=e[18]<<20|e[19]>>>12,T=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,q=e[38]<<8|e[39]>>>24,z=e[39]<<8|e[38]>>>24,A=e[48]<<14|e[49]>>>18,S=e[49]<<14|e[48]>>>18,e[0]=g^~y&b,e[1]=m^~v&w,e[10]=k^~I&P,e[11]=x^~T&R,e[20]=O^~L&F,e[21]=D^~U&j,e[30]=V^~W&J,e[31]=G^~Q&Z,e[40]=te^~ne&oe,e[41]=re^~ie&se,e[2]=y^~b&_,e[3]=v^~w&E,e[12]=I^~P&C,e[13]=T^~R&B,e[22]=L^~F&q,e[23]=U^~j&z,e[32]=W^~J&Y,e[33]=Q^~Z&X,e[42]=ne^~oe&ae,e[43]=ie^~se&ce,e[4]=b^~_&A,e[5]=w^~E&S,e[14]=P^~C&M,e[15]=R^~B&N,e[24]=F^~q&H,e[25]=j^~z&K,e[34]=J^~Y&$,e[35]=Z^~X&ee,e[44]=oe^~ae&ue,e[45]=se^~ce&le,e[6]=_^~A&g,e[7]=E^~S&m,e[16]=C^~M&k,e[17]=B^~N&x,e[26]=q^~H&O,e[27]=z^~K&D,e[36]=Y^~$&V,e[37]=X^~ee&G,e[46]=ae^~ue&te,e[47]=ce^~le&re,e[8]=A^~g&y,e[9]=S^~m&v,e[18]=M^~k&I,e[19]=N^~x&T,e[28]=H^~O&L,e[29]=K^~D&U,e[38]=$^~V&W,e[39]=ee^~G&Q,e[48]=ue^~te&ne,e[49]=le^~re&ie,e[0]^=p[n],e[1]^=p[n+1]};if(c)e.exports=C;else{for(M=0;M<B.length;++M)s[B[M]]=C[B[M]];u&&(void 0===(n=function(){return C}.call(t,r,t,e))||(e.exports=n))}}()},1321:(e,t,r)=>{e.exports=r(7071)(r(7142))},7071:(e,t,r)=>{const n=r(6472),i=r(1537);e.exports=function(e){const t=n(e),r=i(e);return function(e,n){switch("string"===typeof e?e.toLowerCase():e){case"keccak224":return new t(1152,448,null,224,n);case"keccak256":return new t(1088,512,null,256,n);case"keccak384":return new t(832,768,null,384,n);case"keccak512":return new t(576,1024,null,512,n);case"sha3-224":return new t(1152,448,6,224,n);case"sha3-256":return new t(1088,512,6,256,n);case"sha3-384":return new t(832,768,6,384,n);case"sha3-512":return new t(576,1024,6,512,n);case"shake128":return new r(1344,256,31,n);case"shake256":return new r(1088,512,31,n);default:throw new Error("Invald algorithm: "+e)}}}},6472:(e,t,r)=>{const{Transform:n}=r(723);e.exports=e=>class t extends n{constructor(t,r,n,i,o){super(o),this._rate=t,this._capacity=r,this._delimitedSuffix=n,this._hashBitLength=i,this._options=o,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let n=null;try{this.update(e,t)}catch(i){n=i}r(n)}_flush(e){let t=null;try{this.push(this.digest())}catch(r){t=r}e(t)}update(e,t){if(!Buffer.isBuffer(e)&&"string"!==typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return Buffer.isBuffer(e)||(e=Buffer.from(e,t)),this._state.absorb(e),this}digest(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);return void 0!==e&&(t=t.toString(e)),this._resetState(),t}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},1537:(e,t,r)=>{const{Transform:n}=r(723);e.exports=e=>class t extends n{constructor(t,r,n,i){super(i),this._rate=t,this._capacity=r,this._delimitedSuffix=n,this._options=i,this._state=new e,this._state.initialize(t,r),this._finalized=!1}_transform(e,t,r){let n=null;try{this.update(e,t)}catch(i){n=i}r(n)}_flush(){}_read(e){this.push(this.squeeze(e))}update(e,t){if(!Buffer.isBuffer(e)&&"string"!==typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return Buffer.isBuffer(e)||(e=Buffer.from(e,t)),this._state.absorb(e),this}squeeze(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let r=this._state.squeeze(e);return void 0!==t&&(r=r.toString(t)),r}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},4633:(e,t)=>{const r=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];t.p1600=function(e){for(let t=0;t<24;++t){const n=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],o=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],u=e[6]^e[16]^e[26]^e[36]^e[46],l=e[7]^e[17]^e[27]^e[37]^e[47],d=e[8]^e[18]^e[28]^e[38]^e[48],h=e[9]^e[19]^e[29]^e[39]^e[49];let f=d^(o<<1|s>>>31),p=h^(s<<1|o>>>31);const g=e[0]^f,m=e[1]^p,y=e[10]^f,v=e[11]^p,b=e[20]^f,w=e[21]^p,_=e[30]^f,E=e[31]^p,A=e[40]^f,S=e[41]^p;f=n^(a<<1|c>>>31),p=i^(c<<1|a>>>31);const k=e[2]^f,x=e[3]^p,I=e[12]^f,T=e[13]^p,P=e[22]^f,R=e[23]^p,C=e[32]^f,B=e[33]^p,M=e[42]^f,N=e[43]^p;f=o^(u<<1|l>>>31),p=s^(l<<1|u>>>31);const O=e[4]^f,D=e[5]^p,L=e[14]^f,U=e[15]^p,F=e[24]^f,j=e[25]^p,q=e[34]^f,z=e[35]^p,H=e[44]^f,K=e[45]^p;f=a^(d<<1|h>>>31),p=c^(h<<1|d>>>31);const V=e[6]^f,G=e[7]^p,W=e[16]^f,Q=e[17]^p,J=e[26]^f,Z=e[27]^p,Y=e[36]^f,X=e[37]^p,$=e[46]^f,ee=e[47]^p;f=u^(n<<1|i>>>31),p=l^(i<<1|n>>>31);const te=e[8]^f,re=e[9]^p,ne=e[18]^f,ie=e[19]^p,oe=e[28]^f,se=e[29]^p,ae=e[38]^f,ce=e[39]^p,ue=e[48]^f,le=e[49]^p,de=g,he=m,fe=v<<4|y>>>28,pe=y<<4|v>>>28,ge=b<<3|w>>>29,me=w<<3|b>>>29,ye=E<<9|_>>>23,ve=_<<9|E>>>23,be=A<<18|S>>>14,we=S<<18|A>>>14,_e=k<<1|x>>>31,Ee=x<<1|k>>>31,Ae=T<<12|I>>>20,Se=I<<12|T>>>20,ke=P<<10|R>>>22,xe=R<<10|P>>>22,Ie=B<<13|C>>>19,Te=C<<13|B>>>19,Pe=M<<2|N>>>30,Re=N<<2|M>>>30,Ce=D<<30|O>>>2,Be=O<<30|D>>>2,Me=L<<6|U>>>26,Ne=U<<6|L>>>26,Oe=j<<11|F>>>21,De=F<<11|j>>>21,Le=q<<15|z>>>17,Ue=z<<15|q>>>17,Fe=K<<29|H>>>3,je=H<<29|K>>>3,qe=V<<28|G>>>4,ze=G<<28|V>>>4,He=Q<<23|W>>>9,Ke=W<<23|Q>>>9,Ve=J<<25|Z>>>7,Ge=Z<<25|J>>>7,We=Y<<21|X>>>11,Qe=X<<21|Y>>>11,Je=ee<<24|$>>>8,Ze=$<<24|ee>>>8,Ye=te<<27|re>>>5,Xe=re<<27|te>>>5,$e=ne<<20|ie>>>12,et=ie<<20|ne>>>12,tt=se<<7|oe>>>25,rt=oe<<7|se>>>25,nt=ae<<8|ce>>>24,it=ce<<8|ae>>>24,ot=ue<<14|le>>>18,st=le<<14|ue>>>18;e[0]=de^~Ae&Oe,e[1]=he^~Se&De,e[10]=qe^~$e&ge,e[11]=ze^~et&me,e[20]=_e^~Me&Ve,e[21]=Ee^~Ne&Ge,e[30]=Ye^~fe&ke,e[31]=Xe^~pe&xe,e[40]=Ce^~He&tt,e[41]=Be^~Ke&rt,e[2]=Ae^~Oe&We,e[3]=Se^~De&Qe,e[12]=$e^~ge&Ie,e[13]=et^~me&Te,e[22]=Me^~Ve&nt,e[23]=Ne^~Ge&it,e[32]=fe^~ke&Le,e[33]=pe^~xe&Ue,e[42]=He^~tt&ye,e[43]=Ke^~rt&ve,e[4]=Oe^~We&ot,e[5]=De^~Qe&st,e[14]=ge^~Ie&Fe,e[15]=me^~Te&je,e[24]=Ve^~nt&be,e[25]=Ge^~it&we,e[34]=ke^~Le&Je,e[35]=xe^~Ue&Ze,e[44]=tt^~ye&Pe,e[45]=rt^~ve&Re,e[6]=We^~ot&de,e[7]=Qe^~st&he,e[16]=Ie^~Fe&qe,e[17]=Te^~je&ze,e[26]=nt^~be&_e,e[27]=it^~we&Ee,e[36]=Le^~Je&Ye,e[37]=Ue^~Ze&Xe,e[46]=ye^~Pe&Ce,e[47]=ve^~Re&Be,e[8]=ot^~de&Ae,e[9]=st^~he&Se,e[18]=Fe^~qe&$e,e[19]=je^~ze&et,e[28]=be^~_e&Me,e[29]=we^~Ee&Ne,e[38]=Je^~Ye&fe,e[39]=Ze^~Xe&pe,e[48]=Pe^~Ce&He,e[49]=Re^~Be&Ke,e[0]^=r[2*t],e[1]^=r[2*t+1]}}},7142:(e,t,r)=>{const n=r(4633);function i(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}i.prototype.initialize=function(e,t){for(let r=0;r<50;++r)this.state[r]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},i.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(n.p1600(this.state),this.count=0)},i.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,0!==(128&e)&&this.count===this.blockSize-1&&n.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,n.p1600(this.state),this.count=0,this.squeezing=!0},i.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=Buffer.alloc(e);for(let r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(n.p1600(this.state),this.count=0);return t},i.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing},e.exports=i},8437:(e,t,r)=>{"use strict";var n=r(2534),i=r(6266),o=r(2543).Buffer,s=new Array(16);function a(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(e,t){return e<<t|e>>>32-t}function u(e,t,r,n,i,o,s){return c(e+(t&r|~t&n)+i+o|0,s)+t|0}function l(e,t,r,n,i,o,s){return c(e+(t&n|r&~n)+i+o|0,s)+t|0}function d(e,t,r,n,i,o,s){return c(e+(t^r^n)+i+o|0,s)+t|0}function h(e,t,r,n,i,o,s){return c(e+(r^(t|~n))+i+o|0,s)+t|0}n(a,i),a.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,n=this._b,i=this._c,o=this._d;r=u(r,n,i,o,e[0],3614090360,7),o=u(o,r,n,i,e[1],3905402710,12),i=u(i,o,r,n,e[2],606105819,17),n=u(n,i,o,r,e[3],3250441966,22),r=u(r,n,i,o,e[4],4118548399,7),o=u(o,r,n,i,e[5],1200080426,12),i=u(i,o,r,n,e[6],2821735955,17),n=u(n,i,o,r,e[7],4249261313,22),r=u(r,n,i,o,e[8],1770035416,7),o=u(o,r,n,i,e[9],2336552879,12),i=u(i,o,r,n,e[10],4294925233,17),n=u(n,i,o,r,e[11],2304563134,22),r=u(r,n,i,o,e[12],1804603682,7),o=u(o,r,n,i,e[13],4254626195,12),i=u(i,o,r,n,e[14],2792965006,17),r=l(r,n=u(n,i,o,r,e[15],1236535329,22),i,o,e[1],4129170786,5),o=l(o,r,n,i,e[6],3225465664,9),i=l(i,o,r,n,e[11],643717713,14),n=l(n,i,o,r,e[0],3921069994,20),r=l(r,n,i,o,e[5],3593408605,5),o=l(o,r,n,i,e[10],38016083,9),i=l(i,o,r,n,e[15],3634488961,14),n=l(n,i,o,r,e[4],3889429448,20),r=l(r,n,i,o,e[9],568446438,5),o=l(o,r,n,i,e[14],3275163606,9),i=l(i,o,r,n,e[3],4107603335,14),n=l(n,i,o,r,e[8],1163531501,20),r=l(r,n,i,o,e[13],2850285829,5),o=l(o,r,n,i,e[2],4243563512,9),i=l(i,o,r,n,e[7],1735328473,14),r=d(r,n=l(n,i,o,r,e[12],2368359562,20),i,o,e[5],4294588738,4),o=d(o,r,n,i,e[8],2272392833,11),i=d(i,o,r,n,e[11],1839030562,16),n=d(n,i,o,r,e[14],4259657740,23),r=d(r,n,i,o,e[1],2763975236,4),o=d(o,r,n,i,e[4],1272893353,11),i=d(i,o,r,n,e[7],4139469664,16),n=d(n,i,o,r,e[10],3200236656,23),r=d(r,n,i,o,e[13],681279174,4),o=d(o,r,n,i,e[0],3936430074,11),i=d(i,o,r,n,e[3],3572445317,16),n=d(n,i,o,r,e[6],76029189,23),r=d(r,n,i,o,e[9],3654602809,4),o=d(o,r,n,i,e[12],3873151461,11),i=d(i,o,r,n,e[15],530742520,16),r=h(r,n=d(n,i,o,r,e[2],3299628645,23),i,o,e[0],4096336452,6),o=h(o,r,n,i,e[7],1126891415,10),i=h(i,o,r,n,e[14],2878612391,15),n=h(n,i,o,r,e[5],4237533241,21),r=h(r,n,i,o,e[12],1700485571,6),o=h(o,r,n,i,e[3],2399980690,10),i=h(i,o,r,n,e[10],4293915773,15),n=h(n,i,o,r,e[1],2240044497,21),r=h(r,n,i,o,e[8],1873313359,6),o=h(o,r,n,i,e[15],4264355552,10),i=h(i,o,r,n,e[6],2734768916,15),n=h(n,i,o,r,e[13],1309151649,21),r=h(r,n,i,o,e[4],4149444226,6),o=h(o,r,n,i,e[11],3174756917,10),i=h(i,o,r,n,e[2],718787259,15),n=h(n,i,o,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+n|0,this._c=this._c+i|0,this._d=this._d+o|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=o.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=a},9842:function(e,t,r){"use strict";const n=r(3440),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:o}=Object,s=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),a=this,c={concatArrays:!1,ignoreUndefined:!1},u=e=>{const t=[];for(const r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){const r=Object.getOwnPropertySymbols(e);for(const n of r)o.call(e,n)&&t.push(n)}return t};function l(e){return Array.isArray(e)?function(e){const t=e.slice(0,0);return u(e).forEach((r=>{s(t,r,l(e[r]))})),t}(e):n(e)?function(e){const t=null===Object.getPrototypeOf(e)?Object.create(null):{};return u(e).forEach((r=>{s(t,r,l(e[r]))})),t}(e):e}const d=(e,t,r,n)=>(r.forEach((r=>{"undefined"===typeof t[r]&&n.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?s(e,r,f(e[r],t[r],n)):s(e,r,l(t[r])))})),e),h=(e,t,r)=>{let n=e.slice(0,0),o=0;return[e,t].forEach((t=>{const a=[];for(let r=0;r<t.length;r++)i.call(t,r)&&(a.push(String(r)),s(n,o++,t===e?t[r]:l(t[r])));n=d(n,t,u(t).filter((e=>!a.includes(e))),r)})),n};function f(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?h(e,t,r):n(t)&&n(e)?d(e,t,u(t),r):l(t)}e.exports=function(){const e=f(l(c),this!==a&&this||{},c);let t={_:{}};for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];for(const s of i)if(void 0!==s){if(!n(s))throw new TypeError("`"+s+"` is not an Option Object");t=f(t,{_:s},e)}return t._}},3440:e=>{"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},6501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidStatusCodeError=t.InvalidCertError=void 0;const n=Object.freeze({redirect:!0,expectStatusCode:200,headers:{},full:!1,keepAlive:!0,cors:!1,referrer:!1,sslAllowSelfSigned:!1,_redirectCount:0});class i extends Error{constructor(e,t){super(e),this.fingerprint256=t}}t.InvalidCertError=i;class o extends Error{constructor(e){super("Request Failed. Status Code: ".concat(e)),this.statusCode=e}}function s(e,t){if(!t||"text"===t||"json"===t)try{let n=new TextDecoder("utf8",{fatal:!0}).decode(e);if("text"===t)return n;try{return JSON.parse(n)}catch(r){if("json"===t)throw r;return n}}catch(r){if("text"===t||"json"===t)throw r}return e}t.InvalidStatusCodeError=o;let a={};function c(e,t){let u={...n,...t};const l=r(2260),d=r(2895),h=r(1865),{promisify:f}=r(9639),{resolve:p}=r(3121),g=!!/^https/.test(e);let m={method:u.method||"GET",headers:{"Accept-Encoding":"gzip, deflate, br"}};const y=e=>e.replace(/:| /g,"").toLowerCase();if(u.keepAlive){var v;const e={keepAlive:!0,keepAliveMsecs:3e4,maxFreeSockets:1024,maxCachedSessions:1024},t=[g,g&&(null===(v=u.sslPinnedCertificates)||void 0===v?void 0:v.map((e=>y(e))).sort())].join();m.agent=a[t]||(a[t]=new(g?d:l).Agent(e))}"json"===u.type&&(m.headers["Content-Type"]="application/json"),u.data&&(u.method||(m.method="POST"),m.body="json"===u.type?JSON.stringify(u.data):u.data),m.headers={...m.headers,...u.headers},u.sslAllowSelfSigned&&(m.rejectUnauthorized=!1);return new Promise(((t,r)=>{var n;const a=async t=>{if(t&&"DEPTH_ZERO_SELF_SIGNED_CERT"===t.code)try{await c(e,{...u,sslAllowSelfSigned:!0,sslPinnedCertificates:[]})}catch(n){n&&n.fingerprint256&&(t=new i("Self-signed SSL certificate: ".concat(n.fingerprint256),n.fingerprint256))}r(t)},v=(g?d:l).request(e,m,(n=>{n.on("error",a),(async()=>{try{t(await(async t=>{const r=t.statusCode;if(u.redirect&&300<=r&&r<400&&t.headers.location){if(10==u._redirectCount)throw new Error("Request failed. Too much redirects.");return u._redirectCount+=1,await c(p(e,t.headers.location),u)}if(u.expectStatusCode&&r!==u.expectStatusCode)throw t.resume(),new o(r);let n=[];for await(const e of t)n.push(e);let i=Buffer.concat(n);const a=t.headers["content-encoding"];"br"===a&&(i=await f(h.brotliDecompress)(i)),"gzip"!==a&&"deflate"!==a||(i=await f(h.unzip)(i));const l=s(i,u.type);return u.full?{headers:t.headers,status:r,body:l}:l})(n))}catch(i){r(i)}})()}));v.on("error",a);const b=null===(n=u.sslPinnedCertificates)||void 0===n?void 0:n.map((e=>y(e))),w=e=>{var t;const r=y((null===(t=e.getPeerCertificate())||void 0===t?void 0:t.fingerprint256)||"");if((r||!e.isSessionReused())&&!b.includes(r))return v.emit("error",new i("Invalid SSL certificate: ".concat(r," Expected: ").concat(b),r)),v.abort()};u.sslPinnedCertificates&&v.on("socket",(e=>{e.listeners("secureConnect").map((e=>(e.name||"").replace("bound ",""))).includes("mfetchSecureConnect")||e.on("secureConnect",w.bind(null,e))})),u.keepAlive&&v.setNoDelay(!0),m.body&&v.write(m.body),v.end()}))}const u=new Set(["Accept","Accept-Language","Content-Language","Content-Type"].map((e=>e.toLowerCase()))),l=new Set(["Accept-Charset","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","Connection","Content-Length","Cookie","Cookie2","Date","DNT","Expect","Host","Keep-Alive","Origin","Referer","TE","Trailer","Transfer-Encoding","Upgrade","Via"].map((e=>e.toLowerCase())));async function d(e,t){let r={...n,...t};const i=new Headers;"json"===r.type&&i.set("Content-Type","application/json");let a=new URL(e);if(a.username){const e=btoa("".concat(a.username,":").concat(a.password));i.set("Authorization","Basic ".concat(e)),a.username="",a.password=""}e=""+a;for(let n in r.headers){const e=n.toLowerCase();(u.has(e)||r.cors&&!l.has(e))&&i.set(n,r.headers[n])}let c={headers:i,redirect:r.redirect?"follow":"manual"};r.referrer||(c.referrerPolicy="no-referrer"),r.cors&&(c.mode="cors"),r.data&&(r.method||(c.method="POST"),c.body="json"===r.type?JSON.stringify(r.data):r.data);const d=await fetch(e,c);if(r.expectStatusCode&&d.status!==r.expectStatusCode)throw new o(d.status);const h=s(new Uint8Array(await d.arrayBuffer()),r.type);return r.full?{headers:Object.fromEntries(d.headers.entries()),status:d.status,body:h}:h}const h=!!("object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8);t.default=function(e,t){return(h?c:d)(e,t)}},2325:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}},4034:(e,t)=>{"use strict";var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!==typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,s=255&i;o?r.push(o,s):r.push(s)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}},2832:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},8193:e=>{var t=1e3,r=60*t,n=60*r,i=24*n,o=7*i,s=365.25*i;function a(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}e.exports=function(e,c){c=c||{};var u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*n;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===u&&isFinite(e))return c.long?function(e){var o=Math.abs(e);if(o>=i)return a(e,o,i,"day");if(o>=n)return a(e,o,n,"hour");if(o>=r)return a(e,o,r,"minute");if(o>=t)return a(e,o,t,"second");return e+" ms"}(e):function(e){var o=Math.abs(e);if(o>=i)return Math.round(e/i)+"d";if(o>=n)return Math.round(e/n)+"h";if(o>=r)return Math.round(e/r)+"m";if(o>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7922:function(e,t){(function(){var e,r,n,i,o,s,a,c;c=function(e){return[(e&255<<24)>>>24,(e&255<<16)>>>16,(65280&e)>>>8,255&e].join(".")},a=function(e){var t,n,i,o,s,a;for(t=[],i=o=0;o<=3&&0!==e.length;i=++o){if(i>0){if("."!==e[0])throw new Error("Invalid IP");e=e.substring(1)}s=(a=r(e))[0],n=a[1],e=e.substring(n),t.push(s)}if(0!==e.length)throw new Error("Invalid IP");switch(t.length){case 1:if(t[0]>4294967295)throw new Error("Invalid IP");return t[0]>>>0;case 2:if(t[0]>255||t[1]>16777215)throw new Error("Invalid IP");return(t[0]<<24|t[1])>>>0;case 3:if(t[0]>255||t[1]>255||t[2]>65535)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2])>>>0;case 4:if(t[0]>255||t[1]>255||t[2]>255||t[3]>255)throw new Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0;default:throw new Error("Invalid IP")}},i=(n=function(e){return e.charCodeAt(0)})("0"),s=n("a"),o=n("A"),r=function(e){var t,r,a,c,u;for(c=0,t=10,r="9",a=0,e.length>1&&"0"===e[a]&&("x"===e[a+1]||"X"===e[a+1]?(a+=2,t=16):"0"<=e[a+1]&&e[a+1]<="9"&&(a++,t=8,r="7")),u=a;a<e.length;){if("0"<=e[a]&&e[a]<=r)c=c*t+(n(e[a])-i)>>>0;else{if(16!==t)break;if("a"<=e[a]&&e[a]<="f")c=c*t+(10+n(e[a])-s)>>>0;else{if(!("A"<=e[a]&&e[a]<="F"))break;c=c*t+(10+n(e[a])-o)>>>0}}if(c>4294967295)throw new Error("too large");a++}if(a===u)throw new Error("empty octet");return[c,a]},e=function(){function e(e,t){var r,n,i;if("string"!==typeof e)throw new Error("Missing `net' parameter");if(t||(i=e.split("/",2),e=i[0],t=i[1]),t||(t=32),"string"===typeof t&&t.indexOf(".")>-1){try{this.maskLong=a(t)}catch(o){throw o,new Error("Invalid mask: "+t)}for(r=n=32;n>=0;r=--n)if(this.maskLong===4294967295<<32-r>>>0){this.bitmask=r;break}}else{if(!t&&0!==t)throw new Error("Invalid mask: empty");this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0)}try{this.netLong=(a(e)&this.maskLong)>>>0}catch(o){throw o,new Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=c(this.netLong),this.mask=c(this.maskLong),this.hostmask=c(~this.maskLong),this.first=this.bitmask<=30?c(this.netLong+1):this.base,this.last=this.bitmask<=30?c(this.netLong+this.size-2):c(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?c(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return"string"===typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e?this.contains(t.base)&&this.contains(t.broadcast||t.last):(a(t)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(c(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,r,n;for(n=a(this.first),r=a(this.last),t=0;n<=r;)e(c(n),n,t),t++,n++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),t.ip2long=a,t.long2ip=c,t.Netmask=e}).call(this)},8605:(e,t,r)=>{var n=r(392);function i(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.aes.Algorithm(e,t)}))}r(3397),r(4533),r(3877),e.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(e,t,r,n){var i=g({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},n.aes.createEncryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!1,mode:t})},n.aes.startDecrypting=function(e,t,r,n){var i=g({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},n.aes.createDecryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!0,mode:t})},n.aes.Algorithm=function(e,t){l||h();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return p(r._w,e,t,!1)},decrypt:function(e,t){return p(r._w,e,t,!0)}}}),r._init=!1},n.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if("string"!==typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(n.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){t=r,r=n.util.createBuffer();for(var i=0;i<t.length;++i)r.putByte(t[i])}}else r=n.util.createBuffer(r);if(!n.util.isArray(r)){t=r,r=[];var o=t.length();if(16===o||24===o||32===o){o>>>=2;for(i=0;i<o;++i)r.push(t.getInt32())}}if(!n.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,a=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=f(r,e.decrypt&&!a),this._init=!0}},n.aes._expandKey=function(e,t){return l||h(),f(e,t)},n.aes._updateBlock=p,i("AES-ECB",n.cipher.modes.ecb),i("AES-CBC",n.cipher.modes.cbc),i("AES-CFB",n.cipher.modes.cfb),i("AES-OFB",n.cipher.modes.ofb),i("AES-CTR",n.cipher.modes.ctr),i("AES-GCM",n.cipher.modes.gcm);var o,s,a,c,u,l=!1,d=4;function h(){l=!0,a=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;o=new Array(256),s=new Array(256),c=new Array(4),u=new Array(4);for(t=0;t<4;++t)c[t]=new Array(256),u[t]=new Array(256);var r,n,i,d,h,f,p,g=0,m=0;for(t=0;t<256;++t){d=(d=m^m<<1^m<<2^m<<3^m<<4)>>8^255&d^99,o[g]=d,s[d]=g,f=(h=e[d])<<24^d<<16^d<<8^d^h,p=((r=e[g])^(n=e[r])^(i=e[n]))<<24^(g^i)<<16^(g^n^i)<<8^g^r^i;for(var y=0;y<4;++y)c[y][g]=f,u[y][d]=p,f=f<<24|f>>>8,p=p<<24|p>>>8;0===g?g=m=1:(g=r^e[e[e[r^i]]],m^=e[e[m]])}}function f(e,t){for(var r,n=e.slice(0),i=1,s=n.length,c=d*(s+6+1),l=s;l<c;++l)r=n[l-1],l%s===0?(r=o[r>>>16&255]<<24^o[r>>>8&255]<<16^o[255&r]<<8^o[r>>>24]^a[i]<<24,i++):s>6&&l%s===4&&(r=o[r>>>24]<<24^o[r>>>16&255]<<16^o[r>>>8&255]<<8^o[255&r]),n[l]=n[l-s]^r;if(t){for(var h,f=u[0],p=u[1],g=u[2],m=u[3],y=n.slice(0),v=(l=0,(c=n.length)-d);l<c;l+=d,v-=d)if(0===l||l===c-d)y[l]=n[v],y[l+1]=n[v+3],y[l+2]=n[v+2],y[l+3]=n[v+1];else for(var b=0;b<d;++b)h=n[v+b],y[l+(3&-b)]=f[o[h>>>24]]^p[o[h>>>16&255]]^g[o[h>>>8&255]]^m[o[255&h]];n=y}return n}function p(e,t,r,n){var i,a,l,d,h,f,p,g,m,y,v,b,w=e.length/4-1;n?(i=u[0],a=u[1],l=u[2],d=u[3],h=s):(i=c[0],a=c[1],l=c[2],d=c[3],h=o),f=t[0]^e[0],p=t[n?3:1]^e[1],g=t[2]^e[2],m=t[n?1:3]^e[3];for(var _=3,E=1;E<w;++E)y=i[f>>>24]^a[p>>>16&255]^l[g>>>8&255]^d[255&m]^e[++_],v=i[p>>>24]^a[g>>>16&255]^l[m>>>8&255]^d[255&f]^e[++_],b=i[g>>>24]^a[m>>>16&255]^l[f>>>8&255]^d[255&p]^e[++_],m=i[m>>>24]^a[f>>>16&255]^l[p>>>8&255]^d[255&g]^e[++_],f=y,p=v,g=b;r[0]=h[f>>>24]<<24^h[p>>>16&255]<<16^h[g>>>8&255]<<8^h[255&m]^e[++_],r[n?3:1]=h[p>>>24]<<24^h[g>>>16&255]<<16^h[m>>>8&255]<<8^h[255&f]^e[++_],r[2]=h[g>>>24]<<24^h[m>>>16&255]<<16^h[f>>>8&255]<<8^h[255&p]^e[++_],r[n?1:3]=h[m>>>24]<<24^h[f>>>16&255]<<16^h[p>>>8&255]<<8^h[255&g]^e[++_]}function g(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var o=null;r instanceof n.util.ByteBuffer&&(o=r,r={}),(r=r||{}).output=o,r.iv=e,i.call(t,r)},t}},5049:(e,t,r)=>{var n=r(392);r(3877),r(2886);var i=e.exports=n.asn1=n.asn1||{};function o(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}i.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},i.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},i.create=function(e,t,r,o,s){if(n.util.isArray(o)){for(var a=[],c=0;c<o.length;++c)void 0!==o[c]&&a.push(o[c]);o=a}var u={tagClass:e,type:t,constructed:r,composed:r||n.util.isArray(o),value:o};return s&&"bitStringContents"in s&&(u.bitStringContents=s.bitStringContents,u.original=i.copy(u)),u},i.copy=function(e,t){var r;if(n.util.isArray(e)){r=[];for(var o=0;o<e.length;++o)r.push(i.copy(e[o],t));return r}return"string"===typeof e?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:i.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},i.equals=function(e,t,r){if(n.util.isArray(e)){if(!n.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var o=0;o<e.length;++o)if(!i.equals(e[o],t[o]))return!1;return!0}if(typeof e!==typeof t)return!1;if("string"===typeof e)return e===t;var s=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&i.equals(e.value,t.value);return r&&r.includeBitStringContents&&(s=s&&e.bitStringContents===t.bitStringContents),s},i.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};function s(e,t,r,n){var a;o(e,t,2);var c=e.getByte();t--;var u=192&c,l=31&c;a=e.length();var d,h,f=function(e,t){var r=e.getByte();if(t--,128!==r){var n;if(128&r){var i=127&r;o(e,t,i),n=e.getInt(i<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(e,t);if(t-=a-e.length(),void 0!==f&&f>t){if(n.strict){var p=new Error("Too few bytes to read ASN.1 value.");throw p.available=e.length(),p.remaining=t,p.requested=f,p}f=t}var g=32===(32&c);if(g)if(d=[],void 0===f)for(;;){if(o(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}a=e.length(),d.push(s(e,t,r+1,n)),t-=a-e.length()}else for(;f>0;)a=e.length(),d.push(s(e,f,r+1,n)),t-=a-e.length(),f-=a-e.length();if(void 0===d&&u===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&(h=e.bytes(f)),void 0===d&&n.decodeBitStrings&&u===i.Class.UNIVERSAL&&l===i.Type.BITSTRING&&f>1){var m=e.read,y=t,v=0;if(l===i.Type.BITSTRING&&(o(e,t,1),v=e.getByte(),t--),0===v)try{a=e.length();var b=s(e,t,r+1,{strict:!0,decodeBitStrings:!0}),w=a-e.length();t-=w,l==i.Type.BITSTRING&&w++;var _=b.tagClass;w!==f||_!==i.Class.UNIVERSAL&&_!==i.Class.CONTEXT_SPECIFIC||(d=[b])}catch(A){}void 0===d&&(e.read=m,t=y)}if(void 0===d){if(void 0===f){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=t}if(l===i.Type.BMPSTRING)for(d="";f>0;f-=2)o(e,t,2),d+=String.fromCharCode(e.getInt16()),t-=2;else d=e.getBytes(f),t-=f}var E=void 0===h?null:{bitStringContents:h};return i.create(u,l,g,d,E)}i.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"===typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.length(),i=s(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=r,o.remaining=e.length(),o}return i},i.toDer=function(e){var t=n.util.createBuffer(),r=e.tagClass|e.type,o=n.util.createBuffer(),s=!1;if("bitStringContents"in e&&(s=!0,e.original&&(s=i.equals(e,e.original))),s)o.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:o.putByte(0);for(var a=0;a<e.value.length;++a)void 0!==e.value[a]&&o.putBuffer(i.toDer(e.value[a]))}else if(e.type===i.Type.BMPSTRING)for(a=0;a<e.value.length;++a)o.putInt16(e.value.charCodeAt(a));else e.type===i.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0===(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128===(128&e.value.charCodeAt(1)))?o.putBytes(e.value.substr(1)):o.putBytes(e.value);if(t.putByte(r),o.length()<=127)t.putByte(127&o.length());else{var c=o.length(),u="";do{u+=String.fromCharCode(255&c),c>>>=8}while(c>0);t.putByte(128|u.length);for(a=u.length-1;a>=0;--a)t.putByte(u.charCodeAt(a))}return t.putBuffer(o),t},i.oidToDer=function(e){var t,r,i,o,s=e.split("."),a=n.util.createBuffer();a.putByte(40*parseInt(s[0],10)+parseInt(s[1],10));for(var c=2;c<s.length;++c){t=!0,r=[],i=parseInt(s[c],10);do{o=127&i,i>>>=7,t||(o|=128),r.push(o),t=!1}while(i>0);for(var u=r.length-1;u>=0;--u)a.putByte(r[u])}return a},i.derToOid=function(e){var t;"string"===typeof e&&(e=n.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var i=0;e.length()>0;)i<<=7,128&(r=e.getByte())?i+=127&r:(t+="."+(i+r),i=0);return t},i.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),o=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var c=e.charAt(10),u=10;"+"!==c&&"-"!==c&&(a=parseInt(e.substr(10,2),10),u+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(o,s,a,0),u&&("+"===(c=e.charAt(u))||"-"===c)){var l=60*parseInt(e.substr(u+1,2),10)+parseInt(e.substr(u+4,2),10);l*=6e4,"+"===c?t.setTime(+t-l):t.setTime(+t+l)}return t},i.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),c=0,u=0,l=!1;"Z"===e.charAt(e.length-1)&&(l=!0);var d=e.length-5,h=e.charAt(d);"+"!==h&&"-"!==h||(u=60*parseInt(e.substr(d+1,2),10)+parseInt(e.substr(d+4,2),10),u*=6e4,"+"===h&&(u*=-1),l=!0);return"."===e.charAt(14)&&(c=1e3*parseFloat(e.substr(14),10)),l?(t.setUTCFullYear(r,n,i),t.setUTCHours(o,s,a,c),t.setTime(+t+u)):(t.setFullYear(r,n,i),t.setHours(o,s,a,c)),t},i.dateToUtcTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},i.dateToGeneralizedTime=function(e){if("string"===typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},i.integerToDer=function(e){var t=n.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},i.derToInteger=function(e){"string"===typeof e&&(e=n.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},i.validate=function(e,t,r,o){var s=!1;if(e.tagClass!==t.tagClass&&"undefined"!==typeof t.tagClass||e.type!==t.type&&"undefined"!==typeof t.type)o&&(e.tagClass!==t.tagClass&&o.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&o.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||"undefined"===typeof t.constructed){if(s=!0,t.value&&n.util.isArray(t.value))for(var a=0,c=0;s&&c<t.value.length;++c)s=t.value[c].optional||!1,e.value[a]&&((s=i.validate(e.value[a],t.value[c],r,o))?++a:t.value[c].optional&&(s=!0)),!s&&o&&o.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(s&&r)if(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else o&&o.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return s};var a=/[^\\u0000-\\u00ff]/;i.prettyPrint=function(e,t,r){var o="";r=r||2,(t=t||0)>0&&(o+="\n");for(var s="",c=0;c<t*r;++c)s+=" ";switch(o+=s+"Tag: ",e.tagClass){case i.Class.UNIVERSAL:o+="Universal:";break;case i.Class.APPLICATION:o+="Application:";break;case i.Class.CONTEXT_SPECIFIC:o+="Context-Specific:";break;case i.Class.PRIVATE:o+="Private:"}if(e.tagClass===i.Class.UNIVERSAL)switch(o+=e.type,e.type){case i.Type.NONE:o+=" (None)";break;case i.Type.BOOLEAN:o+=" (Boolean)";break;case i.Type.INTEGER:o+=" (Integer)";break;case i.Type.BITSTRING:o+=" (Bit string)";break;case i.Type.OCTETSTRING:o+=" (Octet string)";break;case i.Type.NULL:o+=" (Null)";break;case i.Type.OID:o+=" (Object Identifier)";break;case i.Type.ODESC:o+=" (Object Descriptor)";break;case i.Type.EXTERNAL:o+=" (External or Instance of)";break;case i.Type.REAL:o+=" (Real)";break;case i.Type.ENUMERATED:o+=" (Enumerated)";break;case i.Type.EMBEDDED:o+=" (Embedded PDV)";break;case i.Type.UTF8:o+=" (UTF8)";break;case i.Type.ROID:o+=" (Relative Object Identifier)";break;case i.Type.SEQUENCE:o+=" (Sequence)";break;case i.Type.SET:o+=" (Set)";break;case i.Type.PRINTABLESTRING:o+=" (Printable String)";break;case i.Type.IA5String:o+=" (IA5String (ASCII))";break;case i.Type.UTCTIME:o+=" (UTC time)";break;case i.Type.GENERALIZEDTIME:o+=" (Generalized time)";break;case i.Type.BMPSTRING:o+=" (BMP String)"}else o+=e.type;if(o+="\n",o+=s+"Constructed: "+e.constructed+"\n",e.composed){var u=0,l="";for(c=0;c<e.value.length;++c)void 0!==e.value[c]&&(u+=1,l+=i.prettyPrint(e.value[c],t+1,r),c+1<e.value.length&&(l+=","));o+=s+"Sub values: "+u+l}else{if(o+=s+"Value: ",e.type===i.Type.OID){var d=i.derToOid(e.value);o+=d,n.pki&&n.pki.oids&&d in n.pki.oids&&(o+=" ("+n.pki.oids[d]+") ")}if(e.type===i.Type.INTEGER)try{o+=i.derToInteger(e.value)}catch(f){o+="0x"+n.util.bytesToHex(e.value)}else if(e.type===i.Type.BITSTRING){if(e.value.length>1?o+="0x"+n.util.bytesToHex(e.value.slice(1)):o+="(none)",e.value.length>0){var h=e.value.charCodeAt(0);1==h?o+=" (1 unused bit shown)":h>1&&(o+=" ("+h+" unused bits shown)")}}else if(e.type===i.Type.OCTETSTRING)a.test(e.value)||(o+="("+e.value+") "),o+="0x"+n.util.bytesToHex(e.value);else if(e.type===i.Type.UTF8)try{o+=n.util.decodeUtf8(e.value)}catch(p){if("URI malformed"!==p.message)throw p;o+="0x"+n.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===i.Type.PRINTABLESTRING||e.type===i.Type.IA5String?o+=e.value:a.test(e.value)?o+="0x"+n.util.bytesToHex(e.value):0===e.value.length?o+="[null]":o+=e.value}return o}},5754:e=>{var t={};e.exports=t;var r={};t.encode=function(e,t,r){if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!==typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,o=t.length,s=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var c=0,u=e[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}else n=function(e,t){var r=0,n=t.length,i=t.charAt(0),o=[0];for(r=0;r<e.length();++r){for(var s=0,a=e.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=t[o[r]];return c}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},t.decode=function(e,t){if("string"!==typeof e)throw new TypeError('"input" must be a string.');if("string"!==typeof t)throw new TypeError('"alphabet" must be a string.');var n=r[t];if(!n){n=r[t]=[];for(var i=0;i<t.length;++i)n[t.charCodeAt(i)]=i}e=e.replace(/\s/g,"");var o=t.length,s=t.charAt(0),a=[0];for(i=0;i<e.length;i++){var c=n[e.charCodeAt(i)];if(void 0===c)return;for(var u=0,l=c;u<a.length;++u)l+=a[u]*o,a[u]=255&l,l>>=8;for(;l>0;)a.push(255&l),l>>=8}for(var d=0;e[d]===s&&d<e.length-1;++d)a.push(0);return"undefined"!==typeof Buffer?Buffer.from(a.reverse()):new Uint8Array(a.reverse())}},3397:(e,t,r)=>{var n=r(392);r(3877),e.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},n.cipher.createDecipher=function(e,t){var r=e;if("string"===typeof r&&(r=n.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new n.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},n.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),n.cipher.algorithms[e]=t},n.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[e]:null};var i=n.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};i.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=e.output||n.util.createBuffer(),this.mode.start(t)},i.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},i.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},4533:(e,t,r)=>{var n=r(392);r(3877),n.cipher=n.cipher||{};var i=e.exports=n.cipher.modes=n.cipher.modes||{};function o(e,t){if("string"===typeof e&&(e=n.util.createBuffer(e)),n.util.isArray(e)&&e.length>4){var r=e;e=n.util.createBuffer();for(var i=0;i<r.length;++i)e.putByte(r[i])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!n.util.isArray(e)){var o=[],s=t/4;for(i=0;i<s;++i)o.push(e.getInt32());e=o}return e}function s(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}i.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.ecb.prototype.start=function(e){},i.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},i.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},i.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=o(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},i.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},i.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},i.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},i.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},i.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=o(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=o(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(o>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},i.ofb.prototype.decrypt=i.ofb.prototype.encrypt,i.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},i.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=o(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},i.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(o>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}s(this._inBlock)},i.ctr.prototype.decrypt=i.ctr.prototype.encrypt,i.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},i.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=n.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?n.util.createBuffer(e.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=n.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=r.length();if(12===i)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*i)))}this._inBlock=this._j0.slice(0),s(this._inBlock),this._partialBytes=0,t=n.util.createBuffer(t),this._aDataLength=a(8*t.length());var o=t.length()%this.blockSize;for(o&&t.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},i.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),s(this._inBlock)},i.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),s(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},i.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=n.util.createBuffer();var i=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var o=[];this.cipher.encrypt(this._j0,o);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^o[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},i.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},i.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},i.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},i.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},i.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=(n-1-s%n)*t;a[s/n|0]=1<<t-1<<c,o[s]=this.generateSubHashTable(this.multiply(a,e),t)}return o},i.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return i}},1400:(e,t,r)=>{var n=r(392);function i(e,t){n.cipher.registerAlgorithm(e,(function(){return new n.des.Algorithm(e,t)}))}r(3397),r(4533),r(3877),e.exports=n.des=n.des||{},n.des.startEncrypting=function(e,t,r,n){var i=p({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createEncryptionCipher=function(e,t){return p({key:e,output:null,decrypt:!1,mode:t})},n.des.startDecrypting=function(e,t,r,n){var i=p({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},n.des.createDecryptionCipher=function(e,t){return p({key:e,output:null,decrypt:!0,mode:t})},n.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return f(r._keys,e,t,!1)},decrypt:function(e,t){return f(r._keys,e,t,!0)}}}),r._init=!1},n.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=n.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],c=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,y=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w=0;w<m;w++){var _=e.getInt32(),E=e.getInt32();_^=(t=252645135&(_>>>4^E))<<4,_^=t=65535&((E^=t)>>>-16^_),_^=(t=858993459&(_>>>2^(E^=t<<-16)))<<2,_^=t=65535&((E^=t)>>>-16^_),_^=(t=1431655765&(_>>>1^(E^=t<<-16)))<<1,_^=t=16711935&((E^=t)>>>8^_),t=(_^=(t=1431655765&(_>>>1^(E^=t<<8)))<<1)<<8|(E^=t)>>>20&240,_=E<<24|E<<8&16711680|E>>>8&65280|E>>>24&240,E=t;for(var A=0;A<v.length;++A){v[A]?(_=_<<2|_>>>26,E=E<<2|E>>>26):(_=_<<1|_>>>27,E=E<<1|E>>>27),E&=-15;var S=r[(_&=-15)>>>28]|n[_>>>24&15]|i[_>>>20&15]|o[_>>>16&15]|s[_>>>12&15]|a[_>>>8&15]|c[_>>>4&15],k=u[E>>>28]|l[E>>>24&15]|d[E>>>20&15]|h[E>>>16&15]|f[E>>>12&15]|p[E>>>8&15]|g[E>>>4&15];t=65535&(k>>>16^S),y[b++]=S^t,y[b++]=k^t<<16}}return y}(t),this._init=!0}},i("DES-ECB",n.cipher.modes.ecb),i("DES-CBC",n.cipher.modes.cbc),i("DES-CFB",n.cipher.modes.cfb),i("DES-OFB",n.cipher.modes.ofb),i("DES-CTR",n.cipher.modes.ctr),i("3DES-ECB",n.cipher.modes.ecb),i("3DES-CBC",n.cipher.modes.cbc),i("3DES-CFB",n.cipher.modes.cfb),i("3DES-OFB",n.cipher.modes.ofb),i("3DES-CTR",n.cipher.modes.ctr);var o=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],s=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],a=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],c=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],u=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],d=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],h=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function f(e,t,r,n){var i,f,p=32===e.length?3:9;i=3===p?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var g=t[0],m=t[1];g^=(f=252645135&(g>>>4^m))<<4,g^=(f=65535&(g>>>16^(m^=f)))<<16,g^=f=858993459&((m^=f)>>>2^g),g^=f=16711935&((m^=f<<2)>>>8^g),g=(g^=(f=1431655765&(g>>>1^(m^=f<<8)))<<1)<<1|g>>>31,m=(m^=f)<<1|m>>>31;for(var y=0;y<p;y+=3){for(var v=i[y+1],b=i[y+2],w=i[y];w!=v;w+=b){var _=m^e[w],E=(m>>>4|m<<28)^e[w+1];f=g,g=m,m=f^(s[_>>>24&63]|c[_>>>16&63]|l[_>>>8&63]|h[63&_]|o[E>>>24&63]|a[E>>>16&63]|u[E>>>8&63]|d[63&E])}f=g,g=m,m=f}m=m>>>1|m<<31,m^=f=1431655765&((g=g>>>1|g<<31)>>>1^m),m^=(f=16711935&(m>>>8^(g^=f<<1)))<<8,m^=(f=858993459&(m>>>2^(g^=f)))<<2,m^=f=65535&((g^=f)>>>16^m),m^=f=252645135&((g^=f<<16)>>>4^m),g^=f<<4,r[0]=g,r[1]=m}function p(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?n.cipher.createDecipher(r,e.key):n.cipher.createCipher(r,e.key)).start;return t.start=function(e,r){var o=null;r instanceof n.util.ByteBuffer&&(o=r,r={}),(r=r||{}).output=o,r.iv=e,i.call(t,r)},t}},392:e=>{e.exports={options:{usePureJavaScript:!1}}},878:(e,t,r)=>{var n=r(392);r(29),r(3877),(e.exports=n.hmac=n.hmac||{}).create=function(){var e=null,t=null,r=null,i=null,o={start:function(o,s){if(null!==o)if("string"===typeof o){if(!((o=o.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+o+'"');t=n.md.algorithms[o].create()}else t=o;if(null===s)s=e;else{if("string"===typeof s)s=n.util.createBuffer(s);else if(n.util.isArray(s)){var a=s;s=n.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var u=s.length();u>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=n.util.createBuffer(),i=n.util.createBuffer(),u=s.length();for(c=0;c<u;++c){a=s.at(c);r.putByte(54^a),i.putByte(92^a)}if(u<t.blockLength)for(a=t.blockLength-u,c=0;c<a;++c)r.putByte(54),i.putByte(92);e=s,r=r.bytes(),i=i.bytes()}t.start(),t.update(r)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(i),t.update(e),t.digest()}};return o.digest=o.getMac,o}},3055:(e,t,r)=>{var n,i=r(392);e.exports=i.jsbn=i.jsbn||{};function o(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function s(){return new o(null)}function a(e,t,r,n,i,o){for(var s=16383&t,a=t>>14;--o>=0;){var c=16383&this.data[e],u=this.data[e++]>>14,l=a*c+u*s;i=((c=s*c+((16383&l)<<14)+r.data[n]+i)>>28)+(l>>14)+a*u,r.data[n++]=268435455&c}return i}i.jsbn.BigInteger=o,"undefined"===typeof navigator?(o.prototype.am=a,n=28):"Microsoft Internet Explorer"==navigator.appName?(o.prototype.am=function(e,t,r,n,i,o){for(var s=32767&t,a=t>>15;--o>=0;){var c=32767&this.data[e],u=this.data[e++]>>15,l=a*c+u*s;i=((c=s*c+((32767&l)<<15)+r.data[n]+(1073741823&i))>>>30)+(l>>>15)+a*u+(i>>>30),r.data[n++]=1073741823&c}return i},n=30):"Netscape"!=navigator.appName?(o.prototype.am=function(e,t,r,n,i,o){for(;--o>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=67108863&s}return i},n=26):(o.prototype.am=a,n=28),o.prototype.DB=n,o.prototype.DM=(1<<n)-1,o.prototype.DV=1<<n;o.prototype.FV=Math.pow(2,52),o.prototype.F1=52-n,o.prototype.F2=2*n-52;var c,u,l="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array;for(c="0".charCodeAt(0),u=0;u<=9;++u)d[c++]=u;for(c="a".charCodeAt(0),u=10;u<36;++u)d[c++]=u;for(c="A".charCodeAt(0),u=10;u<36;++u)d[c++]=u;function h(e){return l.charAt(e)}function f(e,t){var r=d[e.charCodeAt(t)];return null==r?-1:r}function p(e){var t=s();return t.fromInt(e),t}function g(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function m(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function v(e,t){return e&t}function b(e,t){return e|t}function w(e,t){return e^t}function _(e,t){return e&~t}function E(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function A(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function S(){}function k(e){return e}function x(e){this.r2=s(),this.q3=s(),o.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}m.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},m.prototype.revert=function(e){return e},m.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},m.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=s();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(o.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=s();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},o.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},o.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},o.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var a=8==r?255&e[n]:f(e,n);a<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==s?this.data[this.t++]=a:s+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this.data[this.t++]=a>>this.DB-s):this.data[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&o.ZERO.subTo(this,this)},o.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},o.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},o.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},o.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+s+1]=this.data[r]>>i|a,a=(this.data[r]&o)<<n;for(r=s-1;r>=0;--r)t.data[r]=0;t.data[s]=a,t.t=this.t+s+1,t.s=this.s,t.clamp()},o.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&o)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}},o.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},o.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&o.ZERO.subTo(t,t)},o.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},o.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=s());var a=s(),c=this.s,u=e.s,l=this.DB-g(n.data[n.t-1]);l>0?(n.lShiftTo(l,a),i.lShiftTo(l,r)):(n.copyTo(a),i.copyTo(r));var d=a.t,h=a.data[d-1];if(0!=h){var f=h*(1<<this.F1)+(d>1?a.data[d-2]>>this.F2:0),p=this.FV/f,m=(1<<this.F1)/f,y=1<<this.F2,v=r.t,b=v-d,w=null==t?s():t;for(a.dlShiftTo(b,w),r.compareTo(w)>=0&&(r.data[r.t++]=1,r.subTo(w,r)),o.ONE.dlShiftTo(d,w),w.subTo(a,a);a.t<d;)a.data[a.t++]=0;for(;--b>=0;){var _=r.data[--v]==h?this.DM:Math.floor(r.data[v]*p+(r.data[v-1]+y)*m);if((r.data[v]+=a.am(0,_,r,b,0,d))<_)for(a.dlShiftTo(b,w),r.subTo(w,r);r.data[v]<--_;)r.subTo(w,r)}null!=t&&(r.drShiftTo(d,t),c!=u&&o.ZERO.subTo(t,t)),r.t=d,r.clamp(),l>0&&r.rShiftTo(l,r),c<0&&o.ZERO.subTo(r,r)}}},o.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},o.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},o.prototype.exp=function(e,t){if(e>4294967295||e<1)return o.ONE;var r=s(),n=s(),i=t.convert(this),a=g(e)-1;for(i.copyTo(r);--a>=0;)if(t.sqrTo(r,n),(e&1<<a)>0)t.mulTo(n,i,r);else{var c=r;r=n,n=c}return t.revert(r)},o.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(r=this.data[s]>>a)>0&&(i=!0,o=h(r));s>=0;)a<t?(r=(this.data[s]&(1<<a)-1)<<t-a,r|=this.data[--s]>>(a+=this.DB-t)):(r=this.data[s]>>(a-=t)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=h(r));return i?o:"0"},o.prototype.negate=function(){var e=s();return o.ZERO.subTo(this,e),e},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+g(this.data[this.t-1]^this.s&this.DM)},o.prototype.mod=function(e){var t=s();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(o.ZERO)>0&&e.subTo(t,t),t},o.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new m(t):new y(t),this.exp(e,r)},o.ZERO=p(0),o.ONE=p(1),S.prototype.convert=k,S.prototype.revert=k,S.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},S.prototype.sqrTo=function(e,t){e.squareTo(t)},x.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=s();return e.copyTo(t),this.reduce(t),t},x.prototype.revert=function(e){return e},x.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},x.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},x.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var I=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],T=(1<<26)/I[I.length-1];o.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},o.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=p(r),i=s(),o=s(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(e)+a},o.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,a=0,c=0;c<e.length;++c){var u=f(e,c);u<0?"-"==e.charAt(c)&&0==this.signum()&&(i=!0):(a=t*a+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),i&&o.ZERO.subTo(this,this)},o.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(o.ONE.shiftLeft(e-1),b,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(o.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},o.prototype.bitwiseTo=function(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},o.prototype.changeBit=function(e,t){var r=o.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},o.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},o.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},o.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},o.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},o.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},o.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},o.prototype.millerRabin=function(e){var t=this.subtract(o.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),s={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},a=0;a<e;++a){do{n=new o(this.bitLength(),s)}while(n.compareTo(o.ONE)<=0||n.compareTo(t)>=0);var c=n.modPow(i,this);if(0!=c.compareTo(o.ONE)&&0!=c.compareTo(t)){for(var u=1;u++<r&&0!=c.compareTo(t);)if(0==(c=c.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=c.compareTo(t))return!1}}return!0},o.prototype.clone=function(){var e=s();return this.copyTo(e),e},o.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},o.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},o.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},o.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},o.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},o.prototype.equals=function(e){return 0==this.compareTo(e)},o.prototype.min=function(e){return this.compareTo(e)<0?this:e},o.prototype.max=function(e){return this.compareTo(e)>0?this:e},o.prototype.and=function(e){var t=s();return this.bitwiseTo(e,v,t),t},o.prototype.or=function(e){var t=s();return this.bitwiseTo(e,b,t),t},o.prototype.xor=function(e){var t=s();return this.bitwiseTo(e,w,t),t},o.prototype.andNot=function(e){var t=s();return this.bitwiseTo(e,_,t),t},o.prototype.not=function(){for(var e=s(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},o.prototype.shiftLeft=function(e){var t=s();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},o.prototype.shiftRight=function(e){var t=s();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},o.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+E(this.data[e]);return this.s<0?this.t*this.DB:-1},o.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=A(this.data[r]^t);return e},o.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},o.prototype.setBit=function(e){return this.changeBit(e,b)},o.prototype.clearBit=function(e){return this.changeBit(e,_)},o.prototype.flipBit=function(e){return this.changeBit(e,w)},o.prototype.add=function(e){var t=s();return this.addTo(e,t),t},o.prototype.subtract=function(e){var t=s();return this.subTo(e,t),t},o.prototype.multiply=function(e){var t=s();return this.multiplyTo(e,t),t},o.prototype.divide=function(e){var t=s();return this.divRemTo(e,t,null),t},o.prototype.remainder=function(e){var t=s();return this.divRemTo(e,null,t),t},o.prototype.divideAndRemainder=function(e){var t=s(),r=s();return this.divRemTo(e,t,r),new Array(t,r)},o.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),o=p(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new m(t):t.isEven()?new x(t):new y(t);var a=new Array,c=3,u=r-1,l=(1<<r)-1;if(a[1]=n.convert(this),r>1){var d=s();for(n.sqrTo(a[1],d);c<=l;)a[c]=s(),n.mulTo(d,a[c-2],a[c]),c+=2}var h,f,v=e.t-1,b=!0,w=s();for(i=g(e.data[v])-1;v>=0;){for(i>=u?h=e.data[v]>>i-u&l:(h=(e.data[v]&(1<<i+1)-1)<<u-i,v>0&&(h|=e.data[v-1]>>this.DB+i-u)),c=r;0==(1&h);)h>>=1,--c;if((i-=c)<0&&(i+=this.DB,--v),b)a[h].copyTo(o),b=!1;else{for(;c>1;)n.sqrTo(o,w),n.sqrTo(w,o),c-=2;c>0?n.sqrTo(o,w):(f=o,o=w,w=f),n.mulTo(w,a[h],o)}for(;v>=0&&0==(e.data[v]&1<<i);)n.sqrTo(o,w),f=o,o=w,w=f,--i<0&&(i=this.DB-1,--v)}return n.revert(o)},o.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return o.ZERO;for(var r=e.clone(),n=this.clone(),i=p(1),s=p(0),a=p(0),c=p(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(e,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(e,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),s.subTo(c,s)):(n.subTo(r,n),t&&a.subTo(i,a),c.subTo(s,c))}return 0!=n.compareTo(o.ONE)?o.ZERO:c.compareTo(e)>=0?c.subtract(e):c.signum()<0?(c.addTo(e,c),c.signum()<0?c.add(e):c):c},o.prototype.pow=function(e){return this.exp(e,new S)},o.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},o.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=I[I.length-1]){for(t=0;t<I.length;++t)if(r.data[0]==I[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<I.length;){for(var n=I[t],i=t+1;i<I.length&&n<T;)n*=I[i++];for(n=r.modInt(n);t<i;)if(n%I[t++]==0)return!1}return r.millerRabin(e)}},29:(e,t,r)=>{var n=r(392);e.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},2886:(e,t,r)=>{var n=r(392);n.pki=n.pki||{};var i=e.exports=n.pki.oids=n.oids=n.oids||{};function o(e,t){i[e]=t,i[t]=e}function s(e,t){i[e]=t}o("1.2.840.113549.1.1.1","rsaEncryption"),o("1.2.840.113549.1.1.4","md5WithRSAEncryption"),o("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),o("1.2.840.113549.1.1.7","RSAES-OAEP"),o("1.2.840.113549.1.1.8","mgf1"),o("1.2.840.113549.1.1.9","pSpecified"),o("1.2.840.113549.1.1.10","RSASSA-PSS"),o("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),o("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),o("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),o("1.3.101.112","EdDSA25519"),o("1.2.840.10040.4.3","dsa-with-sha1"),o("1.3.14.3.2.7","desCBC"),o("1.3.14.3.2.26","sha1"),o("1.3.14.3.2.29","sha1WithRSASignature"),o("2.16.840.1.101.3.4.2.1","sha256"),o("2.16.840.1.101.3.4.2.2","sha384"),o("2.16.840.1.101.3.4.2.3","sha512"),o("2.16.840.1.101.3.4.2.4","sha224"),o("2.16.840.1.101.3.4.2.5","sha512-224"),o("2.16.840.1.101.3.4.2.6","sha512-256"),o("1.2.840.113549.2.2","md2"),o("1.2.840.113549.2.5","md5"),o("1.2.840.113549.1.7.1","data"),o("1.2.840.113549.1.7.2","signedData"),o("1.2.840.113549.1.7.3","envelopedData"),o("1.2.840.113549.1.7.4","signedAndEnvelopedData"),o("1.2.840.113549.1.7.5","digestedData"),o("1.2.840.113549.1.7.6","encryptedData"),o("1.2.840.113549.1.9.1","emailAddress"),o("1.2.840.113549.1.9.2","unstructuredName"),o("1.2.840.113549.1.9.3","contentType"),o("1.2.840.113549.1.9.4","messageDigest"),o("1.2.840.113549.1.9.5","signingTime"),o("1.2.840.113549.1.9.6","counterSignature"),o("1.2.840.113549.1.9.7","challengePassword"),o("1.2.840.113549.1.9.8","unstructuredAddress"),o("1.2.840.113549.1.9.14","extensionRequest"),o("1.2.840.113549.1.9.20","friendlyName"),o("1.2.840.113549.1.9.21","localKeyId"),o("1.2.840.113549.1.9.22.1","x509Certificate"),o("1.2.840.113549.1.12.10.1.1","keyBag"),o("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),o("1.2.840.113549.1.12.10.1.3","certBag"),o("1.2.840.113549.1.12.10.1.4","crlBag"),o("1.2.840.113549.1.12.10.1.5","secretBag"),o("1.2.840.113549.1.12.10.1.6","safeContentsBag"),o("1.2.840.113549.1.5.13","pkcs5PBES2"),o("1.2.840.113549.1.5.12","pkcs5PBKDF2"),o("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),o("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),o("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),o("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),o("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),o("1.2.840.113549.2.7","hmacWithSHA1"),o("1.2.840.113549.2.8","hmacWithSHA224"),o("1.2.840.113549.2.9","hmacWithSHA256"),o("1.2.840.113549.2.10","hmacWithSHA384"),o("1.2.840.113549.2.11","hmacWithSHA512"),o("1.2.840.113549.3.7","des-EDE3-CBC"),o("2.16.840.1.101.3.4.1.2","aes128-CBC"),o("2.16.840.1.101.3.4.1.22","aes192-CBC"),o("2.16.840.1.101.3.4.1.42","aes256-CBC"),o("2.5.4.3","commonName"),o("2.5.4.4","surname"),o("2.5.4.5","serialNumber"),o("2.5.4.6","countryName"),o("2.5.4.7","localityName"),o("2.5.4.8","stateOrProvinceName"),o("2.5.4.9","streetAddress"),o("2.5.4.10","organizationName"),o("2.5.4.11","organizationalUnitName"),o("2.5.4.12","title"),o("2.5.4.13","description"),o("2.5.4.15","businessCategory"),o("2.5.4.17","postalCode"),o("2.5.4.42","givenName"),o("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),o("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),o("2.16.840.1.113730.1.1","nsCertType"),o("2.16.840.1.113730.1.13","nsComment"),s("2.5.29.1","authorityKeyIdentifier"),s("2.5.29.2","keyAttributes"),s("2.5.29.3","certificatePolicies"),s("2.5.29.4","keyUsageRestriction"),s("2.5.29.5","policyMapping"),s("2.5.29.6","subtreesConstraint"),s("2.5.29.7","subjectAltName"),s("2.5.29.8","issuerAltName"),s("2.5.29.9","subjectDirectoryAttributes"),s("2.5.29.10","basicConstraints"),s("2.5.29.11","nameConstraints"),s("2.5.29.12","policyConstraints"),s("2.5.29.13","basicConstraints"),o("2.5.29.14","subjectKeyIdentifier"),o("2.5.29.15","keyUsage"),s("2.5.29.16","privateKeyUsagePeriod"),o("2.5.29.17","subjectAltName"),o("2.5.29.18","issuerAltName"),o("2.5.29.19","basicConstraints"),s("2.5.29.20","cRLNumber"),s("2.5.29.21","cRLReason"),s("2.5.29.22","expirationDate"),s("2.5.29.23","instructionCode"),s("2.5.29.24","invalidityDate"),s("2.5.29.25","cRLDistributionPoints"),s("2.5.29.26","issuingDistributionPoint"),s("2.5.29.27","deltaCRLIndicator"),s("2.5.29.28","issuingDistributionPoint"),s("2.5.29.29","certificateIssuer"),s("2.5.29.30","nameConstraints"),o("2.5.29.31","cRLDistributionPoints"),o("2.5.29.32","certificatePolicies"),s("2.5.29.33","policyMappings"),s("2.5.29.34","policyConstraints"),o("2.5.29.35","authorityKeyIdentifier"),s("2.5.29.36","policyConstraints"),o("2.5.29.37","extKeyUsage"),s("2.5.29.46","freshestCRL"),s("2.5.29.54","inhibitAnyPolicy"),o("1.3.6.1.4.1.11129.2.4.2","timestampList"),o("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),o("1.3.6.1.5.5.7.3.1","serverAuth"),o("1.3.6.1.5.5.7.3.2","clientAuth"),o("1.3.6.1.5.5.7.3.3","codeSigning"),o("1.3.6.1.5.5.7.3.4","emailProtection"),o("1.3.6.1.5.5.7.3.8","timeStamping")},9835:(e,t,r)=>{var n=r(392);if(r(8605),r(5049),r(1400),r(29),r(2886),r(6019),r(6193),r(3860),r(654),r(5493),r(3877),"undefined"===typeof i)var i=n.jsbn.BigInteger;var o=n.asn1,s=n.pki=n.pki||{};e.exports=s.pbe=n.pbe=n.pbe||{};var a=s.oids,c={name:"EncryptedPrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},u={name:"PBES2Algorithms",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"iterations"}]};function d(e,t){return e.start().update(t).digest().getBytes()}function h(e){var t;if(e){if(!(t=s.oids[o.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return f(t)}function f(e){var t=n.md;switch(e){case"hmacWithSHA224":t=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}s.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var i,c,u,l=n.random.getBytesSync(r.saltSize),d=r.count,h=o.integerToDer(d);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var p,g,m;switch(r.algorithm){case"aes128":i=16,p=16,g=a["aes128-CBC"],m=n.aes.createEncryptionCipher;break;case"aes192":i=24,p=16,g=a["aes192-CBC"],m=n.aes.createEncryptionCipher;break;case"aes256":i=32,p=16,g=a["aes256-CBC"],m=n.aes.createEncryptionCipher;break;case"des":i=8,p=8,g=a.desCBC,m=n.des.createEncryptionCipher;break;default:throw(E=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,E}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),v=f(y),b=n.pkcs5.pbkdf2(t,l,d,i,v),w=n.random.getBytesSync(p);(A=m(b)).start(w),A.update(o.toDer(e)),A.finish(),u=A.output.getBytes();var _=function(e,t,r,i){var a=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,e),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==i&&a.value.push(o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(r.toString(16))),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(s.oids[i]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]));return a}(l,h,i,y);c=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.pkcs5PBES2).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.pkcs5PBKDF2).getBytes()),_]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(g).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,w)])])])}else{var E;if("3des"!==r.algorithm)throw(E=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,E;i=24;var A,S=new n.util.ByteBuffer(l);b=s.pbe.generatePkcs12Key(t,S,1,d,i),w=s.pbe.generatePkcs12Key(t,S,2,d,i);(A=n.des.createEncryptionCipher(b)).start(w),A.update(o.toDer(e)),A.finish(),u=A.output.getBytes(),c=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,l),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,h.getBytes())])])}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[c,o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,u)])},s.decryptPrivateKeyInfo=function(e,t){var r=null,i={},a=[];if(!o.validate(e,c,i,a)){var u=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw u.errors=a,u}var l=o.derToOid(i.encryptionOid),d=s.pbe.getCipher(l,i.encryptionParams,t),h=n.util.createBuffer(i.encryptedData);return d.update(h),d.finish()&&(r=o.fromDer(d.output)),r},s.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:o.toDer(e).getBytes()};return n.pem.encode(r,{maxline:t})},s.encryptedPrivateKeyFromPem=function(e){var t=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return o.fromDer(t.body)},s.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var i=s.wrapRsaPrivateKey(s.privateKeyToAsn1(e));return i=s.encryptPrivateKeyInfo(i,t,r),s.encryptedPrivateKeyToPem(i)}var a,c,u,l;switch(r.algorithm){case"aes128":a="AES-128-CBC",u=16,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes192":a="AES-192-CBC",u=24,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"aes256":a="AES-256-CBC",u=32,c=n.random.getBytesSync(16),l=n.aes.createEncryptionCipher;break;case"3des":a="DES-EDE3-CBC",u=24,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;case"des":a="DES-CBC",u=8,c=n.random.getBytesSync(8),l=n.des.createEncryptionCipher;break;default:var d=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw d.algorithm=r.algorithm,d}var h=l(n.pbe.opensslDeriveBytes(t,c.substr(0,8),u));h.start(c),h.update(o.toDer(s.privateKeyToAsn1(e))),h.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:a,parameters:n.util.bytesToHex(c).toUpperCase()},body:h.output.getBytes()};return n.pem.encode(f)},s.decryptRsaPrivateKey=function(e,t){var r=null,i=n.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(u=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=u,u;if(i.procType&&"ENCRYPTED"===i.procType.type){var a,c;switch(i.dekInfo.algorithm){case"DES-CBC":a=8,c=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,c=n.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,c=n.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,c=n.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,c=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,c=function(e){return n.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":a=8,c=function(e){return n.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":a=16,c=function(e){return n.rc2.createDecryptionCipher(e,128)};break;default:var u;throw(u=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,u}var l=n.util.hexToBytes(i.dekInfo.parameters),d=c(n.pbe.opensslDeriveBytes(t,l.substr(0,8),a));if(d.start(l),d.update(n.util.createBuffer(i.body)),!d.finish())return r;r=d.output.getBytes()}else r=i.body;return null!==(r="ENCRYPTED PRIVATE KEY"===i.type?s.decryptPrivateKeyInfo(o.fromDer(r),t):o.fromDer(r))&&(r=s.privateKeyFromAsn1(r)),r},s.pbe.generatePkcs12Key=function(e,t,r,i,o,s){var a,c;if("undefined"===typeof s||null===s){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');s=n.md.sha1.create()}var u=s.digestLength,l=s.blockLength,d=new n.util.ByteBuffer,h=new n.util.ByteBuffer;if(null!==e&&void 0!==e){for(c=0;c<e.length;c++)h.putInt16(e.charCodeAt(c));h.putInt16(0)}var f=h.length(),p=t.length(),g=new n.util.ByteBuffer;g.fillWithByte(r,l);var m=l*Math.ceil(p/l),y=new n.util.ByteBuffer;for(c=0;c<m;c++)y.putByte(t.at(c%p));var v=l*Math.ceil(f/l),b=new n.util.ByteBuffer;for(c=0;c<v;c++)b.putByte(h.at(c%f));var w=y;w.putBuffer(b);for(var _=Math.ceil(o/u),E=1;E<=_;E++){var A=new n.util.ByteBuffer;A.putBytes(g.bytes()),A.putBytes(w.bytes());for(var S=0;S<i;S++)s.start(),s.update(A.getBytes()),A=s.digest();var k=new n.util.ByteBuffer;for(c=0;c<l;c++)k.putByte(A.at(c%u));var x=Math.ceil(p/l)+Math.ceil(f/l),I=new n.util.ByteBuffer;for(a=0;a<x;a++){var T=new n.util.ByteBuffer(w.getBytes(l)),P=511;for(c=k.length()-1;c>=0;c--)P>>=8,P+=k.at(c)+T.at(c),T.setAt(c,255&P);I.putBuffer(T)}w=I,d.putBuffer(A)}return d.truncate(d.length()-o),d},s.pbe.getCipher=function(e,t,r){switch(e){case s.oids.pkcs5PBES2:return s.pbe.getCipherForPBES2(e,t,r);case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case s.oids["pbewithSHAAnd40BitRC2-CBC"]:return s.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},s.pbe.getCipherForPBES2=function(e,t,r){var i,a={},c=[];if(!o.validate(t,u,a,c))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=c,i;if((e=o.derToOid(a.kdfOid))!==s.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,i.supportedOids=["pkcs5PBKDF2"],i;if((e=o.derToOid(a.encOid))!==s.oids["aes128-CBC"]&&e!==s.oids["aes192-CBC"]&&e!==s.oids["aes256-CBC"]&&e!==s.oids["des-EDE3-CBC"]&&e!==s.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var l,d,f=a.kdfSalt,p=n.util.createBuffer(a.kdfIterationCount);switch(p=p.getInt(p.length()<<3),s.oids[e]){case"aes128-CBC":l=16,d=n.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,d=n.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,d=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,d=n.des.createDecryptionCipher;break;case"desCBC":l=8,d=n.des.createDecryptionCipher}var g=h(a.prfOid),m=n.pkcs5.pbkdf2(r,f,p,l,g),y=a.encIv,v=d(m);return v.start(y),v},s.pbe.getCipherForPKCS12PBE=function(e,t,r){var i={},a=[];if(!o.validate(t,l,i,a))throw(g=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=a,g;var c,u,d,f=n.util.createBuffer(i.salt),p=n.util.createBuffer(i.iterations);switch(p=p.getInt(p.length()<<3),e){case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,d=n.des.startDecrypting;break;case s.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,d=function(e,t){var r=n.rc2.createDecryptionCipher(e,40);return r.start(t,null),r};break;default:var g;throw(g=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,g}var m=h(i.prfOid),y=s.pbe.generatePkcs12Key(r,f,1,p,c,m);return m.start(),d(y,s.pbe.generatePkcs12Key(r,f,2,p,u,m))},s.pbe.opensslDeriveBytes=function(e,t,r,i){if("undefined"===typeof i||null===i){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');i=n.md.md5.create()}null===t&&(t="");for(var o=[d(i,e+t)],s=16,a=1;s<r;++a,s+=16)o.push(d(i,o[a-1]+e+t));return o.join("").substr(0,r)}},6019:(e,t,r)=>{var n=r(392);r(878),r(29),r(3877);var i,o=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(i=r(5819)),e.exports=n.pbkdf2=o.pbkdf2=function(e,t,r,o,s,a){if("function"===typeof s&&(a=s,s=null),n.util.isNodejs&&!n.options.usePureJavaScript&&i.pbkdf2&&(null===s||"object"!==typeof s)&&(i.pbkdf2Sync.length>4||!s||"sha1"===s))return"string"!==typeof s&&(s="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),a?4===i.pbkdf2Sync.length?i.pbkdf2(e,t,r,o,(function(e,t){if(e)return a(e);a(null,t.toString("binary"))})):i.pbkdf2(e,t,r,o,s,(function(e,t){if(e)return a(e);a(null,t.toString("binary"))})):4===i.pbkdf2Sync.length?i.pbkdf2Sync(e,t,r,o).toString("binary"):i.pbkdf2Sync(e,t,r,o,s).toString("binary");if("undefined"!==typeof s&&null!==s||(s="sha1"),"string"===typeof s){if(!(s in n.md.algorithms))throw new Error("Unknown hash algorithm: "+s);s=n.md[s].create()}var c=s.digestLength;if(o>4294967295*c){var u=new Error("Derived key is too long.");if(a)return a(u);throw u}var l=Math.ceil(o/c),d=o-(l-1)*c,h=n.hmac.create();h.start(s,e);var f,p,g,m="";if(!a){for(var y=1;y<=l;++y){h.start(null,null),h.update(t),h.update(n.util.int32ToBytes(y)),f=g=h.digest().getBytes();for(var v=2;v<=r;++v)h.start(null,null),h.update(g),p=h.digest().getBytes(),f=n.util.xorBytes(f,p,c),g=p;m+=y<l?f:f.substr(0,d)}return m}y=1;function b(){if(y>l)return a(null,m);h.start(null,null),h.update(t),h.update(n.util.int32ToBytes(y)),f=g=h.digest().getBytes(),v=2,w()}function w(){if(v<=r)return h.start(null,null),h.update(g),p=h.digest().getBytes(),f=n.util.xorBytes(f,p,c),g=p,++v,n.util.setImmediate(w);m+=y<l?f:f.substr(0,d),++y,b()}b()}},6193:(e,t,r)=>{var n=r(392);r(3877);var i=e.exports=n.pem=n.pem||{};function o(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var o=0,s=-1;for(i=0;i<t.length;++i,++o)if(o>65&&-1!==s){var a=t[s];","===a?(++s,t=t.substr(0,s)+"\r\n "+t.substr(s)):t=t.substr(0,s)+"\r\n"+a+t.substr(s+1),o=i-s-1,s=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(s=i);return t}function s(e){return e.replace(/^\s+/,"")}i.encode=function(e,t){t=t||{};var r,i="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(i+=o(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(i+=o(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),i+=o(r)),e.headers)for(var s=0;s<e.headers.length;++s)i+=o(e.headers[s]);return e.procType&&(i+="\r\n"),i+=n.util.encode64(e.body,t.maxline||64)+"\r\n",i+="-----END "+e.type+"-----\r\n"},i.decode=function(e){for(var t,r=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,o=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;t=i.exec(e);){var c=t[1];"NEW CERTIFICATE REQUEST"===c&&(c="CERTIFICATE REQUEST");var u={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(t[3])};if(r.push(u),t[2]){for(var l=t[2].split(a),d=0;t&&d<l.length;){for(var h=l[d].replace(/\s+$/,""),f=d+1;f<l.length;++f){var p=l[f];if(!/\s/.test(p[0]))break;h+=p,d=f}if(t=h.match(o)){for(var g={name:t[1],values:[]},m=t[2].split(","),y=0;y<m.length;++y)g.values.push(s(m[y]));if(u.procType)if(u.contentDomain||"Content-Domain"!==g.name)if(u.dekInfo||"DEK-Info"!==g.name)u.headers.push(g);else{if(0===g.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:m[0],parameters:m[1]||null}}else u.contentDomain=m[0]||"";else{if("Proc-Type"!==g.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==g.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:m[0],type:m[1]}}}++d}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},2627:(e,t,r)=>{var n=r(392);r(3877),r(3860),r(928);var i=e.exports=n.pkcs1=n.pkcs1||{};function o(e,t,r){r||(r=n.md.sha1.create());for(var i="",o=Math.ceil(t/r.digestLength),s=0;s<o;++s){var a=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(e+a),i+=r.digest().getBytes()}return i.substring(0,t)}i.encode_rsa_oaep=function(e,t,r){var i,s,a,c;"string"===typeof r?(i=r,s=arguments[3]||void 0,a=arguments[4]||void 0):r&&(i=r.label||void 0,s=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(c=r.mgf1.md)),a?a.start():a=n.md.sha1.create(),c||(c=a);var u=Math.ceil(e.n.bitLength()/8),l=u-2*a.digestLength-2;if(t.length>l)throw(m=new Error("RSAES-OAEP input message length is too long.")).length=t.length,m.maxLength=l,m;i||(i=""),a.update(i,"raw");for(var d=a.digest(),h="",f=l-t.length,p=0;p<f;p++)h+="\0";var g=d.getBytes()+h+"\x01"+t;if(s){if(s.length!==a.digestLength){var m;throw(m=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=s.length,m.digestLength=a.digestLength,m}}else s=n.random.getBytes(a.digestLength);var y=o(s,u-a.digestLength-1,c),v=n.util.xorBytes(g,y,g.length),b=o(v,a.digestLength,c);return"\0"+n.util.xorBytes(s,b,s.length)+v},i.decode_rsa_oaep=function(e,t,r){var i,s,a;"string"===typeof r?(i=r,s=arguments[3]||void 0):r&&(i=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var c=Math.ceil(e.n.bitLength()/8);if(t.length!==c)throw(y=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,y.expectedLength=c,y;if(void 0===s?s=n.md.sha1.create():s.start(),a||(a=s),c<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),s.update(i,"raw");for(var u=s.digest().getBytes(),l=t.charAt(0),d=t.substring(1,s.digestLength+1),h=t.substring(1+s.digestLength),f=o(h,s.digestLength,a),p=o(n.util.xorBytes(d,f,d.length),c-s.digestLength-1,a),g=n.util.xorBytes(h,p,h.length),m=g.substring(0,s.digestLength),y="\0"!==l,v=0;v<s.digestLength;++v)y|=u.charAt(v)!==m.charAt(v);for(var b=1,w=s.digestLength,_=s.digestLength;_<g.length;_++){var E=g.charCodeAt(_);y|=E&(b?65534:0),w+=b&=1&E^1}if(y||1!==g.charCodeAt(w))throw new Error("Invalid RSAES-OAEP padding.");return g.substring(w+1)}},5132:(e,t,r)=>{var n=r(392);r(3877),r(3055),r(3860),function(){if(n.prime)e.exports=n.prime;else{var t=e.exports=n.prime=n.prime||{},r=n.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],o=new r(null);o.fromInt(30);var s=function(e,t){return e|t};t.generateProbablePrime=function(e,t,i){"function"===typeof t&&(i=t,t={});var o=(t=t||{}).algorithm||"PRIMEINC";"string"===typeof o&&(o={name:o}),o.options=o.options||{};var s=t.prng||n.random,c={nextBytes:function(e){for(var t=s.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===o.name)return function(e,t,i,o){if("workers"in i)return function(e,t,i,o){if("undefined"===typeof Worker)return a(e,t,i,o);var s=u(e,t),c=i.workers,l=i.workLoad||100,d=30*l/8,h=i.workerScript||"forge/prime.worker.js";if(-1===c)return n.util.estimateCores((function(e,t){e&&(t=2),c=t-1,f()}));function f(){c=Math.max(1,c);for(var n=[],i=0;i<c;++i)n[i]=new Worker(h);for(i=0;i<c;++i)n[i].addEventListener("message",f);var a=!1;function f(i){if(!a){0;var c=i.data;if(c.found){for(var h=0;h<n.length;++h)n[h].terminate();return a=!0,o(null,new r(c.prime,16))}s.bitLength()>e&&(s=u(e,t));var f=s.toString(16);i.target.postMessage({hex:f,workLoad:l}),s.dAddOffset(d,0)}}}f()}(e,t,i,o);return a(e,t,i,o)}(e,c,o.options,i);throw new Error("Invalid prime generation algorithm: "+o.name)}}function a(e,t,r,n){var i=u(e,t),o=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(i.bitLength());"millerRabinTests"in r&&(o=r.millerRabinTests);var s=10;"maxBlockTime"in r&&(s=r.maxBlockTime),c(i,e,t,0,o,s,n)}function c(e,t,r,o,s,a,l){var d=+new Date;do{if(e.bitLength()>t&&(e=u(t,r)),e.isProbablePrime(s))return l(null,e);e.dAddOffset(i[o++%8],0)}while(a<0||+new Date-d<a);n.util.setImmediate((function(){c(e,t,r,o,s,a,l)}))}function u(e,t){var n=new r(e,t),i=e-1;return n.testBit(i)||n.bitwiseTo(r.ONE.shiftLeft(i),s,n),n.dAddOffset(31-n.mod(o).byteValue(),0),n}}()},6140:(e,t,r)=>{var n=r(392);r(3877);var i=null;!n.util.isNodejs||n.options.usePureJavaScript||process.versions["node-webkit"]||(i=r(5819)),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,o=new Array(32),s=0;s<32;++s)o[s]=r.create();function a(){if(t.pools[0].messageLength>=32)return c();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),c()}function c(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r===0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var i=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(i),t.generated=0}function u(e){var t=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(t=function(e){return i.getRandomValues(e)});var o=n.util.createBuffer();if(t)for(;o.length()<e;){var s=Math.max(1,Math.min(e-o.length(),65536)/4),a=new Uint32Array(Math.floor(s));try{t(a);for(var c=0;c<a.length;++c)o.putInt32(a[c])}catch(f){if(!("undefined"!==typeof QuotaExceededError&&f instanceof QuotaExceededError))throw f}}if(o.length()<e)for(var u,l,d,h=Math.floor(65536*Math.random());o.length()<e;){l=16807*(65535&h),l+=(32767&(u=16807*(h>>16)))<<16,h=4294967295&(l=(2147483647&(l+=u>>15))+(l>>31));for(c=0;c<3;++c)d=h>>>(c<<3),d^=Math.floor(256*Math.random()),o.putByte(255&d)}return o.getBytes(e)}return t.pools=o,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var i=t.plugin.cipher,o=t.plugin.increment,s=t.plugin.formatKey,a=t.plugin.formatSeed,u=n.util.createBuffer();t.key=null,function l(d){if(d)return r(d);if(u.length()>=e)return r(null,u.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return n.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return c(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),c(),e()}))}(l)}));var h=i(t.key,t.seed);t.generated+=h.length,u.putBytes(h),t.key=s(i(t.key,o(t.seed))),t.seed=a(i(t.key,t.seed)),n.util.setImmediate(l)}()},t.generateSync=function(e){var r=t.plugin.cipher,i=t.plugin.increment,o=t.plugin.formatKey,s=t.plugin.formatSeed;t.key=null;for(var c=n.util.createBuffer();c.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&a();var u=r(t.key,t.seed);t.generated+=u.length,c.putBytes(u),t.key=o(r(t.key,i(t.seed))),t.seed=s(r(t.key,t.seed))}return c.getBytes(e)},i?(t.seedFile=function(e,t){i.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return i.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,u(e))}catch(r){t(r)}},t.seedFileSync=u),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(e>>i&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",(function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))}))}},t}},3860:(e,t,r)=>{var n=r(392);r(8605),r(7404),r(6140),r(3877),n.random&&n.random.getBytes?e.exports=n.random:function(t){var r={},i=new Array(4),o=n.util.createBuffer();function s(){var e=n.prng.create(r);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}r.formatKey=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),n.aes._expandKey(e,!1)},r.formatSeed=function(e){var t=n.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},r.cipher=function(e,t){return n.aes._updateBlock(e,t,i,!1),o.putInt32(i[0]),o.putInt32(i[1]),o.putInt32(i[2]),o.putInt32(i[3]),o.getBytes()},r.increment=function(e){return++e[3],e},r.md=n.md.sha256;var a=s(),c=null,u=n.util.globalScope,l=u.crypto||u.msCrypto;if(l&&l.getRandomValues&&(c=function(e){return l.getRandomValues(e)}),n.options.usePureJavaScript||!n.util.isNodejs&&!c){if("undefined"===typeof window||window.document,a.collectInt(+new Date,32),"undefined"!==typeof navigator){var d="";for(var h in navigator)try{"string"==typeof navigator[h]&&(d+=navigator[h])}catch(f){}a.collect(d),d=null}t&&(t().mousemove((function(e){a.collectInt(e.clientX,16),a.collectInt(e.clientY,16)})),t().keypress((function(e){a.collectInt(e.charCode,8)})))}if(n.random)for(var h in a)n.random[h]=a[h];else n.random=a;n.random.createInstance=s,e.exports=n.random}("undefined"!==typeof jQuery?jQuery:null)},654:(e,t,r)=>{var n=r(392);r(3877);var i=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],o=[1,2,3,5],s=function(e,t){return e<<t&65535|(65535&e)>>16-t},a=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(e,t){"string"===typeof e&&(e=n.util.createBuffer(e)),t=t||128;var r,o=e,s=e.length(),a=t,c=Math.ceil(a/8),u=255>>(7&a);for(r=s;r<128;r++)o.putByte(i[o.at(r-1)+o.at(r-s)&255]);for(o.setAt(128-c,i[o.at(128-c)&u]),r=127-c;r>=0;r--)o.setAt(r,i[o.at(r+1)^o.at(r+c)]);return o};var c=function(e,t,r){var i,c,u,l,d=!1,h=null,f=null,p=null,g=[];for(e=n.rc2.expandKey(e,t),u=0;u<64;u++)g.push(e.getInt16Le());r?(i=function(e){for(u=0;u<4;u++)e[u]+=g[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),e[u]=s(e[u],o[u]),l++},c=function(e){for(u=0;u<4;u++)e[u]+=g[63&e[(u+3)%4]]}):(i=function(e){for(u=3;u>=0;u--)e[u]=a(e[u],o[u]),e[u]-=g[l]+(e[(u+3)%4]&e[(u+2)%4])+(~e[(u+3)%4]&e[(u+1)%4]),l--},c=function(e){for(u=3;u>=0;u--)e[u]-=g[63&e[(u+3)%4]]});var m=function(e){var t=[];for(u=0;u<4;u++){var n=h.getInt16Le();null!==p&&(r?n^=p.getInt16Le():p.putInt16Le(n)),t.push(65535&n)}l=r?0:63;for(var i=0;i<e.length;i++)for(var o=0;o<e[i][0];o++)e[i][1](t);for(u=0;u<4;u++)null!==p&&(r?p.putInt16Le(t[u]):t[u]^=p.getInt16Le()),f.putInt16Le(t[u])},y=null;return y={start:function(e,t){e&&"string"===typeof e&&(e=n.util.createBuffer(e)),d=!1,h=n.util.createBuffer(),f=t||new n.util.createBuffer,p=e,y.output=f},update:function(e){for(d||h.putBuffer(e);h.length()>=8;)m([[5,i],[1,c],[6,i],[1,c],[5,i]])},finish:function(e){var t=!0;if(r)if(e)t=e(8,h,!r);else{var n=8===h.length()?8:8-h.length();h.fillWithByte(n,n)}if(t&&(d=!0,y.update()),!r&&(t=0===h.length()))if(e)t=e(8,f,!r);else{var i=f.length(),o=f.at(i-1);o>i?t=!1:f.truncate(o)}return t}}};n.rc2.startEncrypting=function(e,t,r){var i=n.rc2.createEncryptionCipher(e,128);return i.start(t,r),i},n.rc2.createEncryptionCipher=function(e,t){return c(e,t,!0)},n.rc2.startDecrypting=function(e,t,r){var i=n.rc2.createDecryptionCipher(e,128);return i.start(t,r),i},n.rc2.createDecryptionCipher=function(e,t){return c(e,t,!1)}},5493:(e,t,r)=>{var n=r(392);if(r(5049),r(3055),r(2886),r(2627),r(5132),r(3860),r(3877),"undefined"===typeof i)var i=n.jsbn.BigInteger;var o=n.util.isNodejs?r(5819):null,s=n.asn1,a=n.util;n.pki=n.pki||{},e.exports=n.pki.rsa=n.rsa=n.rsa||{};var c=n.pki,u=[6,4,2,4,2,4,6,2],l={name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},d={name:"RSAPrivateKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},h={name:"RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},p={name:"DigestInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},g=function(e){var t;if(!(e.algorithm in c.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=c.oids[e.algorithm];var n=s.oidToDer(t).getBytes(),i=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]),o=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[]);o.value.push(s.create(s.Class.UNIVERSAL,s.Type.OID,!1,n)),o.value.push(s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,""));var a=s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(o),i.value.push(a),s.toDer(i).getBytes()},m=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var o;t.dP||(t.dP=t.d.mod(t.p.subtract(i.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(i.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{o=new i(n.util.bytesToHex(n.random.getBytes(t.n.bitLength()/8)),16)}while(o.compareTo(t.n)>=0||!o.gcd(t.n).equals(i.ONE));for(var s=(e=e.multiply(o.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);s.compareTo(a)<0;)s=s.add(t.p);var c=s.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return c=c.multiply(o.modInverse(t.n)).mod(t.n)};function y(e,t,r){var i=n.util.createBuffer(),o=Math.ceil(t.n.bitLength()/8);if(e.length>o-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=o-11,s}i.putByte(0),i.putByte(r);var a,c=o-3-e.length;if(0===r||1===r){a=0===r?0:255;for(var u=0;u<c;++u)i.putByte(a)}else for(;c>0;){var l=0,d=n.random.getBytes(c);for(u=0;u<c;++u)0===(a=d.charCodeAt(u))?++l:i.putByte(a);c=l}return i.putByte(0),i.putBytes(e),i}function v(e,t,r,i){var o=Math.ceil(t.n.bitLength()/8),s=n.util.createBuffer(e),a=s.getByte(),c=s.getByte();if(0!==a||r&&0!==c&&1!==c||!r&&2!=c||r&&0===c&&"undefined"===typeof i)throw new Error("Encryption block is invalid.");var u=0;if(0===c){u=o-3-i;for(var l=0;l<u;++l)if(0!==s.getByte())throw new Error("Encryption block is invalid.")}else if(1===c)for(u=0;s.length()>1;){if(255!==s.getByte()){--s.read;break}++u}else if(2===c)for(u=0;s.length()>1;){if(0===s.getByte()){--s.read;break}++u}if(0!==s.getByte()||u!==o-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function b(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=n.util.hexToBytes(t);return r.length>1&&(0===r.charCodeAt(0)&&0===(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128===(128&r.charCodeAt(1)))?r.substr(1):r}function w(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function _(e){return n.util.isNodejs&&"function"===typeof o[e]}function E(e){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.crypto&&"object"===typeof a.globalScope.crypto.subtle&&"function"===typeof a.globalScope.crypto.subtle[e]}function A(e){return"undefined"!==typeof a.globalScope&&"object"===typeof a.globalScope.msCrypto&&"object"===typeof a.globalScope.msCrypto.subtle&&"function"===typeof a.globalScope.msCrypto.subtle[e]}function S(e){for(var t=n.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}c.rsa.encrypt=function(e,t,r){var o,s=r,a=Math.ceil(t.n.bitLength()/8);!1!==r&&!0!==r?(s=2===r,o=y(e,t,r)):(o=n.util.createBuffer()).putBytes(e);for(var c=new i(o.toHex(),16),u=m(c,t,s).toString(16),l=n.util.createBuffer(),d=a-Math.ceil(u.length/2);d>0;)l.putByte(0),--d;return l.putBytes(n.util.hexToBytes(u)),l.getBytes()},c.rsa.decrypt=function(e,t,r,o){var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=s,a}var c=new i(n.util.createBuffer(e).toHex(),16);if(c.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var u=m(c,t,r).toString(16),l=n.util.createBuffer(),d=s-Math.ceil(u.length/2);d>0;)l.putByte(0),--d;return l.putBytes(n.util.hexToBytes(u)),!1!==o?v(l.getBytes(),t,r):l.getBytes()},c.rsa.createKeyPairGenerationState=function(e,t,r){"string"===typeof e&&(e=parseInt(e,10)),e=e||2048;var o,s=(r=r||{}).prng||n.random,a={nextBytes:function(e){for(var t=s.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},c=r.algorithm||"PRIMEINC";if("PRIMEINC"!==c)throw new Error("Invalid key generation algorithm: "+c);return(o={algorithm:c,state:0,bits:e,rng:a,eInt:t||65537,e:new i(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(o.eInt),o},c.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new i(null);r.fromInt(30);for(var n,o=0,s=function(e,t){return e|t},a=+new Date,l=0;null===e.keys&&(t<=0||l<t);){if(0===e.state){var d=null===e.p?e.pBits:e.qBits,h=d-1;0===e.pqState?(e.num=new i(d,e.rng),e.num.testBit(h)||e.num.bitwiseTo(i.ONE.shiftLeft(h),s,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),o=0,++e.pqState):1===e.pqState?e.num.bitLength()>d?e.pqState=0:e.num.isProbablePrime(w(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(u[o++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(i.ONE).gcd(e.e).compareTo(i.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(i.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var f=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)}}l+=(n=+new Date)-a,a=n}return null!==e.keys},c.rsa.generateKeyPair=function(e,t,r,u){if(1===arguments.length?"object"===typeof e?(r=e,e=void 0):"function"===typeof e&&(u=e,e=void 0):2===arguments.length?"number"===typeof e?"function"===typeof t?(u=t,t=void 0):"number"!==typeof t&&(r=t,t=void 0):(r=e,u=t,e=void 0,t=void 0):3===arguments.length&&("number"===typeof t?"function"===typeof r&&(u=r,r=void 0):(u=r,r=t,t=void 0)),r=r||{},void 0===e&&(e=r.bits||2048),void 0===t&&(t=r.e||65537),!n.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(u){if(_("generateKeyPair"))return o.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return u(e);u(null,{privateKey:c.privateKeyFromPem(r),publicKey:c.publicKeyFromPem(t)})}));if(E("generateKey")&&E("exportKey"))return a.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return a.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){u(e)})).then((function(e){if(e){var t=c.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(e)));u(null,{privateKey:t,publicKey:c.setRsaPublicKey(t.n,t.e)})}}));if(A("generateKey")&&A("exportKey")){var l=a.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:S(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return l.oncomplete=function(e){var t=e.target.result,r=a.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);r.oncomplete=function(e){var t=e.target.result,r=c.privateKeyFromAsn1(s.fromDer(n.util.createBuffer(t)));u(null,{privateKey:r,publicKey:c.setRsaPublicKey(r.n,r.e)})},r.onerror=function(e){u(e)}},void(l.onerror=function(e){u(e)})}}else if(_("generateKeyPairSync")){var d=o.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:c.privateKeyFromPem(d.privateKey),publicKey:c.publicKeyFromPem(d.publicKey)}}var h=c.rsa.createKeyPairGenerationState(e,t,r);if(!u)return c.rsa.stepKeyPairGenerationState(h,0),h.keys;!function(e,t,r){"function"===typeof t&&(r=t,t={});t=t||{};var o={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(o.prng=t.prng);function s(){a(e.pBits,(function(t,n){return t?r(t):(e.p=n,null!==e.q?u(t,e.q):void a(e.qBits,u))}))}function a(e,t){n.prime.generateProbablePrime(e,o,t)}function u(t,n){if(t)return r(t);if(e.q=n,e.p.compareTo(e.q)<0){var o=e.p;e.p=e.q,e.q=o}if(0!==e.p.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.p=null,void s();if(0!==e.q.subtract(i.ONE).gcd(e.e).compareTo(i.ONE))return e.q=null,void a(e.qBits,u);if(e.p1=e.p.subtract(i.ONE),e.q1=e.q.subtract(i.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(i.ONE))return e.p=e.q=null,void s();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void a(e.qBits,u);var l=e.e.modInverse(e.phi);e.keys={privateKey:c.rsa.setPrivateKey(e.n,e.e,l,e.p,e.q,l.mod(e.p1),l.mod(e.q1),e.q.modInverse(e.p)),publicKey:c.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}s()}(h,r,u)},c.setRsaPublicKey=c.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(e,t,i){if("string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return y(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return n.pkcs1.encode_rsa_oaep(t,e,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"===typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var o=t.encode(e,r,!0);return c.rsa.encrypt(o,r,!0)},verify:function(e,t,i,o){"string"===typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===o&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(e,t){t=v(t,r,!0);var i=s.fromDer(t,{parseAllBytes:o._parseAllDigestBytes}),a={},c=[];if(!s.validate(i,p,a,c))throw(u=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=c,u;var u,l=s.derToOid(a.algorithmIdentifier);if(l!==n.oids.md2&&l!==n.oids.md5&&l!==n.oids.sha1&&l!==n.oids.sha224&&l!==n.oids.sha256&&l!==n.oids.sha384&&l!==n.oids.sha512&&l!==n.oids["sha512-224"]&&l!==n.oids["sha512-256"])throw(u=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=l,u;if((l===n.oids.md2||l===n.oids.md5)&&!("parameters"in a))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===a.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(e,t){return e===(t=v(t,r,!0))}});var a=c.rsa.decrypt(t,r,!0,!1);return i.verify(e,a,r.n.bitLength())}};return r},c.setRsaPrivateKey=c.rsa.setPrivateKey=function(e,t,r,i,o,s,a,u){var l={n:e,e:t,d:r,p:i,q:o,dP:s,dQ:a,qInv:u,decrypt:function(e,t,r){"string"===typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var i=c.rsa.decrypt(e,l,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:v};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return n.pkcs1.decode_rsa_oaep(t,e,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(i,l,!1)},sign:function(e,t){var r=!1;"string"===typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:g},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,l.n.bitLength());return c.rsa.encrypt(n,l,r)}};return l},c.wrapRsaPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,s.toDer(e).getBytes())])},c.privateKeyFromAsn1=function(e){var t,r,o,a,u,h,f,p,g={},m=[];if(s.validate(e,l,g,m)&&(e=s.fromDer(n.util.createBuffer(g.privateKey))),g={},m=[],!s.validate(e,d,g,m)){var y=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw y.errors=m,y}return t=n.util.createBuffer(g.privateKeyModulus).toHex(),r=n.util.createBuffer(g.privateKeyPublicExponent).toHex(),o=n.util.createBuffer(g.privateKeyPrivateExponent).toHex(),a=n.util.createBuffer(g.privateKeyPrime1).toHex(),u=n.util.createBuffer(g.privateKeyPrime2).toHex(),h=n.util.createBuffer(g.privateKeyExponent1).toHex(),f=n.util.createBuffer(g.privateKeyExponent2).toHex(),p=n.util.createBuffer(g.privateKeyCoefficient).toHex(),c.setRsaPrivateKey(new i(t,16),new i(r,16),new i(o,16),new i(a,16),new i(u,16),new i(h,16),new i(f,16),new i(p,16))},c.privateKeyToAsn1=c.privateKeyToRSAPrivateKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,s.integerToDer(0).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.e)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.d)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.p)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.q)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.dP)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.dQ)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.qInv))])},c.publicKeyFromAsn1=function(e){var t={},r=[];if(s.validate(e,f,t,r)){var o,a=s.derToOid(t.publicKeyOid);if(a!==c.oids.rsaEncryption)throw(o=new Error("Cannot read public key. Unknown OID.")).oid=a,o;e=t.rsaPublicKey}if(r=[],!s.validate(e,h,t,r))throw(o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,o;var u=n.util.createBuffer(t.publicKeyModulus).toHex(),l=n.util.createBuffer(t.publicKeyExponent).toHex();return c.setRsaPublicKey(new i(u,16),new i(l,16))},c.publicKeyToAsn1=c.publicKeyToSubjectPublicKeyInfo=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(c.oids.rsaEncryption).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]),s.create(s.Class.UNIVERSAL,s.Type.BITSTRING,!1,[c.publicKeyToRSAPublicKey(e)])])},c.publicKeyToRSAPublicKey=function(e){return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.n)),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,b(e.e))])}},928:(e,t,r)=>{var n=r(392);r(29),r(3877);var i=e.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=i,i.create=function(){s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),s=!0);var e=null,t=n.util.createBuffer(),r=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var c=o.length;i.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=c[1],c[1]=c[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,c[0]=c[1]/4294967296>>>0;return t.putBytes(o),a(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(t.bytes());var c,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-u));for(var l=8*i.fullMessageLength[0],d=0;d<i.fullMessageLength.length-1;++d)l+=(c=8*i.fullMessageLength[d+1])/4294967296>>>0,s.putInt32(l>>>0),l=c>>>0;s.putInt32(l);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(h,r,s);var f=n.util.createBuffer();return f.putInt32(h.h0),f.putInt32(h.h1),f.putInt32(h.h2),f.putInt32(h.h3),f.putInt32(h.h4),f},i};var o=null,s=!1;function a(e,t,r){for(var n,i,o,s,a,c,u,l=r.length();l>=64;){for(i=e.h0,o=e.h1,s=e.h2,a=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<20;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(a^o&(s^a))+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<32;++u)n=(n=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|n>>>31,t[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<40;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<60;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(o&s|a&(o^s))+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<80;++u)n=(n=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|n>>>30,t[u]=n,n=(i<<5|i>>>27)+(o^s^a)+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+o|0,e.h2=e.h2+s|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,l-=64}}},7404:(e,t,r)=>{var n=r(392);r(29),r(3877);var i=e.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=i,i.create=function(){s||(o=String.fromCharCode(128),o+=n.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=!0);var e=null,t=n.util.createBuffer(),r=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var r=i.messageLengthSize/4,o=0;o<r;++o)i.fullMessageLength.push(0);return t=n.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(o,s){"utf8"===s&&(o=n.util.encodeUtf8(o));var a=o.length;i.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=a[1],a[1]=a[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(o),c(e,r,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var s=n.util.createBuffer();s.putBytes(t.bytes());var a,u=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;s.putBytes(o.substr(0,i.blockLength-u));for(var l=8*i.fullMessageLength[0],d=0;d<i.fullMessageLength.length-1;++d)l+=(a=8*i.fullMessageLength[d+1])/4294967296>>>0,s.putInt32(l>>>0),l=a>>>0;s.putInt32(l);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};c(h,r,s);var f=n.util.createBuffer();return f.putInt32(h.h0),f.putInt32(h.h1),f.putInt32(h.h2),f.putInt32(h.h3),f.putInt32(h.h4),f.putInt32(h.h5),f.putInt32(h.h6),f.putInt32(h.h7),f},i};var o=null,s=!1,a=null;function c(e,t,r){for(var n,i,o,s,c,u,l,d,h,f,p,g,m,y=r.length();y>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=((n=t[c-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=t[c-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(u=e.h0,l=e.h1,d=e.h2,h=e.h3,f=e.h4,p=e.h5,g=e.h6,m=e.h7,c=0;c<64;++c)o=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),s=u&l|d&(u^l),n=m+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(g^f&(p^g))+a[c]+t[c],m=g,g=p,p=f,f=h+n>>>0,h=d,d=l,l=u,u=n+(i=o+s)>>>0;e.h0=e.h0+u|0,e.h1=e.h1+l|0,e.h2=e.h2+d|0,e.h3=e.h3+h|0,e.h4=e.h4+f|0,e.h5=e.h5+p|0,e.h6=e.h6+g|0,e.h7=e.h7+m|0,y-=64}}},4770:(e,t,r)=>{var n=r(392);r(29),r(3877);var i=e.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=i;var o=n.sha384=n.sha512.sha384=n.sha512.sha384||{};o.create=function(){return i.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=o,n.sha512.sha256=n.sha512.sha256||{create:function(){return i.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return i.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,i.create=function(e){if(a||(s=String.fromCharCode(128),s+=n.util.fillString(String.fromCharCode(0),128),c=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(u={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],u["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],u["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],u["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],a=!0),"undefined"===typeof e&&(e="SHA-512"),!(e in u))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=u[e],r=null,i=n.util.createBuffer(),o=new Array(80),d=0;d<80;++d)o[d]=new Array(2);var h=64;switch(e){case"SHA-384":h=48;break;case"SHA-512/256":h=32;break;case"SHA-512/224":h=28}var f={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:h,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var e=f.messageLengthSize/4,o=0;o<e;++o)f.fullMessageLength.push(0);i=n.util.createBuffer(),r=new Array(t.length);for(o=0;o<t.length;++o)r[o]=t[o].slice(0);return f}};return f.start(),f.update=function(e,t){"utf8"===t&&(e=n.util.encodeUtf8(e));var s=e.length;f.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=f.fullMessageLength.length-1;a>=0;--a)f.fullMessageLength[a]+=s[1],s[1]=s[0]+(f.fullMessageLength[a]/4294967296>>>0),f.fullMessageLength[a]=f.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return i.putBytes(e),l(r,o,i),(i.read>2048||0===i.length())&&i.compact(),f},f.digest=function(){var t=n.util.createBuffer();t.putBytes(i.bytes());var a,c=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize&f.blockLength-1;t.putBytes(s.substr(0,f.blockLength-c));for(var u=8*f.fullMessageLength[0],d=0;d<f.fullMessageLength.length-1;++d)u+=(a=8*f.fullMessageLength[d+1])/4294967296>>>0,t.putInt32(u>>>0),u=a>>>0;t.putInt32(u);var h=new Array(r.length);for(d=0;d<r.length;++d)h[d]=r[d].slice(0);l(h,o,t);var p,g=n.util.createBuffer();p="SHA-512"===e?h.length:"SHA-384"===e?h.length-2:h.length-4;for(d=0;d<p;++d)g.putInt32(h[d][0]),d===p-1&&"SHA-512/224"===e||g.putInt32(h[d][1]);return g},f};var s=null,a=!1,c=null,u=null;function l(e,t,r){for(var n,i,o,s,a,u,l,d,h,f,p,g,m,y,v,b,w,_,E,A,S,k,x,I,T,P,R,C,B,M,N,O,D,L=r.length();L>=128;){for(R=0;R<16;++R)t[R][0]=r.getInt32()>>>0,t[R][1]=r.getInt32()>>>0;for(;R<80;++R)n=(((C=(M=t[R-2])[0])>>>19|(B=M[1])<<13)^(B>>>29|C<<3)^C>>>6)>>>0,i=((C<<13|B>>>19)^(B<<3|C>>>29)^(C<<26|B>>>6))>>>0,o=(((C=(O=t[R-15])[0])>>>1|(B=O[1])<<31)^(C>>>8|B<<24)^C>>>7)>>>0,s=((C<<31|B>>>1)^(C<<24|B>>>8)^(C<<25|B>>>7))>>>0,N=t[R-7],D=t[R-16],B=i+N[1]+s+D[1],t[R][0]=n+N[0]+o+D[0]+(B/4294967296>>>0)>>>0,t[R][1]=B>>>0;for(p=e[0][0],g=e[0][1],m=e[1][0],y=e[1][1],v=e[2][0],b=e[2][1],w=e[3][0],_=e[3][1],E=e[4][0],A=e[4][1],S=e[5][0],k=e[5][1],x=e[6][0],I=e[6][1],T=e[7][0],P=e[7][1],R=0;R<80;++R)l=((E>>>14|A<<18)^(E>>>18|A<<14)^(A>>>9|E<<23))>>>0,d=(x^E&(S^x))>>>0,a=((p>>>28|g<<4)^(g>>>2|p<<30)^(g>>>7|p<<25))>>>0,u=((p<<4|g>>>28)^(g<<30|p>>>2)^(g<<25|p>>>7))>>>0,h=(p&m|v&(p^m))>>>0,f=(g&y|b&(g^y))>>>0,B=P+(((E<<18|A>>>14)^(E<<14|A>>>18)^(A<<23|E>>>9))>>>0)+((I^A&(k^I))>>>0)+c[R][1]+t[R][1],n=T+l+d+c[R][0]+t[R][0]+(B/4294967296>>>0)>>>0,i=B>>>0,o=a+h+((B=u+f)/4294967296>>>0)>>>0,s=B>>>0,T=x,P=I,x=S,I=k,S=E,k=A,E=w+n+((B=_+i)/4294967296>>>0)>>>0,A=B>>>0,w=v,_=b,v=m,b=y,m=p,y=g,p=n+o+((B=i+s)/4294967296>>>0)>>>0,g=B>>>0;B=e[0][1]+g,e[0][0]=e[0][0]+p+(B/4294967296>>>0)>>>0,e[0][1]=B>>>0,B=e[1][1]+y,e[1][0]=e[1][0]+m+(B/4294967296>>>0)>>>0,e[1][1]=B>>>0,B=e[2][1]+b,e[2][0]=e[2][0]+v+(B/4294967296>>>0)>>>0,e[2][1]=B>>>0,B=e[3][1]+_,e[3][0]=e[3][0]+w+(B/4294967296>>>0)>>>0,e[3][1]=B>>>0,B=e[4][1]+A,e[4][0]=e[4][0]+E+(B/4294967296>>>0)>>>0,e[4][1]=B>>>0,B=e[5][1]+k,e[5][0]=e[5][0]+S+(B/4294967296>>>0)>>>0,e[5][1]=B>>>0,B=e[6][1]+I,e[6][0]=e[6][0]+x+(B/4294967296>>>0)>>>0,e[6][1]=B>>>0,B=e[7][1]+P,e[7][0]=e[7][0]+T+(B/4294967296>>>0)>>>0,e[7][1]=B>>>0,L-=128}}},3877:(e,t,r)=>{var n=r(392),i=r(5754),o=e.exports=n.util=n.util||{};function s(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function a(e){if(this.data="",this.read=0,"string"===typeof e)this.data=e;else if(o.isArrayBuffer(e)||o.isArrayBufferView(e))if("undefined"!==typeof Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(n){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof a||"object"===typeof e&&"string"===typeof e.data&&"number"===typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if("undefined"!==typeof process&&process.nextTick&&!process.browser)return o.nextTick=process.nextTick,void("function"===typeof setImmediate?o.setImmediate=setImmediate:o.setImmediate=o.nextTick);if("function"===typeof setImmediate)return o.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(o.nextTick=function(e){return setImmediate(e)});if(o.setImmediate=function(e){setTimeout(e,0)},"undefined"!==typeof window&&"function"===typeof window.postMessage){var e="forge.setImmediate",t=[];o.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!==typeof MutationObserver){var r=Date.now(),n=!0,i=document.createElement("div");t=[];new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(i,{attributes:!0});var s=o.setImmediate;o.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),s(e)):(t.push(e),1===t.length&&i.setAttribute("a",n=!n))}}o.nextTick=o.setImmediate}(),o.isNodejs="undefined"!==typeof process&&process.versions&&process.versions.node,o.globalScope=o.isNodejs?r.g:"undefined"===typeof self?window:self,o.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o.isArrayBuffer=function(e){return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer},o.isArrayBufferView=function(e){return e&&o.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},o.ByteBuffer=a,o.ByteStringBuffer=a;o.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},o.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},o.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},o.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},o.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},o.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},o.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(o.encodeUtf8(e))},o.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},o.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},o.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},o.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},o.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},o.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},o.ByteStringBuffer.prototype.putInt=function(e,t){s(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},o.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},o.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},o.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},o.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},o.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},o.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},o.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},o.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},o.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},o.ByteStringBuffer.prototype.getInt=function(e){s(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},o.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},o.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},o.ByteStringBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},o.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},o.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},o.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},o.ByteStringBuffer.prototype.copy=function(){var e=o.createBuffer(this.data);return e.read=this.read,e},o.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},o.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},o.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},o.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},o.ByteStringBuffer.prototype.toString=function(){return o.decodeUtf8(this.bytes())},o.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=o.isArrayBuffer(e),n=o.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},o.DataBuffer.prototype.length=function(){return this.write-this.read},o.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},o.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},o.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},o.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},o.DataBuffer.prototype.putBytes=function(e,t){if(o.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(o.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof o.DataBuffer||"object"===typeof e&&"number"===typeof e.read&&"number"===typeof e.write&&o.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(e instanceof o.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"===typeof e){var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.base64.decode(e,i,this.write),this;if("utf8"===t&&(e=o.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=o.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},o.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},o.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},o.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},o.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},o.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},o.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},o.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},o.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},o.DataBuffer.prototype.putInt=function(e,t){s(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},o.DataBuffer.prototype.putSignedInt=function(e,t){return s(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},o.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},o.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},o.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},o.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},o.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},o.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},o.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},o.DataBuffer.prototype.getInt=function(e){s(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},o.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},o.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},o.DataBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},o.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},o.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},o.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},o.DataBuffer.prototype.copy=function(){return new o.DataBuffer(this)},o.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},o.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},o.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},o.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},o.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return o.binary.raw.encode(t);if("hex"===e)return o.binary.hex.encode(t);if("base64"===e)return o.binary.base64.encode(t);if("utf8"===e)return o.text.utf8.decode(t);if("utf16"===e)return o.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},o.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=o.encodeUtf8(e)),new o.ByteBuffer(e)},o.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},o.xorBytes=function(e,t,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o},o.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},o.bytesToHex=function(e){return o.createBuffer(e).toHex()},o.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],l="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";o.encode64=function(e,t){for(var r,n,i,o="",s="",a=0;a<e.length;)r=e.charCodeAt(a++),n=e.charCodeAt(a++),i=e.charCodeAt(a++),o+=c.charAt(r>>2),o+=c.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=c.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":c.charAt(63&i)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+=o},o.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,o="",s=0;s<e.length;)t=u[e.charCodeAt(s++)-43],r=u[e.charCodeAt(s++)-43],n=u[e.charCodeAt(s++)-43],i=u[e.charCodeAt(s++)-43],o+=String.fromCharCode(t<<2|r>>4),64!==n&&(o+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(o+=String.fromCharCode((3&n)<<6|i)));return o},o.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},o.decodeUtf8=function(e){return decodeURIComponent(escape(e))},o.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:i.encode,decode:i.decode}},o.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},o.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,o=0;o<e.length;++o)n[i++]=e.charCodeAt(o);return t?i-r:n},o.binary.hex.encode=o.bytesToHex,o.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,o=r=r||0;for(1&e.length&&(i=1,n[o++]=parseInt(e[0],16));i<e.length;i+=2)n[o++]=parseInt(e.substr(i,2),16);return t?o-r:n},o.binary.base64.encode=function(e,t){for(var r,n,i,o="",s="",a=0;a<e.byteLength;)r=e[a++],n=e[a++],i=e[a++],o+=c.charAt(r>>2),o+=c.charAt((3&r)<<4|n>>4),isNaN(n)?o+="==":(o+=c.charAt((15&n)<<2|i>>6),o+=isNaN(i)?"=":c.charAt(63&i)),t&&o.length>t&&(s+=o.substr(0,t)+"\r\n",o=o.substr(t));return s+=o},o.binary.base64.decode=function(e,t,r){var n,i,o,s,a=t;a||(a=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var c=0,l=r=r||0;c<e.length;)n=u[e.charCodeAt(c++)-43],i=u[e.charCodeAt(c++)-43],o=u[e.charCodeAt(c++)-43],s=u[e.charCodeAt(c++)-43],a[l++]=n<<2|i>>4,64!==o&&(a[l++]=(15&i)<<4|o>>2,64!==s&&(a[l++]=(3&o)<<6|s));return t?l-r:a.subarray(0,l)},o.binary.base58.encode=function(e,t){return o.binary.baseN.encode(e,l,t)},o.binary.base58.decode=function(e,t){return o.binary.baseN.decode(e,l,t)},o.text={utf8:{},utf16:{}},o.text.utf8.encode=function(e,t,r){e=o.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},o.text.utf8.decode=function(e){return o.decodeUtf8(String.fromCharCode.apply(null,e))},o.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),o=r=r||0,s=r,a=0;a<e.length;++a)i[s++]=e.charCodeAt(a),o+=2;return t?o-r:n},o.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},o.deflate=function(e,t,r){if(t=o.decode64(e.deflate(o.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},o.inflate=function(e,t,r){var n=e.inflate(o.encode64(t)).rval;return null===n?null:o.decode64(n)};var d=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=o.encode64(JSON.stringify(r)),n=e.setItem(t,r)),"undefined"!==typeof n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},h=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(o.decode64(r))),r},f=function(e,t,r,n){var i=h(e,t);null===i&&(i={}),i[r]=n,d(e,t,i)},p=function(e,t,r){var n=h(e,t);return null!==n&&(n=r in n?n[r]:null),n},g=function(e,t,r){var n=h(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),d(e,t,n)}},m=function(e,t){d(e,t,null)},y=function(e,t,r){var n,i=null;"undefined"===typeof r&&(r=["web","flash"]);var o=!1,s=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),o="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return i};o.setItem=function(e,t,r,n,i){y(f,arguments,i)},o.getItem=function(e,t,r,n){return y(p,arguments,n)},o.removeItem=function(e,t,r,n){y(g,arguments,n)},o.clearItems=function(e,t,r){y(m,arguments,r)},o.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},o.format=function(e){for(var t,r,n=/%./g,i=0,o=[],s=0;t=n.exec(e);){(r=e.substring(s,n.lastIndex-2)).length>0&&o.push(r),s=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[1+i++]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(e.substring(s)),o.join("")},o.formatNumber=function(e,t,r,n){var i=e,o=isNaN(t=Math.abs(t))?2:t,s=void 0===r?",":r,a=void 0===n?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")},o.formatSize=function(e){return e=e>=1073741824?o.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?o.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?o.formatNumber(e/1024,0)+" KiB":o.formatNumber(e,0)+" bytes"},o.bytesFromIP=function(e){return-1!==e.indexOf(".")?o.bytesFromIPv4(e):-1!==e.indexOf(":")?o.bytesFromIPv6(e):null},o.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=o.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},o.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),n=o.createBuffer(),i=0;i<8;++i)if(e[i]&&0!==e[i].length){var s=o.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}else n.fillWithByte(0,r),r=0;return n.getBytes()},o.bytesToIP=function(e){return 4===e.length?o.bytesToIPv4(e):16===e.length?o.bytesToIPv6(e):null},o.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},o.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=o.bytesToHex(e[i]+e[i+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var a=r[r.length-1],c=t.length;a&&c===a.end+1?(a.end=c,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:c,end:c})}t.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),0===u.start&&t.unshift(""),7===u.end&&t.push(""))}return t.join(":")},o.estimateCores=function(e,t){if("function"===typeof e&&(t=e,e={}),e=e||{},"cores"in o&&!e.update)return t(null,o.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return o.cores=navigator.hardwareConcurrency,t(null,o.cores);if("undefined"===typeof Worker)return o.cores=1,t(null,o.cores);if("undefined"===typeof Blob)return o.cores=2,t(null,o.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(n,i,s){if(0===i){var a=Math.floor(n.reduce((function(e,t){return e+t}),0)/n.length);return o.cores=Math.max(1,a),URL.revokeObjectURL(r),t(null,o.cores)}!function(e,t){for(var n=[],i=[],o=0;o<e;++o){var s=new Worker(r);s.addEventListener("message",(function(r){if(i.push(r.data),i.length===e){for(var o=0;o<e;++o)n[o].terminate();t(null,i)}})),n.push(s)}for(o=0;o<e;++o)n[o].postMessage(o)}(s,(function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],o=r[n]=[],s=0;s<e;++s)if(n!==s){var a=t[s];(i.st>a.st&&i.st<a.et||a.st>i.st&&a.st<i.et)&&o.push(s)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(s,r)),e(n,i-1,s)}))}([],5,16)}},9174:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},6701:(e,t,r)=>{"use strict";const{ErrorWithCause:n}=r(2317),{findCauseByReference:i,getErrorCause:o,messageWithCauses:s,stackWithCauses:a}=r(9114);e.exports={ErrorWithCause:n,findCauseByReference:i,getErrorCause:o,stackWithCauses:a,messageWithCauses:s}},5368:(e,t,r)=>{"use strict";e.exports=r(8154)},886:(e,t,r)=>{"use strict";e.exports=r(4722)},1427:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},7276:(e,t,r)=>{"use strict";var n=t,i=r(222),o=r(2440);function s(e,t,r,n){var o=!1;if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var s=t.resolvedType.values,a=Object.keys(s),c=0;c<a.length;++c)s[a[c]]!==t.typeDefault||o||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),o=!0),e("case%j:",a[c])("case %i:",s[a[c]])("m%s=%j",n,s[a[c]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function a(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var o=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":o=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,o?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=o.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var a=t[n].resolve(),c=o.safeProp(a.name);a.map?(r("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),s(r,a,n,c+"[ks[i]]")("}")("}")):a.repeated?(r("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),s(r,a,n,c+"[i]")("}")("}")):(a.resolvedType instanceof i||r("if(d%s!=null){",c),s(r,a,n,c),a.resolvedType instanceof i||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(o.compareFieldsById);if(!t.length)return o.codegen()("return {}");for(var r=o.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],s=[],c=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?s:c).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",o.safeProp(n[u].name));r("}")}if(s.length){for(r("if(o.objects||o.defaults){"),u=0;u<s.length;++u)r("d%s={}",o.safeProp(s[u].name));r("}")}if(c.length){for(r("if(o.defaults){"),u=0;u<c.length;++u){var l=c[u],d=o.safeProp(l.name);if(l.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",d,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",d)("}else")("d%s=o.longs===String?%j:%i",d,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var h="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",d,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",d,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",d,d)("}")}else r("d%s=%j",d,l.typeDefault)}r("}")}var f=!1;for(u=0;u<t.length;++u){l=t[u];var p=e._fieldsArray.indexOf(l);d=o.safeProp(l.name);l.map?(f||(f=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",d,d)("d%s={}",d)("for(var j=0;j<ks2.length;++j){"),a(r,l,p,d+"[ks2[j]]")("}")):l.repeated?(r("if(m%s&&m%s.length){",d,d)("d%s=[]",d)("for(var j=0;j<m%s.length;++j){",d),a(r,l,p,d+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",d,l.name),a(r,l,p,d),l.partOf&&r("if(o.oneofs)")("d%s=%j",o.safeProp(l.partOf.name),l.name)),r("}")}return r("return d")}},2715:(e,t,r)=>{"use strict";e.exports=function(e){var t=o.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break");t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var a=e._fieldsArray[r].resolve(),c=a.resolvedType instanceof n?"int32":a.type,u="m"+o.safeProp(a.name);t("case %i: {",a.id),a.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[a.keyType]?t("k=%j",i.defaults[a.keyType]):t("k=null"),void 0!==i.defaults[c]?t("value=%j",i.defaults[c]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===i.basic[c]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",c),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==i.long[a.keyType]?t('%s[typeof k==="object"?util.longToHash(k):k]=value',u):t("%s[k]=value",u)):a.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==i.packed[c]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===i.basic[c]?t(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,c)):void 0===i.basic[c]?t(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,c),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var l=e._fieldsArray[r];l.required&&t("if(!m.hasOwnProperty(%j))",l.name)("throw util.ProtocolError(%j,{instance:m})",s(l))}return t("return m")};var n=r(222),i=r(8517),o=r(2440);function s(e){return"missing required '"+e.name+"'"}},6886:(e,t,r)=>{"use strict";e.exports=function(e){for(var t,r=o.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),a=e.fieldsArray.slice().sort(o.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),l=e._fieldsArray.indexOf(u),d=u.resolvedType instanceof n?"int32":u.type,h=i.basic[d];t="m"+o.safeProp(u.name),u.map?(r("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",t,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",t)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),void 0===h?r("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",l,t):r(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,d,t),r("}")("}")):u.repeated?(r("if(%s!=null&&%s.length){",t,t),u.packed&&void 0!==i.packed[d]?r("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",t)("w.%s(%s[i])",d,t)("w.ldelim()"):(r("for(var i=0;i<%s.length;++i)",t),void 0===h?s(r,u,l,t+"[i]"):r("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,d,t)),r("}")):(u.optional&&r("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",t,u.name),void 0===h?s(r,u,l,t):r("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,d,t))}return r("return w")};var n=r(222),i=r(8517),o=r(2440);function s(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}},222:(e,t,r)=>{"use strict";e.exports=s;var n=r(5154);((s.prototype=Object.create(n.prototype)).constructor=s).className="Enum";var i=r(3452),o=r(2440);function s(e,t,r,i,o,s){if(n.call(this,e,r),t&&"object"!==typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=o||{},this.valuesOptions=s,this.reserved=void 0,t)for(var a=Object.keys(t),c=0;c<a.length;++c)"number"===typeof t[a[c]]&&(this.valuesById[this.values[a[c]]=t[a[c]]]=a[c])}s.fromJSON=function(e,t){var r=new s(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},s.prototype.add=function(e,t,r,n){if(!o.isString(e))throw TypeError("name must be a string");if(!o.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},s.prototype.remove=function(e){if(!o.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},s.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},s.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},6734:(e,t,r)=>{"use strict";e.exports=u;var n=r(5154);((u.prototype=Object.create(n.prototype)).constructor=u).className="Field";var i,o=r(222),s=r(8517),a=r(2440),c=/^required|optional|repeated$/;function u(e,t,r,i,o,u,l){if(a.isObject(i)?(l=o,u=i,i=o=void 0):a.isObject(o)&&(l=u,u=o,o=void 0),n.call(this,e,u),!a.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!a.isString(r))throw TypeError("type must be a string");if(void 0!==i&&!c.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==o&&!a.isString(o))throw TypeError("extend must be a string");"proto3_optional"===i&&(i="optional"),this.rule=i&&"optional"!==i?i:void 0,this.type=r,this.id=t,this.extend=o||void 0,this.required="required"===i,this.optional=!this.required,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==s.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=l}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),n.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=s.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&"string"===typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof o)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"===typeof this.typeDefault){var e;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,e=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,e=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"===typeof t?t=a.decorateType(t).name:t&&"object"===typeof t&&(t=a.decorateEnum(t).name),function(i,o){a.decorateType(i.constructor).add(new u(o,e,t,r,{default:n}))}},u._configure=function(e){i=e}},4582:(e,t,r)=>{"use strict";var n=e.exports=r(4722);n.build="light",n.load=function(e,t,r){return"function"===typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)},n.loadSync=function(e,t){return t||(t=new n.Root),t.loadSync(e)},n.encoder=r(6886),n.decoder=r(2715),n.verifier=r(709),n.converter=r(7276),n.ReflectionObject=r(5154),n.Namespace=r(3452),n.Root=r(8622),n.Enum=r(222),n.Type=r(8716),n.Field=r(6734),n.OneOf=r(9794),n.MapField=r(4479),n.Service=r(4173),n.Method=r(4865),n.Message=r(4486),n.wrappers=r(9025),n.types=r(8517),n.util=r(2440),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},4722:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(7063),n.BufferWriter=r(2815),n.Reader=r(6216),n.BufferReader=r(3557),n.util=r(3097),n.rpc=r(9994),n.roots=r(7907),n.configure=i,i()},8154:(e,t,r)=>{"use strict";var n=e.exports=r(4582);n.build="full",n.tokenize=r(3077),n.parse=r(7781),n.common=r(1427),n.Root._configure(n.Type,n.parse,n.common)},4479:(e,t,r)=>{"use strict";e.exports=s;var n=r(6734);((s.prototype=Object.create(n.prototype)).constructor=s).className="MapField";var i=r(8517),o=r(2440);function s(e,t,r,i,s,a){if(n.call(this,e,t,i,void 0,void 0,s,a),!o.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}s.fromJSON=function(e,t){return new s(e,t.id,t.keyType,t.type,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},s.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},s.d=function(e,t,r){return"function"===typeof r?r=o.decorateType(r).name:r&&"object"===typeof r&&(r=o.decorateEnum(r).name),function(n,i){o.decorateType(n.constructor).add(new s(i,e,t,r))}}},4486:(e,t,r)=>{"use strict";e.exports=i;var n=r(3097);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},4865:(e,t,r)=>{"use strict";e.exports=o;var n=r(5154);((o.prototype=Object.create(n.prototype)).constructor=o).className="Method";var i=r(2440);function o(e,t,r,o,s,a,c,u,l){if(i.isObject(s)?(c=s,s=a=void 0):i.isObject(a)&&(c=a,a=void 0),void 0!==t&&!i.isString(t))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(o))throw TypeError("responseType must be a string");n.call(this,e,c),this.type=t||"rpc",this.requestType=r,this.requestStream=!!s||void 0,this.responseType=o,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=l}o.fromJSON=function(e,t){return new o(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},o.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},o.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},3452:(e,t,r)=>{"use strict";e.exports=d;var n=r(5154);((d.prototype=Object.create(n.prototype)).constructor=d).className="Namespace";var i,o,s,a=r(6734),c=r(2440),u=r(9794);function l(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function d(e,t){n.call(this,e,t),this.nested=void 0,this._nestedArray=null}function h(e){return e._nestedArray=null,e}d.fromJSON=function(e,t){return new d(e,t.options).addJSON(t.nested)},d.arrayToJSON=l,d.isReservedId=function(e,t){if(e)for(var r=0;r<e.length;++r)if("string"!==typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0;return!1},d.isReservedName=function(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1},Object.defineProperty(d.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),d.prototype.toJSON=function(e){return c.toObject(["options",this.options,"nested",l(this.nestedArray,e)])},d.prototype.addJSON=function(e){if(e)for(var t,r=Object.keys(e),n=0;n<r.length;++n)t=e[r[n]],this.add((void 0!==t.fields?i.fromJSON:void 0!==t.values?s.fromJSON:void 0!==t.methods?o.fromJSON:void 0!==t.id?a.fromJSON:d.fromJSON)(r[n],t));return this},d.prototype.get=function(e){return this.nested&&this.nested[e]||null},d.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},d.prototype.add=function(e){if(!(e instanceof a&&void 0!==e.extend||e instanceof i||e instanceof u||e instanceof s||e instanceof o||e instanceof d))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(!(t instanceof d&&e instanceof d)||t instanceof i||t instanceof o)throw Error("duplicate name '"+e.name+"' in "+this);for(var r=t.nestedArray,n=0;n<r.length;++n)e.add(r[n]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),h(this)},d.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),h(this)},d.prototype.define=function(e,t){if(c.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof d))throw Error("path conflicts with non-namespace objects")}else r.add(r=new d(n))}return t&&r.addJSON(t),r},d.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof d?e[t++].resolveAll():e[t++].resolve();return this.resolve()},d.prototype.lookup=function(e,t,r){if("boolean"===typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),c.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof d&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof d&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},d.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},d.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},d.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},d.prototype.lookupService=function(e){var t=this.lookup(e,[o]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},d._configure=function(e,t,r){i=e,o=t,s=r}},5154:(e,t,r)=>{"use strict";e.exports=o,o.className="ReflectionObject";var n,i=r(2440);function o(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(o.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),o.prototype.toJSON=function(){throw Error()},o.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},o.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},o.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},o.prototype.getOption=function(e){if(this.options)return this.options[e]},o.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},o.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var o=n.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(o){var s=o[e];i.setProperty(s,r,t)}else(o={})[e]=i.setProperty({},r,t),n.push(o)}else{var a={};a[e]=t,n.push(a)}return this},o.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},o.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},o._configure=function(e){n=e}},9794:(e,t,r)=>{"use strict";e.exports=s;var n=r(5154);((s.prototype=Object.create(n.prototype)).constructor=s).className="OneOf";var i=r(6734),o=r(2440);function s(e,t,r,i){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),void 0!==t&&!Array.isArray(t))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function a(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}s.fromJSON=function(e,t){return new s(e,t.oneof,t.options,t.comment)},s.prototype.toJSON=function(e){var t=!!e&&Boolean(e.keepComments);return o.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},s.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},s.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},s.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=0;t<this.oneof.length;++t){var r=e.get(this.oneof[t]);r&&!r.partOf&&(r.partOf=this,this.fieldsArray.push(r))}a(this)},s.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},s.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){o.decorateType(t.constructor).add(new s(r,e)),Object.defineProperty(t,r,{get:o.oneOfGetter(e),set:o.oneOfSetter(e)})}}},7781:(e,t,r)=>{"use strict";e.exports=S,S.filename=null,S.defaults={keepCase:!1};var n=r(3077),i=r(8622),o=r(8716),s=r(6734),a=r(4479),c=r(9794),u=r(222),l=r(4173),d=r(4865),h=r(8517),f=r(2440),p=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,m=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,w=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,_=/^[a-zA-Z_][a-zA-Z_0-9]*$/,E=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,A=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function S(e,t,r){t instanceof i||(r=t,t=new i),r||(r=S.defaults);var k,x,I,T,P,R=r.preferTrailingComment||!1,C=n(e,r.alternateCommentMode||!1),B=C.next,M=C.push,N=C.peek,O=C.skip,D=C.cmnt,L=!0,U=!1,F=t,j=r.keepCase?function(e){return e}:f.camelCase;function q(e,t,r){var n=S.filename;return r||(S.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+C.line+")")}function z(){var e,t=[];do{if('"'!==(e=B())&&"'"!==e)throw q(e);t.push(B()),O(e),e=N()}while('"'===e||"'"===e);return t.join("")}function H(e){var t=B();switch(t){case"'":case'"':return M(t),z();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return function(e,t){var r=1;"-"===e.charAt(0)&&(r=-1,e=e.substring(1));switch(e){case"inf":case"INF":case"Inf":return r*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return r*parseInt(e,10);if(m.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(w.test(e))return r*parseFloat(e);throw q(e,"number",t)}(t,!0)}catch(r){if(e&&E.test(t))return t;throw q(t,"value")}}function K(e,t){var r,n;do{!t||'"'!==(r=N())&&"'"!==r?e.push([n=V(B()),O("to",!0)?V(B()):n]):e.push(z())}while(O(",",!0));O(";")}function V(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw q(e,"id");if(g.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw q(e,"id")}function G(){if(void 0!==k)throw q("package");if(k=B(),!E.test(k))throw q(k,"name");F=F.define(k),O(";")}function W(){var e,t=N();switch(t){case"weak":e=I||(I=[]),B();break;case"public":B();default:e=x||(x=[])}t=z(),O(";"),e.push(t)}function Q(){if(O("="),T=z(),!(U="proto3"===T)&&"proto2"!==T)throw q(T,"syntax");O(";")}function J(e,t){switch(t){case"option":return ee(e,t),O(";"),!0;case"message":return Y(e,t),!0;case"enum":return $(e,t),!0;case"service":return function(e,t){if(!_.test(t=B()))throw q(t,"service name");var r=new l(t);Z(r,(function(e){if(!J(r,e)){if("rpc"!==e)throw q(e);!function(e,t){var r=D(),n=t;if(!_.test(t=B()))throw q(t,"name");var i,o,s,a,c=t;O("("),O("stream",!0)&&(o=!0);if(!E.test(t=B()))throw q(t);i=t,O(")"),O("returns"),O("("),O("stream",!0)&&(a=!0);if(!E.test(t=B()))throw q(t);s=t,O(")");var u=new d(c,n,i,s,o,a);u.comment=r,Z(u,(function(e){if("option"!==e)throw q(e);ee(u,e),O(";")})),e.add(u)}(r,e)}})),e.add(r)}(e,t),!0;case"extend":return function(e,t){if(!E.test(t=B()))throw q(t,"reference");var r=t;Z(null,(function(t){switch(t){case"required":case"repeated":X(e,t,r);break;case"optional":X(e,U?"proto3_optional":"optional",r);break;default:if(!U||!E.test(t))throw q(t);M(t),X(e,"optional",r)}}))}(e,t),!0}return!1}function Z(e,t,r){var n=C.line;if(e&&("string"!==typeof e.comment&&(e.comment=D()),e.filename=S.filename),O("{",!0)){for(var i;"}"!==(i=B());)t(i);O(";",!0)}else r&&r(),O(";"),e&&("string"!==typeof e.comment||R)&&(e.comment=D(n)||e.comment)}function Y(e,t){if(!_.test(t=B()))throw q(t,"type name");var r=new o(t);Z(r,(function(e){if(!J(r,e))switch(e){case"map":!function(e){O("<");var t=B();if(void 0===h.mapKey[t])throw q(t,"type");O(",");var r=B();if(!E.test(r))throw q(r,"type");O(">");var n=B();if(!_.test(n))throw q(n,"name");O("=");var i=new a(j(n),V(B()),t,r);Z(i,(function(e){if("option"!==e)throw q(e);ee(i,e),O(";")}),(function(){ne(i)})),e.add(i)}(r);break;case"required":case"repeated":X(r,e);break;case"optional":X(r,U?"proto3_optional":"optional");break;case"oneof":!function(e,t){if(!_.test(t=B()))throw q(t,"name");var r=new c(j(t));Z(r,(function(e){"option"===e?(ee(r,e),O(";")):(M(e),X(r,"optional"))})),e.add(r)}(r,e);break;case"extensions":K(r.extensions||(r.extensions=[]));break;case"reserved":K(r.reserved||(r.reserved=[]),!0);break;default:if(!U||!E.test(e))throw q(e);M(e),X(r,"optional")}})),e.add(r)}function X(e,t,r){var n=B();if("group"!==n){for(;n.endsWith(".")||N().startsWith(".");)n+=B();if(!E.test(n))throw q(n,"type");var i=B();if(!_.test(i))throw q(i,"name");i=j(i),O("=");var a=new s(i,V(B()),n,t,r);if(Z(a,(function(e){if("option"!==e)throw q(e);ee(a,e),O(";")}),(function(){ne(a)})),"proto3_optional"===t){var u=new c("_"+i);a.setOption("proto3_optional",!0),u.add(a),e.add(u)}else e.add(a);U||!a.repeated||void 0===h.packed[n]&&void 0!==h.basic[n]||a.setOption("packed",!1,!0)}else!function(e,t){var r=B();if(!_.test(r))throw q(r,"name");var n=f.lcFirst(r);r===n&&(r=f.ucFirst(r));O("=");var i=V(B()),a=new o(r);a.group=!0;var c=new s(n,i,r,t);c.filename=S.filename,Z(a,(function(e){switch(e){case"option":ee(a,e),O(";");break;case"required":case"repeated":X(a,e);break;case"optional":X(a,U?"proto3_optional":"optional");break;case"message":Y(a,e);break;case"enum":$(a,e);break;default:throw q(e)}})),e.add(a).add(c)}(e,t)}function $(e,t){if(!_.test(t=B()))throw q(t,"name");var r=new u(t);Z(r,(function(e){switch(e){case"option":ee(r,e),O(";");break;case"reserved":K(r.reserved||(r.reserved=[]),!0);break;default:!function(e,t){if(!_.test(t))throw q(t,"name");O("=");var r=V(B(),!0),n={options:void 0,setOption:function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t}};Z(n,(function(e){if("option"!==e)throw q(e);ee(n,e),O(";")}),(function(){ne(n)})),e.add(t,r,n.comment,n.options)}(r,e)}})),e.add(r)}function ee(e,t){var r=O("(",!0);if(!E.test(t=B()))throw q(t,"name");var n,i=t,o=i;r&&(O(")"),o=i="("+i+")",t=N(),A.test(t)&&(n=t.slice(1),i+=t,B())),O("="),function(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}(e,o,te(e,i),n)}function te(e,t){if(O("{",!0)){for(var r={};!O("}",!0);){if(!_.test(P=B()))throw q(P,"name");if(null===P)throw q(P,"end of input");var n,i=P;if(O(":",!0),"{"===N())n=te(e,t+"."+P);else if("["===N()){var o;if(n=[],O("[",!0)){do{o=H(!0),n.push(o)}while(O(",",!0));O("]"),"undefined"!==typeof o&&re(e,t+"."+P,o)}}else n=H(!0),re(e,t+"."+P,n);var s=r[i];s&&(n=[].concat(s).concat(n)),r[i]=n,O(",",!0),O(";",!0)}return r}var a=H(!0);return re(e,t,a),a}function re(e,t,r){e.setOption&&e.setOption(t,r)}function ne(e){if(O("[",!0)){do{ee(e,"option")}while(O(",",!0));O("]")}return e}for(;null!==(P=B());)switch(P){case"package":if(!L)throw q(P);G();break;case"import":if(!L)throw q(P);W();break;case"syntax":if(!L)throw q(P);Q();break;case"option":ee(F,P),O(";");break;default:if(J(F,P)){L=!1;continue}throw q(P)}return S.filename=null,{package:k,imports:x,weakImports:I,syntax:T,root:t}}},6216:(e,t,r)=>{"use strict";e.exports=c;var n,i=r(3097),o=i.LongBits,s=i.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!==typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},l=function(){return i.Buffer?function(e){return(c.create=function(e){return i.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function d(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw a(this,8);return new o(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,c.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return e}}(),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=i.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"===typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){n=e,c.create=l(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(c.prototype,{int64:function(){return d.call(this)[t](!1)},uint64:function(){return d.call(this)[t](!0)},sint64:function(){return d.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},3557:(e,t,r)=>{"use strict";e.exports=o;var n=r(6216);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(3097);function o(e){n.call(this,e)}o._configure=function(){i.Buffer&&(o.prototype._slice=i.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},8622:(e,t,r)=>{"use strict";e.exports=d;var n=r(3452);((d.prototype=Object.create(n.prototype)).constructor=d).className="Root";var i,o,s,a=r(6734),c=r(222),u=r(9794),l=r(2440);function d(e){n.call(this,"",e),this.deferred=[],this.files=[]}function h(){}d.fromJSON=function(e,t){return t||(t=new d),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},d.prototype.resolvePath=l.path.resolve,d.prototype.fetch=l.fetch,d.prototype.load=function e(t,r,n){"function"===typeof r&&(n=r,r=void 0);var i=this;if(!n)return l.asPromise(e,i,t,r);var a=n===h;function c(e,t){if(n){var r=n;if(n=null,a)throw e;r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in s)return r}return null}function d(e,t){try{if(l.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),l.isString(t)){o.filename=e;var n,s=o(t,i,r),d=0;if(s.imports)for(;d<s.imports.length;++d)(n=u(s.imports[d])||i.resolvePath(e,s.imports[d]))&&f(n);if(s.weakImports)for(d=0;d<s.weakImports.length;++d)(n=u(s.weakImports[d])||i.resolvePath(e,s.weakImports[d]))&&f(n,!0)}else i.setOptions(t.options).addJSON(t.nested)}catch(h){c(h)}a||p||c(null,i)}function f(e,t){if(e=u(e)||e,!(i.files.indexOf(e)>-1))if(i.files.push(e),e in s)a?d(e,s[e]):(++p,setTimeout((function(){--p,d(e,s[e])})));else if(a){var r;try{r=l.fs.readFileSync(e).toString("utf8")}catch(o){return void(t||c(o))}d(e,r)}else++p,i.fetch(e,(function(r,o){--p,n&&(r?t?p||c(null,i):c(r):d(e,o))}))}var p=0;l.isString(t)&&(t=[t]);for(var g,m=0;m<t.length;++m)(g=i.resolvePath("",t[m]))&&f(g);if(a)return i;p||c(null,i)},d.prototype.loadSync=function(e,t){if(!l.isNode)throw Error("not supported");return this.load(e,t,h)},d.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new a(t.fullName,t.id,t.type,t.rule,void 0,t.options);return r.get(n.name)||(n.declaringField=t,t.extensionField=n,r.add(n)),!0}return!1}d.prototype._handleAdd=function(e){if(e instanceof a)void 0===e.extend||e.extensionField||p(0,e)||this.deferred.push(e);else if(e instanceof c)f.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof i)for(var t=0;t<this.deferred.length;)p(0,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);f.test(e.name)&&(e.parent[e.name]=e)}},d.prototype._handleRemove=function(e){if(e instanceof a){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof c)f.test(e.name)&&delete e.parent[e.name];else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);f.test(e.name)&&delete e.parent[e.name]}},d._configure=function(e,t,r){i=e,o=t,s=r}},7907:e=>{"use strict";e.exports={}},9994:(e,t,r)=>{"use strict";t.Service=r(4281)},4281:(e,t,r)=>{"use strict";e.exports=i;var n=r(3097);function i(e,t,r){if("function"!==typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return n.asPromise(e,a,t,r,i,o);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof i))try{r=i[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",r,t),s(null,r)}a.end(!0)}))}catch(c){return a.emit("error",c,t),void setTimeout((function(){s(c)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},4173:(e,t,r)=>{"use strict";e.exports=a;var n=r(3452);((a.prototype=Object.create(n.prototype)).constructor=a).className="Service";var i=r(4865),o=r(2440),s=r(9994);function a(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function c(e){return e._methodsArray=null,e}a.fromJSON=function(e,t){var r=new a(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),o=0;o<n.length;++o)r.add(i.fromJSON(n[o],t.methods[n[o]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},a.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return o.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=o.toArray(this.methods))}}),a.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},a.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},a.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,c(this)):n.prototype.add.call(this,e)},a.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,c(this)}return n.prototype.remove.call(this,e)},a.prototype.create=function(e,t,r){for(var n,i=new s.Service(e,t,r),a=0;a<this.methodsArray.length;++a){var c=o.lcFirst((n=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");i[c]=o.codegen(["r","c"],o.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},3077:e=>{"use strict";e.exports=d;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,o=/^\s*\*?\/*/,s=/\n/g,a=/\s/,c=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"\t"};function l(e){return e.replace(c,(function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}}))}function d(e,c){e=e.toString();var u=0,d=e.length,h=1,f=0,p={},g=[],m=null;function y(e){return Error("illegal "+e+" (line "+h+")")}function v(t){return e.charAt(t)}function b(t,r,n){var a,u={type:e.charAt(t++),lineEmpty:!1,leading:n},l=t-(c?2:3);do{if(--l<0||"\n"===(a=e.charAt(l))){u.lineEmpty=!0;break}}while(" "===a||"\t"===a);for(var d=e.substring(t,r).split(s),g=0;g<d.length;++g)d[g]=d[g].replace(c?o:i,"").trim();u.text=d.join("\n").trim(),p[h]=u,f=h}function w(t){var r=_(t),n=e.substring(t,r);return/^\s*\/\//.test(n)}function _(e){for(var t=e;t<d&&"\n"!==v(t);)t++;return t}function E(){if(g.length>0)return g.shift();if(m)return function(){var t="'"===m?n:r;t.lastIndex=u-1;var i=t.exec(e);if(!i)throw y("string");return u=t.lastIndex,A(m),m=null,l(i[1])}();var i,o,s,f,p,E=0===u;do{if(u===d)return null;for(i=!1;a.test(s=v(u));)if("\n"===s&&(E=!0,++h),++u===d)return null;if("/"===v(u)){if(++u===d)throw y("comment");if("/"===v(u))if(c){if(f=u,p=!1,w(u-1)){p=!0;do{if((u=_(u))===d)break;if(u++,!E)break}while(w(u))}else u=Math.min(d,_(u)+1);p&&(b(f,u,E),E=!0),h++,i=!0}else{for(p="/"===v(f=u+1);"\n"!==v(++u);)if(u===d)return null;++u,p&&(b(f,u-1,E),E=!0),++h,i=!0}else{if("*"!==(s=v(u)))return"/";f=u+1,p=c||"*"===v(f);do{if("\n"===s&&++h,++u===d)throw y("comment");o=s,s=v(u)}while("*"!==o||"/"!==s);++u,p&&(b(f,u-2,E),E=!0),i=!0}}}while(i);var S=u;if(t.lastIndex=0,!t.test(v(S++)))for(;S<d&&!t.test(v(S));)++S;var k=e.substring(u,u=S);return'"'!==k&&"'"!==k||(m=k),k}function A(e){g.push(e)}function S(){if(!g.length){var e=E();if(null===e)return null;A(e)}return g[0]}return Object.defineProperty({next:E,peek:S,push:A,skip:function(e,t){var r=S();if(r===e)return E(),!0;if(!t)throw y("token '"+r+"', '"+e+"' expected");return!1},cmnt:function(e){var t,r=null;return void 0===e?(t=p[h-1],delete p[h-1],t&&(c||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(f<e&&S(),t=p[e],delete p[e],!t||t.lineEmpty||!c&&"/"!==t.type||(r=t.leading?null:t.text)),r}},"line",{get:function(){return h}})}d.unescape=l},8716:(e,t,r)=>{"use strict";e.exports=v;var n=r(3452);((v.prototype=Object.create(n.prototype)).constructor=v).className="Type";var i=r(222),o=r(9794),s=r(6734),a=r(4479),c=r(4173),u=r(4486),l=r(6216),d=r(7063),h=r(2440),f=r(6886),p=r(2715),g=r(709),m=r(7276),y=r(9025);function v(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,h.merge(e.prototype,t)),e.$type=e.prototype.$type=this,h.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:h.oneOfGetter(this._oneofsArray[r].oneof),set:h.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),v.generateConstructor=function(e){for(var t,r=h.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",h.safeProp(t.name)):t.repeated&&r("this%s=[]",h.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),l=0;l<u.length;++l)r.add(("undefined"!==typeof t.fields[u[l]].keyType?a.fromJSON:s.fromJSON)(u[l],t.fields[u[l]]));if(t.oneofs)for(u=Object.keys(t.oneofs),l=0;l<u.length;++l)r.add(o.fromJSON(u[l],t.oneofs[u[l]]));if(t.nested)for(u=Object.keys(t.nested),l=0;l<u.length;++l){var d=t.nested[u[l]];r.add((void 0!==d.id?s.fromJSON:void 0!==d.fields?v.fromJSON:void 0!==d.values?i.fromJSON:void 0!==d.methods?c.fromJSON:n.fromJSON)(u[l],d))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},v.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&Boolean(e.keepComments);return h.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof s&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof o?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof s&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof o){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=f(this)({Writer:d,types:t,util:h}),this.decode=p(this)({Reader:l,types:t,util:h}),this.verify=g(this)({types:t,util:h}),this.fromObject=m.fromObject(this)({types:t,util:h}),this.toObject=m.toObject(this)({types:t,util:h});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof l||(e=l.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){h.decorateType(t,e)}}},8517:(e,t,r)=>{"use strict";var n=t,i=r(2440),o=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function s(e,t){var r=0,n={};for(t|=0;r<e.length;)n[o[r+t]]=e[r++];return n}n.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=s([0,0,0,1,1],7),n.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0])},2440:(e,t,r)=>{"use strict";var n,i,o=e.exports=r(3097),s=r(7907);o.codegen=r(3297),o.fetch=r(7635),o.path=r(7468),o.fs=o.inquire("fs"),o.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},o.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var a=/\\/g,c=/"/g;o.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},o.safeProp=function(e){return!/^[$\w_]+$/.test(e)||o.isReserved(e)?'["'+e.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+e},o.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;o.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,(function(e,t){return t.toUpperCase()}))},o.compareFieldsById=function(e,t){return e.id-t.id},o.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(o.decorateRoot.remove(e.$type),e.$type.name=t,o.decorateRoot.add(e.$type)),e.$type;n||(n=r(8716));var i=new n(t||e.name);return o.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var l=0;o.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(222));var t=new i("Enum"+l++,e);return o.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},o.setProperty=function(e,t,r){if("object"!==typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return function e(t,r,n){var i=r.shift();if("__proto__"===i||"prototype"===i)return t;if(r.length>0)t[i]=e(t[i]||{},r,n);else{var o=t[i];o&&(n=[].concat(o).concat(n)),t[i]=n}return t}(e,t=t.split("."),r)},Object.defineProperty(o,"decorateRoot",{get:function(){return s.decorated||(s.decorated=new(r(8622)))}})},9351:(e,t,r)=>{"use strict";e.exports=i;var n=r(3097);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=i.zero=new i(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new i(r,n)},i.from=function(e){if("number"===typeof e)return i.fromNumber(e);if(n.isString(e)){if(!n.Long)return i.fromNumber(parseInt(e,10));e=n.Long.fromString(e)}return e.low||e.high?new i(e.low>>>0,e.high>>>0):o},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;i.fromHash=function(e){return e===s?o:new i((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},3097:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function o(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(7206),n.base64=r(1),n.EventEmitter=r(7111),n.float=r(802),n.inquire=r(7172),n.utf8=r(3861),n.pool=r(8236),n.LongBits=r(9351),n.isNode=Boolean("undefined"!==typeof r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),n.global=n.isNode&&r.g||"undefined"!==typeof window&&window||"undefined"!==typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"===typeof e||e instanceof String},n.isObject=function(e){return e&&"object"===typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!==typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"===typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"===typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=o,n.ProtocolError=o("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;e?(n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):n._Buffer_from=n._Buffer_allocUnsafe=null}},709:(e,t,r)=>{"use strict";e.exports=function(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var c=0;c<e.fieldsArray.length;++c){var u=e._fieldsArray[c].resolve(),l="m"+i.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,u.name),u.map)t("if(!util.isObject(%s))",l)("return%j",o(u,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,u,"k[i]"),s(t,u,c,l+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",l)("return%j",o(u,"array"))("for(var i=0;i<%s.length;++i){",l),s(t,u,c,l+"[i]")("}");else{if(u.partOf){var d=i.safeProp(u.partOf.name);1===n[u.partOf.name]&&t("if(p%s===1)",d)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",d)}s(t,u,c,l)}u.optional&&t("}")}return t("return null")};var n=r(222),i=r(2440);function o(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function s(e,t,r,i){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",o(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),a=0;a<s.length;++a)e("case %i:",t.resolvedType.values[s[a]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",o(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",o(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",o(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",o(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",o(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",o(t,"buffer"))}return e}function a(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",o(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",o(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",o(t,"boolean key"))}return e}},9025:(e,t,r)=>{"use strict";var n=t,i=r(4486);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return-1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="",n="";if(t&&t.json&&e.type_url&&e.value){n=e.type_url.substring(e.type_url.lastIndexOf("/")+1),r=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(n);o&&(e=o.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var s=e.$type.toObject(e,t);return""===r&&(r="type.googleapis.com/"),n=r+("."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName),s["@type"]=n,s}return this.toObject(e,t)}}},7063:(e,t,r)=>{"use strict";e.exports=d;var n,i=r(3097),o=i.LongBits,s=i.base64,a=i.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return i.Buffer?function(){return(d.create=function(){return new n})()}:function(){return new d}};function f(e,t,r){t[r]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(d.alloc=i.pool(d.alloc,i.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var y=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(i.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(y,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){n=e,d.create=h(),n._configure()}},2815:(e,t,r)=>{"use strict";e.exports=o;var n=r(7063);(o.prototype=Object.create(n.prototype)).constructor=o;var i=r(3097);function o(){n.call(this)}function s(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}o._configure=function(){o.alloc=i._Buffer_allocUnsafe,o.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},o.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},2525:(e,t,r)=>{"use strict";var n=65536,i=4294967295;var o=r(2543).Buffer,s=r.g.crypto||r.g.msCrypto;s&&s.getRandomValues?e.exports=function(e,t){if(e>i)throw new RangeError("requested too many random bytes");var r=o.allocUnsafe(e);if(e>0)if(e>n)for(var a=0;a<e;a+=n)s.getRandomValues(r.slice(a,a+n));else s.getRandomValues(r);if("function"===typeof t)return process.nextTick((function(){t(null,r)}));return r}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},7896:(e,t,r)=>{const n=r(8139),i=r(5339),o=r(4052),s=r(3654),{RateLimiterClusterMaster:a,RateLimiterClusterMasterPM2:c,RateLimiterCluster:u}=r(5503),l=r(2408),d=r(8134),h=r(5e3),f=r(4066),p=r(3081),g=r(438),m=r(4819);e.exports={RateLimiterRedis:n,RateLimiterMongo:i,RateLimiterMySQL:o,RateLimiterPostgres:s,RateLimiterMemory:l,RateLimiterMemcache:d,RateLimiterClusterMaster:a,RateLimiterClusterMasterPM2:c,RateLimiterCluster:u,RLWrapperBlackAndWhite:h,RateLimiterUnion:f,RateLimiterQueue:p,BurstyRateLimiter:g,RateLimiterRes:m}},438:(e,t,r)=>{const n=r(4819);e.exports=class{constructor(e,t){this._rateLimiter=e,this._burstLimiter=t}_combineRes(e,t){return e?new n(e.remainingPoints,Math.min(e.msBeforeNext,t?t.msBeforeNext:0),e.consumedPoints,e.isFirstInDuration):null}consume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._rateLimiter.consume(e,t,r).catch((i=>i instanceof n?this._burstLimiter.consume(e,t,r).then((e=>Promise.resolve(this._combineRes(i,e)))).catch((e=>e instanceof n?Promise.reject(this._combineRes(i,e)):Promise.reject(e))):Promise.reject(i)))}get(e){return Promise.all([this._rateLimiter.get(e),this._burstLimiter.get(e)]).then((e=>{let[t,r]=e;return this._combineRes(t,r)}))}get points(){return this._rateLimiter.points}}},5e3:(e,t,r)=>{const n=r(4819);e.exports=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.limiter=e.limiter,this.blackList=e.blackList,this.whiteList=e.whiteList,this.isBlackListed=e.isBlackListed,this.isWhiteListed=e.isWhiteListed,this.runActionAnyway=e.runActionAnyway}get limiter(){return this._limiter}set limiter(e){if("undefined"===typeof e)throw new Error("limiter is not set");this._limiter=e}get runActionAnyway(){return this._runActionAnyway}set runActionAnyway(e){this._runActionAnyway="undefined"!==typeof e&&e}get blackList(){return this._blackList}set blackList(e){this._blackList=Array.isArray(e)?e:[]}get isBlackListed(){return this._isBlackListed}set isBlackListed(e){if("undefined"===typeof e&&(e=()=>!1),"function"!==typeof e)throw new Error("isBlackListed must be function");this._isBlackListed=e}get whiteList(){return this._whiteList}set whiteList(e){this._whiteList=Array.isArray(e)?e:[]}get isWhiteListed(){return this._isWhiteListed}set isWhiteListed(e){if("undefined"===typeof e&&(e=()=>!1),"function"!==typeof e)throw new Error("isWhiteListed must be function");this._isWhiteListed=e}isBlackListedSomewhere(e){return this.blackList.indexOf(e)>=0||this.isBlackListed(e)}isWhiteListedSomewhere(e){return this.whiteList.indexOf(e)>=0||this.isWhiteListed(e)}getBlackRes(){return new n(0,Number.MAX_SAFE_INTEGER,0,!1)}getWhiteRes(){return new n(Number.MAX_SAFE_INTEGER,0,0,!1)}rejectBlack(){return Promise.reject(this.getBlackRes())}resolveBlack(){return Promise.resolve(this.getBlackRes())}resolveWhite(){return Promise.resolve(this.getWhiteRes())}consume(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.rejectBlack()),"undefined"===typeof t?this.limiter.consume(e,r):(this.runActionAnyway&&this.limiter.consume(e,r).catch((()=>{})),t)}block(e,t){let r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.block(e,t):(this.runActionAnyway&&this.limiter.block(e,t).catch((()=>{})),r)}penalty(e,t){let r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.penalty(e,t):(this.runActionAnyway&&this.limiter.penalty(e,t).catch((()=>{})),r)}reward(e,t){let r;return this.isWhiteListedSomewhere(e)?r=this.resolveWhite():this.isBlackListedSomewhere(e)&&(r=this.resolveBlack()),"undefined"===typeof r?this.limiter.reward(e,t):(this.runActionAnyway&&this.limiter.reward(e,t).catch((()=>{})),r)}get(e){let t;return this.isWhiteListedSomewhere(e)?t=this.resolveWhite():this.isBlackListedSomewhere(e)&&(t=this.resolveBlack()),"undefined"===typeof t||this.runActionAnyway?this.limiter.get(e):t}delete(e){return this.limiter.delete(e)}}},8855:e=>{e.exports=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.points=e.points,this.duration=e.duration,this.blockDuration=e.blockDuration,this.execEvenly=e.execEvenly,this.execEvenlyMinDelayMs=e.execEvenlyMinDelayMs,this.keyPrefix=e.keyPrefix}get points(){return this._points}set points(e){this._points=e>=0?e:4}get duration(){return this._duration}set duration(e){this._duration="undefined"===typeof e?1:e}get msDuration(){return 1e3*this.duration}get blockDuration(){return this._blockDuration}set blockDuration(e){this._blockDuration="undefined"===typeof e?0:e}get msBlockDuration(){return 1e3*this.blockDuration}get execEvenly(){return this._execEvenly}set execEvenly(e){this._execEvenly="undefined"!==typeof e&&Boolean(e)}get execEvenlyMinDelayMs(){return this._execEvenlyMinDelayMs}set execEvenlyMinDelayMs(e){this._execEvenlyMinDelayMs="undefined"===typeof e?Math.ceil(this.msDuration/this.points):e}get keyPrefix(){return this._keyPrefix}set keyPrefix(e){if("undefined"===typeof e&&(e="rlflx"),"string"!==typeof e)throw new Error("keyPrefix must be string");this._keyPrefix=e}_getKeySecDuration(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.customDuration>=0?e.customDuration:this.duration}getKey(e){return this.keyPrefix.length>0?"".concat(this.keyPrefix,":").concat(e):e}parseKey(e){return e.substring(this.keyPrefix.length)}consume(){throw new Error("You have to implement the method 'consume'!")}penalty(){throw new Error("You have to implement the method 'penalty'!")}reward(){throw new Error("You have to implement the method 'reward'!")}get(){throw new Error("You have to implement the method 'get'!")}set(){throw new Error("You have to implement the method 'set'!")}block(){throw new Error("You have to implement the method 'block'!")}delete(){throw new Error("You have to implement the method 'delete'!")}}},5503:(e,t,r)=>{const n=r(1265),i=r(5539),o=r(8855),s=r(2408),a=r(4819),c="rate_limiter_flexible";let u=null;const l=function(e,t,r,n){let i;i=null===n||!0===n||!1===n?n:{remainingPoints:n.remainingPoints,msBeforeNext:n.msBeforeNext,consumedPoints:n.consumedPoints,isFirstInDuration:n.isFirstInDuration},e.send({channel:c,keyPrefix:t.keyPrefix,promiseId:t.promiseId,type:r,data:i})},d=function(e){setTimeout((()=>{this._initiated?process.send(e):"undefined"!==typeof this._promises[e.promiseId]&&d.call(this,e)}),30)},h=function(e,t,r,n,i){const o={channel:c,keyPrefix:this.keyPrefix,func:e,promiseId:t,data:{key:r,arg:n,opts:i}};this._initiated?process.send(o):d.call(this,o)},f=function(e,t){if(!t||t.channel!==c||"undefined"===typeof this._rateLimiters[t.keyPrefix])return!1;let r;switch(t.func){case"consume":r=this._rateLimiters[t.keyPrefix].consume(t.data.key,t.data.arg,t.data.opts);break;case"penalty":r=this._rateLimiters[t.keyPrefix].penalty(t.data.key,t.data.arg,t.data.opts);break;case"reward":r=this._rateLimiters[t.keyPrefix].reward(t.data.key,t.data.arg,t.data.opts);break;case"block":r=this._rateLimiters[t.keyPrefix].block(t.data.key,t.data.arg,t.data.opts);break;case"get":r=this._rateLimiters[t.keyPrefix].get(t.data.key,t.data.opts);break;case"delete":r=this._rateLimiters[t.keyPrefix].delete(t.data.key,t.data.opts);break;default:return!1}r&&r.then((r=>{l(e,t,"resolve",r)})).catch((r=>{l(e,t,"reject",r)}))},p=function(e){if(!e||e.channel!==c||e.keyPrefix!==this.keyPrefix)return!1;if(this._promises[e.promiseId]){let t;switch(clearTimeout(this._promises[e.promiseId].timeoutId),t=null===e.data||!0===e.data||!1===e.data?e.data:new a(e.data.remainingPoints,e.data.msBeforeNext,e.data.consumedPoints,e.data.isFirstInDuration),e.type){case"resolve":this._promises[e.promiseId].resolve(t);break;case"reject":this._promises[e.promiseId].reject(t);break;default:throw new Error("RateLimiterCluster: no such message type '".concat(e.type,"'"))}delete this._promises[e.promiseId]}},g=function(){return{points:this.points,duration:this.duration,blockDuration:this.blockDuration,execEvenly:this.execEvenly,execEvenlyMinDelayMs:this.execEvenlyMinDelayMs,keyPrefix:this.keyPrefix}},m=function(e,t){const r=process.hrtime();let n=r[0].toString()+r[1].toString();return"undefined"!==typeof this._promises[n]&&(n+=i.randomBytes(12).toString("base64")),this._promises[n]={resolve:e,reject:t,timeoutId:setTimeout((()=>{delete this._promises[n],t(new Error("RateLimiterCluster timeout: no answer from master in time"))}),this.timeoutMs)},n};e.exports={RateLimiterClusterMaster:class{constructor(){if(u)return u;this._rateLimiters={},n.setMaxListeners(0),n.on("message",((e,t)=>{t&&t.channel===c&&"init"===t.type?("undefined"===typeof this._rateLimiters[t.opts.keyPrefix]&&(this._rateLimiters[t.opts.keyPrefix]=new s(t.opts)),e.send({channel:c,type:"init",keyPrefix:t.opts.keyPrefix})):f.call(this,e,t)})),u=this}},RateLimiterClusterMasterPM2:class{constructor(e){if(u)return u;this._rateLimiters={},e.launchBus(((t,r)=>{r.on("process:msg",(t=>{const r=t.raw;if(r&&r.channel===c&&"init"===r.type)"undefined"===typeof this._rateLimiters[r.opts.keyPrefix]&&(this._rateLimiters[r.opts.keyPrefix]=new s(r.opts)),e.sendDataToProcessId(t.process.pm_id,{data:{},topic:c,channel:c,type:"init",keyPrefix:r.opts.keyPrefix},((e,t)=>{e&&console.log(e,t)}));else{f.call(this,{send:r=>{const n=r;n.topic=c,"undefined"===typeof n.data&&(n.data={}),e.sendDataToProcessId(t.process.pm_id,n,((e,t)=>{e&&console.log(e,t)}))}},r)}}))})),u=this}},RateLimiterCluster:class extends o{get timeoutMs(){return this._timeoutMs}set timeoutMs(e){this._timeoutMs="undefined"===typeof e?5e3:Math.abs(parseInt(e))}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),process.setMaxListeners(0),this.timeoutMs=e.timeoutMs,this._initiated=!1,process.on("message",(e=>{e&&e.channel===c&&"init"===e.type&&e.keyPrefix===this.keyPrefix?this._initiated=!0:p.call(this,e)})),process.send({channel:c,type:"init",opts:g.call(this)}),this._promises={}}consume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((n,i)=>{const o=m.call(this,n,i);h.call(this,"consume",o,e,t,r)}))}penalty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((n,i)=>{const o=m.call(this,n,i);h.call(this,"penalty",o,e,t,r)}))}reward(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((n,i)=>{const o=m.call(this,n,i);h.call(this,"reward",o,e,t,r)}))}block(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((n,i)=>{const o=m.call(this,n,i);h.call(this,"block",o,e,t,r)}))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((r,n)=>{const i=m.call(this,r,n);h.call(this,"get",i,e,t)}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((r,n)=>{const i=m.call(this,r,n);h.call(this,"delete",i,e,t)}))}}}},8134:(e,t,r)=>{const n=r(1434),i=r(4819);e.exports=class extends n{constructor(e){super(e),this.client=e.storeClient}_getRateLimiterRes(e,t,r){const n=new i;return n.consumedPoints=parseInt(r.consumedPoints),n.isFirstInDuration=r.consumedPoints===t,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=r.msBeforeNext,n}_upsert(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return new Promise(((o,s)=>{const a=Date.now(),c=Math.floor(r/1e3);n?this.client.set(e,t,c,(r=>{r?s(r):this.client.set("".concat(e,"_expire"),c>0?a+1e3*c:-1,c,(()=>{o({consumedPoints:t,msBeforeNext:c>0?1e3*c:-1})}))})):this.client.incr(e,t,((u,l)=>{u||!1===l?this.client.add(e,t,c,((u,l)=>{if(u||!l)if("undefined"===typeof i.attemptNumber||i.attemptNumber<3){const a=Object.assign({},i);a.attemptNumber=a.attemptNumber?a.attemptNumber+1:1,this._upsert(e,t,r,n,a).then((e=>o(e))).catch((e=>s(e)))}else s(new Error("Can not add key"));else this.client.add("".concat(e,"_expire"),c>0?a+1e3*c:-1,c,(()=>{o({consumedPoints:t,msBeforeNext:c>0?1e3*c:-1})}))})):this.client.get("".concat(e,"_expire"),((e,t)=>{if(e)s(e);else{const e=!1===t?0:t,r={consumedPoints:l,msBeforeNext:e>=0?Math.max(e-a,0):-1};o(r)}}))}))}))}_get(e){return new Promise(((t,r)=>{const n=Date.now();this.client.get(e,((i,o)=>{o?this.client.get("".concat(e,"_expire"),((e,i)=>{if(e)r(e);else{const e=!1===i?0:i,r={consumedPoints:o,msBeforeNext:e>=0?Math.max(e-n,0):-1};t(r)}})):t(null)}))}))}_delete(e){return new Promise(((t,r)=>{this.client.del(e,((n,i)=>{n?r(n):!1===i?t(i):this.client.del("".concat(e,"_expire"),(e=>{e?r(e):t(i)}))}))}))}}},2408:(e,t,r)=>{const n=r(8855),i=r(4327),o=r(4819);e.exports=class extends n{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this._memoryStorage=new i}consume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((n,i)=>{const o=this.getKey(e),s=this._getKeySecDuration(r);let a=this._memoryStorage.incrby(o,t,s);if(a.remainingPoints=Math.max(this.points-a.consumedPoints,0),a.consumedPoints>this.points)this.blockDuration>0&&a.consumedPoints<=this.points+t&&(a=this._memoryStorage.set(o,a.consumedPoints,this.blockDuration)),i(a);else if(this.execEvenly&&a.msBeforeNext>0&&!a.isFirstInDuration){let e=Math.ceil(a.msBeforeNext/(a.remainingPoints+2));e<this.execEvenlyMinDelayMs&&(e=a.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(n,e,a)}else n(a)}))}penalty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getKey(e);return new Promise((e=>{const i=this._getKeySecDuration(r),o=this._memoryStorage.incrby(n,t,i);o.remainingPoints=Math.max(this.points-o.consumedPoints,0),e(o)}))}reward(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getKey(e);return new Promise((e=>{const i=this._getKeySecDuration(r),o=this._memoryStorage.incrby(n,-t,i);o.remainingPoints=Math.max(this.points-o.consumedPoints,0),e(o)}))}block(e,t){const r=1e3*t,n=this.points+1;return this._memoryStorage.set(this.getKey(e),n,t),Promise.resolve(new o(0,0===r?-1:r,n))}set(e,t,r){const n=1e3*(r>=0?r:this.duration);return this._memoryStorage.set(this.getKey(e),t,r),Promise.resolve(new o(0,0===n?-1:n,t))}get(e){const t=this._memoryStorage.get(this.getKey(e));return null!==t&&(t.remainingPoints=Math.max(this.points-t.consumedPoints,0)),Promise.resolve(t)}delete(e){return Promise.resolve(this._memoryStorage.delete(this.getKey(e)))}}},5339:(e,t,r)=>{const n=r(1434),i=r(4819);function o(e){try{const t=e.client?e.client:e,{version:r}=t.topology.s.options.metadata.driver,n=r.split(".").map((e=>parseInt(e)));return{major:n[0],feature:n[1],patch:n[2]}}catch(t){return{major:0,feature:0,patch:0}}}class s extends n{constructor(e){super(e),this.dbName=e.dbName,this.tableName=e.tableName,this.indexKeyPrefix=e.indexKeyPrefix,e.mongo?this.client=e.mongo:this.client=e.storeClient,"function"===typeof this.client.then?this.client.then((e=>{this.client=e,this._initCollection(),this._driverVersion=o(this.client)})):(this._initCollection(),this._driverVersion=o(this.client))}get dbName(){return this._dbName}set dbName(e){this._dbName="undefined"===typeof e?s.getDbName():e}static getDbName(){return"node-rate-limiter-flexible"}get tableName(){return this._tableName}set tableName(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}get client(){return this._client}set client(e){if("undefined"===typeof e)throw new Error("mongo is not set");this._client=e}get indexKeyPrefix(){return this._indexKeyPrefix}set indexKeyPrefix(e){this._indexKeyPrefix=e||{}}_initCollection(){const e=("function"===typeof this.client.db?this.client.db(this.dbName):this.client).collection(this.tableName);e.createIndex({expire:-1},{expireAfterSeconds:0}),e.createIndex(Object.assign({},this.indexKeyPrefix,{key:1}),{unique:!0}),this._collection=e}_getRateLimiterRes(e,t,r){const n=new i;let o;return o="undefined"===typeof r.value?r:r.value,n.isFirstInDuration=o.points===t,n.consumedPoints=o.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=null!==o.expire?Math.max(new Date(o.expire).getTime()-Date.now(),0):-1,n}_upsert(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const o=i.attrs||{};let s,a;n?(s={key:e},s=Object.assign(s,o),a={$set:{key:e,points:t,expire:r>0?new Date(Date.now()+r):null}},a.$set=Object.assign(a.$set,o)):(s={$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}],key:e},s=Object.assign(s,o),a={$setOnInsert:{key:e,expire:r>0?new Date(Date.now()+r):null},$inc:{points:t}},a.$setOnInsert=Object.assign(a.$setOnInsert,o));const c={upsert:!0};return this._driverVersion.major>=4||3===this._driverVersion.major&&this._driverVersion.feature>=7||this._driverVersion.feature>=6&&this._driverVersion.patch>=7?c.returnDocument="after":c.returnOriginal=!1,new Promise(((i,u)=>{this._collection.findOneAndUpdate(s,a,c).then((e=>{i(e)})).catch((s=>{if(s&&11e3===s.code){const s=Object.assign({$or:[{expire:{$lte:new Date}},{expire:{$eq:null}}],key:e},o),a={$set:Object.assign({key:e,points:t,expire:r>0?new Date(Date.now()+r):null},o)};this._collection.findOneAndUpdate(s,a,c).then((e=>{i(e)})).catch((o=>{o&&11e3===o.code?this._upsert(e,t,r,n).then((e=>i(e))).catch((e=>u(e))):u(o)}))}else u(s)}))}))}_get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const r=t.attrs||{},n=Object.assign({key:e,$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}]},r);return this._collection.findOne(n)}_delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const r=t.attrs||{},n=Object.assign({key:e},r);return this._collection.deleteOne(n).then((e=>e.deletedCount>0))}}e.exports=s},4052:(e,t,r)=>{const n=r(1434),i=r(4819);e.exports=class extends n{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e),this.client=e.storeClient,this.clientType=e.storeType,this.dbName=e.dbName,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?(this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()):this._createDbAndTable().then((()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()})).catch((e=>{if("function"!==typeof t)throw e;t(e)}))}clearExpired(e){return new Promise((t=>{this._getConnection().then((r=>{r.query("DELETE FROM ??.?? WHERE expire < ?",[this.dbName,this.tableName,e],(()=>{this._releaseConnection(r),t()}))})).catch((()=>{t()}))}))}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((()=>{this.clearExpired(Date.now()-36e5).then((()=>{this._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return new Promise(((e,t)=>{this.client.getConnection(((r,n)=>{if(r)return t(r);e(n)}))}));case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return e.release();case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);default:return!0}}_createDbAndTable(){return new Promise(((e,t)=>{this._getConnection().then((r=>{r.query("CREATE DATABASE IF NOT EXISTS `".concat(this.dbName,"`;"),(n=>{if(n)return this._releaseConnection(r),t(n);r.query(this._getCreateTableStmt(),(n=>{if(n)return this._releaseConnection(r),t(n);this._releaseConnection(r),e()}))}))})).catch((e=>{t(e)}))}))}_getCreateTableStmt(){return"CREATE TABLE IF NOT EXISTS `".concat(this.dbName,"`.`").concat(this.tableName,"` (")+"`key` VARCHAR(255) CHARACTER SET utf8 NOT NULL,`points` INT(9) NOT NULL default 0,`expire` BIGINT UNSIGNED,PRIMARY KEY (`key`)) ENGINE = INNODB;"}get clientType(){return this._clientType}set clientType(e){if("undefined"===typeof e)if("Connection"===this.client.constructor.name)e="connection";else if("Pool"===this.client.constructor.name)e="pool";else{if("Sequelize"!==this.client.constructor.name)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}get dbName(){return this._dbName}set dbName(e){this._dbName="undefined"===typeof e?"rtlmtrflx":e}get tableName(){return this._tableName}set tableName(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated="undefined"!==typeof e&&!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}_getRateLimiterRes(e,t,r){const n=new i,[o]=r;return n.isFirstInDuration=t===o.points,n.consumedPoints=n.isFirstInDuration?t:o.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=o.expire?Math.max(o.expire-Date.now(),0):-1,n}_upsertTransaction(e,t,r,n,i){return new Promise(((o,s)=>{e.query("BEGIN",(a=>{if(a)return e.rollback(),s(a);const c=Date.now(),u=n>0?c+n:null;let l,d;i?(l="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = ?, \n            expire = ?;",d=[this.dbName,this.tableName,t,r,u,r,u]):(l="INSERT INTO ??.?? VALUES (?, ?, ?)\n          ON DUPLICATE KEY UPDATE \n            points = IF(expire <= ?, ?, points + (?)), \n            expire = IF(expire <= ?, ?, expire);",d=[this.dbName,this.tableName,t,r,u,c,r,r,c,u]),e.query(l,d,(r=>{if(r)return e.rollback(),s(r);e.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;",[this.dbName,this.tableName,t],((t,r)=>{if(t)return e.rollback(),s(t);e.query("COMMIT",(t=>{if(t)return e.rollback(),s(t);o(r)}))}))}))}))}))}_upsert(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.tableCreated?new Promise(((i,o)=>{this._getConnection().then((s=>{this._upsertTransaction(s,e,t,r,n).then((e=>{i(e),this._releaseConnection(s)})).catch((e=>{o(e),this._releaseConnection(s)}))})).catch((e=>{o(e)}))})):Promise.reject(Error("Table is not created yet"))}_get(e){return this.tableCreated?new Promise(((t,r)=>{this._getConnection().then((n=>{n.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)",[this.dbName,this.tableName,e,Date.now()],((e,i)=>{e?r(e):0===i.length?t(null):t(i),this._releaseConnection(n)}))})).catch((e=>{r(e)}))})):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?new Promise(((t,r)=>{this._getConnection().then((n=>{n.query("DELETE FROM ??.?? WHERE `key` = ?",[this.dbName,this.tableName,e],((e,i)=>{e?r(e):t(i.affectedRows>0),this._releaseConnection(n)}))})).catch((e=>{r(e)}))})):Promise.reject(Error("Table is not created yet"))}}},3654:(e,t,r)=>{const n=r(1434),i=r(4819);e.exports=class extends n{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e),this.client=e.storeClient,this.clientType=e.storeType,this.tableName=e.tableName,this.schemaName=e.schemaName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?(this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()):this._createTable().then((()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),"function"===typeof t&&t()})).catch((e=>{if("function"!==typeof t)throw e;t(e)}))}_getTableIdentifier(){return this.schemaName?'"'.concat(this.schemaName,'"."').concat(this.tableName,'"'):'"'.concat(this.tableName,'"')}clearExpired(e){return new Promise((t=>{const r={name:"rlflx-clear-expired",text:"DELETE FROM ".concat(this._getTableIdentifier()," WHERE expire < $1"),values:[e]};this._query(r).then((()=>{t()})).catch((()=>{t()}))}))}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout((()=>{this.clearExpired(Date.now()-36e5).then((()=>{this._clearExpiredHourAgo()}))}),3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":default:return Promise.resolve(this.client);case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();case"typeorm":return Promise.resolve(this.client.driver.master)}}_releaseConnection(e){switch(this.clientType){case"pool":case"typeorm":default:return!0;case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e)}}_createTable(){return new Promise(((e,t)=>{this._query({text:this._getCreateTableStmt()}).then((()=>{e()})).catch((r=>{"23505"===r.code?e():t(r)}))}))}_getCreateTableStmt(){return"CREATE TABLE IF NOT EXISTS ".concat(this._getTableIdentifier()," (\n      key varchar(255) PRIMARY KEY,\n      points integer NOT NULL DEFAULT 0,\n      expire bigint\n    );")}get clientType(){return this._clientType}set clientType(e){const t=this.client.constructor.name;if("undefined"===typeof e)if("Client"===t)e="client";else if("Pool"===t||"BoundPool"===t)e="pool";else{if("Sequelize"!==t)throw new Error("storeType is not defined");e="sequelize"}this._clientType=e.toLowerCase()}get tableName(){return this._tableName}set tableName(e){this._tableName="undefined"===typeof e?this.keyPrefix:e}get schemaName(){return this._schemaName}set schemaName(e){this._schemaName=e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated="undefined"!==typeof e&&!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout="undefined"===typeof e||Boolean(e)}_getRateLimiterRes(e,t,r){const n=new i,o=r.rows[0];return n.isFirstInDuration=t===o.points,n.consumedPoints=n.isFirstInDuration?t:o.points,n.remainingPoints=Math.max(this.points-n.consumedPoints,0),n.msBeforeNext=o.expire?Math.max(o.expire-Date.now(),0):-1,n}_query(e){const t=this.tableName.toLowerCase(),r={name:"".concat(t,":").concat(e.name),text:e.text,values:e.values};return new Promise(((e,t)=>{this._getConnection().then((n=>{n.query(r).then((t=>{e(t),this._releaseConnection(n)})).catch((e=>{t(e),this._releaseConnection(n)}))})).catch((e=>{t(e)}))}))}_upsert(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.tableCreated)return Promise.reject(Error("Table is not created yet"));const i=r>0?Date.now()+r:null,o=n?" $3 ":" CASE\n             WHEN ".concat(this._getTableIdentifier(),".expire <= $4 THEN $3\n             ELSE ").concat(this._getTableIdentifier(),".expire\n            END ");return this._query({name:n?"rlflx-upsert-force":"rlflx-upsert",text:"\n            INSERT INTO ".concat(this._getTableIdentifier()," VALUES ($1, $2, $3)\n              ON CONFLICT(key) DO UPDATE SET\n                points = CASE\n                          WHEN (").concat(this._getTableIdentifier(),".expire <= $4 OR 1=").concat(n?1:0,") THEN $2\n                          ELSE ").concat(this._getTableIdentifier(),".points + ($2)\n                         END,\n                expire = ").concat(o,"\n            RETURNING points, expire;"),values:[e,t,i,Date.now()]})}_get(e){return this.tableCreated?new Promise(((t,r)=>{this._query({name:"rlflx-get",text:"\n            SELECT points, expire FROM ".concat(this._getTableIdentifier()," WHERE key = $1 AND (expire > $2 OR expire IS NULL);"),values:[e,Date.now()]}).then((e=>{0===e.rowCount&&(e=null),t(e)})).catch((e=>{r(e)}))})):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?this._query({name:"rlflx-delete",text:"DELETE FROM ".concat(this._getTableIdentifier()," WHERE key = $1"),values:[e]}).then((e=>e.rowCount>0)):Promise.reject(Error("Table is not created yet"))}}},3081:(e,t,r)=>{const n=r(4688),i=4294967295,o="limiter";e.exports=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxQueueSize:i};this._queueLimiters={KEY_DEFAULT:new s(e,t)},this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this._queueLimiters[e]?this._queueLimiters[e].getTokensRemaining():Promise.resolve(this._limiterFlexible.points)}removeTokens(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return this._queueLimiters[t]||(this._queueLimiters[t]=new s(this._limiterFlexible,{key:t,maxQueueSize:this._maxQueueSize})),this._queueLimiters[t].removeTokens(e)}};class s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{maxQueueSize:i,key:o};this._key=t.key,this._waitTimeout=null,this._queue=[],this._limiterFlexible=e,this._maxQueueSize=t.maxQueueSize}getTokensRemaining(){return this._limiterFlexible.get(this._key).then((e=>null!==e?e.remainingPoints:this._limiterFlexible.points))}removeTokens(e){const t=this;return new Promise(((r,i)=>{e>t._limiterFlexible.points?i(new n("Requested tokens ".concat(e," exceeds maximum ").concat(t._limiterFlexible.points," tokens per interval"))):t._queue.length>0?t._queueRequest.call(t,r,i,e):t._limiterFlexible.consume(t._key,e).then((e=>{r(e.remainingPoints)})).catch((n=>{n instanceof Error?i(n):(t._queueRequest.call(t,r,i,e),null===t._waitTimeout&&(t._waitTimeout=setTimeout(t._processFIFO.bind(t),n.msBeforeNext)))}))}))}_queueRequest(e,t,r){const i=this;i._queue.length<i._maxQueueSize?i._queue.push({resolve:e,reject:t,tokens:r}):t(new n("Number of requests reached it's maximum ".concat(i._maxQueueSize)))}_processFIFO(){const e=this;if(null!==e._waitTimeout&&(clearTimeout(e._waitTimeout),e._waitTimeout=null),0===e._queue.length)return;const t=e._queue.shift();e._limiterFlexible.consume(e._key,t.tokens).then((r=>{t.resolve(r.remainingPoints),e._processFIFO.call(e)})).catch((r=>{r instanceof Error?(t.reject(r),e._processFIFO.call(e)):(e._queue.unshift(t),null===e._waitTimeout&&(e._waitTimeout=setTimeout(e._processFIFO.bind(e),r.msBeforeNext)))}))}}},8139:(e,t,r)=>{const n=r(1434),i=r(4819),o="redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ";e.exports=class extends n{constructor(e){super(e),this.client=e.storeClient,this._rejectIfRedisNotReady=!!e.rejectIfRedisNotReady,this.useRedisPackage=e.useRedisPackage||"Commander"===this.client.constructor.name||!1,this.useRedis3AndLowerPackage=e.useRedis3AndLowerPackage,"function"===typeof this.client.defineCommand&&this.client.defineCommand("rlflxIncr",{numberOfKeys:1,lua:o})}_isRedisReady(){return!this._rejectIfRedisNotReady||(!this.client.status||"ready"===this.client.status)&&!("function"===typeof this.client.isReady&&!this.client.isReady())}_getRateLimiterRes(e,t,r){let[n,o]=r;Array.isArray(n)&&([,n]=n,[,o]=o);const s=new i;return s.consumedPoints=parseInt(n),s.isFirstInDuration=s.consumedPoints===t,s.remainingPoints=Math.max(this.points-s.consumedPoints,0),s.msBeforeNext=o,s}async _upsert(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this._isRedisReady())throw new Error("Redis connection is not ready");const i=Math.floor(r/1e3),s=this.client.multi();return n?(i>0?this.useRedisPackage||this.useRedis3AndLowerPackage?s.set(e,t,{EX:i}):s.set(e,t,"EX",i):s.set(e,t),this.useRedisPackage||this.useRedis3AndLowerPackage?s.pTTL(e).exec(!0):s.pttl(e).exec(!0)):i>0?this.useRedisPackage||this.useRedis3AndLowerPackage?this.useRedis3AndLowerPackage?new Promise(((r,n)=>{const s=function(e,t){return e?n(e):r(t)};"function"===typeof this.client.rlflxIncr?this.client.rlflxIncr(e,t,i,s):this.client.eval(o,1,e,t,i,s)})):this.client.eval(o,{keys:[e],arguments:[String(t),String(i)]}):this.client.rlflxIncr([e].concat([String(t),String(i)])):this.useRedisPackage||this.useRedis3AndLowerPackage?s.incrBy(e,t).pTTL(e).exec(!0):s.incrby(e,t).pttl(e).exec(!0)}async _get(e){if(!this._isRedisReady())throw new Error("Redis connection is not ready");return this.useRedisPackage||this.useRedis3AndLowerPackage?this.client.multi().get(e).pTTL(e).exec(!0).then((e=>{const[t]=e;return null===t?null:e})):this.client.multi().get(e).pttl(e).exec().then((e=>{const[[,t]]=e;return null===t?null:e}))}_delete(e){return this.client.del(e).then((e=>e>0))}}},4819:e=>{e.exports=class{constructor(e,t,r,n){this.remainingPoints="undefined"===typeof e?0:e,this.msBeforeNext="undefined"===typeof t?0:t,this.consumedPoints="undefined"===typeof r?0:r,this.isFirstInDuration="undefined"!==typeof n&&n}get msBeforeNext(){return this._msBeforeNext}set msBeforeNext(e){return this._msBeforeNext=e,this}get remainingPoints(){return this._remainingPoints}set remainingPoints(e){return this._remainingPoints=e,this}get consumedPoints(){return this._consumedPoints}set consumedPoints(e){return this._consumedPoints=e,this}get isFirstInDuration(){return this._isFirstInDuration}set isFirstInDuration(e){this._isFirstInDuration=Boolean(e)}_getDecoratedProperties(){return{remainingPoints:this.remainingPoints,msBeforeNext:this.msBeforeNext,consumedPoints:this.consumedPoints,isFirstInDuration:this.isFirstInDuration}}[Symbol.for("nodejs.util.inspect.custom")](){return this._getDecoratedProperties()}toString(){return JSON.stringify(this._getDecoratedProperties())}toJSON(){return this._getDecoratedProperties()}}},1434:(e,t,r)=>{const n=r(8855),i=r(6704),o=r(4819);e.exports=class extends n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.inMemoryBlockOnConsumed=e.inMemoryBlockOnConsumed,this.inMemoryBlockDuration=e.inMemoryBlockDuration,this.insuranceLimiter=e.insuranceLimiter,this._inMemoryBlockedKeys=new i}get client(){return this._client}set client(e){if("undefined"===typeof e)throw new Error("storeClient is not set");this._client=e}_afterConsume(e,t,r,n,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=this._getRateLimiterRes(r,n,i);if(this.inMemoryBlockOnConsumed>0&&!(this.inMemoryBlockDuration>0)&&s.consumedPoints>=this.inMemoryBlockOnConsumed)return this._inMemoryBlockedKeys.addMs(r,s.msBeforeNext),s.consumedPoints>this.points?t(s):e(s);if(s.consumedPoints>this.points){let e=Promise.resolve();this.blockDuration>0&&s.consumedPoints<=this.points+n&&(s.msBeforeNext=this.msBlockDuration,e=this._block(r,s.consumedPoints,this.msBlockDuration,o)),this.inMemoryBlockOnConsumed>0&&s.consumedPoints>=this.inMemoryBlockOnConsumed&&(this._inMemoryBlockedKeys.add(r,this.inMemoryBlockDuration),s.msBeforeNext=this.msInMemoryBlockDuration),e.then((()=>{t(s)})).catch((e=>{t(e)}))}else if(this.execEvenly&&s.msBeforeNext>0&&!s.isFirstInDuration){let t=Math.ceil(s.msBeforeNext/(s.remainingPoints+2));t<this.execEvenlyMinDelayMs&&(t=s.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(e,t,s)}else e(s)}_handleError(e,t,r,i,o){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};this.insuranceLimiter instanceof n?this.insuranceLimiter[t](o,s,a).then((e=>{r(e)})).catch((e=>{i(e)})):i(e)}getInMemoryBlockMsBeforeExpire(e){return this.inMemoryBlockOnConsumed>0?this._inMemoryBlockedKeys.msBeforeExpire(e):0}get inMemoryBlockOnConsumed(){return this._inMemoryBlockOnConsumed}set inMemoryBlockOnConsumed(e){if(this._inMemoryBlockOnConsumed=e?parseInt(e):0,this.inMemoryBlockOnConsumed>0&&this.points>this.inMemoryBlockOnConsumed)throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option')}get inMemoryBlockDuration(){return this._inMemoryBlockDuration}set inMemoryBlockDuration(e){if(this._inMemoryBlockDuration=e?parseInt(e):0,this.inMemoryBlockDuration>0&&0===this.inMemoryBlockOnConsumed)throw new Error("inMemoryBlockOnConsumed option must be set up")}get msInMemoryBlockDuration(){return 1e3*this._inMemoryBlockDuration}get insuranceLimiter(){return this._insuranceLimiter}set insuranceLimiter(e){if("undefined"!==typeof e&&!(e instanceof n))throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");this._insuranceLimiter=e,this._insuranceLimiter&&(this._insuranceLimiter.blockDuration=this.blockDuration,this._insuranceLimiter.execEvenly=this.execEvenly)}block(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=1e3*t;return this._block(this.getKey(e),this.points+1,n,r)}set(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=1e3*(r>=0?r:this.duration);return this._block(this.getKey(e),t,i,n)}consume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(((n,i)=>{const s=this.getKey(e),a=this.getInMemoryBlockMsBeforeExpire(s);if(a>0)return i(new o(0,a));this._upsert(s,t,1e3*this._getKeySecDuration(r),!1,r).then((e=>{this._afterConsume(n,i,s,t,e)})).catch((o=>{this._handleError(o,"consume",n,i,e,t,r)}))}))}penalty(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getKey(e);return new Promise(((i,o)=>{this._upsert(n,t,1e3*this._getKeySecDuration(r),!1,r).then((e=>{i(this._getRateLimiterRes(n,t,e))})).catch((n=>{this._handleError(n,"penalty",i,o,e,t,r)}))}))}reward(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getKey(e);return new Promise(((i,o)=>{this._upsert(n,-t,1e3*this._getKeySecDuration(r),!1,r).then((e=>{i(this._getRateLimiterRes(n,-t,e))})).catch((n=>{this._handleError(n,"reward",i,o,e,t,r)}))}))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.getKey(e);return new Promise(((n,i)=>{this._get(r,t).then((e=>{n(null===e||"undefined"===typeof e?null:this._getRateLimiterRes(r,0,e))})).catch((r=>{this._handleError(r,"get",n,i,e,t)}))}))}delete(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=this.getKey(e);return new Promise(((n,i)=>{this._delete(r,t).then((e=>{this._inMemoryBlockedKeys.delete(r),n(e)})).catch((r=>{this._handleError(r,"delete",n,i,e,t)}))}))}deleteInMemoryBlockedAll(){this._inMemoryBlockedKeys.delete()}_getRateLimiterRes(e,t,r){throw new Error("You have to implement the method '_getRateLimiterRes'!")}_block(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise(((i,s)=>{this._upsert(e,t,r,!0,n).then((()=>{i(new o(0,r>0?r:-1,t))})).catch((t=>{this._handleError(t,"block",i,s,this.parseKey(e),r/1e3,n)}))}))}_get(e){throw new Error("You have to implement the method '_get'!")}_delete(e){throw new Error("You have to implement the method '_delete'!")}_upsert(e,t,r){throw new Error("You have to implement the method '_upsert'!")}}},4066:(e,t,r)=>{const n=r(8855);e.exports=class{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length<1)throw new Error("RateLimiterUnion: at least one limiter have to be passed");t.forEach((e=>{if(!(e instanceof n))throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract")})),this._limiters=t}consume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise(((r,n)=>{const i=[];this._limiters.forEach((r=>{i.push(r.consume(e,t).catch((e=>({rejected:!0,rej:e}))))})),Promise.all(i).then((e=>{const t={};let i=!1;e.forEach((e=>{!0===e.rejected&&(i=!0)}));for(let r=0;r<e.length;r++)i&&!0===e[r].rejected?t[this._limiters[r].keyPrefix]=e[r].rej:i||(t[this._limiters[r].keyPrefix]=e[r]);i?n(t):r(t)}))}))}}},9682:e=>{e.exports=class{constructor(){this._keys={},this._addedKeysAmount=0}collectExpired(){const e=Date.now();Object.keys(this._keys).forEach((t=>{this._keys[t]<=e&&delete this._keys[t]})),this._addedKeysAmount=Object.keys(this._keys).length}add(e,t){this.addMs(e,1e3*t)}addMs(e,t){this._keys[e]=Date.now()+t,this._addedKeysAmount++,this._addedKeysAmount>999&&this.collectExpired()}msBeforeExpire(e){const t=this._keys[e];if(t&&t>=Date.now()){this.collectExpired();const e=Date.now();return t>=e?t-e:0}return 0}delete(e){e?delete this._keys[e]:Object.keys(this._keys).forEach((e=>{delete this._keys[e]}))}}},6704:(e,t,r)=>{const n=r(9682);e.exports=n},4327:(e,t,r)=>{const n=r(9359),i=r(4819);e.exports=class{constructor(){this._storage={}}incrby(e,t,r){if(this._storage[e]){const n=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return!this._storage[e].expiresAt||n>0?(this._storage[e].value=this._storage[e].value+t,new i(0,n,this._storage[e].value,!1)):this.set(e,t,r)}return this.set(e,t,r)}set(e,t,r){const o=1e3*r;return this._storage[e]&&this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),this._storage[e]=new n(t,o>0?new Date(Date.now()+o):null),o>0&&(this._storage[e].timeoutId=setTimeout((()=>{delete this._storage[e]}),o),this._storage[e].timeoutId.unref&&this._storage[e].timeoutId.unref()),new i(0,0===o?-1:o,this._storage[e].value,!0)}get(e){if(this._storage[e]){const t=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-(new Date).getTime():-1;return new i(0,t,this._storage[e].value,!1)}return null}delete(e){return!!this._storage[e]&&(this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),delete this._storage[e],!0)}}},9359:e=>{e.exports=class{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.value=e,this.expiresAt=t,this.timeoutId=r}get value(){return this._value}set value(e){this._value=parseInt(e)}get expiresAt(){return this._expiresAt}set expiresAt(e){e instanceof Date||!Number.isInteger(e)||(e=new Date(e)),this._expiresAt=e}get timeoutId(){return this._timeoutId}set timeoutId(e){this._timeoutId=e}}},4688:e=>{e.exports=class extends Error{constructor(e,t){super(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="CustomError",this.message=e,t&&(this.extra=t)}}},4463:(e,t,r)=>{"use strict";var n=r(2791),i=r(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,r,n,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,r,n){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),B=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var D,L=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function j(e,t){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=n.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case A:return"Fragment";case E:return"Portal";case k:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return z(e(t))}catch(r){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=V(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Z(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=K(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var r=K(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+K(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(te(r)){if(1<r.length)throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:K(r)}}function oe(e,t){var r=K(t.value),n=K(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=ge(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ae=null,Se=null;function ke(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function xe(e){Ae?Se?Se.push(e):Se=[e]:Ae=e}function Ie(){if(Ae){var e=Ae,t=Se;if(Se=Ae=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Te(e,t){return e(t)}function Pe(){}var Re=!1;function Ce(e,t,r){if(Re)return e(t,r);Re=!0;try{return Te(e,t,r)}finally{Re=!1,(null!==Ae||null!==Se)&&(Pe(),Ie())}}function Be(e,t){var r=e.stateNode;if(null===r)return null;var n=_i(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var Me=!1;if(l)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(le){Me=!1}function Oe(e,t,r,n,i,o,s,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(l){this.onError(l)}}var De=!1,Le=null,Ue=!1,Fe=null,je={onError:function(e){De=!0,Le=e}};function qe(e,t,r,n,i,o,s,a,c){De=!1,Le=null,Oe.apply(je,arguments)}function ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(o(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(n=i.return)){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Ke(i),e;if(s===n)return Ke(i),t;s=s.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,c=i.child;c;){if(c===r){a=!0,r=i,n=s;break}if(c===n){a=!0,n=i,r=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===r){a=!0,r=s,n=i;break}if(c===n){a=!0,n=s,r=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ze=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var ut=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&r;if(0!==s){var a=s&~i;0!==a?n=dt(a):0!==(o&=s)&&(n=dt(o))}else 0!==(s=r&~i)?n=dt(s):0!==o&&(n=dt(o));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-st(t)),n|=e[r],t&=~i;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-st(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,At,St,kt,xt=!1,It=[],Tt=null,Pt=null,Rt=null,Ct=new Map,Bt=new Map,Mt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(t.pointerId)}}function Dt(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=vi(e.target);if(null!==t){var r=ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=He(r)))return e.blockedOn=t,void kt(e.priority,(function(){At(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bi(r))&&Et(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);we=n,r.target.dispatchEvent(n),we=null,t.shift()}return!0}function Ft(e,t,r){Ut(e)&&r.delete(t)}function jt(){xt=!1,null!==Tt&&Ut(Tt)&&(Tt=null),null!==Pt&&Ut(Pt)&&(Pt=null),null!==Rt&&Ut(Rt)&&(Rt=null),Ct.forEach(Ft),Bt.forEach(Ft)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return qt(t,e)}if(0<It.length){qt(It[0],e);for(var r=1;r<It.length;r++){var n=It[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Tt&&qt(Tt,e),null!==Pt&&qt(Pt,e),null!==Rt&&qt(Rt,e),Ct.forEach(t),Bt.forEach(t),r=0;r<Mt.length;r++)(n=Mt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Mt.length&&null===(r=Mt[0]).blockedOn;)Lt(r),null===r.blockedOn&&Mt.shift()}var Ht=w.ReactCurrentBatchConfig,Kt=!0;function Vt(e,t,r,n){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=1,Wt(e,t,r,n)}finally{bt=i,Ht.transition=o}}function Gt(e,t,r,n){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=4,Wt(e,t,r,n)}finally{bt=i,Ht.transition=o}}function Wt(e,t,r,n){if(Kt){var i=Jt(e,t,r,n);if(null===i)Kn(e,t,n,Qt,r),Ot(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return Tt=Dt(Tt,e,t,r,n,i),!0;case"dragenter":return Pt=Dt(Pt,e,t,r,n,i),!0;case"mouseover":return Rt=Dt(Rt,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return Ct.set(o,Dt(Ct.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Bt.set(o,Dt(Bt.get(o)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Ot(e,n),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=Jt(e,t,r,n))&&Kn(e,t,n,Qt,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else Kn(e,t,n,null,r)}}var Qt=null;function Jt(e,t,r,n){if(Qt=null,null!==(e=vi(e=_e(n))))if(null===(t=ze(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,$t=null;function er(){if($t)return $t;var e,t,r=Xt,n=r.length,i="value"in Yt?Yt.value:Yt.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,o){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var or,sr,ar,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=ir(cr),lr=L({},cr,{view:0,detail:0}),dr=ir(lr),hr=L({},lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(or=e.screenX-ar.screenX,sr=e.screenY-ar.screenY):sr=or=0,ar=e),or)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),fr=ir(hr),pr=ir(L({},hr,{dataTransfer:0})),gr=ir(L({},lr,{relatedTarget:0})),mr=ir(L({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=L({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=ir(yr),br=ir(L({},cr,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ar(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Er[e])&&!!t[e]}function Sr(){return Ar}var kr=L({},lr,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_r[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xr=ir(kr),Ir=ir(L({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tr=ir(L({},lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Pr=ir(L({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rr=L({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cr=ir(Rr),Br=[9,13,27,32],Mr=l&&"CompositionEvent"in window,Nr=null;l&&"documentMode"in document&&(Nr=document.documentMode);var Or=l&&"TextEvent"in window&&!Nr,Dr=l&&(!Mr||Nr&&8<Nr&&11>=Nr),Lr=String.fromCharCode(32),Ur=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Br.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qr=!1;var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function Kr(e,t,r,n){xe(n),0<(t=Gn(t,"onChange")).length&&(r=new ur("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Vr=null,Gr=null;function Wr(e){Un(e,0)}function Qr(e){if(W(wi(e)))return e}function Jr(e,t){if("change"===e)return t}var Zr=!1;if(l){var Yr;if(l){var Xr="oninput"in document;if(!Xr){var $r=document.createElement("div");$r.setAttribute("oninput","return;"),Xr="function"===typeof $r.oninput}Yr=Xr}else Yr=!1;Zr=Yr&&(!document.documentMode||9<document.documentMode)}function en(){Vr&&(Vr.detachEvent("onpropertychange",tn),Gr=Vr=null)}function tn(e){if("value"===e.propertyName&&Qr(Gr)){var t=[];Kr(t,Gr,e,_e(e)),Ce(Wr,t)}}function rn(e,t,r){"focusin"===e?(en(),Gr=r,(Vr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qr(Gr)}function on(e,t){if("click"===e)return Qr(t)}function sn(e,t){if("input"===e||"change"===e)return Qr(t)}var an="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cn(e,t){if(an(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!d.call(t,i)||!an(e[i],t[i]))return!1}return!0}function un(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ln(e,t){var r,n=un(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=un(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Q((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=ln(r,o);var s=ln(r,n);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gn=l&&"documentMode"in document&&11>=document.documentMode,mn=null,yn=null,vn=null,bn=!1;function wn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==mn||mn!==Q(n)||("selectionStart"in(n=mn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&cn(vn,n)||(vn=n,0<(n=Gn(yn,"onSelect")).length&&(t=new ur("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=mn)))}function _n(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var En={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionend:_n("Transition","TransitionEnd")},An={},Sn={};function kn(e){if(An[e])return An[e];if(!En[e])return e;var t,r=En[e];for(t in r)if(r.hasOwnProperty(t)&&t in Sn)return An[e]=r[t];return e}l&&(Sn=document.createElement("div").style,"AnimationEvent"in window||(delete En.animationend.animation,delete En.animationiteration.animation,delete En.animationstart.animation),"TransitionEvent"in window||delete En.transitionend.transition);var xn=kn("animationend"),In=kn("animationiteration"),Tn=kn("animationstart"),Pn=kn("transitionend"),Rn=new Map,Cn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(e,t){Rn.set(e,t),c(t,[e])}for(var Mn=0;Mn<Cn.length;Mn++){var Nn=Cn[Mn];Bn(Nn.toLowerCase(),"on"+(Nn[0].toUpperCase()+Nn.slice(1)))}Bn(xn,"onAnimationEnd"),Bn(In,"onAnimationIteration"),Bn(Tn,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(Pn,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var On="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dn=new Set("cancel close invalid load scroll toggle".split(" ").concat(On));function Ln(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,s,a,c,u){if(qe.apply(this,arguments),De){if(!De)throw Error(o(198));var l=Le;De=!1,Le=null,Ue||(Ue=!0,Fe=l)}}(n,t,void 0,e),e.currentTarget=null}function Un(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Ln(i,a,u),o=c}else for(s=0;s<n.length;s++){if(c=(a=n[s]).instance,u=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Ln(i,a,u),o=c}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fn(e,t){var r=t[gi];void 0===r&&(r=t[gi]=new Set);var n=e+"__bubble";r.has(n)||(Hn(t,e,2,!1),r.add(n))}function jn(e,t,r){var n=0;t&&(n|=4),Hn(r,e,n,t)}var qn="_reactListening"+Math.random().toString(36).slice(2);function zn(e){if(!e[qn]){e[qn]=!0,s.forEach((function(t){"selectionchange"!==t&&(Dn.has(t)||jn(t,!1,e),jn(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qn]||(t[qn]=!0,jn("selectionchange",!1,t))}}function Hn(e,t,r,n){switch(Zt(t)){case 1:var i=Vt;break;case 4:i=Gt;break;default:i=Wt}r=i.bind(null,t,r,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Kn(e,t,r,n,i){var o=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var a=n.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=n.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(c=s.tag)||6===c){n=o=s;continue e}a=a.parentNode}}n=n.return}Ce((function(){var n=o,i=_e(r),s=[];e:{var a=Rn.get(e);if(void 0!==a){var c=ur,u=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":c=xr;break;case"focusin":u="focus",c=gr;break;case"focusout":u="blur",c=gr;break;case"beforeblur":case"afterblur":c=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Tr;break;case xn:case In:case Tn:c=mr;break;case Pn:c=Pr;break;case"scroll":c=dr;break;case"wheel":c=Cr;break;case"copy":case"cut":case"paste":c=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Ir}var l=0!==(4&t),d=!l&&"scroll"===e,h=l?null!==a?a+"Capture":null:a;l=[];for(var f,p=n;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=Be(p,h))&&l.push(Vn(p,g,f)))),d)break;p=p.return}0<l.length&&(a=new c(a,u,null,r,i),s.push({event:a,listeners:l}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===we||!(u=r.relatedTarget||r.fromElement)||!vi(u)&&!u[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=n,null!==(u=(u=r.relatedTarget||r.toElement)?vi(u):null)&&(u!==(d=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=n),c!==u)){if(l=fr,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Ir,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==c?a:wi(c),f=null==u?a:wi(u),(a=new l(g,p+"leave",c,r,i)).target=d,a.relatedTarget=f,g=null,vi(i)===n&&((l=new l(h,p+"enter",u,r,i)).target=f,l.relatedTarget=d,g=l),d=g,c&&u)e:{for(h=u,p=0,f=l=c;f;f=Wn(f))p++;for(f=0,g=h;g;g=Wn(g))f++;for(;0<p-f;)l=Wn(l),p--;for(;0<f-p;)h=Wn(h),f--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wn(l),h=Wn(h)}l=null}else l=null;null!==c&&Qn(s,a,c,l,!1),null!==u&&null!==d&&Qn(s,d,u,l,!0)}if("select"===(c=(a=n?wi(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var m=Jr;else if(Hr(a))if(Zr)m=sn;else{m=nn;var y=rn}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=on);switch(m&&(m=m(e,n))?Kr(s,m,r,i):(y&&y(e,a,n),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=n?wi(n):window,e){case"focusin":(Hr(y)||"true"===y.contentEditable)&&(mn=y,yn=n,vn=null);break;case"focusout":vn=yn=mn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,wn(s,r,i);break;case"selectionchange":if(gn)break;case"keydown":case"keyup":wn(s,r,i)}var v;if(Mr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qr?Fr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Dr&&"ko"!==r.locale&&(qr||"onCompositionStart"!==b?"onCompositionEnd"===b&&qr&&(v=er()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,qr=!0)),0<(y=Gn(n,b)).length&&(b=new br(b,e,null,r,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=jr(r))&&(b.data=v))),(v=Or?function(e,t){switch(e){case"compositionend":return jr(t);case"keypress":return 32!==t.which?null:(Ur=!0,Lr);case"textInput":return(e=t.data)===Lr&&Ur?null:e;default:return null}}(e,r):function(e,t){if(qr)return"compositionend"===e||!Mr&&Fr(e,t)?(e=er(),$t=Xt=Yt=null,qr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Gn(n,"onBeforeInput")).length&&(i=new br("onBeforeInput","beforeinput",null,r,i),s.push({event:i,listeners:n}),i.data=v))}Un(s,t)}))}function Vn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gn(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Be(e,r))&&n.unshift(Vn(e,o,i)),null!=(o=Be(e,t))&&n.push(Vn(e,o,i))),e=e.return}return n}function Wn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qn(e,t,r,n,i){for(var o=t._reactName,s=[];null!==r&&r!==n;){var a=r,c=a.alternate,u=a.stateNode;if(null!==c&&c===n)break;5===a.tag&&null!==u&&(a=u,i?null!=(c=Be(r,o))&&s.unshift(Vn(r,c,a)):i||null!=(c=Be(r,o))&&s.push(Vn(r,c,a))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Jn=/\r\n?/g,Zn=/\u0000|\uFFFD/g;function Yn(e){return("string"===typeof e?e:""+e).replace(Jn,"\n").replace(Zn,"")}function Xn(e,t,r){if(t=Yn(t),Yn(e)!==t&&r)throw Error(o(425))}function $n(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ni;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void zt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,gi="__reactEvents$"+di,mi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pi]||r[hi]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=li(e);null!==e;){if(r=e[hi])return r;e=li(e)}return t}r=(e=r).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var Ei=[],Ai=-1;function Si(e){return{current:e}}function ki(e){0>Ai||(e.current=Ei[Ai],Ei[Ai]=null,Ai--)}function xi(e,t){Ai++,Ei[Ai]=e.current,e.current=t}var Ii={},Ti=Si(Ii),Pi=Si(!1),Ri=Ii;function Ci(e,t){var r=e.type.contextTypes;if(!r)return Ii;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Bi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){ki(Pi),ki(Ti)}function Ni(e,t,r){if(Ti.current!==Ii)throw Error(o(168));xi(Ti,t),xi(Pi,r)}function Oi(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return L({},r,n)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ri=Ti.current,xi(Ti,e),xi(Pi,Pi.current),!0}function Li(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=Oi(e,t,Ri),n.__reactInternalMemoizedMergedChildContext=e,ki(Pi),ki(Ti),xi(Ti,e)):ki(Pi),xi(Pi,r)}var Ui=null,Fi=!1,ji=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=bt;try{var r=Ui;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Ui=null,Fi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We($e,zi),i}finally{bt=t,ji=!1}}return null}var Hi=[],Ki=0,Vi=null,Gi=0,Wi=[],Qi=0,Ji=null,Zi=1,Yi="";function Xi(e,t){Hi[Ki++]=Gi,Hi[Ki++]=Vi,Vi=e,Gi=t}function $i(e,t,r){Wi[Qi++]=Zi,Wi[Qi++]=Yi,Wi[Qi++]=Ji,Ji=e;var n=Zi;e=Yi;var i=32-st(n)-1;n&=~(1<<i),r+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Zi=1<<32-st(t)+i|r<<i|n,Yi=o+e}else Zi=1<<o|r<<i|n,Yi=e}function eo(e){null!==e.return&&(Xi(e,1),$i(e,1,0))}function to(e){for(;e===Vi;)Vi=Hi[--Ki],Hi[Ki]=null,Gi=Hi[--Ki],Hi[Ki]=null;for(;e===Ji;)Ji=Wi[--Qi],Wi[Qi]=null,Yi=Wi[--Qi],Wi[Qi]=null,Zi=Wi[--Qi],Wi[Qi]=null}var ro=null,no=null,io=!1,oo=null;function so(e,t){var r=Bu(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ao(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,no=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,no=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ji?{id:Zi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Bu(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ro=e,no=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=no;if(t){var r=t;if(!ao(e,t)){if(co(e))throw Error(o(418));t=ui(r.nextSibling);var n=ro;t&&ao(e,t)?so(n,r):(e.flags=-4097&e.flags|2,io=!1,ro=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,ro=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function ho(e){if(e!==ro)return!1;if(!io)return lo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=no)){if(co(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ui(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){no=ui(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}no=null}}else no=ro?ui(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=no;e;)e=ui(e.nextSibling)}function po(){no=ro=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=w.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var vo=Si(null),bo=null,wo=null,_o=null;function Eo(){_o=wo=bo=null}function Ao(e){var t=vo.current;ki(vo),e._currentValue=t}function So(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ko(e,t){bo=e,_o=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function xo(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var Io=null;function To(e){null===Io?Io=[e]:Io.push(e)}function Po(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,To(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ro(e,n)}function Ro(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Co=!1;function Bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function No(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oo(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Pc)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ro(e,r)}return null===(i=n.interleaved)?(t.next=t,To(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ro(e,r)}function Do(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function Lo(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=s:o=o.next=s,r=r.next}while(null!==r);null===o?i=o=t:o=o.next=t}else i=o=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Uo(e,t,r,n){var i=e.updateQueue;Co=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,u=c.next;c.next=null,null===s?o=u:s.next=u,s=c;var l=e.alternate;null!==l&&((a=(l=l.updateQueue).lastBaseUpdate)!==s&&(null===a?l.firstBaseUpdate=u:a.next=u,l.lastBaseUpdate=c))}if(null!==o){var d=i.baseState;for(s=0,l=u=c=null,a=o;;){var h=a.lane,f=a.eventTime;if((n&h)===h){null!==l&&(l=l.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(h=t,f=r,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Co=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===l?(u=l=f,c=d):l=l.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Lc|=s,e.lanes=s,e.memoizedState=d}}function Fo(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(o(191,i));i.call(n)}}}var jo=(new n.Component).refs;function qo(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var zo={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tu(),i=ru(e),o=No(n,i);o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=Oo(e,o,i))&&(nu(t,e,i,n),Do(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tu(),i=ru(e),o=No(n,i);o.tag=1,o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=Oo(e,o,i))&&(nu(t,e,i,n),Do(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tu(),n=ru(e),i=No(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oo(e,i,n))&&(nu(t,e,n,r),Do(t,e,n))}};function Ho(e,t,r,n,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!cn(r,n)||!cn(i,o))}function Ko(e,t,r){var n=!1,i=Ii,o=t.contextType;return"object"===typeof o&&null!==o?o=xo(o):(i=Bi(t)?Ri:Ti.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ci(e,i):Ii),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zo,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Vo(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&zo.enqueueReplaceState(t,t.state,null)}function Go(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=jo,Bo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=xo(o):(o=Bi(t)?Ri:Ti.current,i.context=Ci(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(qo(e,t,o,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zo.enqueueReplaceState(i,i.state,null),Uo(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wo(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var i=n,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===jo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jo(e){return(0,e._init)(e._payload)}function Zo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,r,n){return null===t||6!==t.tag?((t=Uu(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function u(e,t,r,n){var o=r.type;return o===A?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===B&&Jo(o)===t.type)?((n=i(t,r.props)).ref=Wo(e,t,r),n.return=e,n):((n=Ou(r.type,r.key,r.props,null,e.mode,n)).ref=Wo(e,t,r),n.return=e,n)}function l(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fu(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function d(e,t,r,n,o){return null===t||7!==t.tag?((t=Du(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uu(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(r=Ou(t.type,t.key,t.props,null,e.mode,r)).ref=Wo(e,null,t),r.return=e,r;case E:return(t=Fu(t,e.mode,r)).return=e,t;case B:return h(e,(0,t._init)(t._payload),r)}if(te(t)||O(t))return(t=Du(t,e.mode,r,null)).return=e,t;Qo(e,t)}return null}function f(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:c(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return r.key===i?u(e,t,r,n):null;case E:return r.key===i?l(e,t,r,n):null;case B:return f(e,t,(i=r._init)(r._payload),n)}if(te(r)||O(r))return null!==i?null:d(e,t,r,n,null);Qo(e,r)}return null}function p(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return c(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case E:return l(t,e=e.get(null===n.key?r:n.key)||null,n,i);case B:return p(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||O(n))return d(t,e=e.get(r)||null,n,i,null);Qo(t,n)}return null}function g(i,o,a,c){for(var u=null,l=null,d=o,g=o=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(i,d,a[g],c);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,g),null===l?u=y:l.sibling=y,l=y,d=m}if(g===a.length)return r(i,d),io&&Xi(i,g),u;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],c))&&(o=s(d,o,g),null===l?u=d:l.sibling=d,l=d);return io&&Xi(i,g),u}for(d=n(i,d);g<a.length;g++)null!==(m=p(d,i,g,a[g],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),o=s(m,o,g),null===l?u=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(i,e)})),io&&Xi(i,g),u}function m(i,a,c,u){var l=O(c);if("function"!==typeof l)throw Error(o(150));if(null==(c=l.call(c)))throw Error(o(151));for(var d=l=null,g=a,m=a=0,y=null,v=c.next();null!==g&&!v.done;m++,v=c.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,u);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),a=s(b,a,m),null===d?l=b:d.sibling=b,d=b,g=y}if(v.done)return r(i,g),io&&Xi(i,m),l;if(null===g){for(;!v.done;m++,v=c.next())null!==(v=h(i,v.value,u))&&(a=s(v,a,m),null===d?l=v:d.sibling=v,d=v);return io&&Xi(i,m),l}for(g=n(i,g);!v.done;m++,v=c.next())null!==(v=p(g,i,m,v.value,u))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=s(v,a,m),null===d?l=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(i,e)})),io&&Xi(i,m),l}return function e(n,o,s,c){if("object"===typeof s&&null!==s&&s.type===A&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var u=s.key,l=o;null!==l;){if(l.key===u){if((u=s.type)===A){if(7===l.tag){r(n,l.sibling),(o=i(l,s.props.children)).return=n,n=o;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===B&&Jo(u)===l.type){r(n,l.sibling),(o=i(l,s.props)).ref=Wo(n,l,s),o.return=n,n=o;break e}r(n,l);break}t(n,l),l=l.sibling}s.type===A?((o=Du(s.props.children,n.mode,c,s.key)).return=n,n=o):((c=Ou(s.type,s.key,s.props,null,n.mode,c)).ref=Wo(n,o,s),c.return=n,n=c)}return a(n);case E:e:{for(l=s.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){r(n,o.sibling),(o=i(o,s.children||[])).return=n,n=o;break e}r(n,o);break}t(n,o),o=o.sibling}(o=Fu(s,n.mode,c)).return=n,n=o}return a(n);case B:return e(n,o,(l=s._init)(s._payload),c)}if(te(s))return g(n,o,s,c);if(O(s))return m(n,o,s,c);Qo(n,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(r(n,o.sibling),(o=i(o,s)).return=n,n=o):(r(n,o),(o=Uu(s,n.mode,c)).return=n,n=o),a(n)):r(n,o)}}var Yo=Zo(!0),Xo=Zo(!1),$o={},es=Si($o),ts=Si($o),rs=Si($o);function ns(e){if(e===$o)throw Error(o(174));return e}function is(e,t){switch(xi(rs,t),xi(ts,e),xi(es,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(es),xi(es,t)}function os(){ki(es),ki(ts),ki(rs)}function ss(e){ns(rs.current);var t=ns(es.current),r=ce(t,e.type);t!==r&&(xi(ts,e),xi(es,r))}function as(e){ts.current===e&&(ki(es),ki(ts))}var cs=Si(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ls=[];function ds(){for(var e=0;e<ls.length;e++)ls[e]._workInProgressVersionPrimary=null;ls.length=0}var hs=w.ReactCurrentDispatcher,fs=w.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,ys=null,vs=!1,bs=!1,ws=0,_s=0;function Es(){throw Error(o(321))}function As(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!an(e[r],t[r]))return!1;return!0}function Ss(e,t,r,n,i,s){if(ps=s,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hs.current=null===e||null===e.memoizedState?aa:ca,e=r(n,i),bs){s=0;do{if(bs=!1,ws=0,25<=s)throw Error(o(301));s+=1,ys=ms=null,t.updateQueue=null,hs.current=ua,e=r(n,i)}while(bs)}if(hs.current=sa,t=null!==ms&&null!==ms.next,ps=0,ys=ms=gs=null,vs=!1,t)throw Error(o(300));return e}function ks(){var e=0!==ws;return ws=0,e}function xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?gs.memoizedState=ys=e:ys=ys.next=e,ys}function Is(){if(null===ms){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===ys?gs.memoizedState:ys.next;if(null!==t)ys=t,ms=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===ys?gs.memoizedState=ys=e:ys=ys.next=e}return ys}function Ts(e,t){return"function"===typeof t?t(e):t}function Ps(e){var t=Is(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=ms,i=n.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(null!==i){s=i.next,n=n.baseState;var c=a=null,u=null,l=s;do{var d=l.lane;if((ps&d)===d)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:e(n,l.action);else{var h={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=h,a=n):u=u.next=h,gs.lanes|=d,Lc|=d}l=l.next}while(null!==l&&l!==s);null===u?a=n:u.next=c,an(n,t.memoizedState)||(wa=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=u,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{s=i.lane,gs.lanes|=s,Lc|=s,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Rs(e){var t=Is(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);an(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Cs(){}function Bs(e,t){var r=gs,n=Is(),i=t(),s=!an(n.memoizedState,i);if(s&&(n.memoizedState=i,wa=!0),n=n.queue,Ks(Os.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(r.flags|=2048,Fs(9,Ns.bind(null,r,n,i,t),void 0,null),null===Rc)throw Error(o(349));0!==(30&ps)||Ms(r,t,i)}return i}function Ms(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ns(e,t,r,n){t.value=r,t.getSnapshot=n,Ds(t)&&Ls(e)}function Os(e,t,r){return r((function(){Ds(t)&&Ls(e)}))}function Ds(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!an(e,r)}catch(n){return!0}}function Ls(e){var t=Ro(e,1);null!==t&&nu(t,e,1,-1)}function Us(e){var t=xs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t.queue=e,e=e.dispatch=ra.bind(null,gs,e),[t.memoizedState,e]}function Fs(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function js(){return Is().memoizedState}function qs(e,t,r,n){var i=xs();gs.flags|=e,i.memoizedState=Fs(1|t,r,void 0,void 0===n?null:n)}function zs(e,t,r,n){var i=Is();n=void 0===n?null:n;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==n&&As(n,s.deps))return void(i.memoizedState=Fs(t,r,o,n))}gs.flags|=e,i.memoizedState=Fs(1|t,r,o,n)}function Hs(e,t){return qs(8390656,8,e,t)}function Ks(e,t){return zs(2048,8,e,t)}function Vs(e,t){return zs(4,2,e,t)}function Gs(e,t){return zs(4,4,e,t)}function Ws(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qs(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,zs(4,4,Ws.bind(null,t,e),r)}function Js(){}function Zs(e,t){var r=Is();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&As(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ys(e,t){var r=Is();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&As(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Xs(e,t,r){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=r):(an(r,t)||(r=gt(),gs.lanes|=r,Lc|=r,e.baseState=!0),t)}function $s(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=fs.transition;fs.transition={};try{e(!1),t()}finally{bt=r,fs.transition=n}}function ea(){return Is().memoizedState}function ta(e,t,r){var n=ru(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},na(e))ia(t,r);else if(null!==(r=Po(e,t,r,n))){nu(r,e,n,tu()),oa(r,t,n)}}function ra(e,t,r){var n=ru(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(na(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,an(a,s)){var c=t.interleaved;return null===c?(i.next=i,To(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(u){}null!==(r=Po(e,t,i,n))&&(nu(r,e,n,i=tu()),oa(r,t,n))}}function na(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function ia(e,t){bs=vs=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function oa(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var sa={readContext:xo,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},aa={readContext:xo,useCallback:function(e,t){return xs().memoizedState=[e,void 0===t?null:t],e},useContext:xo,useEffect:Hs,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,qs(4194308,4,Ws.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qs(4194308,4,e,t)},useInsertionEffect:function(e,t){return qs(4,2,e,t)},useMemo:function(e,t){var r=xs();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=xs();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ta.bind(null,gs,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},xs().memoizedState=e},useState:Us,useDebugValue:Js,useDeferredValue:function(e){return xs().memoizedState=e},useTransition:function(){var e=Us(!1),t=e[0];return e=$s.bind(null,e[1]),xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=gs,i=xs();if(io){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===Rc)throw Error(o(349));0!==(30&ps)||Ms(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,Hs(Os.bind(null,n,s,e),[e]),n.flags|=2048,Fs(9,Ns.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=xs(),t=Rc.identifierPrefix;if(io){var r=Yi;t=":"+t+"R"+(r=(Zi&~(1<<32-st(Zi)-1)).toString(32)+r),0<(r=ws++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=_s++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:xo,useCallback:Zs,useContext:xo,useEffect:Ks,useImperativeHandle:Qs,useInsertionEffect:Vs,useLayoutEffect:Gs,useMemo:Ys,useReducer:Ps,useRef:js,useState:function(){return Ps(Ts)},useDebugValue:Js,useDeferredValue:function(e){return Xs(Is(),ms.memoizedState,e)},useTransition:function(){return[Ps(Ts)[0],Is().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Bs,useId:ea,unstable_isNewReconciler:!1},ua={readContext:xo,useCallback:Zs,useContext:xo,useEffect:Ks,useImperativeHandle:Qs,useInsertionEffect:Vs,useLayoutEffect:Gs,useMemo:Ys,useReducer:Rs,useRef:js,useState:function(){return Rs(Ts)},useDebugValue:Js,useDeferredValue:function(e){var t=Is();return null===ms?t.memoizedState=e:Xs(t,ms.memoizedState,e)},useTransition:function(){return[Rs(Ts)[0],Is().memoizedState]},useMutableSource:Cs,useSyncExternalStore:Bs,useId:ea,unstable_isNewReconciler:!1};function la(e,t){try{var r="",n=t;do{r+=q(n),n=n.return}while(n);var i=r}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,r){(r=No(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Vc||(Vc=!0,Gc=n),ha(0,t)},r}function ga(e,t,r){(r=No(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){ha(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){ha(0,t),"function"!==typeof n&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ma(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new fa;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=xu.bind(null,e,t,r),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,r,n,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=No(-1,1)).tag=2,Oo(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=w.ReactCurrentOwner,wa=!1;function _a(e,t,r,n){t.child=null===e?Xo(t,null,r,n):Yo(t,e.child,r,n)}function Ea(e,t,r,n,i){r=r.render;var o=t.ref;return ko(t,i),n=Ss(e,t,r,n,o,i),r=ks(),null===e||wa?(io&&r&&eo(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Va(e,t,i))}function Aa(e,t,r,n,i){if(null===e){var o=r.type;return"function"!==typeof o||Mu(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ou(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,n,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((r=null!==(r=r.compare)?r:cn)(s,n)&&e.ref===t.ref)return Va(e,t,i)}return t.flags|=1,(e=Nu(o,n)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,r,n,i){if(null!==e){var o=e.memoizedProps;if(cn(o,n)&&e.ref===t.ref){if(wa=!1,t.pendingProps=n=o,0===(e.lanes&i))return t.lanes=e.lanes,Va(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ia(e,t,r,n,i)}function ka(e,t,r){var n=t.pendingProps,i=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Nc,Mc),Mc|=r;else{if(0===(1073741824&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Nc,Mc),Mc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,xi(Nc,Mc),Mc|=n}else null!==o?(n=o.baseLanes|r,t.memoizedState=null):n=r,xi(Nc,Mc),Mc|=n;return _a(e,t,i,r),t.child}function xa(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ia(e,t,r,n,i){var o=Bi(r)?Ri:Ti.current;return o=Ci(t,o),ko(t,i),r=Ss(e,t,r,n,o,i),n=ks(),null===e||wa?(io&&n&&eo(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Va(e,t,i))}function Ta(e,t,r,n,i){if(Bi(r)){var o=!0;Di(t)}else o=!1;if(ko(t,i),null===t.stateNode)Ka(e,t),Ko(t,r,n),Go(t,r,n,i),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var c=s.context,u=r.contextType;"object"===typeof u&&null!==u?u=xo(u):u=Ci(t,u=Bi(r)?Ri:Ti.current);var l=r.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==n||c!==u)&&Vo(t,s,n,u),Co=!1;var h=t.memoizedState;s.state=h,Uo(t,n,s,i),c=t.memoizedState,a!==n||h!==c||Pi.current||Co?("function"===typeof l&&(qo(t,r,l,n),c=t.memoizedState),(a=Co||Ho(t,r,a,n,h,c,u))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Mo(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:yo(t.type,a),s.props=u,d=t.pendingProps,h=s.context,"object"===typeof(c=r.contextType)&&null!==c?c=xo(c):c=Ci(t,c=Bi(r)?Ri:Ti.current);var f=r.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==c)&&Vo(t,s,n,c),Co=!1,h=t.memoizedState,s.state=h,Uo(t,n,s,i);var p=t.memoizedState;a!==d||h!==p||Pi.current||Co?("function"===typeof f&&(qo(t,r,f,n),p=t.memoizedState),(u=Co||Ho(t,r,u,n,h,p,c)||!1)?(l||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,p,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,p,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),s.props=n,s.state=p,s.context=c,n=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Pa(e,t,r,n,o,i)}function Pa(e,t,r,n,i,o){xa(e,t);var s=0!==(128&t.flags);if(!n&&!s)return i&&Li(t,r,!1),Va(e,t,o);n=t.stateNode,ba.current=t;var a=s&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=Yo(t,e.child,null,o),t.child=Yo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=n.state,i&&Li(t,r,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),is(e,t.containerInfo)}function Ca(e,t,r,n,i){return po(),go(i),t.flags|=256,_a(e,t,r,n),t.child}var Ba,Ma,Na,Oa,Da={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,r){var n,i=t.pendingProps,s=cs.current,a=!1,c=0!==(128&t.flags);if((n=c)||(n=(null===e||null!==e.memoizedState)&&0!==(2&s)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),xi(cs,1&s),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Lu(c,i,0,null),e=Du(e,i,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(r),t.memoizedState=Da,e):Fa(t,c));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,i,s,a){if(r)return 256&t.flags?(t.flags&=-257,ja(e,t,a,n=da(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Lu({mode:"visible",children:n.children},i,0,null),(s=Du(s,i,a,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!==(1&t.mode)&&Yo(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Da,s);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var c=n.dgst;return n=c,ja(e,t,a,n=da(s=Error(o(419)),n,void 0))}if(c=0!==(a&e.childLanes),wa||c){if(null!==(n=Rc)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ro(e,i),nu(n,e,i,-1))}return mu(),ja(e,t,a,n=da(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,no=ui(i.nextSibling),ro=t,io=!0,oo=null,null!==e&&(Wi[Qi++]=Zi,Wi[Qi++]=Yi,Wi[Qi++]=Ji,Zi=e.id,Yi=e.overflow,Ji=t),t=Fa(t,n.children),t.flags|=4096,t)}(e,t,c,i,n,s,r);if(a){a=i.fallback,c=t.mode,n=(s=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Nu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==n?a=Nu(n,a):(a=Du(a,c,r,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?La(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~r,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Nu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Lu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,r,n){return null!==n&&go(n),Yo(t,e.child,null,r),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qa(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),So(e.return,t,r)}function za(e,t,r,n,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Ha(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(_a(e,t,n.children,r),0!==(2&(n=cs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qa(e,r,t);else if(19===e.tag)qa(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(xi(cs,n),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===us(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),za(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===us(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}za(t,!0,r,null,o);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Va(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Lc|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Nu(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Nu(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Qa(e,t,r){var n=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Bi(t.type)&&Mi(),Wa(t),null;case 3:return n=t.stateNode,os(),ki(Pi),ki(Ti),ds(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(au(oo),oo=null))),Ma(e,t),Wa(t),null;case 5:as(t);var i=ns(rs.current);if(r=t.type,null!==e&&null!=t.stateNode)Na(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(o(166));return Wa(t),null}if(e=ns(es.current),ho(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[hi]=t,n[fi]=s,e=0!==(1&t.mode),r){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(i=0;i<On.length;i++)Fn(On[i],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":Z(n,s),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Fn("invalid",n);break;case"textarea":ie(n,s),Fn("invalid",n)}for(var c in ve(r,s),i=null,s)if(s.hasOwnProperty(c)){var u=s[c];"children"===c?"string"===typeof u?n.textContent!==u&&(!0!==s.suppressHydrationWarning&&Xn(n.textContent,u,e),i=["children",u]):"number"===typeof u&&n.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Xn(n.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&Fn("scroll",n)}switch(r){case"input":G(n),$(n,s,!0);break;case"textarea":G(n),se(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=$n)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),"select"===r&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[hi]=t,e[fi]=n,Ba(e,t,!1,!1),t.stateNode=e;e:{switch(c=be(r,n),r){case"dialog":Fn("cancel",e),Fn("close",e),i=n;break;case"iframe":case"object":case"embed":Fn("load",e),i=n;break;case"video":case"audio":for(i=0;i<On.length;i++)Fn(On[i],e);i=n;break;case"source":Fn("error",e),i=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),i=n;break;case"details":Fn("toggle",e),i=n;break;case"input":Z(e,n),i=J(e,n),Fn("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=L({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),Fn("invalid",e)}for(s in ve(r,i),u=i)if(u.hasOwnProperty(s)){var l=u[s];"style"===s?me(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===s?"string"===typeof l?("textarea"!==r||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Fn("scroll",e):null!=l&&b(e,s,l,c))}switch(r){case"input":G(e),$(e,n,!1);break;case"textarea":G(e),se(e);break;case"option":null!=n.value&&e.setAttribute("value",""+K(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?re(e,!!n.multiple,s,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$n)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(r=ns(rs.current),ns(es.current),ho(t)){if(n=t.stateNode,r=t.memoizedProps,n[hi]=t,(s=n.nodeValue!==r)&&null!==(e=ro))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[hi]=t,t.stateNode=n}return Wa(t),null;case 13:if(ki(cs),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==no&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),s=!1}else null!==oo&&(au(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&cs.current)?0===Oc&&(Oc=3):mu())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return os(),Ma(e,t),null===e&&zn(t.stateNode.containerInfo),Wa(t),null;case 10:return Ao(t.type._context),Wa(t),null;case 19:if(ki(cs),null===(s=t.memoizedState))return Wa(t),null;if(n=0!==(128&t.flags),null===(c=s.rendering))if(n)Ga(s,!1);else{if(0!==Oc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=us(e))){for(t.flags|=128,Ga(s,!1),null!==(n=c.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return xi(cs,1&cs.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>Hc&&(t.flags|=128,n=!0,Ga(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=us(c))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!io)return Wa(t),null}else 2*Ye()-s.renderingStartTime>Hc&&1073741824!==r&&(t.flags|=128,n=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=s.last)?r.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,r=cs.current,xi(cs,n?1&r|2:1&r),t):(Wa(t),null);case 22:case 23:return hu(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Mc)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ja(e,t){switch(to(t),t.tag){case 1:return Bi(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),ki(Pi),ki(Ti),ds(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(ki(cs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(cs),null;case 4:return os(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Ba=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ma=function(){},Na=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ns(es.current);var o,s=null;switch(r){case"input":i=J(e,i),n=J(e,n),s=[];break;case"select":i=L({},i,{value:void 0}),n=L({},n,{value:void 0}),s=[];break;case"textarea":i=ne(e,i),n=ne(e,n),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=$n)}for(l in ve(r,n),r=null,i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var c=i[l];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(a.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var u=n[l];if(c=null!=i?i[l]:void 0,n.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(s||(s=[]),s.push(l,r)),r=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(s=s||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(a.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Fn("scroll",e),s||c===u||(s=[])):(s=s||[]).push(l,u))}r&&(s=s||[]).push("style",r);var l=s;(t.updateQueue=l)&&(t.flags|=4)}},Oa=function(e,t,r,n){r!==n&&(t.flags|=4)};var Za=!1,Ya=!1,Xa="function"===typeof WeakSet?WeakSet:Set,$a=null;function ec(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){ku(e,t,n)}else r.current=null}function tc(e,t,r){try{r()}catch(n){ku(e,t,n)}}var rc=!1;function nc(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tc(t,r,o)}i=i.next}while(i!==n)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function oc(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function sc(e){var t=e.alternate;null!==t&&(e.alternate=null,sc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=$n));else if(4!==n&&null!==(e=e.child))for(uc(e,t,r),e=e.sibling;null!==e;)uc(e,t,r),e=e.sibling}function lc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(lc(e,t,r),e=e.sibling;null!==e;)lc(e,t,r),e=e.sibling}var dc=null,hc=!1;function fc(e,t,r){for(r=r.child;null!==r;)pc(e,t,r),r=r.sibling}function pc(e,t,r){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,r)}catch(a){}switch(r.tag){case 5:Ya||ec(r,t);case 6:var n=dc,i=hc;dc=null,fc(e,t,r),hc=i,null!==(dc=n)&&(hc?(e=dc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):dc.removeChild(r.stateNode));break;case 18:null!==dc&&(hc?(e=dc,r=r.stateNode,8===e.nodeType?ci(e.parentNode,r):1===e.nodeType&&ci(e,r),zt(e)):ci(dc,r.stateNode));break;case 4:n=dc,i=hc,dc=r.stateNode.containerInfo,hc=!0,fc(e,t,r),dc=n,hc=i;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tc(r,t,s),i=i.next}while(i!==n)}fc(e,t,r);break;case 1:if(!Ya&&(ec(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){ku(r,t,a)}fc(e,t,r);break;case 21:fc(e,t,r);break;case 22:1&r.mode?(Ya=(n=Ya)||null!==r.memoizedState,fc(e,t,r),Ya=n):fc(e,t,r);break;default:fc(e,t,r)}}function gc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Xa),t.forEach((function(t){var n=Pu.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function mc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:dc=c.stateNode,hc=!1;break e;case 3:case 4:dc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===dc)throw Error(o(160));pc(s,a,i),dc=null,hc=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(l){ku(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),vc(e),4&n){try{nc(3,e,e.return),ic(3,e)}catch(m){ku(e,e.return,m)}try{nc(5,e,e.return)}catch(m){ku(e,e.return,m)}}break;case 1:mc(t,e),vc(e),512&n&&null!==r&&ec(r,r.return);break;case 5:if(mc(t,e),vc(e),512&n&&null!==r&&ec(r,r.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){ku(e,e.return,m)}}if(4&n&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==r?r.memoizedProps:s,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===s.type&&null!=s.name&&Y(i,s),be(c,a);var l=be(c,s);for(a=0;a<u.length;a+=2){var d=u[a],h=u[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,l)}switch(c){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?re(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?re(i,!!s.multiple,s.defaultValue,!0):re(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){ku(e,e.return,m)}}break;case 6:if(mc(t,e),vc(e),4&n){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){ku(e,e.return,m)}}break;case 3:if(mc(t,e),vc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){ku(e,e.return,m)}break;case 4:default:mc(t,e),vc(e);break;case 13:mc(t,e),vc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zc=Ye())),4&n&&gc(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Ya=(l=Ya)||d,mc(t,e),Ya=l):mc(t,e),vc(e),8192&n){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!d&&0!==(1&e.mode))for($a=e,d=e.child;null!==d;){for(h=$a=d;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:ec(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){n=f,r=f.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){ku(n,r,m)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Ec(h);continue}}null!==p?(p.return=f,$a=p):Ec(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,l?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=h.stateNode,a=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=ge("display",a))}catch(m){ku(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){ku(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mc(t,e),vc(e),4&n&&gc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ac(r)){var n=r;break e}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(he(i,""),n.flags&=-33),lc(e,cc(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;uc(e,cc(e),s);break;default:throw Error(o(161))}}catch(a){ku(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bc(e,t,r){$a=e,wc(e,t,r)}function wc(e,t,r){for(var n=0!==(1&e.mode);null!==$a;){var i=$a,o=i.child;if(22===i.tag&&n){var s=null!==i.memoizedState||Za;if(!s){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ya;a=Za;var u=Ya;if(Za=s,(Ya=c)&&!u)for($a=i;null!==$a;)c=(s=$a).child,22===s.tag&&null!==s.memoizedState?Ac(i):null!==c?(c.return=s,$a=c):Ac(i);for(;null!==o;)$a=o,wc(o,t,r),o=o.sibling;$a=i,Za=a,Ya=u}_c(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$a=o):_c(e)}}function _c(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||ic(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Ya)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:yo(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Fo(t,s,n);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Fo(t,a,r)}break;case 5:var c=t.stateNode;if(null===r&&4&t.flags){r=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(o(163))}Ya||512&t.flags&&oc(t)}catch(f){ku(t,t.return,f)}}if(t===e){$a=null;break}if(null!==(r=t.sibling)){r.return=t.return,$a=r;break}$a=t.return}}function Ec(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var r=t.sibling;if(null!==r){r.return=t.return,$a=r;break}$a=t.return}}function Ac(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ic(4,t)}catch(c){ku(t,r,c)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(c){ku(t,i,c)}}var o=t.return;try{oc(t)}catch(c){ku(t,o,c)}break;case 5:var s=t.return;try{oc(t)}catch(c){ku(t,s,c)}}}catch(c){ku(t,t.return,c)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Sc,kc=Math.ceil,xc=w.ReactCurrentDispatcher,Ic=w.ReactCurrentOwner,Tc=w.ReactCurrentBatchConfig,Pc=0,Rc=null,Cc=null,Bc=0,Mc=0,Nc=Si(0),Oc=0,Dc=null,Lc=0,Uc=0,Fc=0,jc=null,qc=null,zc=0,Hc=1/0,Kc=null,Vc=!1,Gc=null,Wc=null,Qc=!1,Jc=null,Zc=0,Yc=0,Xc=null,$c=-1,eu=0;function tu(){return 0!==(6&Pc)?Ye():-1!==$c?$c:$c=Ye()}function ru(e){return 0===(1&e.mode)?1:0!==(2&Pc)&&0!==Bc?Bc&-Bc:null!==mo.transition?(0===eu&&(eu=gt()),eu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nu(e,t,r,n){if(50<Yc)throw Yc=0,Xc=null,Error(o(185));yt(e,r,n),0!==(2&Pc)&&e===Rc||(e===Rc&&(0===(2&Pc)&&(Uc|=r),4===Oc&&cu(e,Bc)),iu(e,n),1===r&&0===Pc&&0===(1&t.mode)&&(Hc=Ye()+500,Fi&&zi()))}function iu(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,c=i[s];-1===c?0!==(a&r)&&0===(a&n)||(i[s]=ft(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var n=ht(e,e===Rc?Bc:0);if(0===n)null!==r&&Qe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Qe(r),1===t)0===e.tag?function(e){Fi=!0,qi(e)}(uu.bind(null,e)):qi(uu.bind(null,e)),si((function(){0===(6&Pc)&&zi()})),r=null;else{switch(wt(n)){case 1:r=$e;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Ru(r,ou.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ou(e,t){if($c=-1,eu=0,0!==(6&Pc))throw Error(o(327));var r=e.callbackNode;if(Au()&&e.callbackNode!==r)return null;var n=ht(e,e===Rc?Bc:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=yu(e,n);else{t=n;var i=Pc;Pc|=2;var s=gu();for(Rc===e&&Bc===t||(Kc=null,Hc=Ye()+500,fu(e,t));;)try{bu();break}catch(c){pu(e,c)}Eo(),xc.current=s,Pc=i,null!==Cc?t=0:(Rc=null,Bc=0,t=Oc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(n=i,t=su(e,i))),1===t)throw r=Dc,fu(e,0),cu(e,n),iu(e,Ye()),r;if(6===t)cu(e,n);else{if(i=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!an(o(),i))return!1}catch(a){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yu(e,n))&&(0!==(s=pt(e))&&(n=s,t=su(e,s))),1===t))throw r=Dc,fu(e,0),cu(e,n),iu(e,Ye()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(o(345));case 2:case 5:Eu(e,qc,Kc);break;case 3:if(cu(e,n),(130023424&n)===n&&10<(t=zc+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&n)!==n){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(Eu.bind(null,e,qc,Kc),t);break}Eu(e,qc,Kc);break;case 4:if(cu(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-st(n);s=1<<a,(a=t[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Ye()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*kc(n/1960))-n)){e.timeoutHandle=ni(Eu.bind(null,e,qc,Kc),n);break}Eu(e,qc,Kc);break;default:throw Error(o(329))}}}return iu(e,Ye()),e.callbackNode===r?ou.bind(null,e):null}function su(e,t){var r=jc;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=yu(e,t))&&(t=qc,qc=r,null!==t&&au(t)),e}function au(e){null===qc?qc=e:qc.push.apply(qc,e)}function cu(e,t){for(t&=~Fc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),n=1<<r;e[r]=-1,t&=~n}}function uu(e){if(0!==(6&Pc))throw Error(o(327));Au();var t=ht(e,0);if(0===(1&t))return iu(e,Ye()),null;var r=yu(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=su(e,n))}if(1===r)throw r=Dc,fu(e,0),cu(e,t),iu(e,Ye()),r;if(6===r)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,qc,Kc),iu(e,Ye()),null}function lu(e,t){var r=Pc;Pc|=1;try{return e(t)}finally{0===(Pc=r)&&(Hc=Ye()+500,Fi&&zi())}}function du(e){null!==Jc&&0===Jc.tag&&0===(6&Pc)&&Au();var t=Pc;Pc|=1;var r=Tc.transition,n=bt;try{if(Tc.transition=null,bt=1,e)return e()}finally{bt=n,Tc.transition=r,0===(6&(Pc=t))&&zi()}}function hu(){Mc=Nc.current,ki(Nc)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==Cc)for(r=Cc.return;null!==r;){var n=r;switch(to(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Mi();break;case 3:os(),ki(Pi),ki(Ti),ds();break;case 5:as(n);break;case 4:os();break;case 13:case 19:ki(cs);break;case 10:Ao(n.type._context);break;case 22:case 23:hu()}r=r.return}if(Rc=e,Cc=e=Nu(e.current,null),Bc=Mc=t,Oc=0,Dc=null,Fc=Uc=Lc=0,qc=jc=null,null!==Io){for(t=0;t<Io.length;t++)if(null!==(n=(r=Io[t]).interleaved)){r.interleaved=null;var i=n.next,o=r.pending;if(null!==o){var s=o.next;o.next=i,n.next=s}r.pending=n}Io=null}return e}function pu(e,t){for(;;){var r=Cc;try{if(Eo(),hs.current=sa,vs){for(var n=gs.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}vs=!1}if(ps=0,ys=ms=gs=null,bs=!1,ws=0,Ic.current=null,null===r||null===r.return){Oc=1,Dc=t,Cc=null;break}e:{var s=e,a=r.return,c=r,u=t;if(t=Bc,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,c,0,t),1&p.mode&&ma(s,l,t),u=l;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){ma(s,l,t),mu();break e}u=Error(o(426))}else if(io&&1&c.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,c,0,t),go(la(u,c));break e}}s=u=la(u,c),4!==Oc&&(Oc=2),null===jc?jc=[s]:jc.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Lo(s,pa(0,u,t));break e;case 1:c=u;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wc||!Wc.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Lo(s,ga(s,c,t));break e}}s=s.return}while(null!==s)}_u(r)}catch(w){t=w,Cc===r&&null!==r&&(Cc=r=r.return);continue}break}}function gu(){var e=xc.current;return xc.current=sa,null===e?sa:e}function mu(){0!==Oc&&3!==Oc&&2!==Oc||(Oc=4),null===Rc||0===(268435455&Lc)&&0===(268435455&Uc)||cu(Rc,Bc)}function yu(e,t){var r=Pc;Pc|=2;var n=gu();for(Rc===e&&Bc===t||(Kc=null,fu(e,t));;)try{vu();break}catch(i){pu(e,i)}if(Eo(),Pc=r,xc.current=n,null!==Cc)throw Error(o(261));return Rc=null,Bc=0,Oc}function vu(){for(;null!==Cc;)wu(Cc)}function bu(){for(;null!==Cc&&!Je();)wu(Cc)}function wu(e){var t=Sc(e.alternate,e,Mc);e.memoizedProps=e.pendingProps,null===t?_u(e):Cc=t,Ic.current=null}function _u(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Qa(r,t,Mc)))return void(Cc=r)}else{if(null!==(r=Ja(r,t)))return r.flags&=32767,void(Cc=r);if(null===e)return Oc=6,void(Cc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cc=t);Cc=t=e}while(null!==t);0===Oc&&(Oc=5)}function Eu(e,t,r){var n=bt,i=Tc.transition;try{Tc.transition=null,bt=1,function(e,t,r,n){do{Au()}while(null!==Jc);if(0!==(6&Pc))throw Error(o(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-st(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}(e,s),e===Rc&&(Cc=Rc=null,Bc=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Qc||(Qc=!0,Ru(tt,(function(){return Au(),null}))),s=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||s){s=Tc.transition,Tc.transition=null;var a=bt;bt=1;var c=Pc;Pc|=4,Ic.current=null,function(e,t){if(ei=Kt,fn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(_){r=null;break e}var a=0,c=-1,u=-1,l=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==i&&3!==h.nodeType||(c=a+i),h!==s||0!==n&&3!==h.nodeType||(u=a+n),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++l===i&&(c=a),f===s&&++d===n&&(u=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===c||-1===u?null:{start:c,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ti={focusedElem:e,selectionRange:r},Kt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:yo(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(_){ku(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}g=rc,rc=!1}(e,r),yc(r,e),pn(ti),Kt=!!ei,ti=ei=null,e.current=r,bc(r,e,i),Ze(),Pc=c,bt=a,Tc.transition=s}else e.current=r;if(Qc&&(Qc=!1,Jc=e,Zc=i),s=e.pendingLanes,0===s&&(Wc=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),iu(e,Ye()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Vc)throw Vc=!1,e=Gc,Gc=null,e;0!==(1&Zc)&&0!==e.tag&&Au(),s=e.pendingLanes,0!==(1&s)?e===Xc?Yc++:(Yc=0,Xc=e):Yc=0,zi()}(e,t,r,n)}finally{Tc.transition=i,bt=n}return null}function Au(){if(null!==Jc){var e=wt(Zc),t=Tc.transition,r=bt;try{if(Tc.transition=null,bt=16>e?16:e,null===Jc)var n=!1;else{if(e=Jc,Jc=null,Zc=0,0!==(6&Pc))throw Error(o(331));var i=Pc;for(Pc|=4,$a=e.current;null!==$a;){var s=$a,a=s.child;if(0!==(16&$a.flags)){var c=s.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for($a=l;null!==$a;){var d=$a;switch(d.tag){case 0:case 11:case 15:nc(8,d,s)}var h=d.child;if(null!==h)h.return=d,$a=h;else for(;null!==$a;){var f=(d=$a).sibling,p=d.return;if(sc(d),d===l){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}$a=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,$a=a;else e:for(;null!==$a;){if(0!==(2048&(s=$a).flags))switch(s.tag){case 0:case 11:case 15:nc(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,$a=v;break e}$a=s.return}}var b=e.current;for($a=b;null!==$a;){var w=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,$a=w;else e:for(a=b;null!==$a;){if(0!==(2048&(c=$a).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(E){ku(c,c.return,E)}if(c===a){$a=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,$a=_;break e}$a=c.return}}if(Pc=i,zi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(E){}n=!0}return n}finally{bt=r,Tc.transition=t}}return!1}function Su(e,t,r){e=Oo(e,t=pa(0,t=la(r,t),1),1),t=tu(),null!==e&&(yt(e,1,t),iu(e,t))}function ku(e,t,r){if(3===e.tag)Su(e,e,r);else for(;null!==t;){if(3===t.tag){Su(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Wc||!Wc.has(n))){t=Oo(t,e=ga(t,e=la(r,e),1),1),e=tu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function xu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&r,Rc===e&&(Bc&r)===r&&(4===Oc||3===Oc&&(130023424&Bc)===Bc&&500>Ye()-zc?fu(e,0):Fc|=r),iu(e,t)}function Iu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var r=tu();null!==(e=Ro(e,t))&&(yt(e,t,r),iu(e,r))}function Tu(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Iu(e,r)}function Pu(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(t),Iu(e,r)}function Ru(e,t){return We(e,t)}function Cu(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bu(e,t,r,n){return new Cu(e,t,r,n)}function Mu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var r=e.alternate;return null===r?((r=Bu(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ou(e,t,r,n,i,s){var a=2;if(n=e,"function"===typeof e)Mu(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case A:return Du(r.children,i,s,t);case S:a=8,i|=8;break;case k:return(e=Bu(12,r,t,2|i)).elementType=k,e.lanes=s,e;case P:return(e=Bu(13,r,t,i)).elementType=P,e.lanes=s,e;case R:return(e=Bu(19,r,t,i)).elementType=R,e.lanes=s,e;case M:return Lu(r,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case I:a=9;break e;case T:a=11;break e;case C:a=14;break e;case B:a=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Bu(a,r,t,i)).elementType=e,t.type=n,t.lanes=s,t}function Du(e,t,r,n){return(e=Bu(7,e,n,t)).lanes=r,e}function Lu(e,t,r,n){return(e=Bu(22,e,n,t)).elementType=M,e.lanes=r,e.stateNode={isHidden:!1},e}function Uu(e,t,r){return(e=Bu(6,e,null,t)).lanes=r,e}function Fu(e,t,r){return(t=Bu(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ju(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function qu(e,t,r,n,i,o,s,a,c){return e=new ju(e,t,r,a,c),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Bu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bo(o),e}function zu(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var r=e.type;if(Bi(r))return Oi(e,r,t)}return t}function Hu(e,t,r,n,i,o,s,a,c){return(e=qu(r,n,!0,e,0,o,0,a,c)).context=zu(null),r=e.current,(o=No(n=tu(),i=ru(r))).callback=void 0!==t&&null!==t?t:null,Oo(r,o,i),e.current.lanes=i,yt(e,i,n),iu(e,n),e}function Ku(e,t,r,n){var i=t.current,o=tu(),s=ru(i);return r=zu(r),null===t.context?t.context=r:t.pendingContext=r,(t=No(o,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Oo(i,t,s))&&(nu(e,i,s,o),Do(e,i,s)),s}function Vu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Sc=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)wa=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return wa=!1,function(e,t,r){switch(t.tag){case 3:Ra(t),po();break;case 5:ss(t);break;case 1:Bi(t.type)&&Di(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;xi(vo,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(xi(cs,1&cs.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ua(e,t,r):(xi(cs,1&cs.current),null!==(e=Va(e,t,r))?e.sibling:null);xi(cs,1&cs.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Ha(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(cs,cs.current),n)break;return null;case 22:case 23:return t.lanes=0,ka(e,t,r)}return Va(e,t,r)}(e,t,r);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&$i(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ka(e,t),e=t.pendingProps;var i=Ci(t,Ti.current);ko(t,r),i=Ss(null,t,n,e,i,r);var s=ks();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bi(n)?(s=!0,Di(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Bo(t),i.updater=zo,t.stateNode=i,i._reactInternals=t,Go(t,n,e,r),t=Pa(null,t,n,!0,s,r)):(t.tag=0,io&&s&&eo(t),_a(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"===typeof e)return Mu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===C)return 14}return 2}(n),e=yo(n,e),i){case 0:t=Ia(null,t,n,e,r);break e;case 1:t=Ta(null,t,n,e,r);break e;case 11:t=Ea(null,t,n,e,r);break e;case 14:t=Aa(null,t,n,yo(n.type,e),r);break e}throw Error(o(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Ia(e,t,n,i=t.elementType===n?i:yo(n,i),r);case 1:return n=t.type,i=t.pendingProps,Ta(e,t,n,i=t.elementType===n?i:yo(n,i),r);case 3:e:{if(Ra(t),null===e)throw Error(o(387));n=t.pendingProps,i=(s=t.memoizedState).element,Mo(e,t),Uo(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ca(e,t,n,r,i=la(Error(o(423)),t));break e}if(n!==i){t=Ca(e,t,n,r,i=la(Error(o(424)),t));break e}for(no=ui(t.stateNode.containerInfo.firstChild),ro=t,io=!0,oo=null,r=Xo(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(po(),n===i){t=Va(e,t,r);break e}_a(e,t,n,r)}t=t.child}return t;case 5:return ss(t),null===e&&uo(t),n=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ri(n,i)?a=null:null!==s&&ri(n,s)&&(t.flags|=32),xa(e,t),_a(e,t,a,r),t.child;case 6:return null===e&&uo(t),null;case 13:return Ua(e,t,r);case 4:return is(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Yo(t,null,n,r):_a(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,Ea(e,t,n,i=t.elementType===n?i:yo(n,i),r);case 7:return _a(e,t,t.pendingProps,r),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,xi(vo,n._currentValue),n._currentValue=a,null!==s)if(an(s.value,a)){if(s.children===i.children&&!Pi.current){t=Va(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){a=s.child;for(var u=c.firstContext;null!==u;){if(u.context===n){if(1===s.tag){(u=No(-1,r&-r)).tag=2;var l=s.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),l.pending=u}}s.lanes|=r,null!==(u=s.alternate)&&(u.lanes|=r),So(s.return,r,t),c.lanes|=r;break}u=u.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),So(a,r,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,ko(t,r),n=n(i=xo(i)),t.flags|=1,_a(e,t,n,r),t.child;case 14:return i=yo(n=t.type,t.pendingProps),Aa(e,t,n,i=yo(n.type,i),r);case 15:return Sa(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:yo(n,i),Ka(e,t),t.tag=1,Bi(n)?(e=!0,Di(t)):e=!1,ko(t,r),Ko(t,n,i),Go(t,n,i,r),Pa(null,t,n,!0,e,r);case 19:return Ha(e,t,r);case 22:return ka(e,t,r)}throw Error(o(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ju(e){this._internalRoot=e}function Zu(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function el(e,t,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Vu(s);a.call(e)}}Ku(t,s,e,i)}else s=function(e,t,r,n,i){if(i){if("function"===typeof n){var o=n;n=function(){var e=Vu(s);o.call(e)}}var s=Hu(t,n,e,0,null,!1,0,"",$u);return e._reactRootContainer=s,e[pi]=s.current,zn(8===e.nodeType?e.parentNode:e),du(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var a=n;n=function(){var e=Vu(c);a.call(e)}}var c=qu(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=c,e[pi]=c.current,zn(8===e.nodeType?e.parentNode:e),du((function(){Ku(t,c,r,n)})),c}(r,t,e,i,n);return Vu(s)}Zu.prototype.render=Ju.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Ku(e,t,null,null)},Zu.prototype.unmount=Ju.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;du((function(){Ku(null,e,null,null)})),t[pi]=null}},Zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Mt.length&&0!==t&&t<Mt[r].priority;r++);Mt.splice(r,0,e),0===r&&Lt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(vt(t,1|r),iu(t,Ye()),0===(6&Pc)&&(Hc=Ye()+500,zi()))}break;case 13:du((function(){var t=Ro(e,1);if(null!==t){var r=tu();nu(t,e,1,r)}})),Wu(e,1)}},Et=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)nu(t,e,134217728,tu());Wu(e,134217728)}},At=function(e){if(13===e.tag){var t=ru(e),r=Ro(e,t);if(null!==r)nu(r,e,t,tu());Wu(e,t)}},St=function(){return bt},kt=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},Ee=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=_i(n);if(!i)throw Error(o(90));W(n),X(n,i)}}}break;case"textarea":oe(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Te=lu,Pe=du;var tl={usingClientEntryPoint:!1,Events:[bi,wi,_i,xe,Ie,lu]},rl={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nl={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(nl),ot=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(o(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Yu(e))throw Error(o(299));var r=!1,n="",i=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=qu(e,1,!1,null,0,r,0,n,i),e[pi]=t.current,zn(8===e.nodeType?e.parentNode:e),new Ju(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return du(e)},t.hydrate=function(e,t,r){if(!Xu(t))throw Error(o(200));return el(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Yu(e))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,i=!1,s="",a=Qu;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=Hu(t,null,e,1,null!=r?r:null,i,0,s,a),e[pi]=t.current,zn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Zu(t)},t.render=function(e,t,r){if(!Xu(t))throw Error(o(200));return el(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Xu(e))throw Error(o(40));return!!e._reactRootContainer&&(du((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lu,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Xu(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:(e,t,r)=>{"use strict";var n=r(4164);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},4164:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(4463)},6374:(e,t,r)=>{"use strict";var n=r(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,o={},u=null,l=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,n)&&!c.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:u,ref:l,props:o,_owner:a.current}}t.jsx=u,t.jsxs=u},9117:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}function v(){}function b(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,A={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:r,type:e,key:s,ref:a,props:o,_owner:A.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return s=s(c=e),e=""===o?"."+T(c,0):o,_(s)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),P(s,t,i,"",(function(e){return e}))):null!=s&&(x(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(I,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",_(e))for(var u=0;u<e.length;u++){var l=o+T(a=e[u],u);c+=P(a,t,i,l,s)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(a=e.next()).done;)c+=P(a=a.value,t,i,l=o+T(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function R(e,t,r){if(null==e)return e;var n=[],i=0;return P(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function C(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var B={current:null},M={transition:null},N={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:M,ReactCurrentOwner:A};t.Children={map:R,forEach:function(e,t,r){R(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=A.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)E.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:r,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return B.current.useCallback(e,t)},t.useContext=function(e){return B.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return B.current.useDeferredValue(e)},t.useEffect=function(e,t){return B.current.useEffect(e,t)},t.useId=function(){return B.current.useId()},t.useImperativeHandle=function(e,t,r){return B.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return B.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return B.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return B.current.useMemo(e,t)},t.useReducer=function(e,t,r){return B.current.useReducer(e,t,r)},t.useRef=function(e){return B.current.useRef(e)},t.useState=function(e){return B.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return B.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return B.current.useTransition()},t.version="18.2.0"},2791:(e,t,r)=>{"use strict";e.exports=r(9117)},184:(e,t,r)=>{"use strict";e.exports=r(6374)},4003:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var i=function(e){var t,n;function i(t,n,i){return e.call(this,function(e,t,n){return"string"===typeof r?r:r(e,t,n)}(t,n,i))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i,o,s,a;if("string"===typeof t&&(o="not ",t.substr(!s||s<0?0:+s,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(n(t,"type"));else{var c=function(e,t,r){return"number"!==typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(n(t,"type"))}return a+=". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},8749:(e,t,r)=>{"use strict";var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var i=r(6978),o=r(1704);r(2534)(u,i);for(var s=n(o.prototype),a=0;a<s.length;a++){var c=s[a];u.prototype[c]||(u.prototype[c]=o.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||process.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},5627:(e,t,r)=>{"use strict";e.exports=i;var n=r(4784);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(2534)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},6978:(e,t,r)=>{"use strict";var n;e.exports=S,S.ReadableState=A;r(7465).EventEmitter;var i=function(e,t){return e.listeners(t).length},o=r(6184),s=r(9778).Buffer,a=("undefined"!==typeof r.g?r.g:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};var c,u=r(4616);c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,h,f=r(5566),p=r(2644),g=r(5730).getHighWaterMark,m=r(4003).q,y=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,b=m.ERR_METHOD_NOT_IMPLEMENTED,w=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(2534)(S,o);var _=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function A(e,t,i){n=n||r(8749),e=e||{},"boolean"!==typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=r(5948).s),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function S(e){if(n=n||r(8749),!(this instanceof S))return new S(e);var t=this instanceof n;this._readableState=new A(e,this,t),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function k(e,t,r,n,i){c("readableAddChunk",t);var o,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,R(e)))}(e,u);else if(i||(o=function(e,t){var r;n=t,s.isBuffer(n)||n instanceof a||"string"===typeof t||void 0===t||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(u,t)),o)_(e,o);else if(u.objectMode||t&&t.length>0)if("string"===typeof t||u.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=function(e){return s.from(e)}(t)),n)u.endEmitted?_(e,new w):x(e,u,t,!0);else if(u.ended)_(e,new v);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?x(e,u,t,!1):C(e,u)):x(e,u,t,!1)}else n||(u.reading=!1,C(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function x(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&P(e)),C(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=s.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},S.prototype.unshift=function(e){return k(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){l||(l=r(5948).s);var t=new l(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var I=1073741824;function T(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(R,e))}function R(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,D(e)}function C(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(B,e,t))}function B(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(c("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function M(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function N(e){c("readable nexttick read 0"),e.read(0)}function O(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function U(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(F,t,e))}function F(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function j(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?U(this):P(this),null;if(0===(e=T(e,t))&&t.ended)return 0===t.length&&U(this),null;var n,i=t.needReadable;return c("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",i=!0),t.ended||t.reading?c("reading or ended",i=!1):i&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=T(r,t))),null===(n=e>0?L(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&U(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(e){_(this,new b("_read()"))},S.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,c("pipe count=%d opts=%j",n.pipesCount,t);var o=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:g;function s(t,i){c("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,c("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",s),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",d),l=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function a(){c("onend"),e.end()}n.endEmitted?process.nextTick(o):r.once("end",o),e.on("unpipe",s);var u=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,D(e))}}(r);e.on("drain",u);var l=!1;function d(t){c("ondata");var i=e.write(t);c("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==j(n.pipes,e))&&!l&&(c("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function h(t){c("onerror",t),g(),e.removeListener("error",h),0===i(e,"error")&&_(e,t)}function f(){e.removeListener("finish",p),g()}function p(){c("onfinish"),e.removeListener("close",f),g()}function g(){c("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",f),e.once("finish",p),e.emit("pipe",r),n.flowing||(c("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=j(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},S.prototype.on=function(e,t){var r=o.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,c("on readable",n.length,n.reading),n.length?P(this):n.reading||process.nextTick(N,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=o.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(M,this),r},S.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(M,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(O,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(c("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(c("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&void 0!==i)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)void 0===this[i]&&"function"===typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){c("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"===typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=r(9150)),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=L,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(S.from=function(e,t){return void 0===h&&(h=r(4886)),h(S,e,t)})},4784:(e,t,r)=>{"use strict";e.exports=l;var n=r(4003).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,s=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,c=r(8749);function u(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!==typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new a;if(e._transformState.transforming)throw new s;return e.push(null)}r(2534)(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},1704:(e,t,r)=>{"use strict";function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=S,S.WritableState=A;var o={deprecate:r(9515)},s=r(6184),a=r(9778).Buffer,c=("undefined"!==typeof r.g?r.g:"undefined"!==typeof window?window:"undefined"!==typeof self?self:{}).Uint8Array||function(){};var u,l=r(2644),d=r(5730).getHighWaterMark,h=r(4003).q,f=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,m=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,v=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,_=l.errorOrDestroy;function E(){}function A(e,t,o){i=i||r(8749),e=e||{},"boolean"!==typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=d(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if("function"!==typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){--t.pendingcb,r?(process.nextTick(i,n),process.nextTick(R,e,t),e._writableState.errorEmitted=!0,_(e,n)):(i(n),e._writableState.errorEmitted=!0,_(e,n),R(e,t))}(e,r,n,t,i);else{var o=T(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||I(e,r),n?process.nextTick(x,e,r,o,i):x(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function S(e){var t=this instanceof(i=i||r(8749));if(!t&&!u.call(S,this))return new S(e);this._writableState=new A(e,this,t),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),s.call(this)}function k(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function x(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),R(e,t)}function I(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,o=new Array(i),s=t.corkedRequestsFree;s.entry=r;for(var a=0,c=!0;r;)o[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;o.allBuffers=c,k(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback;if(k(e,t,!1,t.objectMode?1:u.length,u,l,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(r){t.pendingcb--,r&&_(e,r),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function R(e,t){var r=T(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!==typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(2534)(S,s),A.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(A.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===S&&(e&&e._writableState instanceof A)}})):u=function(e){return e instanceof this},S.prototype.pipe=function(){_(this,new m)},S.prototype.write=function(e,t,r){var n,i=this._writableState,o=!1,s=!i.objectMode&&(n=e,a.isBuffer(n)||n instanceof c);return s&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"===typeof t&&(r=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!==typeof r&&(r=E),i.ending?function(e,t){var r=new b;_(e,r),process.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var i;return null===r?i=new v:"string"===typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i||(_(e,i),process.nextTick(n,i),!1)}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,r,n,i,o){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=a.from(t,r));return t}(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,c,n,i,o);return u}(this,i,s,e,t,r)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||I(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,r){r(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var n=this._writableState;return"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,R(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}},9150:(e,t,r)=>{"use strict";var n;function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r(5762),s=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var r=e[h].read();null!==r&&(e[l]=null,e[s]=null,e[a]=null,t(f(r,!1)))}}function g(e){process.nextTick(p,e)}var m=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise((function(t,r){process.nextTick((function(){e[c]?r(e[c]):t(f(void 0,!0))}))}));var r,n=this[l];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(f(void 0,!0)):t[d](r,n)}),n)}}(n,this));else{var i=this[h].read();if(null!==i)return Promise.resolve(f(i,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(f(void 0,!0))}))}))})),n),m);e.exports=function(e){var t,r=Object.create(y,(i(t={},h,{value:e,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,c,{value:null,writable:!0}),i(t,u,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var n=r[h].read();n?(r[l]=null,r[s]=null,r[a]=null,e(f(n,!1))):(r[s]=e,r[a]=t)},writable:!0}),t));return r[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[a];return null!==t&&(r[l]=null,r[s]=null,r[a]=null,t(e)),void(r[c]=e)}var n=r[s];null!==n&&(r[l]=null,r[s]=null,r[a]=null,n(f(void 0,!0))),r[u]=!0})),e.on("readable",g.bind(null,r)),r}},5566:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function a(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var c=r(9778).Buffer,u=r(2361).inspect,l=u&&u.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,n;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,r,n,i=c.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,c.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0===(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:l,value:function(e,t){return u(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},2644:e=>{"use strict";function t(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var o=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(n,this,e)):process.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?o._writableState?o._writableState.errorEmitted?process.nextTick(r,o):(o._writableState.errorEmitted=!0,process.nextTick(t,o,e)):process.nextTick(t,o,e):i?(process.nextTick(r,o),i(e)):process.nextTick(r,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},5762:(e,t,r)=>{"use strict";var n=r(4003).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"===typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var s=r.readable||!1!==r.readable&&t.readable,a=r.writable||!1!==r.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,s||o.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,d=!0,a||o.call(t)},f=function(e){o.call(t,e)},p=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},g=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"===typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?g():t.on("request",g)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}}},4886:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},4541:(e,t,r)=>{"use strict";var n;var i=r(4003).q,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var l,d=function(e){return e.length?"function"!==typeof e[e.length-1]?a:e.pop():a}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var h=t.map((function(e,i){var o=i<t.length-1;return function(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var a=!1;e.on("close",(function(){a=!0})),void 0===n&&(n=r(5762)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);a=!0,o()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"===typeof e.abort}(e)?e.abort():"function"===typeof e.destroy?e.destroy():void o(t||new s("pipe"))}}(e,o,i>0,(function(e){l||(l=e),e&&h.forEach(c),o||(h.forEach(c),d(l))}))}));return t.reduce(u)}},5730:(e,t,r)=>{"use strict";var n=r(4003).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},6184:(e,t,r)=>{e.exports=r(7465).EventEmitter},723:(e,t,r)=>{(t=e.exports=r(6978)).Stream=t,t.Readable=t,t.Writable=r(1704),t.Duplex=r(8749),t.Transform=r(4784),t.PassThrough=r(5627),t.finished=r(5762),t.pipeline=r(4541)},449:(e,t,r)=>{"use strict";e.exports=s;var n=r(8193),i=s.prototype,o=new Date%1e9;function s(e){e=e||{},this.id=e.id||(1e9*Math.random()>>>0)+o++,this.max=e.max||1/0,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,r,n=this.items.length;n--;)t=this.items[n],r=new Date(t.expires)-new Date,this._lookup[t.key]=t,r>0?this.expire(t.key,r):r<=0&&this.delete(t.key)}i.has=function(e){return e in this._lookup},i.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},i.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},i.set=function(e,t,r){var n=this._lookup[e],i=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(e,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this},i.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},i.expire=function(e,t){var r=t||0,i=this._lookup[e];if(!i)return this;if("string"===typeof r&&(r=n(t)),"number"!==typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this},i.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},i.toJSON=function(){for(var e,t=new Array(this.items.length),r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}}},3375:(e,t,r)=>{"use strict";var n=r(9778).Buffer,i=r(2534),o=r(6266),s=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0];function f(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function g(e,t,r,n,i,o,s,a){return p(e+(t^r^n)+o+s|0,a)+i|0}function m(e,t,r,n,i,o,s,a){return p(e+(t&r|~t&n)+o+s|0,a)+i|0}function y(e,t,r,n,i,o,s,a){return p(e+((t|~r)^n)+o+s|0,a)+i|0}function v(e,t,r,n,i,o,s,a){return p(e+(t&n|r&~n)+o+s|0,a)+i|0}function b(e,t,r,n,i,o,s,a){return p(e+(t^(r|~n))+o+s|0,a)+i|0}i(f,o),f.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,f=0|this._e,w=0|this._a,_=0|this._b,E=0|this._c,A=0|this._d,S=0|this._e,k=0;k<80;k+=1){var x,I;k<16?(x=g(r,n,i,o,f,e[a[k]],d[0],u[k]),I=b(w,_,E,A,S,e[c[k]],h[0],l[k])):k<32?(x=m(r,n,i,o,f,e[a[k]],d[1],u[k]),I=v(w,_,E,A,S,e[c[k]],h[1],l[k])):k<48?(x=y(r,n,i,o,f,e[a[k]],d[2],u[k]),I=y(w,_,E,A,S,e[c[k]],h[2],l[k])):k<64?(x=v(r,n,i,o,f,e[a[k]],d[3],u[k]),I=m(w,_,E,A,S,e[c[k]],h[3],l[k])):(x=b(r,n,i,o,f,e[a[k]],d[4],u[k]),I=g(w,_,E,A,S,e[c[k]],h[4],l[k])),r=f,f=o,o=p(i,10),i=n,n=x,w=S,S=A,A=p(E,10),E=_,_=I}var T=this._b+i+A|0;this._b=this._c+o+S|0,this._c=this._d+f+w|0,this._d=this._e+r+_|0,this._e=this._a+n+E|0,this._a=T},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=f},6445:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getLength=t.decode=t.encode=void 0;var i=n(r(518));function o(e,t){if("0"===e[0]&&"0"===e[1])throw new Error("invalid RLP: extra zeros");return parseInt(e,t)}function s(e,t){if(e<56)return Buffer.from([e+t]);var r=u(e),n=u(t+55+r.length/2);return Buffer.from(n+r,"hex")}function a(e){var t,r,n,i,s,c=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(u<=183){if(t=u-127,n=128===u?Buffer.from([]):e.slice(1,t),2===t&&n[0]<128)throw new Error("invalid rlp encoding: byte must be less 0x80");return{data:n,remainder:e.slice(t)}}if(u<=191){if(r=u-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if((t=o(e.slice(1,r).toString("hex"),16))<=55)throw new Error("invalid RLP: expected string length to be greater than 55");if((n=e.slice(r,t+r)).length<t)throw new Error("invalid RLP: not enough bytes for string");return{data:n,remainder:e.slice(t+r)}}if(u<=247){for(t=u-191,i=e.slice(1,t);i.length;)s=a(i),c.push(s.data),i=s.remainder;return{data:c,remainder:e.slice(t)}}var l=(r=u-246)+(t=o(e.slice(1,r).toString("hex"),16));if(l>e.length)throw new Error("invalid rlp: total length is larger than the data");if(0===(i=e.slice(r,l)).length)throw new Error("invalid rlp, List has a invalid length");for(;i.length;)s=a(i),c.push(s.data),i=s.remainder;return{data:c,remainder:e.slice(l)}}function c(e){return"0x"===e.slice(0,2)}function u(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");var t=e.toString(16);return t.length%2?"0"+t:t}function l(e){if(!Buffer.isBuffer(e)){if("string"===typeof e)return c(e)?Buffer.from((t="string"!==typeof(r=e)?r:c(r)?r.slice(2):r).length%2?"0"+t:t,"hex"):Buffer.from(e);if("number"===typeof e||"bigint"===typeof e)return e?function(e){var t=u(e);return Buffer.from(t,"hex")}(e):Buffer.from([]);if(null===e||void 0===e)return Buffer.from([]);if(e instanceof Uint8Array)return Buffer.from(e);if(i.default.isBN(e))return Buffer.from(e.toArray());throw new Error("invalid type")}var t,r;return e}t.encode=function e(t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(e(t[n]));var i=Buffer.concat(r);return Buffer.concat([s(i.length,192),i])}var o=l(t);return 1===o.length&&o[0]<128?o:Buffer.concat([s(o.length,128),o])},t.decode=function(e,t){if(void 0===t&&(t=!1),!e||0===e.length)return Buffer.from([]);var r=a(l(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid remainder");return r.data},t.getLength=function(e){if(!e||0===e.length)return Buffer.from([]);var t=l(e),r=t[0];if(r<=127)return t.length;if(r<=183)return r-127;if(r<=191)return r-182;if(r<=247)return r-191;var n=r-246;return n+o(t.slice(1,n).toString("hex"),16)}},2543:(e,t,r)=>{var n=r(9778),i=n.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},s.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"===typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},s.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},6327:(e,t,r)=>{"use strict";var n=r(206),i=/[\/\?<>\\:\*\|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,s=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,c=/[\. ]+$/;function u(e,t){if("string"!==typeof e)throw new Error("Input must be string");var r=e.replace(i,t).replace(o,t).replace(s,t).replace(a,t).replace(c,t);return n(r,255)}e.exports=function(e,t){var r=t&&t.replacement||"",n=u(e,r);return""===r?n:u(n,"")}},6813:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<o(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,s=i>>>1;n<s;){var a=2*(n+1)-1,c=e[a],u=a+1,l=e[u];if(0>o(c,r))u<i&&0>o(l,c)?(e[n]=l,e[u]=r,n=u):(e[n]=c,e[a]=r,n=a);else{if(!(u<i&&0>o(l,r)))break e;e[n]=l,e[u]=r,n=u}}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],l=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,r(u,t)}t=n(l)}}function _(e){if(m=!1,w(e),!g)if(null!==n(u))g=!0,M(E);else{var t=n(l);null!==t&&N(_,t.startTime-e)}}function E(e,r){g=!1,m&&(m=!1,v(x),x=-1),p=!0;var o=f;try{for(w(r),h=n(u);null!==h&&(!(h.expirationTime>r)||e&&!P());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof a?h.callback=a:h===n(u)&&i(u),w(r)}else i(u);h=n(u)}if(null!==h)var c=!0;else{var d=n(l);null!==d&&N(_,d.startTime-r),c=!1}return c}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,S=!1,k=null,x=-1,I=5,T=-1;function P(){return!(t.unstable_now()-T<I)}function R(){if(null!==k){var e=t.unstable_now();T=e;var r=!0;try{r=k(!0,e)}finally{r?A():(S=!1,k=null)}}else S=!1}if("function"===typeof b)A=function(){b(R)};else if("undefined"!==typeof MessageChannel){var C=new MessageChannel,B=C.port2;C.port1.onmessage=R,A=function(){B.postMessage(null)}}else A=function(){y(R,0)};function M(e){k=e,S||(S=!0,A())}function N(e,r){x=y((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,M(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,r(l,e),null===n(u)&&e===n(l)&&(m?(v(x),x=-1):m=!0,N(_,o-s))):(e.sortIndex=a,r(u,e),g||p||(g=!0,M(E))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},5296:(e,t,r)=>{"use strict";e.exports=r(6813)},1113:(e,t,r)=>{e.exports=r(2899)(r(4513))},4513:(e,t,r)=>{const n=new(0,r(6289).ec)("secp256k1"),i=n.curve,o=i.n.constructor;function s(e){const t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){let r=new o(t);if(r.cmp(i.p)>=0)return null;r=r.toRed(i.red);let s=r.redSqr().redIMul(r).redIAdd(i.b).redSqrt();return 3===e!==s.isOdd()&&(s=s.redNeg()),n.keyPair({pub:{x:r,y:s}})}(t,e.subarray(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){let s=new o(t),a=new o(r);if(s.cmp(i.p)>=0||a.cmp(i.p)>=0)return null;if(s=s.toRed(i.red),a=a.toRed(i.red),(6===e||7===e)&&a.isOdd()!==(7===e))return null;const c=s.redSqr().redIMul(s);return a.redSqr().redISub(c.redIAdd(i.b)).isZero()?n.keyPair({pub:{x:s,y:a}}):null}(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function a(e,t){const r=t.encode(null,33===e.length);for(let n=0;n<e.length;++n)e[n]=r[n]}e.exports={contextRandomize:()=>0,privateKeyVerify(e){const t=new o(e);return t.cmp(i.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){const t=new o(e),r=i.n.sub(t).umod(i.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){const r=new o(t);if(r.cmp(i.n)>=0)return 1;if(r.iadd(new o(e)),r.cmp(i.n)>=0&&r.isub(i.n),r.isZero())return 1;const n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new o(t);if(r.cmp(i.n)>=0||r.isZero())return 1;r.imul(new o(e)),r.cmp(i.n)>=0&&(r=r.umod(i.n));const n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify:e=>null===s(e)?1:0,publicKeyCreate(e,t){const r=new o(t);if(r.cmp(i.n)>=0||r.isZero())return 1;return a(e,n.keyFromPrivate(t).getPublic()),0},publicKeyConvert(e,t){const r=s(t);if(null===r)return 1;return a(e,r.getPublic()),0},publicKeyNegate(e,t){const r=s(t);if(null===r)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),a(e,n),0},publicKeyCombine(e,t){const r=new Array(t.length);for(let i=0;i<t.length;++i)if(r[i]=s(t[i]),null===r[i])return 1;let n=r[0].getPublic();for(let i=1;i<r.length;++i)n=n.add(r[i].pub);return n.isInfinity()?2:(a(e,n),0)},publicKeyTweakAdd(e,t,r){const n=s(t);if(null===n)return 1;if((r=new o(r)).cmp(i.n)>=0)return 2;const c=n.getPublic().add(i.g.mul(r));return c.isInfinity()?2:(a(e,c),0)},publicKeyTweakMul(e,t,r){const n=s(t);if(null===n)return 1;if((r=new o(r)).cmp(i.n)>=0||r.isZero())return 2;return a(e,n.getPublic().mul(r)),0},signatureNormalize(e){const t=new o(e.subarray(0,32)),r=new o(e.subarray(32,64));return t.cmp(i.n)>=0||r.cmp(i.n)>=0?1:(1===r.cmp(n.nh)&&e.set(i.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){const r=t.subarray(0,32),n=t.subarray(32,64);if(new o(r).cmp(i.n)>=0)return 1;if(new o(n).cmp(i.n)>=0)return 1;const{output:s}=e;let a=s.subarray(4,37);a[0]=0,a.set(r,1);let c=33,u=0;for(;c>1&&0===a[u]&&!(128&a[u+1]);--c,++u);if(a=a.subarray(u),128&a[0])return 1;if(c>1&&0===a[0]&&!(128&a[1]))return 1;let l=s.subarray(39,72);l[0]=0,l.set(n,1);let d=33,h=0;for(;d>1&&0===l[h]&&!(128&l[h+1]);--d,++h);return l=l.subarray(h),128&l[0]||d>1&&0===l[0]&&!(128&l[1])?1:(e.outputlen=6+c+d,s[0]=48,s[1]=e.outputlen-2,s[2]=2,s[3]=a.length,s.set(a,4),s[4+c]=2,s[5+c]=l.length,s.set(l,6+c),0)},signatureImport(e,t){if(t.length<8)return 1;if(t.length>72)return 1;if(48!==t[0])return 1;if(t[1]!==t.length-2)return 1;if(2!==t[2])return 1;const r=t[3];if(0===r)return 1;if(5+r>=t.length)return 1;if(2!==t[4+r])return 1;const n=t[5+r];if(0===n)return 1;if(6+r+n!==t.length)return 1;if(128&t[4])return 1;if(r>1&&0===t[4]&&!(128&t[5]))return 1;if(128&t[r+6])return 1;if(n>1&&0===t[r+6]&&!(128&t[r+7]))return 1;let s=t.subarray(4,4+r);if(33===s.length&&0===s[0]&&(s=s.subarray(1)),s.length>32)return 1;let a=t.subarray(6+r);if(33===a.length&&0===a[0]&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let c=new o(s);c.cmp(i.n)>=0&&(c=new o(0));let u=new o(t.subarray(6+r));return u.cmp(i.n)>=0&&(u=new o(0)),e.set(c.toArrayLike(Uint8Array,"be",32),0),e.set(u.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,s,a){if(a){const e=a;a=n=>{const i=e(t,r,null,s,n);if(!(i instanceof Uint8Array&&32===i.length))throw new Error("This is the way");return new o(i)}}const c=new o(r);if(c.cmp(i.n)>=0||c.isZero())return 1;let u;try{u=n.sign(t,r,{canonical:!0,k:a,pers:s})}catch(l){return 1}return e.signature.set(u.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(u.s.toArrayLike(Uint8Array,"be",32),32),e.recid=u.recoveryParam,0},ecdsaVerify(e,t,r){const a={r:e.subarray(0,32),s:e.subarray(32,64)},c=new o(a.r),u=new o(a.s);if(c.cmp(i.n)>=0||u.cmp(i.n)>=0)return 1;if(1===u.cmp(n.nh)||c.isZero()||u.isZero())return 3;const l=s(r);if(null===l)return 2;const d=l.getPublic();return n.verify(t,a,d)?0:3},ecdsaRecover(e,t,r,s){const c={r:t.slice(0,32),s:t.slice(32,64)},u=new o(c.r),l=new o(c.s);if(u.cmp(i.n)>=0||l.cmp(i.n)>=0)return 1;if(u.isZero()||l.isZero())return 2;let d;try{d=n.recoverPubKey(s,c,r)}catch(h){return 2}return a(e,d),0},ecdh(e,t,r,a,c,u,l){const d=s(t);if(null===d)return 1;const h=new o(r);if(h.cmp(i.n)>=0||h.isZero())return 2;const f=d.getPublic().mul(h);if(void 0===c){const t=f.encode(null,!0),r=n.hash().update(t).digest();for(let n=0;n<32;++n)e[n]=r[n]}else{u||(u=new Uint8Array(32));const t=f.getX().toArray("be",32);for(let e=0;e<32;++e)u[e]=t[e];l||(l=new Uint8Array(32));const r=f.getY().toArray("be",32);for(let e=0;e<32;++e)l[e]=r[e];const n=c(u,l,a);if(!(n instanceof Uint8Array&&n.length===e.length))return 2;e.set(n)}return 0}}},2899:e=>{const t="Impossible case. Please create issue.",r="The tweak was out of range or the resulted private key is invalid",n="The tweak was out of range or equal to zero",i="Unknow error on context randomization",o="Private Key is invalid",s="Public Key could not be parsed",a="Public Key serialization error",c="The sum of the public keys is not valid",u="Signature could not be parsed",l="The nonce generation function failed, or the private key was invalid",d="Public key could not be recover",h="Scalar was invalid (zero or overflow)";function f(e,t){if(!e)throw new Error(t)}function p(e,t,r){if(f(t instanceof Uint8Array,"Expected ".concat(e," to be an Uint8Array")),void 0!==r)if(Array.isArray(r)){const n=r.join(", "),i="Expected ".concat(e," to be an Uint8Array with length [").concat(n,"]");f(r.includes(t.length),i)}else{const n="Expected ".concat(e," to be an Uint8Array with length ").concat(r);f(t.length===r,n)}}function g(e){f("Boolean"===y(e),"Expected compressed to be a Boolean")}function m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>new Uint8Array(e),t=arguments.length>1?arguments[1]:void 0;return"function"===typeof e&&(e=e(t)),p("output",e,t),e}function y(e){return Object.prototype.toString.call(e).slice(8,-1)}e.exports=e=>({contextRandomize(t){if(f(null===t||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==t&&p("seed",t,32),1===e.contextRandomize(t))throw new Error(i)},privateKeyVerify:t=>(p("private key",t,32),0===e.privateKeyVerify(t)),privateKeyNegate(r){switch(p("private key",r,32),e.privateKeyNegate(r)){case 0:return r;case 1:throw new Error(t)}},privateKeyTweakAdd(t,n){switch(p("private key",t,32),p("tweak",n,32),e.privateKeyTweakAdd(t,n)){case 0:return t;case 1:throw new Error(r)}},privateKeyTweakMul(t,r){switch(p("private key",t,32),p("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(n)}},publicKeyVerify:t=>(p("public key",t,[33,65]),0===e.publicKeyVerify(t)),publicKeyCreate(t){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;switch(p("private key",t,32),g(r),n=m(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error(o);case 2:throw new Error(a)}},publicKeyConvert(t){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;switch(p("public key",t,[33,65]),g(r),n=m(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(s);case 2:throw new Error(a)}},publicKeyNegate(r){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;switch(p("public key",r,[33,65]),g(n),i=m(i,n?33:65),e.publicKeyNegate(i,r)){case 0:return i;case 1:throw new Error(s);case 2:throw new Error(t);case 3:throw new Error(a)}},publicKeyCombine(t){let r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;f(Array.isArray(t),"Expected public keys to be an Array"),f(t.length>0,"Expected public keys array will have more than zero items");for(const e of t)p("public key",e,[33,65]);switch(g(r),n=m(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(s);case 2:throw new Error(c);case 3:throw new Error(a)}},publicKeyTweakAdd(t,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0;switch(p("public key",t,[33,65]),p("tweak",n,32),g(i),o=m(o,i?33:65),e.publicKeyTweakAdd(o,t,n)){case 0:return o;case 1:throw new Error(s);case 2:throw new Error(r)}},publicKeyTweakMul(t,r){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3?arguments[3]:void 0;switch(p("public key",t,[33,65]),p("tweak",r,32),g(i),o=m(o,i?33:65),e.publicKeyTweakMul(o,t,r)){case 0:return o;case 1:throw new Error(s);case 2:throw new Error(n)}},signatureNormalize(t){switch(p("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(u)}},signatureExport(r,n){p("signature",r,64);const i={output:n=m(n,72),outputlen:72};switch(e.signatureExport(i,r)){case 0:return n.slice(0,i.outputlen);case 1:throw new Error(u);case 2:throw new Error(t)}},signatureImport(r,n){switch(p("signature",r),n=m(n,64),e.signatureImport(n,r)){case 0:return n;case 1:throw new Error(u);case 2:throw new Error(t)}},ecdsaSign(r,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;p("message",r,32),p("private key",n,32),f("Object"===y(i),"Expected options to be an Object"),void 0!==i.data&&p("options.data",i.data),void 0!==i.noncefn&&f("Function"===y(i.noncefn),"Expected options.noncefn to be a Function"),o=m(o,64);const s={signature:o,recid:null};switch(e.ecdsaSign(s,r,n,i.data,i.noncefn)){case 0:return s;case 1:throw new Error(l);case 2:throw new Error(t)}},ecdsaVerify(t,r,n){switch(p("signature",t,64),p("message",r,32),p("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(u);case 2:throw new Error(s)}},ecdsaRecover(r,n,i){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0;switch(p("signature",r,64),f("Number"===y(n)&&n>=0&&n<=3,"Expected recovery id to be a Number within interval [0, 3]"),p("message",i,32),g(o),s=m(s,o?33:65),e.ecdsaRecover(s,r,n,i)){case 0:return s;case 1:throw new Error(u);case 2:throw new Error(d);case 3:throw new Error(t)}},ecdh(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0;switch(p("public key",t,[33,65]),p("private key",r,32),f("Object"===y(n),"Expected options to be an Object"),void 0!==n.data&&p("options.data",n.data),void 0!==n.hashfn?(f("Function"===y(n.hashfn),"Expected options.hashfn to be a Function"),void 0!==n.xbuf&&p("options.xbuf",n.xbuf,32),void 0!==n.ybuf&&p("options.ybuf",n.ybuf,32),p("output",i)):i=m(i,32),e.ecdh(i,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return i;case 1:throw new Error(s);case 2:throw new Error(h)}}})},8981:(e,t,r)=>{const n=Symbol("SemVer ANY");class i{static get ANY(){return n}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),u("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,u("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: ".concat(e));this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new l(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(u("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"===typeof e)try{e=new l(e,this.options)}catch(t){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=o(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=i;const o=r(8270),{safeRe:s,t:a}=r(5446),c=r(2907),u=r(9304),l=r(3298),d=r(487)},487:(e,t,r)=>{class n{constructor(e,t){if(t=o(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!m(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&y(t[0])){this.set=[t];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&p)|(this.options.loose&&g))+":"+e,r=i.get(t);if(r)return r;const n=this.options.loose,o=n?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(o,P(this.options.includePrerelease)),a("hyphen replace",e),e=e.replace(u[l.COMPARATORTRIM],d),a("comparator trim",e),e=e.replace(u[l.TILDETRIM],h),a("tilde trim",e),e=e.replace(u[l.CARETTRIM],f),a("caret trim",e);let c=e.split(" ").map((e=>b(e,this.options))).join(" ").split(/\s+/).map((e=>T(e,this.options)));n&&(c=c.filter((e=>(a("loose invalid filter",e,this.options),!!e.match(u[l.COMPARATORLOOSE]))))),a("range list",c);const y=new Map,v=c.map((e=>new s(e,this.options)));for(const i of v){if(m(i))return[i];y.set(i.value,i)}y.size>1&&y.has("")&&y.delete("");const w=[...y.values()];return i.set(t,w),w}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>v(r,t)&&e.set.some((e=>v(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"===typeof e)try{e=new c(e,this.options)}catch(t){return!1}for(let r=0;r<this.set.length;r++)if(R(this.set[r],e,this.options))return!0;return!1}}e.exports=n;const i=new(r(5414))({max:1e3}),o=r(8270),s=r(8981),a=r(9304),c=r(3298),{safeRe:u,t:l,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:f}=r(5446),{FLAG_INCLUDE_PRERELEASE:p,FLAG_LOOSE:g}=r(9836),m=e=>"<0.0.0-0"===e.value,y=e=>""===e.value,v=(e,t)=>{let r=!0;const n=e.slice();let i=n.pop();for(;r&&n.length;)r=n.every((e=>i.intersects(e,t))),i=n.pop();return r},b=(e,t)=>(a("comp",e,t),e=A(e,t),a("caret",e),e=_(e,t),a("tildes",e),e=k(e,t),a("xrange",e),e=I(e,t),a("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,_=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{const r=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(r,((t,r,n,i,o)=>{let s;return a("tilde",e,t,r,n,i,o),w(r)?s="":w(n)?s=">=".concat(r,".0.0 <").concat(+r+1,".0.0-0"):w(i)?s=">=".concat(r,".").concat(n,".0 <").concat(r,".").concat(+n+1,".0-0"):o?(a("replaceTilde pr",o),s=">=".concat(r,".").concat(n,".").concat(i,"-").concat(o," <").concat(r,".").concat(+n+1,".0-0")):s=">=".concat(r,".").concat(n,".").concat(i," <").concat(r,".").concat(+n+1,".0-0"),a("tilde return",s),s}))},A=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{a("caret",e,t);const r=t.loose?u[l.CARETLOOSE]:u[l.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,i,o,s)=>{let c;return a("caret",e,t,r,i,o,s),w(r)?c="":w(i)?c=">=".concat(r,".0.0").concat(n," <").concat(+r+1,".0.0-0"):w(o)?c="0"===r?">=".concat(r,".").concat(i,".0").concat(n," <").concat(r,".").concat(+i+1,".0-0"):">=".concat(r,".").concat(i,".0").concat(n," <").concat(+r+1,".0.0-0"):s?(a("replaceCaret pr",s),c="0"===r?"0"===i?">=".concat(r,".").concat(i,".").concat(o,"-").concat(s," <").concat(r,".").concat(i,".").concat(+o+1,"-0"):">=".concat(r,".").concat(i,".").concat(o,"-").concat(s," <").concat(r,".").concat(+i+1,".0-0"):">=".concat(r,".").concat(i,".").concat(o,"-").concat(s," <").concat(+r+1,".0.0-0")):(a("no pr"),c="0"===r?"0"===i?">=".concat(r,".").concat(i,".").concat(o).concat(n," <").concat(r,".").concat(i,".").concat(+o+1,"-0"):">=".concat(r,".").concat(i,".").concat(o).concat(n," <").concat(r,".").concat(+i+1,".0-0"):">=".concat(r,".").concat(i,".").concat(o," <").concat(+r+1,".0.0-0")),a("caret return",c),c}))},k=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map((e=>x(e,t))).join(" ")),x=(e,t)=>{e=e.trim();const r=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(r,((r,n,i,o,s,c)=>{a("xRange",e,r,n,i,o,s,c);const u=w(i),l=u||w(o),d=l||w(s),h=d;return"="===n&&h&&(n=""),c=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(l&&(o=0),s=0,">"===n?(n=">=",l?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===n&&(n="<",l?i=+i+1:o=+o+1),"<"===n&&(c="-0"),r="".concat(n+i,".").concat(o,".").concat(s).concat(c)):l?r=">=".concat(i,".0.0").concat(c," <").concat(+i+1,".0.0-0"):d&&(r=">=".concat(i,".").concat(o,".0").concat(c," <").concat(i,".").concat(+o+1,".0-0")),a("xRange return",r),r}))},I=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[l.STAR],"")),T=(e,t)=>(a("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),P=e=>(t,r,n,i,o,s,a,c,u,l,d,h,f)=>(r=w(n)?"":w(i)?">=".concat(n,".0.0").concat(e?"-0":""):w(o)?">=".concat(n,".").concat(i,".0").concat(e?"-0":""):s?">=".concat(r):">=".concat(r).concat(e?"-0":""),c=w(u)?"":w(l)?"<".concat(+u+1,".0.0-0"):w(d)?"<".concat(u,".").concat(+l+1,".0-0"):h?"<=".concat(u,".").concat(l,".").concat(d,"-").concat(h):e?"<".concat(u,".").concat(l,".").concat(+d+1,"-0"):"<=".concat(c),"".concat(r," ").concat(c).trim()),R=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(a(e[r].semver),e[r].semver!==s.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},3298:(e,t,r)=>{const n=r(9304),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(9836),{safeRe:s,t:a}=r(5446),c=r(8270),{compareIdentifiers:u}=r(3228);class l{constructor(e,t){if(t=c(t),e instanceof l){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!==typeof e)throw new TypeError('Invalid version. Must be a string. Got type "'.concat(typeof e,'".'));if(e.length>i)throw new TypeError("version is longer than ".concat(i," characters"));n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!r)throw new TypeError("Invalid Version: ".concat(e));if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof l)){if("string"===typeof e&&e===this.version)return 0;e=new l(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof l||(e=new l(e,this.options)),u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(e instanceof l||(e=new l(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}compareBuild(e){e instanceof l||(e=new l(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(n("prerelease compare",t,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"===typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===u(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error("invalid increment argument: ".concat(e))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}}e.exports=l},5365:(e,t,r)=>{const n=r(7985);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},2907:(e,t,r)=>{const n=r(5378),i=r(9078),o=r(4544),s=r(6310),a=r(4562),c=r(7532);e.exports=(e,t,r,u)=>{switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof r&&(r=r.version),e===r;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,u);case"!=":return i(e,r,u);case">":return o(e,r,u);case">=":return s(e,r,u);case"<":return a(e,r,u);case"<=":return c(e,r,u);default:throw new TypeError("Invalid operator: ".concat(t))}}},5071:(e,t,r)=>{const n=r(3298),i=r(7985),{safeRe:o,t:s}=r(5446);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"===typeof e&&(e=String(e)),"string"!==typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=o[s.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),o[s.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;o[s.COERCERTL].lastIndex=-1}else r=e.match(o[s.COERCE]);return null===r?null:i("".concat(r[2],".").concat(r[3]||"0",".").concat(r[4]||"0"),t)}},136:(e,t,r)=>{const n=r(3298);e.exports=(e,t,r)=>{const i=new n(e,r),o=new n(t,r);return i.compare(o)||i.compareBuild(o)}},832:(e,t,r)=>{const n=r(2384);e.exports=(e,t)=>n(e,t,!0)},2384:(e,t,r)=>{const n=r(3298);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},639:(e,t,r)=>{const n=r(7985);e.exports=(e,t)=>{const r=n(e,null,!0),i=n(t,null,!0),o=r.compare(i);if(0===o)return null;const s=o>0,a=s?r:i,c=s?i:r,u=!!a.prerelease.length;if(!!c.prerelease.length&&!u)return c.patch||c.minor?a.patch?"patch":a.minor?"minor":"major":"major";const l=u?"pre":"";return r.major!==i.major?l+"major":r.minor!==i.minor?l+"minor":r.patch!==i.patch?l+"patch":"prerelease"}},5378:(e,t,r)=>{const n=r(2384);e.exports=(e,t,r)=>0===n(e,t,r)},4544:(e,t,r)=>{const n=r(2384);e.exports=(e,t,r)=>n(e,t,r)>0},6310:(e,t,r)=>{const n=r(2384);e.exports=(e,t,r)=>n(e,t,r)>=0},6778:(e,t,r)=>{const n=r(3298);e.exports=(e,t,r,i,o)=>{"string"===typeof r&&(o=i,i=r,r=void 0);try{return new n(e instanceof n?e.version:e,r).inc(t,i,o).version}catch(s){return null}}},4562:(e,t,r)=>{const n=r(2384);e.exports=(e,t,r)=>n(e,t,r)<0},7532:(e,t,r)=>{const n=r(2384);e.exports=(e,t,r)=>n(e,t,r)<=0},2750:(e,t,r)=>{const n=r(3298);e.exports=(e,t)=>new n(e,t).major},4184:(e,t,r)=>{const n=r(3298);e.exports=(e,t)=>new n(e,t).minor},9078:(e,t,r)=>{const n=r(2384);e.exports=(e,t,r)=>0!==n(e,t,r)},7985:(e,t,r)=>{const n=r(3298);e.exports=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e instanceof n)return e;try{return new n(e,t)}catch(i){if(!r)return null;throw i}}},5093:(e,t,r)=>{const n=r(3298);e.exports=(e,t)=>new n(e,t).patch},9361:(e,t,r)=>{const n=r(7985);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},8111:(e,t,r)=>{const n=r(2384);e.exports=(e,t,r)=>n(t,e,r)},6658:(e,t,r)=>{const n=r(136);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},2529:(e,t,r)=>{const n=r(487);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(i){return!1}return t.test(e)}},3462:(e,t,r)=>{const n=r(136);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},6793:(e,t,r)=>{const n=r(7985);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},724:(e,t,r)=>{const n=r(5446),i=r(9836),o=r(3298),s=r(3228),a=r(7985),c=r(6793),u=r(5365),l=r(6778),d=r(639),h=r(2750),f=r(4184),p=r(5093),g=r(9361),m=r(2384),y=r(8111),v=r(832),b=r(136),w=r(3462),_=r(6658),E=r(4544),A=r(4562),S=r(5378),k=r(9078),x=r(6310),I=r(7532),T=r(2907),P=r(5071),R=r(8981),C=r(487),B=r(2529),M=r(7545),N=r(4774),O=r(670),D=r(1219),L=r(1383),U=r(2643),F=r(7281),j=r(5675),q=r(8772),z=r(4934),H=r(6669);e.exports={parse:a,valid:c,clean:u,inc:l,diff:d,major:h,minor:f,patch:p,prerelease:g,compare:m,rcompare:y,compareLoose:v,compareBuild:b,sort:w,rsort:_,gt:E,lt:A,eq:S,neq:k,gte:x,lte:I,cmp:T,coerce:P,Comparator:R,Range:C,satisfies:B,toComparators:M,maxSatisfying:N,minSatisfying:O,minVersion:D,validRange:L,outside:U,gtr:F,ltr:j,intersects:q,simplifyRange:z,subset:H,SemVer:o,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},9836:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},9304:e=>{const t="object"===typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/WhisUp3",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",PUBLIC_URL:"/WhisUp3",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return console.error("SEMVER",...t)}:()=>{};e.exports=t},3228:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),i=t.test(r);return n&&i&&(e=+e,r=+r),e===r?0:n&&!i?-1:i&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},8270:e=>{const t=Object.freeze({loose:!0}),r=Object.freeze({});e.exports=e=>e?"object"!==typeof e?t:e:r},5446:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(9836),s=r(9304),a=(t=e.exports={}).re=[],c=t.safeRe=[],u=t.src=[],l=t.t={};let d=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[h,i]],p=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split("".concat(t,"*")).join("".concat(t,"{0,").concat(r,"}")).split("".concat(t,"+")).join("".concat(t,"{1,").concat(r,"}"));return e})(t),i=d++;s(e,i,t),l[e]=i,u[i]=t,a[i]=new RegExp(t,r?"g":void 0),c[i]=new RegExp(n,r?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(h,"*")),p("MAINVERSION","(".concat(u[l.NUMERICIDENTIFIER],")\\.")+"(".concat(u[l.NUMERICIDENTIFIER],")\\.")+"(".concat(u[l.NUMERICIDENTIFIER],")")),p("MAINVERSIONLOOSE","(".concat(u[l.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(u[l.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(u[l.NUMERICIDENTIFIERLOOSE],")")),p("PRERELEASEIDENTIFIER","(?:".concat(u[l.NUMERICIDENTIFIER],"|").concat(u[l.NONNUMERICIDENTIFIER],")")),p("PRERELEASEIDENTIFIERLOOSE","(?:".concat(u[l.NUMERICIDENTIFIERLOOSE],"|").concat(u[l.NONNUMERICIDENTIFIER],")")),p("PRERELEASE","(?:-(".concat(u[l.PRERELEASEIDENTIFIER],"(?:\\.").concat(u[l.PRERELEASEIDENTIFIER],")*))")),p("PRERELEASELOOSE","(?:-?(".concat(u[l.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(u[l.PRERELEASEIDENTIFIERLOOSE],")*))")),p("BUILDIDENTIFIER","".concat(h,"+")),p("BUILD","(?:\\+(".concat(u[l.BUILDIDENTIFIER],"(?:\\.").concat(u[l.BUILDIDENTIFIER],")*))")),p("FULLPLAIN","v?".concat(u[l.MAINVERSION]).concat(u[l.PRERELEASE],"?").concat(u[l.BUILD],"?")),p("FULL","^".concat(u[l.FULLPLAIN],"$")),p("LOOSEPLAIN","[v=\\s]*".concat(u[l.MAINVERSIONLOOSE]).concat(u[l.PRERELEASELOOSE],"?").concat(u[l.BUILD],"?")),p("LOOSE","^".concat(u[l.LOOSEPLAIN],"$")),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE","".concat(u[l.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),p("XRANGEIDENTIFIER","".concat(u[l.NUMERICIDENTIFIER],"|x|X|\\*")),p("XRANGEPLAIN","[v=\\s]*(".concat(u[l.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(u[l.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(u[l.XRANGEIDENTIFIER],")")+"(?:".concat(u[l.PRERELEASE],")?").concat(u[l.BUILD],"?")+")?)?"),p("XRANGEPLAINLOOSE","[v=\\s]*(".concat(u[l.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(u[l.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(u[l.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(u[l.PRERELEASELOOSE],")?").concat(u[l.BUILD],"?")+")?)?"),p("XRANGE","^".concat(u[l.GTLT],"\\s*").concat(u[l.XRANGEPLAIN],"$")),p("XRANGELOOSE","^".concat(u[l.GTLT],"\\s*").concat(u[l.XRANGEPLAINLOOSE],"$")),p("COERCE","".concat("(^|[^\\d])(\\d{1,").concat(n,"})")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:\\.(\\d{1,".concat(n,"}))?")+"(?:$|[^\\d])"),p("COERCERTL",u[l.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM","(\\s*)".concat(u[l.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",p("TILDE","^".concat(u[l.LONETILDE]).concat(u[l.XRANGEPLAIN],"$")),p("TILDELOOSE","^".concat(u[l.LONETILDE]).concat(u[l.XRANGEPLAINLOOSE],"$")),p("LONECARET","(?:\\^)"),p("CARETTRIM","(\\s*)".concat(u[l.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",p("CARET","^".concat(u[l.LONECARET]).concat(u[l.XRANGEPLAIN],"$")),p("CARETLOOSE","^".concat(u[l.LONECARET]).concat(u[l.XRANGEPLAINLOOSE],"$")),p("COMPARATORLOOSE","^".concat(u[l.GTLT],"\\s*(").concat(u[l.LOOSEPLAIN],")$|^$")),p("COMPARATOR","^".concat(u[l.GTLT],"\\s*(").concat(u[l.FULLPLAIN],")$|^$")),p("COMPARATORTRIM","(\\s*)".concat(u[l.GTLT],"\\s*(").concat(u[l.LOOSEPLAIN],"|").concat(u[l.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE","^\\s*(".concat(u[l.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(u[l.XRANGEPLAIN],")")+"\\s*$"),p("HYPHENRANGELOOSE","^\\s*(".concat(u[l.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(u[l.XRANGEPLAINLOOSE],")")+"\\s*$"),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},5414:(e,t,r)=>{"use strict";const n=r(434),i=Symbol("max"),o=Symbol("length"),s=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),u=Symbol("dispose"),l=Symbol("noDisposeOnSet"),d=Symbol("lruList"),h=Symbol("cache"),f=Symbol("updateAgeOnGet"),p=()=>1;const g=(e,t,r)=>{const n=e[h].get(t);if(n){const t=n.value;if(m(e,t)){if(v(e,n),!e[a])return}else r&&(e[f]&&(n.value.now=Date.now()),e[d].unshiftNode(n));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},y=e=>{if(e[o]>e[i])for(let t=e[d].tail;e[o]>e[i]&&null!==t;){const r=t.prev;v(e,t),t=r}},v=(e,t)=>{if(t){const r=t.value;e[u]&&e[u](r.key,r.value),e[o]-=r.length,e[h].delete(r.key),e[d].removeNode(t)}};class b{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const w=(e,t,r,n)=>{let i=r.value;m(e,i)&&(v(e,r),e[a]||(i=void 0)),i&&t.call(n,i.value,i.key,e)};e.exports=class{constructor(e){if("number"===typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!==typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||p;if(this[s]="function"!==typeof t?p:t,this[a]=e.stale||!1,e.maxAge&&"number"!==typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[u]=e.dispose,this[l]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!==typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,y(this)}get max(){return this[i]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!==typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,y(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!==typeof e&&(e=p),e!==this[s]&&(this[s]=e,this[o]=0,this[d].forEach((e=>{e.length=this[s](e.value,e.key),this[o]+=e.length}))),y(this)}get lengthCalculator(){return this[s]}get length(){return this[o]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let r=this[d].tail;null!==r;){const n=r.prev;w(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[d].head;null!==r;){const n=r.next;w(this,e,r,t),r=n}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[u]&&this[d]&&this[d].length&&this[d].forEach((e=>this[u](e.key,e.value))),this[h]=new Map,this[d]=new n,this[o]=0}dump(){return this[d].map((e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,r){if((r=r||this[c])&&"number"!==typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,a=this[s](t,e);if(this[h].has(e)){if(a>this[i])return v(this,this[h].get(e)),!1;const s=this[h].get(e).value;return this[u]&&(this[l]||this[u](e,s.value)),s.now=n,s.maxAge=r,s.value=t,this[o]+=a-s.length,s.length=a,this.get(e),y(this),!0}const f=new b(e,t,a,n,r);return f.length>this[i]?(this[u]&&this[u](e,t),!1):(this[o]+=f.length,this[d].unshift(f),this[h].set(e,this[d].head),y(this),!0)}has(e){if(!this[h].has(e))return!1;const t=this[h].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[d].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[h].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{const e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[h].forEach(((e,t)=>g(this,t,!1)))}}},1817:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},434:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"===typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)t.push(arguments[r]);return t}function i(e,t,r){var n=t===e.head?new a(r,null,t,e):new a(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function o(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,i=this.head;null!==i;)r.push(e.call(t,i.value,this)),i=i.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,i=this.tail;null!==i;)r.push(e.call(t,i.value,this)),i=i.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)r.push(o.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)r.push(o.value);return r},n.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;var o=[];for(r=0;n&&r<t;r++)o.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(r=0;r<(arguments.length<=2?0:arguments.length-2);r++)n=i(this,n,r+2<2||arguments.length<=r+2?void 0:arguments[r+2]);return o},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(1817)(n)}catch(c){}},7281:(e,t,r)=>{const n=r(2643);e.exports=(e,t,r)=>n(e,t,">",r)},8772:(e,t,r)=>{const n=r(487);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t,r))},5675:(e,t,r)=>{const n=r(2643);e.exports=(e,t,r)=>n(e,t,"<",r)},4774:(e,t,r)=>{const n=r(3298),i=r(487);e.exports=(e,t,r)=>{let o=null,s=null,a=null;try{a=new i(t,r)}catch(c){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new n(o,r)))})),o}},670:(e,t,r)=>{const n=r(3298),i=r(487);e.exports=(e,t,r)=>{let o=null,s=null,a=null;try{a=new i(t,r)}catch(c){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new n(o,r)))})),o}},1219:(e,t,r)=>{const n=r(3298),i=r(487),o=r(4544);e.exports=(e,t)=>{e=new i(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let i=0;i<e.set.length;++i){const t=e.set[i];let s=null;t.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(e.operator))}})),!s||r&&!o(r,s)||(r=s)}return r&&e.test(r)?r:null}},2643:(e,t,r)=>{const n=r(3298),i=r(8981),{ANY:o}=i,s=r(487),a=r(2529),c=r(4544),u=r(4562),l=r(7532),d=r(6310);e.exports=(e,t,r,h)=>{let f,p,g,m,y;switch(e=new n(e,h),t=new s(t,h),r){case">":f=c,p=l,g=u,m=">",y=">=";break;case"<":f=u,p=d,g=c,m="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,h))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let s=null,a=null;if(r.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),s=s||e,a=a||e,f(e.semver,s.semver,h)?s=e:g(e.semver,a.semver,h)&&(a=e)})),s.operator===m||s.operator===y)return!1;if((!a.operator||a.operator===m)&&p(e,a.semver))return!1;if(a.operator===y&&g(e,a.semver))return!1}return!0}},4934:(e,t,r)=>{const n=r(2529),i=r(2384);e.exports=(e,t,r)=>{const o=[];let s=null,a=null;const c=e.sort(((e,t)=>i(e,t,r)));for(const i of c){n(i,t,r)?(a=i,s||(s=i)):(a&&o.push([s,a]),a=null,s=null)}s&&o.push([s,null]);const u=[];for(const[n,i]of o)n===i?u.push(n):i||n!==c[0]?i?n===c[0]?u.push("<=".concat(i)):u.push("".concat(n," - ").concat(i)):u.push(">=".concat(n)):u.push("*");const l=u.join(" || "),d="string"===typeof t.raw?t.raw:String(t);return l.length<d.length?l:t}},6669:(e,t,r)=>{const n=r(487),i=r(8981),{ANY:o}=i,s=r(2529),a=r(2384),c=[new i(">=0.0.0-0")],u=[new i(">=0.0.0")],l=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=r.includePrerelease?c:u}if(1===t.length&&t[0].semver===o){if(r.includePrerelease)return!0;t=u}const n=new Set;let i,l,f,p,g,m,y;for(const o of e)">"===o.operator||">="===o.operator?i=d(i,o,r):"<"===o.operator||"<="===o.operator?l=h(l,o,r):n.add(o.semver);if(n.size>1)return null;if(i&&l){if(f=a(i.semver,l.semver,r),f>0)return null;if(0===f&&(">="!==i.operator||"<="!==l.operator))return null}for(const o of n){if(i&&!s(o,String(i),r))return null;if(l&&!s(o,String(l),r))return null;for(const e of t)if(!s(o,String(e),r))return!1;return!0}let v=!(!l||r.includePrerelease||!l.semver.prerelease.length)&&l.semver,b=!(!i||r.includePrerelease||!i.semver.prerelease.length)&&i.semver;v&&1===v.prerelease.length&&"<"===l.operator&&0===v.prerelease[0]&&(v=!1);for(const o of t){if(y=y||">"===o.operator||">="===o.operator,m=m||"<"===o.operator||"<="===o.operator,i)if(b&&o.semver.prerelease&&o.semver.prerelease.length&&o.semver.major===b.major&&o.semver.minor===b.minor&&o.semver.patch===b.patch&&(b=!1),">"===o.operator||">="===o.operator){if(p=d(i,o,r),p===o&&p!==i)return!1}else if(">="===i.operator&&!s(i.semver,String(o),r))return!1;if(l)if(v&&o.semver.prerelease&&o.semver.prerelease.length&&o.semver.major===v.major&&o.semver.minor===v.minor&&o.semver.patch===v.patch&&(v=!1),"<"===o.operator||"<="===o.operator){if(g=h(l,o,r),g===o&&g!==l)return!1}else if("<="===l.operator&&!s(l.semver,String(o),r))return!1;if(!o.operator&&(l||i)&&0!==f)return!1}return!(i&&m&&!l&&0!==f)&&(!(l&&y&&!i&&0!==f)&&(!b&&!v))},d=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,r)=>{if(!e)return t;const n=a(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;e=new n(e,r),t=new n(t,r);let i=!1;e:for(const n of e.set){for(const e of t.set){const t=l(n,e,r);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},7545:(e,t,r)=>{const n=r(487);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},1383:(e,t,r)=>{const n=r(487);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(r){return null}}},5986:(e,t,r)=>{"use strict";var n=r(2506),i=r(2651),o=r(4510)(),s=r(3347),a=n("%TypeError%"),c=n("%Math.floor%");e.exports=function(e,t){if("function"!==typeof e)throw new a("`fn` is not a function");if("number"!==typeof t||t<0||t>4294967295||c(t)!==t)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,u=!0;if("length"in e&&s){var l=s(e,"length");l&&!l.configurable&&(n=!1),l&&!l.writable&&(u=!1)}return(n||u||!r)&&(o?i(e,"length",t,!0,!0):i(e,"length",t)),e}},1878:function(e,t,r){!function(e,t){"use strict";if(!e.setImmediate){var r,n=1,i={},o=!1,s=e.document,a=Object.getPrototypeOf&&Object.getPrototypeOf(e);a=a&&a.setTimeout?a:e,"[object process]"==={}.toString.call(e.process)?r=function(e){process.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(r){r.source===e&&"string"===typeof r.data&&0===r.data.indexOf(t)&&u(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},r=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;r=function(t){var r=s.createElement("script");r.onreadystatechange=function(){u(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():r=function(e){setTimeout(u,0,e)},a.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),o=0;o<t.length;o++)t[o]=arguments[o+1];var s={callback:e,args:t};return i[n]=s,r(n),n++},a.clearImmediate=c}function c(e){delete i[e]}function u(e){if(o)setTimeout(u,0,e);else{var r=i[e];if(r){o=!0;try{!function(e){var r=e.callback,n=e.args;switch(n.length){case 0:r();break;case 1:r(n[0]);break;case 2:r(n[0],n[1]);break;case 3:r(n[0],n[1],n[2]);break;default:r.apply(t,n)}}(r)}finally{c(e),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof r.g?this:r.g:self)},4454:(e,t,r)=>{var n=r(2543).Buffer;function i(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"===typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,o=e.length,s=this._len,a=0;a<o;){for(var c=s%i,u=Math.min(o-a,i-c),l=0;l<u;l++)r[c+l]=e[a+l];a+=u,(s+=u)%i===0&&this._update(r)}return this._len+=o,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,i=(r-n)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var o=this._hash();return e?o.toString(e):o},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=i},997:(e,t,r)=>{var n=e.exports=function(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};n.sha=r(9940),n.sha1=r(7453),n.sha224=r(8633),n.sha256=r(7101),n.sha384=r(713),n.sha512=r(3884)},9940:(e,t,r)=>{var n=r(2534),i=r(4454),o=r(2543).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,i.call(this,64,56)}function u(e){return e<<30|e>>>2}function l(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,c=0|this._e,d=0;d<16;++d)r[d]=e.readInt32BE(4*d);for(;d<80;++d)r[d]=r[d-3]^r[d-8]^r[d-14]^r[d-16];for(var h=0;h<80;++h){var f=~~(h/20),p=0|((t=n)<<5|t>>>27)+l(f,i,o,a)+c+r[h]+s[f];c=a,a=o,o=u(i),i=n,n=p}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},7453:(e,t,r)=>{var n=r(2534),i=r(4454),o=r(2543).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function c(){this.init(),this._w=a,i.call(this,64,56)}function u(e){return e<<5|e>>>27}function l(e){return e<<30|e>>>2}function d(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}n(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,c=0|this._e,h=0;h<16;++h)r[h]=e.readInt32BE(4*h);for(;h<80;++h)r[h]=(t=r[h-3]^r[h-8]^r[h-14]^r[h-16])<<1|t>>>31;for(var f=0;f<80;++f){var p=~~(f/20),g=u(n)+d(p,i,o,a)+c+r[f]+s[p]|0;c=a,a=o,o=l(i),i=n,n=g}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=o.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},8633:(e,t,r)=>{var n=r(2534),i=r(7101),o=r(4454),s=r(2543).Buffer,a=new Array(64);function c(){this.init(),this._w=a,o.call(this,64,56)}n(c,i),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=c},7101:(e,t,r)=>{var n=r(2534),i=r(4454),o=r(2543).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function c(){this.init(),this._w=a,i.call(this,64,56)}function u(e,t,r){return r^e&(t^r)}function l(e,t,r){return e&t|r&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function f(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}n(c,i),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(e){for(var t,r=this._w,n=0|this._a,i=0|this._b,o=0|this._c,a=0|this._d,c=0|this._e,p=0|this._f,g=0|this._g,m=0|this._h,y=0;y<16;++y)r[y]=e.readInt32BE(4*y);for(;y<64;++y)r[y]=0|(((t=r[y-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+r[y-7]+f(r[y-15])+r[y-16];for(var v=0;v<64;++v){var b=m+h(c)+u(c,p,g)+s[v]+r[v]|0,w=d(n)+l(n,i,o)|0;m=g,g=p,p=c,c=a+b|0,a=o,o=i,i=n,n=b+w|0}this._a=n+this._a|0,this._b=i+this._b|0,this._c=o+this._c|0,this._d=a+this._d|0,this._e=c+this._e|0,this._f=p+this._f|0,this._g=g+this._g|0,this._h=m+this._h|0},c.prototype._hash=function(){var e=o.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=c},713:(e,t,r)=>{var n=r(2534),i=r(3884),o=r(4454),s=r(2543).Buffer,a=new Array(160);function c(){this.init(),this._w=a,o.call(this,128,112)}n(c,i),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var e=s.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=c},3884:(e,t,r)=>{var n=r(2534),i=r(4454),o=r(2543).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function c(){this.init(),this._w=a,i.call(this,128,112)}function u(e,t,r){return r^e&(t^r)}function l(e,t,r){return e&t|r&(e|t)}function d(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function y(e,t){return e>>>0<t>>>0?1:0}n(c,i),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(e){for(var t=this._w,r=0|this._ah,n=0|this._bh,i=0|this._ch,o=0|this._dh,a=0|this._eh,c=0|this._fh,v=0|this._gh,b=0|this._hh,w=0|this._al,_=0|this._bl,E=0|this._cl,A=0|this._dl,S=0|this._el,k=0|this._fl,x=0|this._gl,I=0|this._hl,T=0;T<32;T+=2)t[T]=e.readInt32BE(4*T),t[T+1]=e.readInt32BE(4*T+4);for(;T<160;T+=2){var P=t[T-30],R=t[T-30+1],C=f(P,R),B=p(R,P),M=g(P=t[T-4],R=t[T-4+1]),N=m(R,P),O=t[T-14],D=t[T-14+1],L=t[T-32],U=t[T-32+1],F=B+D|0,j=C+O+y(F,B)|0;j=(j=j+M+y(F=F+N|0,N)|0)+L+y(F=F+U|0,U)|0,t[T]=j,t[T+1]=F}for(var q=0;q<160;q+=2){j=t[q],F=t[q+1];var z=l(r,n,i),H=l(w,_,E),K=d(r,w),V=d(w,r),G=h(a,S),W=h(S,a),Q=s[q],J=s[q+1],Z=u(a,c,v),Y=u(S,k,x),X=I+W|0,$=b+G+y(X,I)|0;$=($=($=$+Z+y(X=X+Y|0,Y)|0)+Q+y(X=X+J|0,J)|0)+j+y(X=X+F|0,F)|0;var ee=V+H|0,te=K+z+y(ee,V)|0;b=v,I=x,v=c,x=k,c=a,k=S,a=o+$+y(S=A+X|0,A)|0,o=i,A=E,i=n,E=_,n=r,_=w,r=$+te+y(w=X+ee|0,X)|0}this._al=this._al+w|0,this._bl=this._bl+_|0,this._cl=this._cl+E|0,this._dl=this._dl+A|0,this._el=this._el+S|0,this._fl=this._fl+k|0,this._gl=this._gl+x|0,this._hl=this._hl+I|0,this._ah=this._ah+r+y(this._al,w)|0,this._bh=this._bh+n+y(this._bl,_)|0,this._ch=this._ch+i+y(this._cl,E)|0,this._dh=this._dh+o+y(this._dl,A)|0,this._eh=this._eh+a+y(this._el,S)|0,this._fh=this._fh+c+y(this._fl,k)|0,this._gh=this._gh+v+y(this._gl,x)|0,this._hh=this._hh+b+y(this._hl,I)|0},c.prototype._hash=function(){var e=o.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=c},5948:(e,t,r)=>{"use strict";var n=r(2543).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(n.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=l,this.end=d,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function s(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function l(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.s=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},o.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(i=s(t[n]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(i=s(t[n]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},206:(e,t,r)=>{"use strict";var n=r(9022),i=r(4847);e.exports=n.bind(null,i)},9022:e=>{"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e,n,i){if("string"!==typeof n)throw new Error("Input must be string");for(var o,s,a=n.length,c=0,u=0;u<a;u+=1){if(o=n.charCodeAt(u),s=n[u],t(o)&&r(n.charCodeAt(u+1))&&(s+=n[u+=1]),(c+=e(s))===i)return n.slice(0,u+1);if(c>i)return n.slice(0,u-s.length+1)}return n}},3528:function(e){!function(t,r){"use strict";e.exports?e.exports=r():(t.nacl||(t.nacl={}),t.nacl.util=r())}(this,(function(){"use strict";var e={};function t(e){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(e){if("string"!==typeof e)throw new TypeError("expected string");var t,r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n},e.encodeUTF8=function(e){var t,r=[];for(t=0;t<e.length;t++)r.push(String.fromCharCode(e[t]));return decodeURIComponent(escape(r.join("")))},"undefined"===typeof atob?"undefined"!==typeof Buffer.from?(e.encodeBase64=function(e){return Buffer.from(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(Buffer.from(e,"base64"),0))}):(e.encodeBase64=function(e){return new Buffer(e).toString("base64")},e.decodeBase64=function(e){return t(e),new Uint8Array(Array.prototype.slice.call(new Buffer(e,"base64"),0))}):(e.encodeBase64=function(e){var t,r=[],n=e.length;for(t=0;t<n;t++)r.push(String.fromCharCode(e[t]));return btoa(r.join(""))},e.decodeBase64=function(e){t(e);var r,n=atob(e),i=new Uint8Array(n.length);for(r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}),e}))},2826:(e,t,r)=>{!function(e){"use strict";var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=t(),a=t([1]),c=t([56129,1]),u=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),l=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),d=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),f=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function p(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function g(e,t,r,n,i){var o,s=0;for(o=0;o<i;o++)s|=e[t+o]^r[n+o];return(1&s-1>>>8)-1}function m(e,t,r,n){return g(e,t,r,n,16)}function y(e,t,r,n){return g(e,t,r,n,32)}function v(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=o,E=s,A=a,S=c,k=u,x=l,I=d,T=h,P=f,R=p,C=g,B=m,M=y,N=v,O=b,D=w,L=0;L<20;L+=2)_^=(i=(M^=(i=(P^=(i=(k^=(i=_+M|0)<<7|i>>>25)+_|0)<<9|i>>>23)+k|0)<<13|i>>>19)+P|0)<<18|i>>>14,x^=(i=(E^=(i=(N^=(i=(R^=(i=x+E|0)<<7|i>>>25)+x|0)<<9|i>>>23)+R|0)<<13|i>>>19)+N|0)<<18|i>>>14,C^=(i=(I^=(i=(A^=(i=(O^=(i=C+I|0)<<7|i>>>25)+C|0)<<9|i>>>23)+O|0)<<13|i>>>19)+A|0)<<18|i>>>14,D^=(i=(B^=(i=(T^=(i=(S^=(i=D+B|0)<<7|i>>>25)+D|0)<<9|i>>>23)+S|0)<<13|i>>>19)+T|0)<<18|i>>>14,_^=(i=(S^=(i=(A^=(i=(E^=(i=_+S|0)<<7|i>>>25)+_|0)<<9|i>>>23)+E|0)<<13|i>>>19)+A|0)<<18|i>>>14,x^=(i=(k^=(i=(T^=(i=(I^=(i=x+k|0)<<7|i>>>25)+x|0)<<9|i>>>23)+I|0)<<13|i>>>19)+T|0)<<18|i>>>14,C^=(i=(R^=(i=(P^=(i=(B^=(i=C+R|0)<<7|i>>>25)+C|0)<<9|i>>>23)+B|0)<<13|i>>>19)+P|0)<<18|i>>>14,D^=(i=(O^=(i=(N^=(i=(M^=(i=D+O|0)<<7|i>>>25)+D|0)<<9|i>>>23)+M|0)<<13|i>>>19)+N|0)<<18|i>>>14;_=_+o|0,E=E+s|0,A=A+a|0,S=S+c|0,k=k+u|0,x=x+l|0,I=I+d|0,T=T+h|0,P=P+f|0,R=R+p|0,C=C+g|0,B=B+m|0,M=M+y|0,N=N+v|0,O=O+b|0,D=D+w|0,e[0]=_>>>0&255,e[1]=_>>>8&255,e[2]=_>>>16&255,e[3]=_>>>24&255,e[4]=E>>>0&255,e[5]=E>>>8&255,e[6]=E>>>16&255,e[7]=E>>>24&255,e[8]=A>>>0&255,e[9]=A>>>8&255,e[10]=A>>>16&255,e[11]=A>>>24&255,e[12]=S>>>0&255,e[13]=S>>>8&255,e[14]=S>>>16&255,e[15]=S>>>24&255,e[16]=k>>>0&255,e[17]=k>>>8&255,e[18]=k>>>16&255,e[19]=k>>>24&255,e[20]=x>>>0&255,e[21]=x>>>8&255,e[22]=x>>>16&255,e[23]=x>>>24&255,e[24]=I>>>0&255,e[25]=I>>>8&255,e[26]=I>>>16&255,e[27]=I>>>24&255,e[28]=T>>>0&255,e[29]=T>>>8&255,e[30]=T>>>16&255,e[31]=T>>>24&255,e[32]=P>>>0&255,e[33]=P>>>8&255,e[34]=P>>>16&255,e[35]=P>>>24&255,e[36]=R>>>0&255,e[37]=R>>>8&255,e[38]=R>>>16&255,e[39]=R>>>24&255,e[40]=C>>>0&255,e[41]=C>>>8&255,e[42]=C>>>16&255,e[43]=C>>>24&255,e[44]=B>>>0&255,e[45]=B>>>8&255,e[46]=B>>>16&255,e[47]=B>>>24&255,e[48]=M>>>0&255,e[49]=M>>>8&255,e[50]=M>>>16&255,e[51]=M>>>24&255,e[52]=N>>>0&255,e[53]=N>>>8&255,e[54]=N>>>16&255,e[55]=N>>>24&255,e[56]=O>>>0&255,e[57]=O>>>8&255,e[58]=O>>>16&255,e[59]=O>>>24&255,e[60]=D>>>0&255,e[61]=D>>>8&255,e[62]=D>>>16&255,e[63]=D>>>24&255}(e,t,r,n)}function b(e,t,r,n){!function(e,t,r,n){for(var i,o=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,m=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,y=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,v=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,b=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,_=0;_<20;_+=2)o^=(i=(y^=(i=(f^=(i=(u^=(i=o+y|0)<<7|i>>>25)+o|0)<<9|i>>>23)+u|0)<<13|i>>>19)+f|0)<<18|i>>>14,l^=(i=(s^=(i=(v^=(i=(p^=(i=l+s|0)<<7|i>>>25)+l|0)<<9|i>>>23)+p|0)<<13|i>>>19)+v|0)<<18|i>>>14,g^=(i=(d^=(i=(a^=(i=(b^=(i=g+d|0)<<7|i>>>25)+g|0)<<9|i>>>23)+b|0)<<13|i>>>19)+a|0)<<18|i>>>14,w^=(i=(m^=(i=(h^=(i=(c^=(i=w+m|0)<<7|i>>>25)+w|0)<<9|i>>>23)+c|0)<<13|i>>>19)+h|0)<<18|i>>>14,o^=(i=(c^=(i=(a^=(i=(s^=(i=o+c|0)<<7|i>>>25)+o|0)<<9|i>>>23)+s|0)<<13|i>>>19)+a|0)<<18|i>>>14,l^=(i=(u^=(i=(h^=(i=(d^=(i=l+u|0)<<7|i>>>25)+l|0)<<9|i>>>23)+d|0)<<13|i>>>19)+h|0)<<18|i>>>14,g^=(i=(p^=(i=(f^=(i=(m^=(i=g+p|0)<<7|i>>>25)+g|0)<<9|i>>>23)+m|0)<<13|i>>>19)+f|0)<<18|i>>>14,w^=(i=(b^=(i=(v^=(i=(y^=(i=w+b|0)<<7|i>>>25)+w|0)<<9|i>>>23)+y|0)<<13|i>>>19)+v|0)<<18|i>>>14;e[0]=o>>>0&255,e[1]=o>>>8&255,e[2]=o>>>16&255,e[3]=o>>>24&255,e[4]=l>>>0&255,e[5]=l>>>8&255,e[6]=l>>>16&255,e[7]=l>>>24&255,e[8]=g>>>0&255,e[9]=g>>>8&255,e[10]=g>>>16&255,e[11]=g>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=h>>>0&255,e[21]=h>>>8&255,e[22]=h>>>16&255,e[23]=h>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var w=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function _(e,t,r,n,i,o,s){var a,c,u=new Uint8Array(16),l=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=o[c];for(;i>=64;){for(v(l,u,s,w),c=0;c<64;c++)e[t+c]=r[n+c]^l[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;i-=64,t+=64,n+=64}if(i>0)for(v(l,u,s,w),c=0;c<i;c++)e[t+c]=r[n+c]^l[c];return 0}function E(e,t,r,n,i){var o,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(v(c,a,i,w),s=0;s<64;s++)e[t+s]=c[s];for(o=1,s=8;s<16;s++)o=o+(255&a[s])|0,a[s]=255&o,o>>>=8;r-=64,t+=64}if(r>0)for(v(c,a,i,w),s=0;s<r;s++)e[t+s]=c[s];return 0}function A(e,t,r,n,i){var o=new Uint8Array(32);b(o,n,i,w);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return E(e,t,r,s,o)}function S(e,t,r,n,i,o,s){var a=new Uint8Array(32);b(a,o,s,w);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=o[u+16];return _(e,t,r,n,i,c,a)}var k=function(e){var t,r,n,i,o,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function x(e,t,r,n,i,o){var s=new k(o);return s.update(r,n,i),s.finish(e,t),0}function I(e,t,r,n,i,o){var s=new Uint8Array(16);return x(s,0,r,n,i,o),m(e,t,s,0)}function T(e,t,r,n,i){var o;if(r<32)return-1;for(S(e,0,t,0,r,n,i),x(e,16,e,32,r-32,e),o=0;o<16;o++)e[o]=0;return 0}function P(e,t,r,n,i){var o,s=new Uint8Array(32);if(r<32)return-1;if(A(s,0,32,n,i),0!==I(t,16,t,32,r-32,s))return-1;for(S(e,0,t,0,r,n,i),o=0;o<32;o++)e[o]=0;return 0}function R(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function C(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function B(e,t,r){for(var n,i=~(r-1),o=0;o<16;o++)n=i&(e[o]^t[o]),e[o]^=n,t[o]^=n}function M(e,r){var n,i,o,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(C(a),C(a),C(a),i=0;i<2;i++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),o=s[15]>>16&1,s[14]&=65535,B(a,s,1-o)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function N(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return M(r,e),M(n,t),y(r,0,n,0)}function O(e){var t=new Uint8Array(32);return M(t,e),1&t[0]}function D(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function L(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function U(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function F(e,t,r){var n,i,o=0,s=0,a=0,c=0,u=0,l=0,d=0,h=0,f=0,p=0,g=0,m=0,y=0,v=0,b=0,w=0,_=0,E=0,A=0,S=0,k=0,x=0,I=0,T=0,P=0,R=0,C=0,B=0,M=0,N=0,O=0,D=r[0],L=r[1],U=r[2],F=r[3],j=r[4],q=r[5],z=r[6],H=r[7],K=r[8],V=r[9],G=r[10],W=r[11],Q=r[12],J=r[13],Z=r[14],Y=r[15];o+=(n=t[0])*D,s+=n*L,a+=n*U,c+=n*F,u+=n*j,l+=n*q,d+=n*z,h+=n*H,f+=n*K,p+=n*V,g+=n*G,m+=n*W,y+=n*Q,v+=n*J,b+=n*Z,w+=n*Y,s+=(n=t[1])*D,a+=n*L,c+=n*U,u+=n*F,l+=n*j,d+=n*q,h+=n*z,f+=n*H,p+=n*K,g+=n*V,m+=n*G,y+=n*W,v+=n*Q,b+=n*J,w+=n*Z,_+=n*Y,a+=(n=t[2])*D,c+=n*L,u+=n*U,l+=n*F,d+=n*j,h+=n*q,f+=n*z,p+=n*H,g+=n*K,m+=n*V,y+=n*G,v+=n*W,b+=n*Q,w+=n*J,_+=n*Z,E+=n*Y,c+=(n=t[3])*D,u+=n*L,l+=n*U,d+=n*F,h+=n*j,f+=n*q,p+=n*z,g+=n*H,m+=n*K,y+=n*V,v+=n*G,b+=n*W,w+=n*Q,_+=n*J,E+=n*Z,A+=n*Y,u+=(n=t[4])*D,l+=n*L,d+=n*U,h+=n*F,f+=n*j,p+=n*q,g+=n*z,m+=n*H,y+=n*K,v+=n*V,b+=n*G,w+=n*W,_+=n*Q,E+=n*J,A+=n*Z,S+=n*Y,l+=(n=t[5])*D,d+=n*L,h+=n*U,f+=n*F,p+=n*j,g+=n*q,m+=n*z,y+=n*H,v+=n*K,b+=n*V,w+=n*G,_+=n*W,E+=n*Q,A+=n*J,S+=n*Z,k+=n*Y,d+=(n=t[6])*D,h+=n*L,f+=n*U,p+=n*F,g+=n*j,m+=n*q,y+=n*z,v+=n*H,b+=n*K,w+=n*V,_+=n*G,E+=n*W,A+=n*Q,S+=n*J,k+=n*Z,x+=n*Y,h+=(n=t[7])*D,f+=n*L,p+=n*U,g+=n*F,m+=n*j,y+=n*q,v+=n*z,b+=n*H,w+=n*K,_+=n*V,E+=n*G,A+=n*W,S+=n*Q,k+=n*J,x+=n*Z,I+=n*Y,f+=(n=t[8])*D,p+=n*L,g+=n*U,m+=n*F,y+=n*j,v+=n*q,b+=n*z,w+=n*H,_+=n*K,E+=n*V,A+=n*G,S+=n*W,k+=n*Q,x+=n*J,I+=n*Z,T+=n*Y,p+=(n=t[9])*D,g+=n*L,m+=n*U,y+=n*F,v+=n*j,b+=n*q,w+=n*z,_+=n*H,E+=n*K,A+=n*V,S+=n*G,k+=n*W,x+=n*Q,I+=n*J,T+=n*Z,P+=n*Y,g+=(n=t[10])*D,m+=n*L,y+=n*U,v+=n*F,b+=n*j,w+=n*q,_+=n*z,E+=n*H,A+=n*K,S+=n*V,k+=n*G,x+=n*W,I+=n*Q,T+=n*J,P+=n*Z,R+=n*Y,m+=(n=t[11])*D,y+=n*L,v+=n*U,b+=n*F,w+=n*j,_+=n*q,E+=n*z,A+=n*H,S+=n*K,k+=n*V,x+=n*G,I+=n*W,T+=n*Q,P+=n*J,R+=n*Z,C+=n*Y,y+=(n=t[12])*D,v+=n*L,b+=n*U,w+=n*F,_+=n*j,E+=n*q,A+=n*z,S+=n*H,k+=n*K,x+=n*V,I+=n*G,T+=n*W,P+=n*Q,R+=n*J,C+=n*Z,B+=n*Y,v+=(n=t[13])*D,b+=n*L,w+=n*U,_+=n*F,E+=n*j,A+=n*q,S+=n*z,k+=n*H,x+=n*K,I+=n*V,T+=n*G,P+=n*W,R+=n*Q,C+=n*J,B+=n*Z,M+=n*Y,b+=(n=t[14])*D,w+=n*L,_+=n*U,E+=n*F,A+=n*j,S+=n*q,k+=n*z,x+=n*H,I+=n*K,T+=n*V,P+=n*G,R+=n*W,C+=n*Q,B+=n*J,M+=n*Z,N+=n*Y,w+=(n=t[15])*D,s+=38*(E+=n*U),a+=38*(A+=n*F),c+=38*(S+=n*j),u+=38*(k+=n*q),l+=38*(x+=n*z),d+=38*(I+=n*H),h+=38*(T+=n*K),f+=38*(P+=n*V),p+=38*(R+=n*G),g+=38*(C+=n*W),m+=38*(B+=n*Q),y+=38*(M+=n*J),v+=38*(N+=n*Z),b+=38*(O+=n*Y),o=(n=(o+=38*(_+=n*L))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=(o+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),s=(n=s+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),w=(n=w+i+65535)-65536*(i=Math.floor(n/65536)),o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=u,e[5]=l,e[6]=d,e[7]=h,e[8]=f,e[9]=p,e[10]=g,e[11]=m,e[12]=y,e[13]=v,e[14]=b,e[15]=w}function j(e,t){F(e,t,t)}function q(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=253;n>=0;n--)j(i,i),2!==n&&4!==n&&F(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function z(e,r){var n,i=t();for(n=0;n<16;n++)i[n]=r[n];for(n=250;n>=0;n--)j(i,i),1!==n&&F(i,i,r);for(n=0;n<16;n++)e[n]=i[n]}function H(e,r,n){var i,o,s=new Uint8Array(32),a=new Float64Array(80),u=t(),l=t(),d=t(),h=t(),f=t(),p=t();for(o=0;o<31;o++)s[o]=r[o];for(s[31]=127&r[31]|64,s[0]&=248,D(a,n),o=0;o<16;o++)l[o]=a[o],h[o]=u[o]=d[o]=0;for(u[0]=h[0]=1,o=254;o>=0;--o)B(u,l,i=s[o>>>3]>>>(7&o)&1),B(d,h,i),L(f,u,d),U(u,u,d),L(d,l,h),U(l,l,h),j(h,f),j(p,u),F(u,d,u),F(d,l,f),L(f,u,d),U(u,u,d),j(l,u),U(d,h,p),F(u,d,c),L(u,u,h),F(d,d,u),F(u,h,p),F(h,l,a),j(l,f),B(u,l,i),B(d,h,i);for(o=0;o<16;o++)a[o+16]=u[o],a[o+32]=d[o],a[o+48]=l[o],a[o+64]=h[o];var g=a.subarray(32),m=a.subarray(16);return q(g,g),F(m,m,g),M(e,m),0}function K(e,t){return H(e,t,o)}function V(e,t){return n(t,32),K(e,t)}function G(e,t,r){var n=new Uint8Array(32);return H(n,r,t),b(e,i,n,w)}k.prototype.blocks=function(e,t,r){for(var n,i,o,s,a,c,u,l,d,h,f,p,g,m,y,v,b,w,_,E=this.fin?0:2048,A=this.h[0],S=this.h[1],k=this.h[2],x=this.h[3],I=this.h[4],T=this.h[5],P=this.h[6],R=this.h[7],C=this.h[8],B=this.h[9],M=this.r[0],N=this.r[1],O=this.r[2],D=this.r[3],L=this.r[4],U=this.r[5],F=this.r[6],j=this.r[7],q=this.r[8],z=this.r[9];r>=16;)h=d=0,h+=(A+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*M,h+=(S+=8191&(n>>>13|(i=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*z),h+=(k+=8191&(i>>>10|(o=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*q),h+=(x+=8191&(o>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*j),d=(h+=(I+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*F))>>>13,h&=8191,h+=(T+=a>>>1&8191)*(5*U),h+=(P+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*L),h+=(R+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*D),h+=(C+=8191&(u>>>8|(l=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*O),f=d+=(h+=(B+=l>>>5|E)*(5*N))>>>13,f+=A*N,f+=S*M,f+=k*(5*z),f+=x*(5*q),d=(f+=I*(5*j))>>>13,f&=8191,f+=T*(5*F),f+=P*(5*U),f+=R*(5*L),f+=C*(5*D),d+=(f+=B*(5*O))>>>13,f&=8191,p=d,p+=A*O,p+=S*N,p+=k*M,p+=x*(5*z),d=(p+=I*(5*q))>>>13,p&=8191,p+=T*(5*j),p+=P*(5*F),p+=R*(5*U),p+=C*(5*L),g=d+=(p+=B*(5*D))>>>13,g+=A*D,g+=S*O,g+=k*N,g+=x*M,d=(g+=I*(5*z))>>>13,g&=8191,g+=T*(5*q),g+=P*(5*j),g+=R*(5*F),g+=C*(5*U),m=d+=(g+=B*(5*L))>>>13,m+=A*L,m+=S*D,m+=k*O,m+=x*N,d=(m+=I*M)>>>13,m&=8191,m+=T*(5*z),m+=P*(5*q),m+=R*(5*j),m+=C*(5*F),y=d+=(m+=B*(5*U))>>>13,y+=A*U,y+=S*L,y+=k*D,y+=x*O,d=(y+=I*N)>>>13,y&=8191,y+=T*M,y+=P*(5*z),y+=R*(5*q),y+=C*(5*j),v=d+=(y+=B*(5*F))>>>13,v+=A*F,v+=S*U,v+=k*L,v+=x*D,d=(v+=I*O)>>>13,v&=8191,v+=T*N,v+=P*M,v+=R*(5*z),v+=C*(5*q),b=d+=(v+=B*(5*j))>>>13,b+=A*j,b+=S*F,b+=k*U,b+=x*L,d=(b+=I*D)>>>13,b&=8191,b+=T*O,b+=P*N,b+=R*M,b+=C*(5*z),w=d+=(b+=B*(5*q))>>>13,w+=A*q,w+=S*j,w+=k*F,w+=x*U,d=(w+=I*L)>>>13,w&=8191,w+=T*D,w+=P*O,w+=R*N,w+=C*M,_=d+=(w+=B*(5*z))>>>13,_+=A*z,_+=S*q,_+=k*j,_+=x*F,d=(_+=I*U)>>>13,_&=8191,_+=T*L,_+=P*D,_+=R*O,_+=C*N,A=h=8191&(d=(d=((d+=(_+=B*M)>>>13)<<2)+d|0)+(h&=8191)|0),S=f+=d>>>=13,k=p&=8191,x=g&=8191,I=m&=8191,T=y&=8191,P=v&=8191,R=b&=8191,C=w&=8191,B=_&=8191,t+=16,r-=16;this.h[0]=A,this.h[1]=S,this.h[2]=k,this.h[3]=x,this.h[4]=I,this.h[5]=T,this.h[6]=P,this.h[7]=R,this.h[8]=C,this.h[9]=B},k.prototype.finish=function(e,t){var r,n,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;o<16;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,o=2;o<10;o++)this.h[o]+=r,r=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,o=1;o<10;o++)s[o]=this.h[o]+r,r=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,n=(1^r)-1,o=0;o<10;o++)s[o]&=n;for(n=~n,o=0;o<10;o++)this.h[o]=this.h[o]&n|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;o<8;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},k.prototype.update=function(e,t,r){var n,i;if(this.leftover){for((i=16-this.leftover)>r&&(i=r),n=0;n<i;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(i=r-r%16,this.blocks(e,t,i),t+=i,r-=i),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var W=T,Q=P;var J=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Z(e,t,r,n){for(var i,o,s,a,c,u,l,d,h,f,p,g,m,y,v,b,w,_,E,A,S,k,x,I,T,P,R=new Int32Array(16),C=new Int32Array(16),B=e[0],M=e[1],N=e[2],O=e[3],D=e[4],L=e[5],U=e[6],F=e[7],j=t[0],q=t[1],z=t[2],H=t[3],K=t[4],V=t[5],G=t[6],W=t[7],Q=0;n>=128;){for(E=0;E<16;E++)A=8*E+Q,R[E]=r[A+0]<<24|r[A+1]<<16|r[A+2]<<8|r[A+3],C[E]=r[A+4]<<24|r[A+5]<<16|r[A+6]<<8|r[A+7];for(E=0;E<80;E++)if(i=B,o=M,s=N,a=O,c=D,u=L,l=U,F,h=j,f=q,p=z,g=H,m=K,y=V,v=G,W,x=65535&(k=W),I=k>>>16,T=65535&(S=F),P=S>>>16,x+=65535&(k=(K>>>14|D<<18)^(K>>>18|D<<14)^(D>>>9|K<<23)),I+=k>>>16,T+=65535&(S=(D>>>14|K<<18)^(D>>>18|K<<14)^(K>>>9|D<<23)),P+=S>>>16,x+=65535&(k=K&V^~K&G),I+=k>>>16,T+=65535&(S=D&L^~D&U),P+=S>>>16,S=J[2*E],x+=65535&(k=J[2*E+1]),I+=k>>>16,T+=65535&S,P+=S>>>16,S=R[E%16],I+=(k=C[E%16])>>>16,T+=65535&S,P+=S>>>16,T+=(I+=(x+=65535&k)>>>16)>>>16,x=65535&(k=_=65535&x|I<<16),I=k>>>16,T=65535&(S=w=65535&T|(P+=T>>>16)<<16),P=S>>>16,x+=65535&(k=(j>>>28|B<<4)^(B>>>2|j<<30)^(B>>>7|j<<25)),I+=k>>>16,T+=65535&(S=(B>>>28|j<<4)^(j>>>2|B<<30)^(j>>>7|B<<25)),P+=S>>>16,I+=(k=j&q^j&z^q&z)>>>16,T+=65535&(S=B&M^B&N^M&N),P+=S>>>16,d=65535&(T+=(I+=(x+=65535&k)>>>16)>>>16)|(P+=T>>>16)<<16,b=65535&x|I<<16,x=65535&(k=g),I=k>>>16,T=65535&(S=a),P=S>>>16,I+=(k=_)>>>16,T+=65535&(S=w),P+=S>>>16,M=i,N=o,O=s,D=a=65535&(T+=(I+=(x+=65535&k)>>>16)>>>16)|(P+=T>>>16)<<16,L=c,U=u,F=l,B=d,q=h,z=f,H=p,K=g=65535&x|I<<16,V=m,G=y,W=v,j=b,E%16===15)for(A=0;A<16;A++)S=R[A],x=65535&(k=C[A]),I=k>>>16,T=65535&S,P=S>>>16,S=R[(A+9)%16],x+=65535&(k=C[(A+9)%16]),I+=k>>>16,T+=65535&S,P+=S>>>16,w=R[(A+1)%16],x+=65535&(k=((_=C[(A+1)%16])>>>1|w<<31)^(_>>>8|w<<24)^(_>>>7|w<<25)),I+=k>>>16,T+=65535&(S=(w>>>1|_<<31)^(w>>>8|_<<24)^w>>>7),P+=S>>>16,w=R[(A+14)%16],I+=(k=((_=C[(A+14)%16])>>>19|w<<13)^(w>>>29|_<<3)^(_>>>6|w<<26))>>>16,T+=65535&(S=(w>>>19|_<<13)^(_>>>29|w<<3)^w>>>6),P+=S>>>16,P+=(T+=(I+=(x+=65535&k)>>>16)>>>16)>>>16,R[A]=65535&T|P<<16,C[A]=65535&x|I<<16;x=65535&(k=j),I=k>>>16,T=65535&(S=B),P=S>>>16,S=e[0],I+=(k=t[0])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(I+=(x+=65535&k)>>>16)>>>16)>>>16,e[0]=B=65535&T|P<<16,t[0]=j=65535&x|I<<16,x=65535&(k=q),I=k>>>16,T=65535&(S=M),P=S>>>16,S=e[1],I+=(k=t[1])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(I+=(x+=65535&k)>>>16)>>>16)>>>16,e[1]=M=65535&T|P<<16,t[1]=q=65535&x|I<<16,x=65535&(k=z),I=k>>>16,T=65535&(S=N),P=S>>>16,S=e[2],I+=(k=t[2])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(I+=(x+=65535&k)>>>16)>>>16)>>>16,e[2]=N=65535&T|P<<16,t[2]=z=65535&x|I<<16,x=65535&(k=H),I=k>>>16,T=65535&(S=O),P=S>>>16,S=e[3],I+=(k=t[3])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(I+=(x+=65535&k)>>>16)>>>16)>>>16,e[3]=O=65535&T|P<<16,t[3]=H=65535&x|I<<16,x=65535&(k=K),I=k>>>16,T=65535&(S=D),P=S>>>16,S=e[4],I+=(k=t[4])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(I+=(x+=65535&k)>>>16)>>>16)>>>16,e[4]=D=65535&T|P<<16,t[4]=K=65535&x|I<<16,x=65535&(k=V),I=k>>>16,T=65535&(S=L),P=S>>>16,S=e[5],I+=(k=t[5])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(I+=(x+=65535&k)>>>16)>>>16)>>>16,e[5]=L=65535&T|P<<16,t[5]=V=65535&x|I<<16,x=65535&(k=G),I=k>>>16,T=65535&(S=U),P=S>>>16,S=e[6],I+=(k=t[6])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(I+=(x+=65535&k)>>>16)>>>16)>>>16,e[6]=U=65535&T|P<<16,t[6]=G=65535&x|I<<16,x=65535&(k=W),I=k>>>16,T=65535&(S=F),P=S>>>16,S=e[7],I+=(k=t[7])>>>16,T+=65535&S,P+=S>>>16,P+=(T+=(I+=(x+=65535&k)>>>16)>>>16)>>>16,e[7]=F=65535&T|P<<16,t[7]=W=65535&x|I<<16,Q+=128,n-=128}return n}function Y(e,t,r){var n,i=new Int32Array(8),o=new Int32Array(8),s=new Uint8Array(256),a=r;for(i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,Z(i,o,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,p(s,r-8,a/536870912|0,a<<3),Z(i,o,s,r),n=0;n<8;n++)p(e,8*n,i[n],o[n]);return 0}function X(e,r){var n=t(),i=t(),o=t(),s=t(),a=t(),c=t(),u=t(),d=t(),h=t();U(n,e[1],e[0]),U(h,r[1],r[0]),F(n,n,h),L(i,e[0],e[1]),L(h,r[0],r[1]),F(i,i,h),F(o,e[3],r[3]),F(o,o,l),F(s,e[2],r[2]),L(s,s,s),U(a,i,n),U(c,s,o),L(u,s,o),L(d,i,n),F(e[0],a,c),F(e[1],d,u),F(e[2],u,c),F(e[3],a,d)}function $(e,t,r){var n;for(n=0;n<4;n++)B(e[n],t[n],r)}function ee(e,r){var n=t(),i=t(),o=t();q(o,r[2]),F(n,r[0],o),F(i,r[1],o),M(e,i),e[31]^=O(n)<<7}function te(e,t,r){var n,i;for(R(e[0],s),R(e[1],a),R(e[2],a),R(e[3],s),i=255;i>=0;--i)$(e,t,n=r[i/8|0]>>(7&i)&1),X(t,e),X(e,e),$(e,t,n)}function re(e,r){var n=[t(),t(),t(),t()];R(n[0],d),R(n[1],h),R(n[2],a),F(n[3],d,h),te(e,n,r)}function ne(e,r,i){var o,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(i||n(r,32),Y(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64,re(a,s),ee(e,a),o=0;o<32;o++)r[o+32]=e[o];return 0}var ie=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)t[i]+=r-16*t[n]*ie[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*ie[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*ie[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function se(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,r)}function ae(e,r,n,i){var o,s,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),l=new Float64Array(64),d=[t(),t(),t(),t()];Y(a,i,32),a[0]&=248,a[31]&=127,a[31]|=64;var h=n+64;for(o=0;o<n;o++)e[64+o]=r[o];for(o=0;o<32;o++)e[32+o]=a[32+o];for(Y(u,e.subarray(32),n+32),se(u),re(d,u),ee(e,d),o=32;o<64;o++)e[o]=i[o];for(Y(c,e,n+64),se(c),o=0;o<64;o++)l[o]=0;for(o=0;o<32;o++)l[o]=u[o];for(o=0;o<32;o++)for(s=0;s<32;s++)l[o+s]+=c[o]*a[s];return oe(e.subarray(32),l),h}function ce(e,r,n,i){var o,c=new Uint8Array(32),l=new Uint8Array(64),d=[t(),t(),t(),t()],h=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),i=t(),o=t(),c=t(),l=t(),d=t(),h=t();return R(e[2],a),D(e[1],r),j(o,e[1]),F(c,o,u),U(o,o,e[2]),L(c,e[2],c),j(l,c),j(d,l),F(h,d,l),F(n,h,o),F(n,n,c),z(n,n),F(n,n,o),F(n,n,c),F(n,n,c),F(e[0],n,c),j(i,e[0]),F(i,i,c),N(i,o)&&F(e[0],e[0],f),j(i,e[0]),F(i,i,c),N(i,o)?-1:(O(e[0])===r[31]>>7&&U(e[0],s,e[0]),F(e[3],e[0],e[1]),0)}(h,i))return-1;for(o=0;o<n;o++)e[o]=r[o];for(o=0;o<32;o++)e[o+32]=i[o];if(Y(l,e,n),se(l),te(d,h,l),re(h,r.subarray(32)),X(d,h),ee(c,d),n-=64,y(r,0,c,0)){for(o=0;o<n;o++)e[o]=0;return-1}for(o=0;o<n;o++)e[o]=r[o+64];return n}var ue=16,le=64,de=32,he=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function pe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ge(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:S,crypto_stream:A,crypto_stream_salsa20_xor:_,crypto_stream_salsa20:E,crypto_onetimeauth:x,crypto_onetimeauth_verify:I,crypto_verify_16:m,crypto_verify_32:y,crypto_secretbox:T,crypto_secretbox_open:P,crypto_scalarmult:H,crypto_scalarmult_base:K,crypto_box_beforenm:G,crypto_box_afternm:W,crypto_box:function(e,t,r,n,i,o){var s=new Uint8Array(32);return G(s,i,o),W(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,i,o){var s=new Uint8Array(32);return G(s,i,o),Q(e,t,r,n,s)},crypto_box_keypair:V,crypto_hash:Y,crypto_sign:ae,crypto_sign_keypair:ne,crypto_sign_open:ce,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ue,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:le,crypto_sign_PUBLICKEYBYTES:de,crypto_sign_SECRETKEYBYTES:he,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:u,L:ie,pack25519:M,unpack25519:D,M:F,A:L,S:j,Z:U,pow2523:z,add:X,set25519:R,modL:oe,scalarmult:te,scalarbase:re},e.randomBytes=function(e){var t=new Uint8Array(e);return n(t,e),t},e.secretbox=function(e,t,r){pe(e,t,r),fe(r,t);for(var n=new Uint8Array(32+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+32]=e[o];return T(i,n,n.length,t,r),i.subarray(ue)},e.secretbox.open=function(e,t,r){pe(e,t,r),fe(r,t);for(var n=new Uint8Array(ue+e.length),i=new Uint8Array(n.length),o=0;o<e.length;o++)n[o+ue]=e[o];return n.length<32||0!==P(i,n,n.length,t,r)?null:i.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=ue,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return H(r,e,t),r},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return K(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox(t,r,o)},e.box.before=function(e,t){pe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return G(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,i){var o=e.box.before(n,i);return e.secretbox.open(t,r,o)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return V(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return K(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),t.length!==he)throw new Error("bad secret key size");var r=new Uint8Array(le+e.length);return ae(r,e,e.length,t),r},e.sign.open=function(e,t){if(pe(e,t),t.length!==de)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ce(r,e,e.length,t);if(n<0)return null;for(var i=new Uint8Array(n),o=0;o<i.length;o++)i[o]=r[o];return i},e.sign.detached=function(t,r){for(var n=e.sign(t,r),i=new Uint8Array(le),o=0;o<i.length;o++)i[o]=n[o];return i},e.sign.detached.verify=function(e,t,r){if(pe(e,t,r),t.length!==le)throw new Error("bad signature size");if(r.length!==de)throw new Error("bad public key size");var n,i=new Uint8Array(le+e.length),o=new Uint8Array(le+e.length);for(n=0;n<le;n++)i[n]=t[n];for(n=0;n<e.length;n++)i[n+le]=e[n];return ce(o,i,i.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(de),t=new Uint8Array(he);return ne(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==he)throw new Error("bad secret key size");for(var t=new Uint8Array(de),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(de),r=new Uint8Array(he),n=0;n<32;n++)r[n]=e[n];return ne(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=de,e.sign.secretKeyLength=he,e.sign.seedLength=32,e.sign.signatureLength=le,e.hash=function(e){pe(e);var t=new Uint8Array(64);return Y(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&(e.length===t.length&&0===g(e,0,t,0,e.length))},e.setPRNG=function(e){n=e},function(){var t="undefined"!==typeof self?self.crypto||self.msCrypto:null;if(t&&t.getRandomValues){e.setPRNG((function(e,r){var n,i=new Uint8Array(r);for(n=0;n<r;n+=65536)t.getRandomValues(i.subarray(n,n+Math.min(r-n,65536)));for(n=0;n<r;n++)e[n]=i[n];ge(i)}))}else(t=r(7451))&&t.randomBytes&&e.setPRNG((function(e,r){var n,i=t.randomBytes(r);for(n=0;n<r;n++)e[n]=i[n];ge(i)}))}()}(e.exports?e.exports:self.nacl=self.nacl||{})},4847:e=>{"use strict";function t(e){return e>=55296&&e<=56319}function r(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!==typeof e)throw new Error("Input must be string");for(var n=e.length,i=0,o=null,s=null,a=0;a<n;a++)r(o=e.charCodeAt(a))?null!=s&&t(s)?i+=1:i+=3:o<=127?i+=1:o>=128&&o<=2047?i+=2:o>=2048&&o<=65535&&(i+=3),s=o;return i}},9515:(e,t,r)=>{function n(e){try{if(!r.g.localStorage)return!1}catch(n){return!1}var t=r.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}},6794:e=>{e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},7374:(e,t,r)=>{"use strict";var n=r(5450),i=r(5718),o=r(8264),s=r(6218);function a(e){return e.call.bind(e)}var c="undefined"!==typeof BigInt,u="undefined"!==typeof Symbol,l=a(Object.prototype.toString),d=a(Number.prototype.valueOf),h=a(String.prototype.valueOf),f=a(Boolean.prototype.valueOf);if(c)var p=a(BigInt.prototype.valueOf);if(u)var g=a(Symbol.prototype.valueOf);function m(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(r){return!1}}function y(e){return"[object Map]"===l(e)}function v(e){return"[object Set]"===l(e)}function b(e){return"[object WeakMap]"===l(e)}function w(e){return"[object WeakSet]"===l(e)}function _(e){return"[object ArrayBuffer]"===l(e)}function E(e){return"undefined"!==typeof ArrayBuffer&&(_.working?_(e):e instanceof ArrayBuffer)}function A(e){return"[object DataView]"===l(e)}function S(e){return"undefined"!==typeof DataView&&(A.working?A(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=i,t.isTypedArray=s,t.isPromise=function(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):s(e)||S(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},y.working="undefined"!==typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!==typeof Map&&(y.working?y(e):e instanceof Map)},v.working="undefined"!==typeof Set&&v(new Set),t.isSet=function(e){return"undefined"!==typeof Set&&(v.working?v(e):e instanceof Set)},b.working="undefined"!==typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!==typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},w.working="undefined"!==typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},_.working="undefined"!==typeof ArrayBuffer&&_(new ArrayBuffer),t.isArrayBuffer=E,A.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&A(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=S;var k="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function x(e){return"[object SharedArrayBuffer]"===l(e)}function I(e){return"undefined"!==typeof k&&("undefined"===typeof x.working&&(x.working=x(new k)),x.working?x(e):e instanceof k)}function T(e){return m(e,d)}function P(e){return m(e,h)}function R(e){return m(e,f)}function C(e){return c&&m(e,p)}function B(e){return u&&m(e,g)}t.isSharedArrayBuffer=I,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=T,t.isStringObject=P,t.isBooleanObject=R,t.isBigIntObject=C,t.isSymbolObject=B,t.isBoxedPrimitive=function(e){return T(e)||P(e)||R(e)||C(e)||B(e)},t.isAnyArrayBuffer=function(e){return"undefined"!==typeof Uint8Array&&(E(e)||I(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9639:(e,t,r)=>{var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},i=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,s=String(e).replace(i,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}})),a=n[r];r<o;a=n[++r])m(a)||!_(a)?s+=" "+a:s+=" "+c(a);return s},t.deprecate=function(e,r){if("undefined"!==typeof process&&!0===process.noDeprecation)return e;if("undefined"===typeof process)return function(){return t.deprecate(e,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}};var o={},s=/^$/;if({NODE_ENV:"production",PUBLIC_URL:"/WhisUp3",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG){var a={NODE_ENV:"production",PUBLIC_URL:"/WhisUp3",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.NODE_DEBUG;a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+a+"$","i")}function c(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),d(n,e,n.depth)}function u(e,t){var r=c.styles[t];return r?"\x1b["+c.colors[r][0]+"m"+e+"\x1b["+c.colors[r][1]+"m":e}function l(e,t){return e}function d(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return v(i)||(i=d(e,i,n)),i}var o=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,r);if(o)return o;var s=Object.keys(r),a=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),A(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(S(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(E(r))return e.stylize(Date.prototype.toString.call(r),"date");if(A(r))return h(r)}var u,l="",_=!1,k=["{","}"];(p(r)&&(_=!0,k=["[","]"]),S(r))&&(l=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(l=" "+RegExp.prototype.toString.call(r)),E(r)&&(l=" "+Date.prototype.toUTCString.call(r)),A(r)&&(l=" "+h(r)),0!==s.length||_&&0!=r.length?n<0?w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=_?function(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)T(t,String(s))?o.push(f(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(e,t,r,n,i,!0))})),o}(e,r,n,a,s):s.map((function(t){return f(e,r,n,a,t,_)})),e.seen.pop(),function(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,l,k)):k[0]+l+k[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i,o){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),T(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(c.value)<0?(a=m(r)?d(e,c.value,null):d(e,c.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n")):a=e.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function p(e){return Array.isArray(e)}function g(e){return"boolean"===typeof e}function m(e){return null===e}function y(e){return"number"===typeof e}function v(e){return"string"===typeof e}function b(e){return void 0===e}function w(e){return _(e)&&"[object RegExp]"===k(e)}function _(e){return"object"===typeof e&&null!==e}function E(e){return _(e)&&"[object Date]"===k(e)}function A(e){return _(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"===typeof e}function k(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!o[e])if(s.test(e)){var r=process.pid;o[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else o[e]=function(){};return o[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(7374),t.isArray=p,t.isBoolean=g,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=v,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=b,t.isRegExp=w,t.types.isRegExp=w,t.isObject=_,t.isDate=E,t.types.isDate=E,t.isError=A,t.types.isNativeError=A,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(6794);var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",function(){var e=new Date,t=[x(e.getHours()),x(e.getMinutes()),x(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}(),t.format.apply(t,arguments))},t.inherits=r(2534),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var P="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function R(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!==typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(s){r(s)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=P,t.callbackify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return n.apply(i,arguments)};e.apply(this,t).then((function(e){process.nextTick(o.bind(null,null,e))}),(function(e){process.nextTick(R.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}},8264:(e,t,r)=>{"use strict";var n=r(5369),i=r(306),o=r(9722),s=r(4037),a=r(3347),c=s("Object.prototype.toString"),u=r(4707)(),l="undefined"===typeof globalThis?r.g:globalThis,d=i(),h=s("String.prototype.slice"),f=Object.getPrototypeOf,p=s("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},g={__proto__:null};n(d,u&&a&&f?function(e){var t=new l[e];if(Symbol.toStringTag in t){var r=f(t),n=a(r,Symbol.toStringTag);if(!n){var i=f(r);n=a(i,Symbol.toStringTag)}g["$"+e]=o(n.get)}}:function(e){var t=new l[e],r=t.slice||t.set;r&&(g["$"+e]=o(r))});e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!u){var t=h(c(e),8,-1);return p(d,t)>-1?t:"Object"===t&&function(e){var t=!1;return n(g,(function(r,n){if(!t)try{r(e),t=h(n,1)}catch(i){}})),t}(e)}return a?function(e){var t=!1;return n(g,(function(r,n){if(!t)try{"$"+r(e)===n&&(t=h(n,1))}catch(i){}})),t}(e):null}},5856:()=>{},6601:()=>{},9214:()=>{},2263:()=>{},5568:()=>{},6622:()=>{},2260:()=>{},2895:()=>{},3121:()=>{},1865:()=>{},5819:()=>{},1265:()=>{},5539:()=>{},2361:()=>{},4616:()=>{},7451:()=>{},9400:e=>{e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.__esModule=!0,e.exports.default=e.exports},306:(e,t,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"===typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"===typeof i[n[t]]&&(e[e.length]=n[t]);return e}},2317:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ErrorWithCause:()=>n});class n extends Error{constructor(e){let{cause:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.name=n.name,t&&(this.cause=t),this.message=e}}},9114:(e,t,r)=>{"use strict";r.r(t),r.d(t,{findCauseByReference:()=>n,getErrorCause:()=>i,messageWithCauses:()=>c,stackWithCauses:()=>s});const n=(e,t)=>{if(!e||!t)return;if(!(e instanceof Error))return;if(!(t.prototype instanceof Error)&&t!==Error)return;const r=new Set;let n=e;for(;n&&!r.has(n);){if(r.add(n),n instanceof t)return n;n=i(n)}},i=e=>{if(e&&"object"===typeof e&&"cause"in e){if("function"===typeof e.cause){const t=e.cause();return t instanceof Error?t:void 0}return e.cause instanceof Error?e.cause:void 0}},o=(e,t)=>{if(!(e instanceof Error))return"";const r=e.stack||"";if(t.has(e))return r+"\ncauses have become circular...";const n=i(e);return n?(t.add(e),r+"\ncaused by: "+o(n,t)):r},s=e=>o(e,new Set),a=(e,t,r)=>{if(!(e instanceof Error))return"";const n=r?"":e.message||"";if(t.has(e))return n+": ...";const o=i(e);if(o){t.add(e);const r="cause"in e&&"function"===typeof e.cause;return n+(r?"":": ")+a(o,t,r)}return n},c=e=>a(e,new Set)},8680:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Struct:()=>l,StructError:()=>n,any:()=>k,array:()=>x,assert:()=>d,assign:()=>m,bigint:()=>I,boolean:()=>T,coerce:()=>Z,create:()=>h,date:()=>P,defaulted:()=>Y,define:()=>y,deprecated:()=>v,dynamic:()=>b,empty:()=>$,enums:()=>R,func:()=>C,instance:()=>B,integer:()=>M,intersection:()=>N,is:()=>p,lazy:()=>w,literal:()=>O,map:()=>D,mask:()=>f,max:()=>te,min:()=>re,never:()=>L,nonempty:()=>ne,nullable:()=>U,number:()=>F,object:()=>j,omit:()=>_,optional:()=>q,partial:()=>E,pattern:()=>ie,pick:()=>A,record:()=>z,refine:()=>se,regexp:()=>H,set:()=>K,size:()=>oe,string:()=>V,struct:()=>S,trimmed:()=>X,tuple:()=>G,type:()=>W,union:()=>Q,unknown:()=>J,validate:()=>g});class n extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...o}=e,{path:s}=e,a=0===s.length?n:"At path: ".concat(s.join(".")," -- ").concat(n);super(null!==i&&void 0!==i?i:a),null!=i&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var n;return null!==(n=r)&&void 0!==n?n:r=[e,...t()]}}}function i(e){return"object"===typeof e&&null!=e}function o(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function s(e){return"symbol"===typeof e?e.toString():"string"===typeof e?JSON.stringify(e):"".concat(e)}function a(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"===typeof e&&(e={message:e});const{path:i,branch:o}=t,{type:a}=r,{refinement:c,message:u="Expected a value of type `".concat(a,"`").concat(c?" with refinement `".concat(c,"`"):"",", but received: `").concat(s(n),"`")}=e;return{value:n,type:a,refinement:c,key:i[i.length-1],path:i,branch:o,...e,message:u}}function*c(e,t,r,n){var o;i(o=e)&&"function"===typeof o[Symbol.iterator]||(e=[e]);for(const i of e){const e=a(i,t,r,n);e&&(yield e)}}function u(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const{path:n=[],branch:o=[e],coerce:s=!1,mask:a=!1}=r,c={path:n,branch:o};if(s&&(e=t.coercer(e,c),a&&"type"!==t.type&&i(t.schema)&&i(e)&&!Array.isArray(e)))for(const r in e)void 0===t.schema[r]&&delete e[r];let l="valid";for(const i of t.validator(e,c))i.explanation=r.message,l="not_valid",yield[i,void 0];for(let[d,h,f]of t.entries(e,c)){const t=u(h,f,{path:void 0===d?n:[...n,d],branch:void 0===d?o:[...o,h],coerce:s,mask:a,message:r.message});for(const r of t)r[0]?(l=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):s&&(h=r[1],void 0===d?e=h:e instanceof Map?e.set(d,h):e instanceof Set?e.add(h):i(e)&&(void 0!==h||d in e)&&(e[d]=h))}if("not_valid"!==l)for(const i of t.refiner(e,c))i.explanation=r.message,l="not_refined",yield[i,void 0];"valid"===l&&(yield[void 0,e])}()}class l{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:o=(e=>e),entries:s=function*(){}}=e;this.type=t,this.schema=r,this.entries=s,this.coercer=o,this.validator=n?(e,t)=>c(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>c(i(e,t),t,this,e):()=>[]}assert(e,t){return d(e,this,t)}create(e,t){return h(e,this,t)}is(e){return p(e,this)}mask(e,t){return f(e,this,t)}validate(e){return g(e,this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}function d(e,t,r){const n=g(e,t,{message:r});if(n[0])throw n[0]}function h(e,t,r){const n=g(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function f(e,t,r){const n=g(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function p(e,t){return!g(e,t)[0]}function g(e,t){const r=u(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(r);if(i[0]){return[new n(i[0],(function*(){for(const e of r)e[0]&&(yield e[0])})),void 0]}return[void 0,i[1]]}function m(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n="type"===t[0].type,i=t.map((e=>e.schema)),o=Object.assign({},...i);return n?W(o):j(o)}function y(e,t){return new l({type:e,schema:null,validator:t})}function v(e,t){return new l({...e,refiner:(t,r)=>void 0===t||e.refiner(t,r),validator:(r,n)=>void 0===r||(t(r,n),e.validator(r,n))})}function b(e){return new l({type:"dynamic",schema:null,*entries(t,r){const n=e(t,r);yield*n.entries(t,r)},validator:(t,r)=>e(t,r).validator(t,r),coercer:(t,r)=>e(t,r).coercer(t,r),refiner:(t,r)=>e(t,r).refiner(t,r)})}function w(e){let t;return new l({type:"lazy",schema:null,*entries(r,n){var i;null!==(i=t)&&void 0!==i||(t=e()),yield*t.entries(r,n)},validator(r,n){var i;return null!==(i=t)&&void 0!==i||(t=e()),t.validator(r,n)},coercer(r,n){var i;return null!==(i=t)&&void 0!==i||(t=e()),t.coercer(r,n)},refiner(r,n){var i;return null!==(i=t)&&void 0!==i||(t=e()),t.refiner(r,n)}})}function _(e,t){const{schema:r}=e,n={...r};for(const i of t)delete n[i];return"type"===e.type?W(n):j(n)}function E(e){const t=e instanceof l?{...e.schema}:{...e};for(const r in t)t[r]=q(t[r]);return j(t)}function A(e,t){const{schema:r}=e,n={};for(const i of t)n[i]=r[i];return j(n)}function S(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),y(e,t)}function k(){return y("any",(()=>!0))}function x(e){return new l({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: ".concat(s(e))})}function I(){return y("bigint",(e=>"bigint"===typeof e))}function T(){return y("boolean",(e=>"boolean"===typeof e))}function P(){return y("date",(e=>e instanceof Date&&!isNaN(e.getTime())||"Expected a valid `Date` object, but received: ".concat(s(e))))}function R(e){const t={},r=e.map((e=>s(e))).join();for(const n of e)t[n]=n;return new l({type:"enums",schema:t,validator:t=>e.includes(t)||"Expected one of `".concat(r,"`, but received: ").concat(s(t))})}function C(){return y("func",(e=>"function"===typeof e||"Expected a function, but received: ".concat(s(e))))}function B(e){return y("instance",(t=>t instanceof e||"Expected a `".concat(e.name,"` instance, but received: ").concat(s(t))))}function M(){return y("integer",(e=>"number"===typeof e&&!isNaN(e)&&Number.isInteger(e)||"Expected an integer, but received: ".concat(s(e))))}function N(e){return new l({type:"intersection",schema:null,*entries(t,r){for(const n of e)yield*n.entries(t,r)},*validator(t,r){for(const n of e)yield*n.validator(t,r)},*refiner(t,r){for(const n of e)yield*n.refiner(t,r)}})}function O(e){const t=s(e),r=typeof e;return new l({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||"Expected the literal `".concat(t,"`, but received: ").concat(s(r))})}function D(e,t){return new l({type:"map",schema:null,*entries(r){if(e&&t&&r instanceof Map)for(const[n,i]of r.entries())yield[n,n,e],yield[n,i,t]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||"Expected a `Map` object, but received: ".concat(s(e))})}function L(){return y("never",(()=>!1))}function U(e){return new l({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function F(){return y("number",(e=>"number"===typeof e&&!isNaN(e)||"Expected a number, but received: ".concat(s(e))))}function j(e){const t=e?Object.keys(e):[],r=L();return new l({type:"object",schema:e||null,*entries(n){if(e&&i(n)){const i=new Set(Object.keys(n));for(const r of t)i.delete(r),yield[r,n[r],e[r]];for(const e of i)yield[e,n[e],r]}},validator:e=>i(e)||"Expected an object, but received: ".concat(s(e)),coercer:e=>i(e)?{...e}:e})}function q(e){return new l({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function z(e,t){return new l({type:"record",schema:null,*entries(r){if(i(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>i(e)||"Expected an object, but received: ".concat(s(e))})}function H(){return y("regexp",(e=>e instanceof RegExp))}function K(e){return new l({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const r of t)yield[r,r,e]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||"Expected a `Set` object, but received: ".concat(s(e))})}function V(){return y("string",(e=>"string"===typeof e||"Expected a string, but received: ".concat(s(e))))}function G(e){const t=L();return new l({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||"Expected an array, but received: ".concat(s(e))})}function W(e){const t=Object.keys(e);return new l({type:"type",schema:e,*entries(r){if(i(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>i(e)||"Expected an object, but received: ".concat(s(e)),coercer:e=>i(e)?{...e}:e})}function Q(e){const t=e.map((e=>e.type)).join(" | ");return new l({type:"union",schema:null,coercer(t){for(const r of e){const[e,n]=r.validate(t,{coerce:!0});if(!e)return n}return t},validator(r,n){const i=[];for(const t of e){const[...e]=u(r,t,n),[o]=e;if(!o[0])return[];for(const[t]of e)t&&i.push(t)}return["Expected the value to satisfy a union of `".concat(t,"`, but received: ").concat(s(r)),...i]}})}function J(){return y("unknown",(()=>!0))}function Z(e,t,r){return new l({...e,coercer:(n,i)=>p(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}function Y(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Z(e,J(),(e=>{const n="function"===typeof t?t():t;if(void 0===e)return n;if(!r.strict&&o(e)&&o(n)){const t={...e};let r=!1;for(const e in n)void 0===t[e]&&(t[e]=n[e],r=!0);if(r)return t}return e}))}function X(e){return Z(e,V(),(e=>e.trim()))}function $(e){return se(e,"empty",(t=>{const r=ee(t);return 0===r||"Expected an empty ".concat(e.type," but received one with a size of `").concat(r,"`")}))}function ee(e){return e instanceof Map||e instanceof Set?e.size:e.length}function te(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{exclusive:n}=r;return se(e,"max",(r=>n?r<t:r<=t||"Expected a ".concat(e.type," less than ").concat(n?"":"or equal to ").concat(t," but received `").concat(r,"`")))}function re(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{exclusive:n}=r;return se(e,"min",(r=>n?r>t:r>=t||"Expected a ".concat(e.type," greater than ").concat(n?"":"or equal to ").concat(t," but received `").concat(r,"`")))}function ne(e){return se(e,"nonempty",(t=>ee(t)>0||"Expected a nonempty ".concat(e.type," but received an empty one")))}function ie(e,t){return se(e,"pattern",(r=>t.test(r)||"Expected a ".concat(e.type," matching `/").concat(t.source,'/` but received "').concat(r,'"')))}function oe(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;const n="Expected a ".concat(e.type),i=t===r?"of `".concat(t,"`"):"between `".concat(t,"` and `").concat(r,"`");return se(e,"size",(e=>{if("number"===typeof e||e instanceof Date)return t<=e&&e<=r||"".concat(n," ").concat(i," but received `").concat(e,"`");if(e instanceof Map||e instanceof Set){const{size:o}=e;return t<=o&&o<=r||"".concat(n," with a size ").concat(i," but received one with a size of `").concat(o,"`")}{const{length:o}=e;return t<=o&&o<=r||"".concat(n," with a length ").concat(i," but received one with a length of `").concat(o,"`")}}))}function se(e,t,r){return new l({...e,*refiner(n,i){yield*e.refiner(n,i);const o=c(r(n,i),i,e,n);for(const e of o)yield{...e,refinement:t}}})}},8597:e=>{"use strict";e.exports={i8:"6.5.4"}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.loaded=!0,r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var i=Object.create(null);__webpack_require__.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,__webpack_require__.d(i,o),i}})(),__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>"static/js/"+e+".0907908a.chunk.js",__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="whis-up-3:";__webpack_require__.l=(r,n,i,o)=>{if(e[r])e[r].push(n);else{var s,a;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==r||l.getAttribute("data-webpack")==t+i){s=l;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,__webpack_require__.nc&&s.setAttribute("nonce",__webpack_require__.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[n];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(h);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),a&&document.head.appendChild(s)}}})(),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__.p="/WhisUp3/",(()=>{var e={179:0};__webpack_require__.f.j=(t,r)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=i);var o=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(o,(r=>{if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,n[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,o=r[0],s=r[1],a=r[2],c=0;if(o.some((t=>0!==e[t]))){for(n in s)__webpack_require__.o(s,n)&&(__webpack_require__.m[n]=s[n]);if(a)a(__webpack_require__)}for(t&&t(r);c<o.length;c++)i=o[c],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkwhis_up_3=self.webpackChunkwhis_up_3||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{base58btc:()=>yt,base58flickr:()=>vt});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{base32:()=>bt,base32hex:()=>At,base32hexpad:()=>kt,base32hexpadupper:()=>xt,base32hexupper:()=>St,base32pad:()=>_t,base32padupper:()=>Et,base32upper:()=>wt,base32z:()=>It});var r={};__webpack_require__.r(r),__webpack_require__.d(r,{base10:()=>ar});var n={};__webpack_require__.r(n),__webpack_require__.d(n,{base16:()=>cr,base16upper:()=>ur});var i={};__webpack_require__.r(i),__webpack_require__.d(i,{base2:()=>lr});var o={};__webpack_require__.r(o),__webpack_require__.d(o,{base256emoji:()=>pr});var s={};__webpack_require__.r(s),__webpack_require__.d(s,{base36:()=>gr,base36upper:()=>mr});var a={};__webpack_require__.r(a),__webpack_require__.d(a,{base64:()=>yr,base64pad:()=>vr,base64url:()=>br,base64urlpad:()=>wr});var c={};__webpack_require__.r(c),__webpack_require__.d(c,{base8:()=>_r});var u={};__webpack_require__.r(u),__webpack_require__.d(u,{identity:()=>Er});var l={};__webpack_require__.r(l),__webpack_require__.d(l,{code:()=>xr,decode:()=>Tr,encode:()=>Ir,name:()=>kr});var d={};__webpack_require__.r(d),__webpack_require__.d(d,{code:()=>Rr,decode:()=>Br,encode:()=>Cr,name:()=>Pr});var h={};__webpack_require__.r(h),__webpack_require__.d(h,{identity:()=>Nr});var f={};__webpack_require__.r(f),__webpack_require__.d(f,{sha256:()=>Ur,sha512:()=>Fr});var p={};__webpack_require__.r(p),__webpack_require__.d(p,{base10:()=>Wi});var g={};__webpack_require__.r(g),__webpack_require__.d(g,{base16:()=>Qi,base16upper:()=>Ji});var m={};__webpack_require__.r(m),__webpack_require__.d(m,{base2:()=>Zi});var y={};__webpack_require__.r(y),__webpack_require__.d(y,{base256emoji:()=>eo});var v={};__webpack_require__.r(v),__webpack_require__.d(v,{base32:()=>to,base32hex:()=>oo,base32hexpad:()=>ao,base32hexpadupper:()=>co,base32hexupper:()=>so,base32pad:()=>no,base32padupper:()=>io,base32upper:()=>ro,base32z:()=>uo});var b={};__webpack_require__.r(b),__webpack_require__.d(b,{base36:()=>lo,base36upper:()=>ho});var w={};__webpack_require__.r(w),__webpack_require__.d(w,{base58btc:()=>fo,base58flickr:()=>po});var _={};__webpack_require__.r(_),__webpack_require__.d(_,{base64:()=>go,base64pad:()=>mo,base64url:()=>yo,base64urlpad:()=>vo});var E={};__webpack_require__.r(E),__webpack_require__.d(E,{base8:()=>bo});var A={};__webpack_require__.r(A),__webpack_require__.d(A,{identity:()=>wo});var S={};__webpack_require__.r(S),__webpack_require__.d(S,{code:()=>So,decode:()=>xo,encode:()=>ko,name:()=>Ao});var k={};__webpack_require__.r(k),__webpack_require__.d(k,{code:()=>To,decode:()=>Ro,encode:()=>Po,name:()=>Io});var x={};__webpack_require__.r(x),__webpack_require__.d(x,{identity:()=>ts});var I={};__webpack_require__.r(I),__webpack_require__.d(I,{sha256:()=>os,sha512:()=>ss});var T={};__webpack_require__.r(T),__webpack_require__.d(T,{base10:()=>yc});var P={};__webpack_require__.r(P),__webpack_require__.d(P,{base16:()=>vc,base16upper:()=>bc});var R={};__webpack_require__.r(R),__webpack_require__.d(R,{base2:()=>wc});var C={};__webpack_require__.r(C),__webpack_require__.d(C,{base256emoji:()=>Sc});var B={};__webpack_require__.r(B),__webpack_require__.d(B,{base32:()=>kc,base32hex:()=>Pc,base32hexpad:()=>Cc,base32hexpadupper:()=>Bc,base32hexupper:()=>Rc,base32pad:()=>Ic,base32padupper:()=>Tc,base32upper:()=>xc,base32z:()=>Mc});var M={};__webpack_require__.r(M),__webpack_require__.d(M,{base36:()=>Nc,base36upper:()=>Oc});var N={};__webpack_require__.r(N),__webpack_require__.d(N,{base58btc:()=>Dc,base58flickr:()=>Lc});var O={};__webpack_require__.r(O),__webpack_require__.d(O,{base64:()=>Uc,base64pad:()=>Fc,base64url:()=>jc,base64urlpad:()=>qc});var D={};__webpack_require__.r(D),__webpack_require__.d(D,{base8:()=>zc});var L={};__webpack_require__.r(L),__webpack_require__.d(L,{identity:()=>Hc});var U={};__webpack_require__.r(U),__webpack_require__.d(U,{code:()=>Wc,decode:()=>Jc,encode:()=>Qc,name:()=>Gc});var F={};__webpack_require__.r(F),__webpack_require__.d(F,{code:()=>Yc,decode:()=>$c,encode:()=>Xc,name:()=>Zc});var j={};__webpack_require__.r(j),__webpack_require__.d(j,{identity:()=>Eu});var q={};__webpack_require__.r(q),__webpack_require__.d(q,{sha256:()=>xu,sha512:()=>Iu});var z={};__webpack_require__.r(z),__webpack_require__.d(z,{dQ:()=>kl,ci:()=>pl,bytesToNumberBE:()=>bl,ty:()=>wl,eV:()=>Sl,n$:()=>Tl,ql:()=>Al,hexToBytes:()=>vl,_t:()=>hl,tL:()=>_l,S5:()=>El,FF:()=>Rl});var H={};__webpack_require__.r(H),__webpack_require__.d(H,{base10:()=>ch});var K={};__webpack_require__.r(K),__webpack_require__.d(K,{base16:()=>uh,base16upper:()=>lh});var V={};__webpack_require__.r(V),__webpack_require__.d(V,{base2:()=>dh});var G={};__webpack_require__.r(G),__webpack_require__.d(G,{base256emoji:()=>gh});var W={};__webpack_require__.r(W),__webpack_require__.d(W,{base32:()=>mh,base32hex:()=>wh,base32hexpad:()=>Eh,base32hexpadupper:()=>Ah,base32hexupper:()=>_h,base32pad:()=>vh,base32padupper:()=>bh,base32upper:()=>yh,base32z:()=>Sh});var Q={};__webpack_require__.r(Q),__webpack_require__.d(Q,{base36:()=>kh,base36upper:()=>xh});var J={};__webpack_require__.r(J),__webpack_require__.d(J,{base58btc:()=>Ih,base58flickr:()=>Th});var Z={};__webpack_require__.r(Z),__webpack_require__.d(Z,{base64:()=>Ph,base64pad:()=>Rh,base64url:()=>Ch,base64urlpad:()=>Bh});var Y={};__webpack_require__.r(Y),__webpack_require__.d(Y,{base8:()=>Mh});var X={};__webpack_require__.r(X),__webpack_require__.d(X,{identity:()=>Nh});var $={};__webpack_require__.r($),__webpack_require__.d($,{code:()=>Uh,decode:()=>jh,encode:()=>Fh,name:()=>Lh});var ee={};__webpack_require__.r(ee),__webpack_require__.d(ee,{code:()=>zh,decode:()=>Kh,encode:()=>Hh,name:()=>qh});var te={};__webpack_require__.r(te),__webpack_require__.d(te,{identity:()=>pf});var re={};__webpack_require__.r(re),__webpack_require__.d(re,{sha256:()=>vf,sha512:()=>bf});var ne={};__webpack_require__.r(ne),__webpack_require__.d(ne,{Ed25519PrivateKey:()=>Zf,Ed25519PublicKey:()=>Jf,generateKeyPair:()=>$f,generateKeyPairFromSeed:()=>ep,unmarshalEd25519PrivateKey:()=>Yf,unmarshalEd25519PublicKey:()=>Xf});var ie={};__webpack_require__.r(ie),__webpack_require__.d(ie,{MAX_KEY_SIZE:()=>up,RsaPrivateKey:()=>dp,RsaPublicKey:()=>lp,fromJwk:()=>pp,generateKeyPair:()=>gp,unmarshalRsaPrivateKey:()=>hp,unmarshalRsaPublicKey:()=>fp});var oe={};__webpack_require__.r(oe),__webpack_require__.d(oe,{Secp256k1PrivateKey:()=>Lp,Secp256k1PublicKey:()=>Dp,generateKeyPair:()=>jp,unmarshalSecp256k1PrivateKey:()=>Up,unmarshalSecp256k1PublicKey:()=>Fp});var se={};__webpack_require__.r(se),__webpack_require__.d(se,{Ed25519PrivateKey:()=>Cb,Ed25519PublicKey:()=>Rb,generateKeyPair:()=>Nb,generateKeyPairFromSeed:()=>Ob,unmarshalEd25519PrivateKey:()=>Bb,unmarshalEd25519PublicKey:()=>Mb});var ae={};__webpack_require__.r(ae),__webpack_require__.d(ae,{MAX_KEY_SIZE:()=>Wb,RsaPrivateKey:()=>Jb,RsaPublicKey:()=>Qb,fromJwk:()=>Xb,generateKeyPair:()=>$b,unmarshalRsaPrivateKey:()=>Zb,unmarshalRsaPublicKey:()=>Yb});var ce={};__webpack_require__.r(ce),__webpack_require__.d(ce,{Secp256k1PrivateKey:()=>rw,Secp256k1PublicKey:()=>tw,generateKeyPair:()=>ow,unmarshalSecp256k1PrivateKey:()=>nw,unmarshalSecp256k1PublicKey:()=>iw});var ue={};__webpack_require__.r(ue),__webpack_require__.d(ue,{base10:()=>I_});var le={};__webpack_require__.r(le),__webpack_require__.d(le,{base16:()=>T_,base16upper:()=>P_});var de={};__webpack_require__.r(de),__webpack_require__.d(de,{base2:()=>R_});var he={};__webpack_require__.r(he),__webpack_require__.d(he,{base256emoji:()=>N_});var fe={};__webpack_require__.r(fe),__webpack_require__.d(fe,{base32:()=>O_,base32hex:()=>F_,base32hexpad:()=>q_,base32hexpadupper:()=>z_,base32hexupper:()=>j_,base32pad:()=>L_,base32padupper:()=>U_,base32upper:()=>D_,base32z:()=>H_});var pe={};__webpack_require__.r(pe),__webpack_require__.d(pe,{base36:()=>K_,base36upper:()=>V_});var ge={};__webpack_require__.r(ge),__webpack_require__.d(ge,{base58btc:()=>G_,base58flickr:()=>W_});var me={};__webpack_require__.r(me),__webpack_require__.d(me,{base64:()=>Q_,base64pad:()=>J_,base64url:()=>Z_,base64urlpad:()=>Y_});var ye={};__webpack_require__.r(ye),__webpack_require__.d(ye,{base8:()=>X_});var ve={};__webpack_require__.r(ve),__webpack_require__.d(ve,{identity:()=>$_});var be={};__webpack_require__.r(be),__webpack_require__.d(be,{code:()=>nE,decode:()=>oE,encode:()=>iE,name:()=>rE});var we={};__webpack_require__.r(we),__webpack_require__.d(we,{code:()=>aE,decode:()=>uE,encode:()=>cE,name:()=>sE});var _e={};__webpack_require__.r(_e),__webpack_require__.d(_e,{identity:()=>BE});var Ee={};__webpack_require__.r(Ee),__webpack_require__.d(Ee,{sha256:()=>DE,sha512:()=>LE});var Ae={};__webpack_require__.r(Ae),__webpack_require__.d(Ae,{base10:()=>rT});var Se={};__webpack_require__.r(Se),__webpack_require__.d(Se,{base16:()=>nT,base16upper:()=>iT});var ke={};__webpack_require__.r(ke),__webpack_require__.d(ke,{base2:()=>oT});var xe={};__webpack_require__.r(xe),__webpack_require__.d(xe,{base256emoji:()=>uT});var Ie={};__webpack_require__.r(Ie),__webpack_require__.d(Ie,{base32:()=>lT,base32hex:()=>pT,base32hexpad:()=>mT,base32hexpadupper:()=>yT,base32hexupper:()=>gT,base32pad:()=>hT,base32padupper:()=>fT,base32upper:()=>dT,base32z:()=>vT});var Te={};__webpack_require__.r(Te),__webpack_require__.d(Te,{base36:()=>bT,base36upper:()=>wT});var Pe={};__webpack_require__.r(Pe),__webpack_require__.d(Pe,{base58btc:()=>_T,base58flickr:()=>ET});var Re={};__webpack_require__.r(Re),__webpack_require__.d(Re,{base64:()=>AT,base64pad:()=>ST,base64url:()=>kT,base64urlpad:()=>xT});var Ce={};__webpack_require__.r(Ce),__webpack_require__.d(Ce,{base8:()=>IT});var Be={};__webpack_require__.r(Be),__webpack_require__.d(Be,{identity:()=>TT});var Me={};__webpack_require__.r(Me),__webpack_require__.d(Me,{code:()=>BT,decode:()=>NT,encode:()=>MT,name:()=>CT});var Ne={};__webpack_require__.r(Ne),__webpack_require__.d(Ne,{code:()=>DT,decode:()=>UT,encode:()=>LT,name:()=>OT});var Oe={};__webpack_require__.r(Oe),__webpack_require__.d(Oe,{identity:()=>aP});var De={};__webpack_require__.r(De),__webpack_require__.d(De,{sha256:()=>dP,sha512:()=>hP});var Le={};__webpack_require__.r(Le),__webpack_require__.d(Le,{abiSchemaToJsonSchema:()=>Kq,codePointToInt:()=>Qq,ensureIfUint8Array:()=>rz,ethAbiToJsonSchema:()=>Vq,fetchArrayElement:()=>Gq,hexToNumber:()=>Jq,hexToUint8Array:()=>tz,numberToHex:()=>Zq,padLeft:()=>Yq,parseBaseType:()=>zq,transformJsonDataToAbiFormat:()=>Wq,uint8ArrayToHexString:()=>Xq});var Ue={};__webpack_require__.r(Ue),__webpack_require__.d(Ue,{isBatchRequest:()=>SK,isBatchResponse:()=>bK,isResponseRpcError:()=>hK,isResponseWithError:()=>pK,isResponseWithNotification:()=>gK,isResponseWithResult:()=>fK,isSubscriptionResult:()=>mK,isValidResponse:()=>vK,setRequestIdStart:()=>_K,toBatchPayload:()=>AK,toPayload:()=>EK,validateResponse:()=>yK});var Fe={};__webpack_require__.r(Fe),__webpack_require__.d(Fe,{ChunkResponseParser:()=>TK,Eip1193Provider:()=>RK,EventEmitter:()=>mH,SocketProvider:()=>MK,Web3DeferredPromise:()=>IK,asciiToHex:()=>tH,bytesToHex:()=>qz,bytesToUint8Array:()=>Fz,checkAddressCheckSum:()=>bH,compareBlockNumbers:()=>IH,convert:()=>zH,convertScalarValue:()=>qH,encodePacked:()=>XH,ethUnitMap:()=>Uz,format:()=>HH,fromAscii:()=>rH,fromDecimal:()=>Gz,fromTwosComplement:()=>LH,fromUtf8:()=>Jz,fromWei:()=>cH,getStorageSlotNumForLongString:()=>tK,hexToAscii:()=>nH,hexToBytes:()=>zz,hexToNumber:()=>Hz,hexToNumberString:()=>Wz,hexToString:()=>eH,hexToUtf8:()=>Yz,isAddress:()=>wH,isBatchRequest:()=>SK,isBatchResponse:()=>bK,isBloom:()=>_H,isContractAddressInBloom:()=>SH,isContractInitOptions:()=>TH,isDataFormat:()=>FH,isHex:()=>vH,isHexStrict:()=>yH,isInBloom:()=>EH,isNullish:()=>PH,isPromise:()=>oK,isResponseRpcError:()=>hK,isResponseWithError:()=>pK,isResponseWithNotification:()=>gK,isResponseWithResult:()=>fK,isSubscriptionResult:()=>mK,isTopic:()=>kH,isTopicInBloom:()=>xH,isUint8Array:()=>Oz,isUserEthereumAddressInBloom:()=>AH,isValidResponse:()=>vK,jsonRpc:()=>Ue,keccak256:()=>WH,keccak256Wrapper:()=>WH,leftPad:()=>OH,mergeDeep:()=>CH,numberToHex:()=>Vz,padLeft:()=>BH,padRight:()=>MH,pollTillDefined:()=>cK,pollTillDefinedAndReturnIntervalId:()=>aK,processSolidityEncodePackedArgs:()=>YH,randomBytes:()=>rK,randomHex:()=>nK,rejectIfConditionAtInterval:()=>lK,rejectIfTimeout:()=>uK,rightPad:()=>NH,setRequestIdStart:()=>_K,sha3:()=>VH,sha3Raw:()=>GH,soliditySha3:()=>$H,soliditySha3Raw:()=>eK,stringToHex:()=>Zz,toAscii:()=>iH,toBatchPayload:()=>AK,toBigInt:()=>aH,toBool:()=>dH,toChecksumAddress:()=>lH,toDecimal:()=>Kz,toHex:()=>oH,toNumber:()=>sH,toPayload:()=>EK,toTwosComplement:()=>DH,toUtf8:()=>Xz,toWei:()=>uH,uint8ArrayConcat:()=>Dz,uint8ArrayEquals:()=>Lz,utf8ToBytes:()=>$z,utf8ToHex:()=>Qz,uuidV4:()=>dK,validateResponse:()=>yK,waitWithTimeout:()=>sK});var je={};__webpack_require__.r(je),__webpack_require__.d(je,{secp256k1:()=>Np});var qe=__webpack_require__(2791),ze=__webpack_require__(1250),He=__webpack_require__(5368),Ke=__webpack_require__.n(He);function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function Ge(e){var t=function(e,t){if("object"!=Ve(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Ve(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ve(t)?t:String(t)}function We(e,t,r){return(t=Ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Qe=Symbol.for("@libp2p/peer-id");function Je(e){return null!=e&&Boolean(e[Qe])}function Ze(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ye(e,t,r){Ze(e,t),t.set(e,r)}function Xe(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function $e(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Xe(e,t,"get"))}function et(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Xe(e,t,"set"),r),r}class tt extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted"),We(this,"code",void 0),We(this,"type",void 0),this.code=tt.code,this.type=tt.type}}We(tt,"code","ABORT_ERR"),We(tt,"type","aborted");class rt extends Error{constructor(e,t,r){var n;super(e),We(this,"code",void 0),We(this,"props",void 0),this.code=t,this.name=null!==(n=null===r||void 0===r?void 0:r.name)&&void 0!==n?n:"CodeError",this.props=null!==r&&void 0!==r?r:{}}}class nt extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected Peer"),We(this,"code",void 0),this.code=nt.code}}We(nt,"code","ERR_UNEXPECTED_PEER");class it extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto exchange"),We(this,"code",void 0),this.code=it.code}}We(it,"code","ERR_INVALID_CRYPTO_EXCHANGE");class ot extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto transmission"),We(this,"code",void 0),this.code=ot.code}}We(ot,"code","ERR_INVALID_CRYPTO_TRANSMISSION");new Uint8Array(0);function st(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}var at=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var d=0,h=o-1;(0!==l||d<i)&&-1!==h;h--,d++)l+=a*s[h]>>>0,s[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=o-i;f!==o&&0===s[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var d=t[i],h=0,f=s-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}};const ct=at;class ut{constructor(e,t,r){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}class lt{constructor(e,t,r){if(We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseDecode",void 0),We(this,"prefixCodePoint",void 0),this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ht(this,e)}}class dt{constructor(e){We(this,"decoders",void 0),this.decoders=e}or(e){return ht(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}function ht(e,t){var r,n;return new dt({...null!==(r=e.decoders)&&void 0!==r?r:{[e.prefix]:e},...null!==(n=t.decoders)&&void 0!==n?n:{[t.prefix]:t}})}class ft{constructor(e,t,r,n){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),We(this,"baseDecode",void 0),We(this,"encoder",void 0),We(this,"decoder",void 0),this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new ut(e,t,r),this.decoder=new lt(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function pt(e){let{name:t,prefix:r,encode:n,decode:i}=e;return new ft(t,r,n,i)}function gt(e){let{name:t,prefix:r,alphabet:n}=e;const{encode:i,decode:o}=ct(n,t);return pt({prefix:r,name:t,encode:i,decode:e=>st(o(e))})}function mt(e){let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return pt({prefix:r,name:t,encode:e=>function(e,t,r){const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(0!==s&&(o+=t[i&a<<r-s]),n)for(;0!==(o.length*r&7);)o+="=";return o}(e,i,n),decode:e=>function(e,t,r,n){const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let l=0;l<o;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|t,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||0!==(255&c<<8-a))throw new SyntaxError("Unexpected end of data");return s}(e,i,n,t)})}const yt=gt({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vt=gt({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),bt=mt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wt=mt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_t=mt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Et=mt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),At=mt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),St=mt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kt=mt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xt=mt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),It=mt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Tt=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=Ct;)r[n++]=255&t|Pt,t/=128;for(;t&Rt;)r[n++]=255&t|Pt,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},Pt=128,Rt=-128,Ct=Math.pow(2,31);var Bt=function e(t,r){var n,i=0,o=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&Nt)<<o:(n&Nt)*Math.pow(2,o),o+=7}while(n>=Mt);return e.bytes=s-r,i},Mt=128,Nt=127;var Ot=Math.pow(2,7),Dt=Math.pow(2,14),Lt=Math.pow(2,21),Ut=Math.pow(2,28),Ft=Math.pow(2,35),jt=Math.pow(2,42),qt=Math.pow(2,49),zt=Math.pow(2,56),Ht=Math.pow(2,63);const Kt={encode:Tt,decode:Bt,encodingLength:function(e){return e<Ot?1:e<Dt?2:e<Lt?3:e<Ut?4:e<Ft?5:e<jt?6:e<qt?7:e<zt?8:e<Ht?9:10}};function Vt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[Kt.decode(e,t),Kt.decode.bytes]}function Gt(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Kt.encode(e,t,r),t}function Wt(e){return Kt.encodingLength(e)}function Qt(e,t){const r=t.byteLength,n=Wt(e),i=n+Wt(r),o=new Uint8Array(i+r);return Gt(e,o,0),Gt(r,o,n),o.set(t,i),new Zt(e,r,t,o)}function Jt(e){const t=st(e),[r,n]=Vt(t),[i,o]=Vt(t.subarray(n)),s=t.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Zt(r,i,s,t)}class Zt{constructor(e,t,r,n){We(this,"code",void 0),We(this,"size",void 0),We(this,"digest",void 0),We(this,"bytes",void 0),this.code=e,this.size=t,this.digest=r,this.bytes=n}}let Yt,Xt;function $t(e,t){const{bytes:r,version:n}=e;return 0===n?function(e,t,r){const{prefix:n}=r;if(n!==yt.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i}(r,tr(e),null!==t&&void 0!==t?t:yt.encoder):function(e,t,r){const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i}(r,tr(e),null!==t&&void 0!==t?t:bt.encoder)}const er=new WeakMap;function tr(e){const t=er.get(e);if(null==t){const t=new Map;return er.set(e,t),t}return t}Yt=Symbol.toStringTag,Xt=Symbol.for("nodejs.util.inspect.custom");class rr{constructor(e,t,r,n){We(this,"code",void 0),We(this,"version",void 0),We(this,"multihash",void 0),We(this,"bytes",void 0),We(this,"/",void 0),We(this,Yt,"CID"),this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==nr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==ir)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return rr.createV0(t)}default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Qt(e,t);return rr.createV1(this.code,r)}case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}equals(e){return rr.equals(this,e)}static equals(e,t){const r=t;return null!=r&&e.code===r.code&&e.version===r.version&&function(e,t){if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e.bytes,r.bytes)}}(e.multihash,r.multihash)}toString(e){return $t(this,e)}toJSON(){return{"/":$t(this)}}link(){return this}[Xt](){return"CID(".concat(this.toString(),")")}static asCID(e){if(null==e)return null;const t=e;if(t instanceof rr)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new rr(e,r,n,null!==i&&void 0!==i?i:or(e,r,n.bytes))}if(!0===t[sr]){const{version:e,multihash:r,code:n}=t,i=Jt(r);return rr.create(e,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==nr)throw new Error("Version 0 CID must use dag-pb (code: ".concat(nr,") block encoding"));return new rr(e,t,r,r.bytes);case 1:{const n=or(e,t,r.bytes);return new rr(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return rr.create(0,nr,e)}static createV1(e,t){return rr.create(1,e,t)}static decode(e){const[t,r]=rr.decodeFirst(e);if(0!==r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=rr.inspectBytes(e),r=t.size-t.multihashSize,n=st(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),o=new Zt(t.multihashCode,t.digestSize,i,n);return[0===t.version?rr.createV0(o):rr.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=Vt(e.subarray(t));return t+=n,r};let n=r(),i=nr;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));const o=t,s=r(),a=r(),c=t+a;return{version:n,codec:i,multihashCode:s,digestSize:a,multihashSize:c-o,size:c}}static parse(e,t){const[r,n]=function(e,t){switch(e[0]){case"Q":{const r=null!==t&&void 0!==t?t:yt;return[yt.prefix,r.decode("".concat(yt.prefix).concat(e))]}case yt.prefix:{const r=null!==t&&void 0!==t?t:yt;return[yt.prefix,r.decode(e)]}case bt.prefix:{const r=null!==t&&void 0!==t?t:bt;return[bt.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}(e,t),i=rr.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return tr(i).set(r,e),i}}const nr=112,ir=18;function or(e,t,r){const n=Wt(e),i=n+Wt(t),o=new Uint8Array(i+r.byteLength);return Gt(e,o,0),Gt(t,o,n),o.set(r,i),o}const sr=Symbol.for("@ipld/js-cid/CID");const ar=gt({prefix:"9",name:"base10",alphabet:"0123456789"}),cr=mt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ur=mt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),lr=mt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),dr=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),hr=dr.reduce(((e,t,r)=>(e[r]=t,e)),[]),fr=dr.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const pr=pt({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=hr[t]),"")},decode:function(e){const t=[];for(const r of e){const e=fr[r.codePointAt(0)];if(void 0===e)throw new Error("Non-base256emoji character: ".concat(r));t.push(e)}return new Uint8Array(t)}}),gr=gt({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mr=gt({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),yr=mt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vr=mt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),br=mt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wr=mt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),_r=mt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Er=pt({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>function(e){return(new TextEncoder).encode(e)}(e)}),Ar=new TextEncoder,Sr=new TextDecoder,kr="json",xr=512;function Ir(e){return Ar.encode(JSON.stringify(e))}function Tr(e){return JSON.parse(Sr.decode(e))}const Pr="raw",Rr=85;function Cr(e){return st(e)}function Br(e){return st(e)}const Mr=st;const Nr={code:0,name:"identity",encode:Mr,digest:function(e){return Qt(0,Mr(e))}};function Or(e){let{name:t,code:r,encode:n}=e;return new Dr(t,r,n)}class Dr{constructor(e,t,r){We(this,"name",void 0),We(this,"code",void 0),We(this,"encode",void 0),this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Qt(this.code,t):t.then((e=>Qt(this.code,e)))}throw Error("Unknown type, must be binary type")}}function Lr(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const Ur=Or({name:"sha2-256",code:18,encode:Lr("SHA-256")}),Fr=Or({name:"sha2-512",code:19,encode:Lr("SHA-512")}),jr={...u,...i,...c,...r,...n,...t,...s,...e,...a,...o};function qr(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function zr(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?qr(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Hr(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Kr=Hr("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Vr=Hr("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=zr((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Gr={utf8:Kr,"utf-8":Kr,hex:jr.base16,latin1:Vr,ascii:Vr,binary:Vr,...jr};function Wr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=Gr[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Qr(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?(r=globalThis.Buffer.allocUnsafe(t),null!=globalThis.Buffer?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r):new Uint8Array(t);var r}const Jr=Math.pow(2,7),Zr=Math.pow(2,14),Yr=Math.pow(2,21),Xr=Math.pow(2,28),$r=Math.pow(2,35),en=Math.pow(2,42),tn=Math.pow(2,49),rn=128,nn=127;function on(e){if(e<Jr)return 1;if(e<Zr)return 2;if(e<Yr)return 3;if(e<Xr)return 4;if(e<$r)return 5;if(e<en)return 6;if(e<tn)return 7;if(null!=Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function sn(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null==t&&(t=Qr(on(e))),t instanceof Uint8Array?function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(on(e)){case 8:t[r++]=255&e|rn,e/=128;case 7:t[r++]=255&e|rn,e/=128;case 6:t[r++]=255&e|rn,e/=128;case 5:t[r++]=255&e|rn,e/=128;case 4:t[r++]=255&e|rn,e>>>=7;case 3:t[r++]=255&e|rn,e>>>=7;case 2:t[r++]=255&e|rn,e>>>=7;case 1:t[r++]=255&e,e>>>=7;break;default:throw new Error("unreachable")}return t}(e,t,r):function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;switch(on(e)){case 8:t.set(r++,255&e|rn),e/=128;case 7:t.set(r++,255&e|rn),e/=128;case 6:t.set(r++,255&e|rn),e/=128;case 5:t.set(r++,255&e|rn),e/=128;case 4:t.set(r++,255&e|rn),e>>>=7;case 3:t.set(r++,255&e|rn),e>>>=7;case 2:t.set(r++,255&e|rn),e>>>=7;case 1:t.set(r++,255&e),e>>>=7;break;default:throw new Error("unreachable")}return t}(e,t,r)}function an(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e instanceof Uint8Array?function(e,t){let r=e[t],n=0;if(n+=r&nn,r<rn)return n;if(r=e[t+1],n+=(r&nn)<<7,r<rn)return n;if(r=e[t+2],n+=(r&nn)<<14,r<rn)return n;if(r=e[t+3],n+=(r&nn)<<21,r<rn)return n;if(r=e[t+4],n+=(r&nn)*Xr,r<rn)return n;if(r=e[t+5],n+=(r&nn)*$r,r<rn)return n;if(r=e[t+6],n+=(r&nn)*en,r<rn)return n;if(r=e[t+7],n+=(r&nn)*tn,r<rn)return n;throw new RangeError("Could not decode varint")}(e,t):function(e,t){let r=e.get(t),n=0;if(n+=r&nn,r<rn)return n;if(r=e.get(t+1),n+=(r&nn)<<7,r<rn)return n;if(r=e.get(t+2),n+=(r&nn)<<14,r<rn)return n;if(r=e.get(t+3),n+=(r&nn)<<21,r<rn)return n;if(r=e.get(t+4),n+=(r&nn)*Xr,r<rn)return n;if(r=e.get(t+5),n+=(r&nn)*$r,r<rn)return n;if(r=e.get(t+6),n+=(r&nn)*en,r<rn)return n;if(r=e.get(t+7),n+=(r&nn)*tn,r<rn)return n;throw new RangeError("Could not decode varint")}(e,t)}function cn(e,t){if(null!=globalThis.Buffer)return qr(globalThis.Buffer.concat(e,t));null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const r=zr(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return qr(r)}const un=45,ln=15,dn=new class{constructor(){We(this,"index",0),We(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const t=this.index,r=e();return void 0===r&&(this.index=t),r}parseWith(e){const t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically((()=>{const t=this.readChar();if(t===e)return t}))}readSeparator(e,t,r){return this.readAtomically((()=>{if(!(t>0&&void 0===this.readGivenChar(e)))return r()}))}readNumber(e,t,r,n){return this.readAtomically((()=>{let i=0,o=0;const s=this.peekChar();if(void 0===s)return;const a="0"===s,c=2**(8*n)-1;for(;;){const r=this.readAtomically((()=>{const t=this.readChar();if(void 0===t)return;const r=Number.parseInt(t,e);return Number.isNaN(r)?void 0:r}));if(void 0===r)break;if(i*=e,i+=r,i>c)return;if(o+=1,void 0!==t&&o>t)return}return 0===o||!r&&a&&o>1?void 0:i}))}readIPv4Addr(){return this.readAtomically((()=>{const e=new Uint8Array(4);for(let t=0;t<e.length;t++){const r=this.readSeparator(".",t,(()=>this.readNumber(10,3,!1,1)));if(void 0===r)return;e[t]=r}return e}))}readIPv6Addr(){const e=e=>{for(let t=0;t<e.length/2;t++){const r=2*t;if(t<e.length-3){const n=this.readSeparator(":",t,(()=>this.readIPv4Addr()));if(void 0!==n)return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],[r+4,!0]}const n=this.readSeparator(":",t,(()=>this.readNumber(16,4,!0,2)));if(void 0===n)return[r,!1];e[r]=n>>8,e[r+1]=255&n}return[e.length,!1]};return this.readAtomically((()=>{const t=new Uint8Array(16),[r,n]=e(t);if(16===r)return t;if(n)return;if(void 0===this.readGivenChar(":"))return;if(void 0===this.readGivenChar(":"))return;const i=new Uint8Array(14),o=16-(r+2),[s]=e(i.subarray(0,o));return t.set(i.subarray(0,s),16-s),t}))}readIPAddr(){var e;return null!==(e=this.readIPv4Addr())&&void 0!==e?e:this.readIPv6Addr()}};parseInt("0xFFFF",16),new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function hn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=Gr[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):qr(globalThis.Buffer.from(e,"utf-8"))}function fn(e){return Boolean(function(e){if(!(e.length>ln))return dn.new(e).parseWith((()=>dn.readIPv4Addr()))}(e))}function pn(e){return Boolean(function(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>un))return dn.new(e).parseWith((()=>dn.readIPv6Addr()))}(e))}function gn(e){return Boolean(function(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>un))return dn.new(e).parseWith((()=>dn.readIPAddr()))}(e))}const mn=fn,yn=pn,vn=function(e){let t=0;if(e=e.toString().trim(),mn(e)){const r=new Uint8Array(t+4);return e.split(/\./g).forEach((e=>{r[t++]=255&parseInt(e,10)})),r}if(yn(e)){const r=e.split(":",8);let n;for(n=0;n<r.length;n++){let e;mn(r[n])&&(e=vn(r[n]),r[n]=Wr(e.slice(0,2),"base16")),null!=e&&++n<8&&r.splice(n,0,Wr(e.slice(2,4),"base16"))}if(""===r[0])for(;r.length<8;)r.unshift("0");else if(""===r[r.length-1])for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&""!==r[n];n++);const e=[n,1];for(n=9-r.length;n>0;n--)e.push("0");r.splice.apply(r,e)}const i=new Uint8Array(t+16);for(n=0;n<r.length;n++){const e=parseInt(r[n],16);i[t++]=e>>8&255,i[t++]=255&e}return i}throw new Error("invalid ip address")},bn=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;r=~~r,n=null!==(t=n)&&void 0!==t?t:e.length-r;const i=new DataView(e.buffer);if(4===n){const t=[];for(let i=0;i<n;i++)t.push(e[r+i]);return t.join(".")}if(16===n){const e=[];for(let t=0;t<n;t+=2)e.push(i.getUint16(r+t).toString(16));return e.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},wn=-1,_n={},En={};function An(e){if("number"===typeof e){if(null!=En[e])return En[e];throw new Error("no protocol with code: ".concat(e))}if("string"===typeof e){if(null!=_n[e])return _n[e];throw new Error("no protocol with name: ".concat(e))}throw new Error("invalid protocol id type: ".concat(typeof e))}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,wn,"ip6zone"],[43,8,"ipcidr"],[53,wn,"dns",!0],[54,wn,"dns4",!0],[55,wn,"dns6",!0],[56,wn,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,wn,"unix",!1,!0],[421,wn,"ipfs"],[421,wn,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,wn,"garlic64"],[448,0,"tls"],[449,wn,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,wn,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,wn,"memory"]].forEach((e=>{const t=function(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...e);En[t.code]=t,_n[t.name]=t}));An("ip4"),An("ip6"),An("ipcidr");function Sn(e,t){switch(An(e).code){case 4:case 41:return function(e){const t=bn(e,0,e.length);if(null==t)throw new Error("ipBuff is required");if(!gn(t))throw new Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Bn(t);case 6:case 273:case 33:case 132:return Rn(t).toString();case 421:return function(e){const t=an(e),r=e.slice(on(t));if(r.length!==t)throw new Error("inconsistent lengths");return Wr(r,"base58btc")}(t);case 444:case 445:return Mn(t);case 466:return function(e){const t=an(e),r=e.slice(on(t));if(r.length!==t)throw new Error("inconsistent lengths");return"u"+Wr(r,"base64url")}(t);default:return Wr(t,"base16")}}function kn(e,t){switch(An(e).code){case 4:case 41:return Tn(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Cn(t);case 6:case 273:case 33:case 132:return Pn(parseInt(t,10));case 421:return function(e){let t;t="Q"===e[0]||"1"===e[0]?Jt(yt.decode("z".concat(e))).bytes:rr.parse(e).multihash.bytes;const r=Uint8Array.from(sn(t.length));return cn([r,t],r.length+t.length)}(t);case 444:return function(e){const t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(16!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion address."));const r=bt.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Pn(n);return cn([r,i],r.length+i.length)}(t);case 445:return function(e){const t=e.split(":");if(2!==t.length)throw new Error("failed to parse onion addr: [\"'".concat(t.join('", "'),"'\"]' does not contain a port number"));if(56!==t[0].length)throw new Error("failed to parse onion addr: ".concat(t[0]," not a Tor onion3 address."));const r=bt.decode("b".concat(t[0])),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const i=Pn(n);return cn([r,i],r.length+i.length)}(t);case 466:return function(e){const t=In.decode(e),r=Uint8Array.from(sn(t.length));return cn([r,t],r.length+t.length)}(t);default:return hn(t,"base16")}}const xn=Object.values(jr).map((e=>e.decoder)),In=function(){let e=xn[0].or(xn[1]);return xn.slice(2).forEach((t=>e=e.or(t))),e}();function Tn(e){if(!gn(e))throw new Error("invalid ip address");return vn(e)}function Pn(e){const t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Rn(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Cn(e){const t=hn(e),r=Uint8Array.from(sn(t.length));return cn([r,t],r.length+t.length)}function Bn(e){const t=an(e);if((e=e.slice(on(t))).length!==t)throw new Error("inconsistent lengths");return Wr(e)}function Mn(e){const t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=Wr(t,"base32"),i=Rn(r);return"".concat(n,":").concat(i)}function Nn(e){const t=[],r=[];let n=null,i=0;for(;i<e.length;){const o=an(e,i),s=on(o),a=An(o),c=Ln(a,e.slice(i+s));if(0===c){t.push([o]),r.push([o]),i+=s;continue}const u=e.slice(i+s,i+s+c);if(i+=c+s,i>e.length)throw Fn("Invalid address Uint8Array: "+Wr(e,"base16"));t.push([o,u]);const l=Sn(o,u);if(r.push([o,l]),!0===a.path){n=l;break}}return{bytes:Uint8Array.from(e),string:On(r),tuples:t,stringTuples:r,path:n}}function On(e){const t=[];return e.map((e=>{const r=An(e[0]);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null})),Un(t.join("/"))}function Dn(e){return cn(e.map((e=>{const t=An(e[0]);let r=Uint8Array.from(sn(t.code));return e.length>1&&null!=e[1]&&(r=cn([r,e[1]])),r})))}function Ln(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{const e=an(t instanceof Uint8Array?t:Uint8Array.from(t));return e+on(e)}}function Un(e){return"/"+e.trim().split("/").filter((e=>e)).join("/")}function Fn(e){return new Error("Error parsing address: "+e)}const jn=Symbol.for("nodejs.util.inspect.custom"),qn=Symbol.for("@multiformats/js-multiaddr/multiaddr"),zn=[An("dns").code,An("dns4").code,An("dns6").code,An("dnsaddr").code];var Hn=new WeakMap,Kn=new WeakMap,Vn=new WeakMap,Gn=new WeakMap;class Wn{constructor(e){let t;if(We(this,"bytes",void 0),Ye(this,Hn,{writable:!0,value:void 0}),Ye(this,Kn,{writable:!0,value:void 0}),Ye(this,Vn,{writable:!0,value:void 0}),Ye(this,Gn,{writable:!0,value:void 0}),We(this,qn,!0),null==e&&(e=""),e instanceof Uint8Array)t=Nn(e);else if("string"===typeof e){if(e.length>0&&"/"!==e.charAt(0))throw new Error('multiaddr "'.concat(e,'" must start with a "/"'));t=function(e){const t=[],r=[];let n=null;const i=(e=Un(e)).split("/").slice(1);if(1===i.length&&""===i[0])return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let o=0;o<i.length;o++){const s=An(i[o]);if(0===s.size){t.push([s.code]),r.push([s.code]);continue}if(o++,o>=i.length)throw Fn("invalid address: "+e);if(!0===s.path){n=Un(i.slice(o).join("/")),t.push([s.code,kn(s.code,n)]),r.push([s.code,n]);break}const a=kn(s.code,i[o]);t.push([s.code,a]),r.push([s.code,Sn(s.code,a)])}return{string:On(r),bytes:Dn(t),tuples:t,stringTuples:r,path:n}}(e)}else{if(!Jn(e))throw new Error("addr must be a string, Buffer, or another Multiaddr");t=Nn(e.bytes)}this.bytes=t.bytes,et(this,Hn,t.string),et(this,Kn,t.tuples),et(this,Vn,t.stringTuples),et(this,Gn,t.path)}toString(){return $e(this,Hn)}toJSON(){return this.toString()}toOptions(){let e,t,r,n,i="";const o=An("tcp"),s=An("udp"),a=An("ip4"),c=An("ip6"),u=An("dns6"),l=An("ip6zone");for(const[d,h]of this.stringTuples())d===l.code&&(i="%".concat(null!==h&&void 0!==h?h:"")),zn.includes(d)&&(t=o.name,n=443,r="".concat(null!==h&&void 0!==h?h:"").concat(i),e=d===u.code?6:4),d!==o.code&&d!==s.code||(t=An(d).name,n=parseInt(null!==h&&void 0!==h?h:"")),d!==a.code&&d!==c.code||(t=An(d).name,r="".concat(null!==h&&void 0!==h?h:"").concat(i),e=d===c.code?6:4);if(null==e||null==t||null==r||null==n)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:r,transport:t,port:n}}protos(){return $e(this,Kn).map((e=>{let[t]=e;return Object.assign({},An(t))}))}protoCodes(){return $e(this,Kn).map((e=>{let[t]=e;return t}))}protoNames(){return $e(this,Kn).map((e=>{let[t]=e;return An(t).name}))}tuples(){return $e(this,Kn)}stringTuples(){return $e(this,Vn)}encapsulate(e){return e=new Wn(e),new Wn(this.toString()+e.toString())}decapsulate(e){const t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw new Error("Address ".concat(this.toString()," does not contain subaddress: ").concat(e.toString()));return new Wn(r.slice(0,n))}decapsulateCode(e){const t=this.tuples();for(let r=t.length-1;r>=0;r--)if(t[r][0]===e)return new Wn(Dn(t.slice(0,r)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach((t=>{let[r,n]=t;r===_n.p2p.code&&e.push([r,n]),r===_n["p2p-circuit"].code&&(e=[])}));const t=e.pop();if(null!=(null===t||void 0===t?void 0:t[1])){const e=t[1];return"Q"===e[0]||"1"===e[0]?Wr(yt.decode("z".concat(e)),"base58btc"):Wr(rr.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){return $e(this,Gn)}equals(e){return function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(this.bytes,e.bytes)}async resolve(e){const t=this.protos().find((e=>e.resolvable));if(null==t)return[this];const r=Qn.get(t.name);if(null==r)throw new rt("no available resolver for ".concat(t.name),"ERR_NO_AVAILABLE_RESOLVER");return(await r(this,e)).map((e=>new Wn(e)))}nodeAddress(){const e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw new Error('multiaddr must have a valid format - no protocol with name: "'.concat(e.transport,'". Must have a valid transport protocol: "{tcp, udp}"'));return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const t=(null!==e&&void 0!==e?e:this).protos();return 2===t.length&&((4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code))}[jn](){return"Multiaddr(".concat($e(this,Hn),")")}}const Qn=new Map;function Jn(e){return Boolean(null===e||void 0===e?void 0:e[qn])}function Zn(e){return new Wn(e)}var Yn,Xn,$n,ei,ti,ri;!function(e){e.Relay="relay",e.Store="store",e.LightPush="lightpush",e.Filter="filter"}(Yn||(Yn={})),function(e){e.GENERIC_FAIL="Generic error",e.ENCODE_FAILED="Failed to encode",e.DECODE_FAILED="Failed to decode",e.EMPTY_PAYLOAD="Payload is empty",e.SIZE_TOO_BIG="Size is too big",e.TOPIC_NOT_CONFIGURED="Topic not configured",e.NO_PEER_AVAILABLE="No peer available",e.REMOTE_PEER_FAULT="Remote peer fault",e.REMOTE_PEER_REJECTED="Remote peer rejected"}(Xn||(Xn={})),function(e){e.BACKWARD="backward",e.FORWARD="forward"}($n||($n={})),function(e){e.BOOTSTRAP="bootstrap",e.PEER_EXCHANGE="peer-exchange"}(ei||(ei={})),function(e){e.PEER_DISCOVERY_BOOTSTRAP="peer:discovery:bootstrap",e.PEER_DISCOVERY_PEER_EXCHANGE="peer:discovery:peer-exchange",e.PEER_CONNECT_BOOTSTRAP="peer:connected:bootstrap",e.PEER_CONNECT_PEER_EXCHANGE="peer:connected:peer-exchange"}(ti||(ti={})),function(e){e.CONNECTION_STATUS="waku:connection"}(ri||(ri={}));const ni="/waku/2/default-waku/proto";function ii(e){return Boolean(e)}function oi(e){const t=new Map;return e.forEach((e=>{let r=t.get(e.contentTopic);r||(t.set(e.contentTopic,[]),r=t.get(e.contentTopic)),r.push(e)})),t}async function si(e,t,r){var n,i;const o=null!==(n=null===r||void 0===r?void 0:r.iteratorDelay)&&void 0!==n?n:60,s=[];let a;a=await e.subscribe(t,(e=>{s.push(e)}));const c=Number.isInteger(null===r||void 0===r?void 0:r.timeoutMs),u=null!==(i=null===r||void 0===r?void 0:r.timeoutMs)&&void 0!==i?i:0,l=Date.now();return{iterator:async function*(){for(;;){if(c&&Date.now()-l>=u)return;await ai(o);const e=s.shift();if(!a&&0===s.length)return e;!e&&a||(yield e)}}(),async stop(){a&&(await a(),a=void 0)}}}function ai(e){return new Promise((t=>{setTimeout(t,e)}))}const ci=e=>e.length/1048576<=1;function ui(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: ".concat(e))}function li(e){if(!((t=e)instanceof Uint8Array||null!=t&&"object"===typeof t&&"Uint8Array"===t.constructor.name))throw new Error("Expected Uint8Array");for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(n.length>0&&!n.includes(e.length))throw new Error("Expected Uint8Array of length ".concat(n,", not of length=").concat(e.length))}function di(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");ui(e.outputLen),ui(e.blockLen)}function hi(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function fi(e,t){li(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least ".concat(r))}const pi={number:ui,bool:function(e){if("boolean"!==typeof e)throw new Error("Expected boolean, not ".concat(e))},bytes:li,hash:di,exists:hi,output:fi},gi="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,mi=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));function yi(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}const vi=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),bi=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function wi(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got ".concat(typeof e));return new Uint8Array((new TextEncoder).encode(e))}function _i(e){if("string"===typeof e&&(e=wi(e)),!yi(e))throw new Error("expected Uint8Array, got ".concat(typeof e));return e}function Ei(){let e=0;for(let r=0;r<arguments.length;r++){const t=r<0||arguments.length<=r?void 0:arguments[r];if(!yi(t))throw new Error("Uint8Array expected");e+=t.length}const t=new Uint8Array(e);for(let r=0,n=0;r<arguments.length;r++){const e=r<0||arguments.length<=r?void 0:arguments[r];t.set(e,n),n+=e.length}return t}class Ai{clone(){return this._cloneInto()}}const Si={}.toString;function ki(e,t){if(void 0!==t&&"[object Object]"!==Si.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)}function xi(e){const t=t=>e().update(_i(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Ii(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(gi&&"function"===typeof gi.getRandomValues)return gi.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}class Ti extends Ai{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vi(this.buffer)}update(e){hi(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=_i(e)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s!==n)r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=vi(e);for(;n<=i-o;o+=n)this.process(t,o)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){hi(this),fi(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let l=o;l<n;l++)t[l]=0;!function(e,t,r,n){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=vi(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)s.setUint32(4*l,u[l],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}const Pi=(e,t,r)=>e&t^e&r^t&r,Ri=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ci=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bi=new Uint32Array(64);class Mi extends Ti{constructor(){super(64,32,8,!1),this.A=0|Ci[0],this.B=0|Ci[1],this.C=0|Ci[2],this.D=0|Ci[3],this.E=0|Ci[4],this.F=0|Ci[5],this.G=0|Ci[6],this.H=0|Ci[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let d=0;d<16;d++,t+=4)Bi[d]=e.getUint32(t,!1);for(let d=16;d<64;d++){const e=Bi[d-15],t=Bi[d-2],r=bi(e,7)^bi(e,18)^e>>>3,n=bi(t,17)^bi(t,19)^t>>>10;Bi[d]=n+Bi[d-7]+r+Bi[d-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let d=0;d<64;d++){const e=u+(bi(s,6)^bi(s,11)^bi(s,25))+((l=s)&a^~l&c)+Ri[d]+Bi[d]|0,t=(bi(r,2)^bi(r,13)^bi(r,22))+Pi(r,n,i)|0;u=c,c=a,a=s,s=o+e|0,o=i,i=n,n=r,r=e+t|0}var l;r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,o,s,a,c,u)}roundClean(){Bi.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ni=xi((()=>new Mi));function Oi(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}var Di=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var d=0,h=o-1;(0!==l||d<i)&&-1!==h;h--,d++)l+=a*s[h]>>>0,s[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=o-i;f!==o&&0===s[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var d=t[i],h=0,f=s-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}};const Li=Di,Ui=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class Fi{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}class ji{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return zi(this,e)}}class qi{constructor(e){this.decoders=e}or(e){return zi(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}const zi=(e,t)=>new qi({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Hi{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Fi(e,t,r),this.decoder=new ji(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ki=e=>{let{name:t,prefix:r,encode:n,decode:i}=e;return new Hi(t,r,n,i)},Vi=e=>{let{prefix:t,name:r,alphabet:n}=e;const{encode:i,decode:o}=Li(n,r);return Ki({prefix:t,name:r,encode:i,decode:e=>Ui(o(e))})},Gi=e=>{let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return Ki({prefix:r,name:t,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o})(e,i,n),decode:e=>((e,t,r,n)=>{const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let l=0;l<o;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|t,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s})(e,i,n,t)})},Wi=Vi({prefix:"9",name:"base10",alphabet:"0123456789"}),Qi=Gi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ji=Gi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Zi=Gi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Yi=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Xi=Yi.reduce(((e,t,r)=>(e[r]=t,e)),[]),$i=Yi.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const eo=Ki({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Xi[t]),"")},decode:function(e){const t=[];for(const r of e){const e=$i[r.codePointAt(0)];if(void 0===e)throw new Error("Non-base256emoji character: ".concat(r));t.push(e)}return new Uint8Array(t)}}),to=Gi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ro=Gi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),no=Gi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),io=Gi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oo=Gi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),so=Gi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ao=Gi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),co=Gi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uo=Gi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),lo=Vi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ho=Vi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),fo=Vi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),po=Vi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),go=Gi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),mo=Gi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),yo=Gi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),vo=Gi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),bo=Gi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),wo=Ki({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),_o=new TextEncoder,Eo=new TextDecoder,Ao="json",So=512,ko=e=>_o.encode(JSON.stringify(e)),xo=e=>JSON.parse(Eo.decode(e)),Io="raw",To=85,Po=e=>Ui(e),Ro=e=>Ui(e);var Co=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=No;)r[n++]=255&t|Bo,t/=128;for(;t&Mo;)r[n++]=255&t|Bo,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},Bo=128,Mo=-128,No=Math.pow(2,31);var Oo=function e(t,r){var n,i=0,o=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&Lo)<<o:(n&Lo)*Math.pow(2,o),o+=7}while(n>=Do);return e.bytes=s-r,i},Do=128,Lo=127;var Uo=Math.pow(2,7),Fo=Math.pow(2,14),jo=Math.pow(2,21),qo=Math.pow(2,28),zo=Math.pow(2,35),Ho=Math.pow(2,42),Ko=Math.pow(2,49),Vo=Math.pow(2,56),Go=Math.pow(2,63);const Wo={encode:Co,decode:Oo,encodingLength:function(e){return e<Uo?1:e<Fo?2:e<jo?3:e<qo?4:e<zo?5:e<Ho?6:e<Ko?7:e<Vo?8:e<Go?9:10}},Qo=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[Wo.decode(e,t),Wo.decode.bytes]},Jo=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Wo.encode(e,t,r),t},Zo=e=>Wo.encodingLength(e),Yo=(e,t)=>{const r=t.byteLength,n=Zo(e),i=n+Zo(r),o=new Uint8Array(i+r);return Jo(e,o,0),Jo(r,o,n),o.set(t,i),new $o(e,r,t,o)},Xo=e=>{const t=Ui(e),[r,n]=Qo(t),[i,o]=Qo(t.subarray(n)),s=t.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new $o(r,i,s,t)};class $o{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const es=Ui,ts={code:0,name:"identity",encode:es,digest:e=>Yo(0,es(e))},rs=e=>{let{name:t,code:r,encode:n}=e;return new ns(t,r,n)};class ns{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Yo(this.code,t):t.then((e=>Yo(this.code,e)))}throw Error("Unknown type, must be binary type")}}const is=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),os=rs({name:"sha2-256",code:18,encode:is("SHA-256")}),ss=rs({name:"sha2-512",code:19,encode:is("SHA-512")}),as=(e,t)=>{const{bytes:r,version:n}=e;return 0===n?hs(r,us(e),t||fo.encoder):fs(r,us(e),t||to.encoder)},cs=new WeakMap,us=e=>{const t=cs.get(e);if(null==t){const t=new Map;return cs.set(e,t),t}return t};class ls{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:t}=this;if(e!==ps)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==gs)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ls.createV0(t)}default:throw Error("Can not convert CID version ".concat(this.version," to version 0. This is a bug please report"))}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=Yo(e,t);return ls.createV1(this.code,r)}case 1:return this;default:throw Error("Can not convert CID version ".concat(this.version," to version 1. This is a bug please report"))}}equals(e){return ls.equals(this,e)}static equals(e,t){const r=t;return r&&e.code===r.code&&e.version===r.version&&((e,t)=>{if(e===t)return!0;{const r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&((e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0})(e.bytes,r.bytes)}})(e.multihash,r.multihash)}toString(e){return as(this,e)}toJSON(){return{"/":as(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID(".concat(this.toString(),")")}static asCID(e){if(null==e)return null;const t=e;if(t instanceof ls)return t;if(null!=t["/"]&&t["/"]===t.bytes||t.asCID===t){const{version:e,code:r,multihash:n,bytes:i}=t;return new ls(e,r,n,i||ms(e,r,n.bytes))}if(!0===t[ys]){const{version:e,multihash:r,code:n}=t,i=Xo(r);return ls.create(e,n,i)}return null}static create(e,t,r){if("number"!==typeof t)throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:if(t!==ps)throw new Error("Version 0 CID must use dag-pb (code: ".concat(ps,") block encoding"));return new ls(e,t,r,r.bytes);case 1:{const n=ms(e,t,r.bytes);return new ls(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return ls.create(0,ps,e)}static createV1(e,t){return ls.create(1,e,t)}static decode(e){const[t,r]=ls.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=ls.inspectBytes(e),r=t.size-t.multihashSize,n=Ui(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const i=n.subarray(t.multihashSize-t.digestSize),o=new $o(t.multihashCode,t.digestSize,i,n);return[0===t.version?ls.createV0(o):ls.createV1(t.codec,o),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=Qo(e.subarray(t));return t+=n,r};let n=r(),i=ps;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw new RangeError("Invalid CID version ".concat(n));const o=t,s=r(),a=r(),c=t+a;return{version:n,codec:i,multihashCode:s,digestSize:a,multihashSize:c-o,size:c}}static parse(e,t){const[r,n]=ds(e,t),i=ls.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return us(i).set(r,e),i}}const ds=(e,t)=>{switch(e[0]){case"Q":{const r=t||fo;return[fo.prefix,r.decode("".concat(fo.prefix).concat(e))]}case fo.prefix:{const r=t||fo;return[fo.prefix,r.decode(e)]}case to.prefix:{const r=t||to;return[to.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},hs=(e,t,r)=>{const{prefix:n}=r;if(n!==fo.prefix)throw Error("Cannot string encode V0 in ".concat(r.name," encoding"));const i=t.get(n);if(null==i){const i=r.encode(e).slice(1);return t.set(n,i),i}return i},fs=(e,t,r)=>{const{prefix:n}=r,i=t.get(n);if(null==i){const i=r.encode(e);return t.set(n,i),i}return i},ps=112,gs=18,ms=(e,t,r)=>{const n=Zo(e),i=n+Zo(t),o=new Uint8Array(i+r.byteLength);return Jo(e,o,0),Jo(t,o,n),o.set(r,i),o},ys=Symbol.for("@ipld/js-cid/CID"),vs={...A,...m,...E,...p,...g,...v,...b,...w,..._,...y};function bs(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.alloc)?Oi(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function ws(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Oi(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function _s(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Es=_s("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),As=_s("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=ws((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Ss={utf8:Es,"utf-8":Es,hex:vs.base16,latin1:As,ascii:As,binary:As,...vs};function ks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=Ss[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):Oi(globalThis.Buffer.from(e,"utf-8"))}function xs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=Ss[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Is(e){if("string"===typeof e){return ks(e.replace(/^0x/i,"").toLowerCase(),"base16")}return e}const Ts=e=>xs(e,"base16"),Ps=e=>xs(e,"utf8"),Rs=e=>ks(e,"utf8");const Cs=e=>{if(void 0===e.clusterId||void 0===e.shard)throw new Error("Invalid shard");return"/waku/2/rs/".concat(e.clusterId,"/").concat(e.shard)},Bs=e=>{if(void 0===e.clusterId)throw new Error("Cluster ID must be specified");if("contentTopics"in e)return Array.from(new Set(e.contentTopics.map((t=>Ds(t,e.clusterId)))));if("shards"in e){if(void 0===e.shards)throw new Error("Invalid shard");return Array.from(new Set(e.shards.map((t=>"/waku/2/rs/".concat(e.clusterId,"/").concat(t)))))}return[Ds("/".concat(e.application,"/").concat(e.version,"/default/default"))]},Ms=e=>{const t=e.split("/");if(6!=t.length||"waku"!==t[1]||"2"!==t[2]||"rs"!==t[3])throw new Error("Invalid pubsub topic");const r=parseInt(t[4]),n=parseInt(t[5]);if(isNaN(r)||isNaN(n))throw new Error("Invalid clusterId or shard");return{clusterId:r,shard:n}};function Ns(e,t){if(!t.includes(e))throw new Error("Pubsub topic ".concat(e," has not been configured on this instance. Configured topics are: ").concat(t,". Please update your configuration by passing in the topic during Waku node instantiation."))}function Os(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const{application:r,version:n}=function(e){const t=e.split("/");if(t.length<5||t.length>6)throw Error("Content topic format is invalid");let r=0;if(6==t.length){if(r=parseInt(t[1]),isNaN(r))throw new Error("Invalid generation field in content topic");if(r>0)throw new Error("Generation greater than 0 is not supported")}const n=t.splice(-4);if(0==n[0].length)throw new Error("Application field cannot be empty");if(0==n[1].length)throw new Error("Version field cannot be empty");if(0==n[2].length)throw new Error("Topic name field cannot be empty");if(0==n[3].length)throw new Error("Encoding field cannot be empty");return{generation:r,application:n[0],version:n[1],topicName:n[2],encoding:n[3]}}(e),i=Ni(function(e,t){const r=null!==t&&void 0!==t?t:e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(r);let i=0;for(const o of e)n.set(o,i),i+=o.length;return n}([Rs(r),Rs(n)])),o=new DataView(i.buffer.slice(-8));return Number(o.getBigUint64(0,!1)%BigInt(t))}function Ds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r=Os(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:8);return"/waku/2/rs/".concat(t,"/").concat(r)}function Ls(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ni;return"string"==typeof t?t:t?t.shard?Cs(t):Ds(e,t.clusterId):ni}function Us(e,t,r){let n=e.get(t);"undefined"===typeof n&&(e.set(t,new Set),n=e.get(t)),n.add(r)}var Fs=__webpack_require__(8392);const js="waku";class qs{static createDebugNamespace(e,t){return t?"".concat(js,":").concat(e,":").concat(t):"".concat(js,":").concat(e)}constructor(e){We(this,"_info",void 0),We(this,"_warn",void 0),We(this,"_error",void 0),this._info=Fs(qs.createDebugNamespace("info",e)),this._warn=Fs(qs.createDebugNamespace("warn",e)),this._error=Fs(qs.createDebugNamespace("error",e))}get info(){return this._info}get warn(){return this._warn}get error(){return this._error}log(e){const t=this[e];for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t(...n)}}var zs,Hs=new WeakMap;class Ks extends EventTarget{constructor(){super(...arguments),Ye(this,Hs,{writable:!0,value:new Map})}listenerCount(e){const t=$e(this,Hs).get(e);return null==t?0:t.length}addEventListener(e,t,r){var n;super.addEventListener(e,t,r);let i=$e(this,Hs).get(e);null==i&&(i=[],$e(this,Hs).set(e,i)),i.push({callback:t,once:null!==(n=!0!==r&&!1!==r&&(null===r||void 0===r?void 0:r.once))&&void 0!==n&&n})}removeEventListener(e,t,r){super.removeEventListener(e.toString(),null!==t&&void 0!==t?t:null,r);let n=$e(this,Hs).get(e);null!=n&&(n=n.filter((e=>{let{callback:r}=e;return r!==t})),$e(this,Hs).set(e,n))}dispatchEvent(e){const t=super.dispatchEvent(e);let r=$e(this,Hs).get(e.type);return null==r||(r=r.filter((e=>{let{once:t}=e;return!t})),$e(this,Hs).set(e.type,r)),t}safeDispatchEvent(e,t){return this.dispatchEvent(new Gs(e,t))}}class Vs extends Event{constructor(e,t){super(e,t),We(this,"detail",void 0),this.detail=null===t||void 0===t?void 0:t.detail}}const Gs=null!==(zs=globalThis.CustomEvent)&&void 0!==zs?zs:Vs;var Ws=__webpack_require__(5856),Qs=__webpack_require__.t(Ws,2);const Js=BigInt(0),Zs=BigInt(1),Ys=BigInt(2),Xs=BigInt(3),$s=BigInt(8),ea=Object.freeze({a:Js,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Zs,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),ta=(e,t)=>(e+t/Ys)/t,ra={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){const{n:t}=ea,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Zs*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=ta(o*e,t),c=ta(-n*e,t);let u=Ca(e-a*r-c*i,t),l=Ca(-a*n-c*o,t);const d=u>s,h=l>s;if(d&&(u=t-u),h&&(l=t-l),u>s||l>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:l}}},na=32,ia=32,oa=32,sa=na+1,aa=2*na+1;function ca(e){const{a:t,b:r}=ea,n=Ca(e*e),i=Ca(n*e);return Ca(i+t*e+r)}const ua=ea.a===Js;class la extends Error{constructor(e){super(e)}}function da(e){if(!(e instanceof ha))throw new TypeError("JacobianPoint expected")}class ha{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof ga))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(ga.ZERO)?ha.ZERO:new ha(e.x,e.y,Zs)}static toAffineBatch(e){const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ea.P;const r=new Array(e.length),n=Ma(e.reduce(((e,n,i)=>n===Js?e:(r[i]=e,Ca(e*n,t))),Zs),t);return e.reduceRight(((e,n,i)=>n===Js?e:(r[i]=Ca(e*r[i],t),Ca(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return ha.toAffineBatch(e).map(ha.fromAffine)}equals(e){da(e);const{x:t,y:r,z:n}=this,{x:i,y:o,z:s}=e,a=Ca(n*n),c=Ca(s*s),u=Ca(t*c),l=Ca(i*a),d=Ca(Ca(r*s)*c),h=Ca(Ca(o*n)*a);return u===l&&d===h}negate(){return new ha(this.x,Ca(-this.y),this.z)}double(){const{x:e,y:t,z:r}=this,n=Ca(e*e),i=Ca(t*t),o=Ca(i*i),s=e+i,a=Ca(Ys*(Ca(s*s)-n-o)),c=Ca(Xs*n),u=Ca(c*c),l=Ca(u-Ys*a),d=Ca(c*(a-l)-$s*o),h=Ca(Ys*t*r);return new ha(l,d,h)}add(e){da(e);const{x:t,y:r,z:n}=this,{x:i,y:o,z:s}=e;if(i===Js||o===Js)return this;if(t===Js||r===Js)return e;const a=Ca(n*n),c=Ca(s*s),u=Ca(t*c),l=Ca(i*a),d=Ca(Ca(r*s)*c),h=Ca(Ca(o*n)*a),f=Ca(l-u),p=Ca(h-d);if(f===Js)return p===Js?this.double():ha.ZERO;const g=Ca(f*f),m=Ca(f*g),y=Ca(u*g),v=Ca(p*p-m-Ys*y),b=Ca(p*(y-v)-d*m),w=Ca(n*s*f);return new ha(v,b,w)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const t=ha.ZERO;if("bigint"===typeof e&&e===Js)return t;let r=Ra(e);if(r===Zs)return this;if(!ua){let e=t,n=this;for(;r>Js;)r&Zs&&(e=e.add(n)),n=n.double(),r>>=Zs;return e}let{k1neg:n,k1:i,k2neg:o,k2:s}=ra.splitScalar(r),a=t,c=t,u=this;for(;i>Js||s>Js;)i&Zs&&(a=a.add(u)),s&Zs&&(c=c.add(u)),u=u.double(),i>>=Zs,s>>=Zs;return n&&(a=a.negate()),o&&(c=c.negate()),c=new ha(Ca(c.x*ra.beta),c.y,c.z),a.add(c)}precomputeWindow(e){const t=ua?128/e+1:256/e+1,r=[];let n=this,i=n;for(let o=0;o<t;o++){i=n,r.push(i);for(let t=1;t<2**(e-1);t++)i=i.add(n),r.push(i);n=i.double()}return r}wNAF(e,t){!t&&this.equals(ha.BASE)&&(t=ga.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&pa.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=ha.normalizeZ(n),pa.set(t,n)));let i=ha.ZERO,o=ha.BASE;const s=1+(ua?128/r:256/r),a=2**(r-1),c=BigInt(2**r-1),u=2**r,l=BigInt(r);for(let d=0;d<s;d++){const t=d*a;let r=Number(e&c);e>>=l,r>a&&(r-=u,e+=Zs);const s=t,h=t+Math.abs(r)-1,f=d%2!==0,p=r<0;0===r?o=o.add(fa(f,n[s])):i=i.add(fa(p,n[h]))}return{p:i,f:o}}multiply(e,t){let r,n,i=Ra(e);if(ua){const{k1neg:e,k1:o,k2neg:s,k2:a}=ra.splitScalar(i);let{p:c,f:u}=this.wNAF(o,t),{p:l,f:d}=this.wNAF(a,t);c=fa(e,c),l=fa(s,l),l=new ha(Ca(l.x*ra.beta),l.y,l.z),r=c.add(l),n=u.add(d)}else{const{p:e,f:o}=this.wNAF(i,t);r=e,n=o}return ha.normalizeZ([r,n])[0]}toAffine(e){const{x:t,y:r,z:n}=this,i=this.equals(ha.ZERO);null==e&&(e=i?$s:Ma(n));const o=e,s=Ca(o*o),a=Ca(s*o),c=Ca(t*s),u=Ca(r*a),l=Ca(n*o);if(i)return ga.ZERO;if(l!==Zs)throw new Error("invZ was invalid");return new ga(c,u)}}function fa(e,t){const r=t.negate();return e?r:t}ha.BASE=new ha(ea.Gx,ea.Gy,Zs),ha.ZERO=new ha(Js,Zs,Js);const pa=new WeakMap;class ga{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,pa.delete(this)}hasEvenY(){return this.y%Ys===Js}static fromCompressedHex(e){const t=32===e.length,r=Ta(t?e:e.subarray(1));if(!Fa(r))throw new Error("Point is not on curve");let n=function(e){const{P:t}=ea,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,u=c*c*e%t,l=Ba(u,Xs)*u%t,d=Ba(l,Xs)*u%t,h=Ba(d,Ys)*c%t,f=Ba(h,n)*h%t,p=Ba(f,i)*f%t,g=Ba(p,s)*p%t,m=Ba(g,a)*g%t,y=Ba(m,s)*p%t,v=Ba(y,Xs)*u%t,b=Ba(v,o)*f%t,w=Ba(b,r)*c%t,_=Ba(w,Ys);if(_*_%t!==e)throw new Error("Cannot find square root");return _}(ca(r));const i=(n&Zs)===Zs;if(t)i&&(n=Ca(-n));else{1===(1&e[0])!==i&&(n=Ca(-n))}const o=new ga(r,n);return o.assertValidity(),o}static fromUncompressedHex(e){const t=Ta(e.subarray(1,na+1)),r=Ta(e.subarray(na+1,2*na+1)),n=new ga(t,r);return n.assertValidity(),n}static fromHex(e){const t=Pa(e),r=t.length,n=t[0];if(r===na)return this.fromCompressedHex(t);if(r===sa&&(2===n||3===n))return this.fromCompressedHex(t);if(r===aa&&4===n)return this.fromUncompressedHex(t);throw new Error("Point.fromHex: received invalid point. Expected 32-".concat(sa," compressed bytes or ").concat(aa," uncompressed bytes, not ").concat(r))}static fromPrivateKey(e){return ga.BASE.multiply(qa(e))}static fromSignature(e,t,r){const{r:n,s:i}=Ha(t);if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");const o=Na(Pa(e)),{n:s}=ea,a=2===r||3===r?n+s:n,c=Ma(a,s),u=Ca(-o*c,s),l=Ca(i*c,s),d=1&r?"03":"02",h=ga.fromHex(d+Aa(a)),f=ga.BASE.multiplyAndAddUnsafe(h,u,l);if(!f)throw new Error("Cannot recover signature: point at infinify");return f.assertValidity(),f}toRawBytes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Ia(this.toHex(e))}toHex(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=Aa(this.x);if(e){const e=this.hasEvenY()?"02":"03";return"".concat(e).concat(t)}return"04".concat(t).concat(Aa(this.y))}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:t,y:r}=this;if(!Fa(t)||!Fa(r))throw new Error(e);const n=Ca(r*r);if(Ca(n-ca(t))!==Js)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ga(this.x,Ca(-this.y))}double(){return ha.fromAffine(this).double().toAffine()}add(e){return ha.fromAffine(this).add(ha.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ha.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){const n=ha.fromAffine(this),i=t===Js||t===Zs||this!==ga.BASE?n.multiplyUnsafe(t):n.multiply(t),o=ha.fromAffine(e).multiplyUnsafe(r),s=i.add(o);return s.equals(ha.ZERO)?void 0:s.toAffine()}}function ma(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function ya(e){if(e.length<2||2!==e[0])throw new Error("Invalid signature integer tag: ".concat(_a(e)));const t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Ta(r),left:e.subarray(t+2)}}ga.BASE=new ga(ea.Gx,ea.Gy),ga.ZERO=new ga(Js,Js);class va{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){const t=e instanceof Uint8Array,r="Signature.fromCompact";if("string"!==typeof e&&!t)throw new TypeError("".concat(r,": Expected string or Uint8Array"));const n=t?_a(e):e;if(128!==n.length)throw new Error("".concat(r,": Expected 64-byte hex"));return new va(xa(n.slice(0,64)),xa(n.slice(64,128)))}static fromDER(e){const t=e instanceof Uint8Array;if("string"!==typeof e&&!t)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:r,s:n}=function(e){if(e.length<2||48!=e[0])throw new Error("Invalid signature tag: ".concat(_a(e)));if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:r}=ya(e.subarray(2)),{data:n,left:i}=ya(r);if(i.length)throw new Error("Invalid signature: left bytes after parsing: ".concat(_a(i)));return{r:t,s:n}}(t?e:Ia(e));return new va(r,n)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:t}=this;if(!Ua(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Ua(t))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=ea.n>>Zs;return this.s>e}normalizeS(){return this.hasHighS()?new va(this.r,Ca(-this.s,ea.n)):this}toDERRawBytes(){return Ia(this.toDERHex())}toDERHex(){const e=ma(ka(this.s)),t=ma(ka(this.r)),r=e.length/2,n=t.length/2,i=ka(r),o=ka(n),s=ka(n+r+4);return"30".concat(s,"02").concat(o).concat(t,"02").concat(i).concat(e)}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Ia(this.toCompactHex())}toCompactHex(){return Aa(this.r)+Aa(this.s)}}function ba(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const n=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(n);for(let o=0,s=0;o<t.length;o++){const e=t[o];i.set(e,s),s+=e.length}return i}const wa=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function _a(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=wa[e[r]];return t}const Ea=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Aa(e){if("bigint"!==typeof e)throw new Error("Expected bigint");if(!(Js<=e&&e<Ea))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Sa(e){const t=Ia(Aa(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function ka(e){const t=e.toString(16);return 1&t.length?"0".concat(t):t}function xa(e){if("string"!==typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt("0x".concat(e))}function Ia(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function Ta(e){return xa(_a(e))}function Pa(e){return e instanceof Uint8Array?Uint8Array.from(e):Ia(e)}function Ra(e){if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"===typeof e&&Ua(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Ca(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ea.P;const r=e%t;return r>=Js?r:t+r}function Ba(e,t){const{P:r}=ea;let n=e;for(;t-- >Js;)n*=n,n%=r;return n}function Ma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ea.P;if(e===Js||t<=Js)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));let r=Ca(e,t),n=t,i=Js,o=Zs,s=Zs,a=Js;for(;r!==Js;){const e=n/r,t=n%r,c=i-s*e,u=o-a*e;n=r,r=t,i=s,o=a,s=c,a=u}if(n!==Zs)throw new Error("invert: does not exist");return Ca(i,t)}function Na(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=function(e){const t=8*e.length-8*ia,r=Ta(e);return t>0?r>>BigInt(t):r}(e);if(t)return r;const{n:n}=ea;return r>=n?r-n:r}let Oa,Da;class La{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Xa.hmacSha256(this.k,...t)}hmacSync(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Da(this.k,...t)}checkSync(){if("function"!==typeof Da)throw new la("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return ba(...t)}generateSync(){this.checkSync(),this.incr();let e=0;const t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const r=this.v.slice();t.push(r),e+=this.v.length}return ba(...t)}}function Ua(e){return Js<e&&e<ea.n}function Fa(e){return Js<e&&e<ea.P}function ja(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{n:i}=ea,o=Na(e,!0);if(!Ua(o))return;const s=Ma(o,i),a=ga.BASE.multiply(o),c=Ca(a.x,i);if(c===Js)return;const u=Ca(s*Ca(t+r*c,i),i);if(u===Js)return;let l=new va(c,u),d=(a.x===l.r?0:2)|Number(a.y&Zs);return n&&l.hasHighS()&&(l=l.normalizeS(),d^=1),{sig:l,recovery:d}}function qa(e){let t;if("bigint"===typeof e)t=e;else if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"===typeof e){if(e.length!==2*ia)throw new Error("Expected 32 bytes of private key");t=xa(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==ia)throw new Error("Expected 32 bytes of private key");t=Ta(e)}if(!Ua(t))throw new Error("Expected private key: 0 < key < n");return t}function za(e){return e instanceof ga?(e.assertValidity(),e):ga.fromHex(e)}function Ha(e){if(e instanceof va)return e.assertValidity(),e;try{return va.fromDER(e)}catch(t){return va.fromCompact(e)}}function Ka(e){return Ta(e.length>na?e.slice(0,na):e)}function Va(e){const t=Ka(e),r=Ca(t,ea.n);return Ga(r<Js?t:r)}function Ga(e){return Sa(e)}function Wa(e,t,r){if(null==e)throw new Error('sign: expected valid message hash, not "'.concat(e,'"'));const n=Pa(e),i=qa(t),o=[Ga(i),Va(n)];if(null!=r){!0===r&&(r=Xa.randomBytes(na));const e=Pa(r);if(e.length!==na)throw new Error("sign: Expected ".concat(na," bytes of extra data"));o.push(e)}return{seed:ba(...o),m:Ka(n),d:i}}function Qa(e,t){const{sig:r,recovery:n}=e,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}const Ja={strict:!0};ga.BASE._setWindowSize(8);const Za={node:Qs,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Ya={},Xa={bytesToHex:_a,hexToBytes:Ia,concatBytes:ba,mod:Ca,invert:Ma,isValidPrivateKey(e){try{return qa(e),!0}catch(t){return!1}},_bigintTo32Bytes:Sa,_normalizePrivateKey:qa,hashToPrivateKey:e=>{e=Pa(e);const t=ia+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return Sa(Ca(Ta(e),ea.n-Zs)+Zs)},randomBytes:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Za.web)return Za.web.getRandomValues(new Uint8Array(e));if(Za.node){const{randomBytes:t}=Za.node;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Xa.hashToPrivateKey(Xa.randomBytes(ia+8)),precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ga.BASE;const r=t===ga.BASE?t:new ga(t.x,t.y);return r._setWindowSize(e),r.multiply(Xs),r},sha256:async function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Za.web){const e=await Za.web.subtle.digest("SHA-256",ba(...t));return new Uint8Array(e)}if(Za.node){const{createHash:e}=Za.node,r=e("sha256");return t.forEach((e=>r.update(e))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(Za.web){const t=await Za.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=ba(...r),i=await Za.web.subtle.sign("HMAC",t,n);return new Uint8Array(i)}if(Za.node){const{createHmac:t}=Za.node,n=t("sha256",e);return r.forEach((e=>n.update(e))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async function(e){let t=Ya[e];if(void 0===t){const r=await Xa.sha256(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=ba(r,r),Ya[e]=t}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Xa.sha256(t,...n)},taggedHashSync:function(e){if("function"!==typeof Oa)throw new la("sha256Sync is undefined, you need to set it");let t=Ya[e];if(void 0===t){const r=Oa(Uint8Array.from(e,(e=>e.charCodeAt(0))));t=ba(r,r),Ya[e]=t}for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Oa(t,...n)},_JacobianPoint:ha};Object.defineProperties(Xa,{sha256Sync:{configurable:!1,get:()=>Oa,set(e){Oa||(Oa=e)}},hmacSha256Sync:{configurable:!1,get:()=>Da,set(e){Da||(Da=e)}}});var $a=__webpack_require__(7898);function ec(e){return new Uint8Array($a.keccak256.arrayBuffer(e))}function tc(e,t,r){try{return function(e,t,r){let n,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ja;try{n=Ha(e),t=Pa(t)}catch(p){return!1}const{r:o,s:s}=n;if(i.strict&&n.hasHighS())return!1;const a=Na(t);let c;try{c=za(r)}catch(p){return!1}const{n:u}=ea,l=Ma(s,u),d=Ca(a*l,u),h=Ca(o*l,u),f=ga.BASE.multiplyAndAddUnsafe(c,d,h);return!!f&&Ca(f.x,u)===o}(va.fromCompact(e.slice(0,64)),t,r)}catch{return!1}}const rc="Invalid record id";function nc(e,t){switch(t){case"udp":return nc(e,"udp4")||nc(e,"udp6");case"tcp":return nc(e,"tcp4")||nc(e,"tcp6")}const r=t.endsWith("6"),n=e.get(r?"ip6":"ip");if(!n)return;const i=t.slice(0,3);let o;switch(i){case"udp":o=r?e.get("udp6"):e.get("udp");break;case"tcp":o=r?e.get("tcp6"):e.get("tcp");break;default:return}return o?function(e,t,r,n){let i=Zn("/"+e+"/"+Sn(e,r));return i=i.encapsulate(Zn("/"+t+"/"+Sn(t,n))),i}(r?"ip6":"ip4",i,n,o):void 0}__webpack_require__(5049),__webpack_require__(9835);var ic=__webpack_require__(392);function oc(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}new Uint8Array(0);function sc(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}var ac=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var d=0,h=o-1;(0!==l||d<i)&&-1!==h;h--,d++)l+=a*s[h]>>>0,s[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=o-i;f!==o&&0===s[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var d=t[i],h=0,f=s-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}};const cc=ac;class uc{constructor(e,t,r){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}class lc{constructor(e,t,r){if(We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseDecode",void 0),We(this,"prefixCodePoint",void 0),this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return hc(this,e)}}class dc{constructor(e){We(this,"decoders",void 0),this.decoders=e}or(e){return hc(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}function hc(e,t){var r,n;return new dc({...null!==(r=e.decoders)&&void 0!==r?r:{[e.prefix]:e},...null!==(n=t.decoders)&&void 0!==n?n:{[t.prefix]:t}})}class fc{constructor(e,t,r,n){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),We(this,"baseDecode",void 0),We(this,"encoder",void 0),We(this,"decoder",void 0),this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new uc(e,t,r),this.decoder=new lc(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function pc(e){let{name:t,prefix:r,encode:n,decode:i}=e;return new fc(t,r,n,i)}function gc(e){let{name:t,prefix:r,alphabet:n}=e;const{encode:i,decode:o}=cc(n,t);return pc({prefix:r,name:t,encode:i,decode:e=>sc(o(e))})}function mc(e){let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return pc({prefix:r,name:t,encode:e=>function(e,t,r){const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(0!==s&&(o+=t[i&a<<r-s]),n)for(;0!==(o.length*r&7);)o+="=";return o}(e,i,n),decode:e=>function(e,t,r,n){const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let l=0;l<o;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|t,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||0!==(255&c<<8-a))throw new SyntaxError("Unexpected end of data");return s}(e,i,n,t)})}const yc=gc({prefix:"9",name:"base10",alphabet:"0123456789"}),vc=mc({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),bc=mc({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),wc=mc({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),_c=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),Ec=_c.reduce(((e,t,r)=>(e[r]=t,e)),[]),Ac=_c.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const Sc=pc({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=Ec[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Ac[r.codePointAt(0)];if(void 0===e)throw new Error("Non-base256emoji character: ".concat(r));t.push(e)}return new Uint8Array(t)}}),kc=mc({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xc=mc({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ic=mc({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Tc=mc({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Pc=mc({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rc=mc({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Cc=mc({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Bc=mc({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Mc=mc({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Nc=gc({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Oc=gc({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Dc=gc({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Lc=gc({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Uc=mc({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fc=mc({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),jc=mc({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qc=mc({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),zc=mc({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Hc=pc({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>function(e){return(new TextEncoder).encode(e)}(e)}),Kc=new TextEncoder,Vc=new TextDecoder,Gc="json",Wc=512;function Qc(e){return Kc.encode(JSON.stringify(e))}function Jc(e){return JSON.parse(Vc.decode(e))}const Zc="raw",Yc=85;function Xc(e){return sc(e)}function $c(e){return sc(e)}var eu=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=nu;)r[n++]=255&t|tu,t/=128;for(;t&ru;)r[n++]=255&t|tu,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},tu=128,ru=-128,nu=Math.pow(2,31);var iu=function e(t,r){var n,i=0,o=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&su)<<o:(n&su)*Math.pow(2,o),o+=7}while(n>=ou);return e.bytes=s-r,i},ou=128,su=127;var au=Math.pow(2,7),cu=Math.pow(2,14),uu=Math.pow(2,21),lu=Math.pow(2,28),du=Math.pow(2,35),hu=Math.pow(2,42),fu=Math.pow(2,49),pu=Math.pow(2,56),gu=Math.pow(2,63);const mu={encode:eu,decode:iu,encodingLength:function(e){return e<au?1:e<cu?2:e<uu?3:e<lu?4:e<du?5:e<hu?6:e<fu?7:e<pu?8:e<gu?9:10}};function yu(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return mu.encode(e,t,r),t}function vu(e){return mu.encodingLength(e)}function bu(e,t){const r=t.byteLength,n=vu(e),i=n+vu(r),o=new Uint8Array(i+r);return yu(e,o,0),yu(r,o,n),o.set(t,i),new wu(e,r,t,o)}class wu{constructor(e,t,r,n){We(this,"code",void 0),We(this,"size",void 0),We(this,"digest",void 0),We(this,"bytes",void 0),this.code=e,this.size=t,this.digest=r,this.bytes=n}}const _u=sc;const Eu={code:0,name:"identity",encode:_u,digest:function(e){return bu(0,_u(e))}};function Au(e){let{name:t,code:r,encode:n}=e;return new Su(t,r,n)}class Su{constructor(e,t,r){We(this,"name",void 0),We(this,"code",void 0),We(this,"encode",void 0),this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?bu(this.code,t):t.then((e=>bu(this.code,e)))}throw Error("Unknown type, must be binary type")}}function ku(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const xu=Au({name:"sha2-256",code:18,encode:ku("SHA-256")}),Iu=Au({name:"sha2-512",code:19,encode:ku("SHA-512")});let Tu,Pu;new WeakMap;Tu=Symbol.toStringTag,Pu=Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const Ru={...L,...R,...D,...T,...P,...B,...M,...N,...O,...C};function Cu(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?oc(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Bu(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Mu=Bu("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Nu=Bu("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Cu((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Ou={utf8:Mu,"utf-8":Mu,hex:Ru.base16,latin1:Nu,ascii:Nu,binary:Nu,...Ru};function Du(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=Ou[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):oc(globalThis.Buffer.from(e,"utf-8"))}class Lu extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted"),We(this,"code",void 0),We(this,"type",void 0),this.code=Lu.code,this.type=Lu.type}}We(Lu,"code","ABORT_ERR"),We(Lu,"type","aborted");class Uu extends Error{constructor(e,t,r){var n;super(e),We(this,"code",void 0),We(this,"props",void 0),this.code=t,this.name=null!==(n=null===r||void 0===r?void 0:r.name)&&void 0!==n?n:"CodeError",this.props=null!==r&&void 0!==r?r:{}}}class Fu extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected Peer"),We(this,"code",void 0),this.code=Fu.code}}We(Fu,"code","ERR_UNEXPECTED_PEER");class ju extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto exchange"),We(this,"code",void 0),this.code=ju.code}}We(ju,"code","ERR_INVALID_CRYPTO_EXCHANGE");class qu extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto transmission"),We(this,"code",void 0),this.code=qu.code}}We(qu,"code","ERR_INVALID_CRYPTO_TRANSMISSION");function zu(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var Hu=__webpack_require__(3877);__webpack_require__(3055);function Ku(e,t){if(null!=globalThis.Buffer)return oc(globalThis.Buffer.concat(e,t));null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const r=Cu(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return oc(r)}function Vu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=Ou[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Gu(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.subarray(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=Ku([new Uint8Array(t-r.length),r])}return Vu(r,"base64url")}function Wu(e){const t=function(e,t){let r=Du(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=Ku([new Uint8Array(t-r.length),r])}return r}(e);return new ic.jsbn.BigInteger(Vu(t,"base16"),16)}function Qu(e){return null!=e&&("function"===typeof e.then&&"function"===typeof e.catch&&"function"===typeof e.finally)}const Ju=BigInt(2**32-1),Zu=BigInt(32);function Yu(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&Ju),l:Number(e>>Zu&Ju)}:{h:0|Number(e>>Zu&Ju),l:0|Number(e&Ju)}}function Xu(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:s}=Yu(e[i],t);[r[i],n[i]]=[o,s]}return[r,n]}const $u=(e,t,r)=>e<<r|t>>>32-r,el=(e,t,r)=>t<<r|e>>>32-r,tl=(e,t,r)=>t<<r-32|e>>>64-r,rl=(e,t,r)=>e<<r-32|t>>>64-r;const nl={fromBig:Yu,split:Xu,toBig:(e,t)=>BigInt(e>>>0)<<Zu|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:$u,rotlSL:el,rotlBH:tl,rotlBL:rl,add:function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,o)=>t+r+n+i+o+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)},[il,ol]=(()=>nl.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),sl=new Uint32Array(80),al=new Uint32Array(80);class cl extends Ti{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:d,Gh:h,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,i,o,s,a,c,u,l,d,h,f,p,g]}set(e,t,r,n,i,o,s,a,c,u,l,d,h,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let v=0;v<16;v++,t+=4)sl[v]=e.getUint32(t),al[v]=e.getUint32(t+=4);for(let v=16;v<80;v++){const e=0|sl[v-15],t=0|al[v-15],r=nl.rotrSH(e,t,1)^nl.rotrSH(e,t,8)^nl.shrSH(e,t,7),n=nl.rotrSL(e,t,1)^nl.rotrSL(e,t,8)^nl.shrSL(e,t,7),i=0|sl[v-2],o=0|al[v-2],s=nl.rotrSH(i,o,19)^nl.rotrBH(i,o,61)^nl.shrSH(i,o,6),a=nl.rotrSL(i,o,19)^nl.rotrBL(i,o,61)^nl.shrSL(i,o,6),c=nl.add4L(n,a,al[v-7],al[v-16]),u=nl.add4H(c,r,s,sl[v-7],sl[v-16]);sl[v]=0|u,al[v]=0|c}let{Ah:r,Al:n,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:d,Fh:h,Fl:f,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let v=0;v<80;v++){const e=nl.rotrSH(l,d,14)^nl.rotrSH(l,d,18)^nl.rotrBH(l,d,41),t=nl.rotrSL(l,d,14)^nl.rotrSL(l,d,18)^nl.rotrBL(l,d,41),b=l&h^~l&p,w=d&f^~d&g,_=nl.add5L(y,t,w,ol[v],al[v]),E=nl.add5H(_,m,e,b,il[v],sl[v]),A=0|_,S=nl.rotrSH(r,n,28)^nl.rotrBH(r,n,34)^nl.rotrBH(r,n,39),k=nl.rotrSL(r,n,28)^nl.rotrBL(r,n,34)^nl.rotrBL(r,n,39),x=r&i^r&s^i&s,I=n&o^n&a^o&a;m=0|p,y=0|g,p=0|h,g=0|f,h=0|l,f=0|d,({h:l,l:d}=nl.add(0|c,0|u,0|E,0|A)),c=0|s,u=0|a,s=0|i,a=0|o,i=0|r,o=0|n;const T=nl.add3L(A,k,I);r=nl.add3H(T,E,S,x),n=0|T}({h:r,l:n}=nl.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:o}=nl.add(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=nl.add(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=nl.add(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:d}=nl.add(0|this.Eh,0|this.El,0|l,0|d)),({h:h,l:f}=nl.add(0|this.Fh,0|this.Fl,0|h,0|f)),({h:p,l:g}=nl.add(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=nl.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,o,s,a,c,u,l,d,h,f,p,g,m,y)}roundClean(){sl.fill(0),al.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ul=xi((()=>new cl)),ll=(BigInt(0),BigInt(1)),dl=BigInt(2);function hl(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}const fl=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function pl(e){if(!hl(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=fl[e[r]];return t}function gl(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x".concat(e))}const ml={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function yl(e){return e>=ml._0&&e<=ml._9?e-ml._0:e>=ml._A&&e<=ml._F?e-(ml._A-10):e>=ml._a&&e<=ml._f?e-(ml._a-10):void 0}function vl(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const t=yl(e.charCodeAt(o)),r=yl(e.charCodeAt(o+1));if(void 0===t||void 0===r){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}n[i]=16*t+r}return n}function bl(e){return gl(pl(e))}function wl(e){if(!hl(e))throw new Error("Uint8Array expected");return gl(pl(Uint8Array.from(e).reverse()))}function _l(e,t){return vl(e.toString(16).padStart(2*t,"0"))}function El(e,t){return _l(e,t).reverse()}function Al(e,t,r){let n;if("string"===typeof t)try{n=vl(t)}catch(o){throw new Error("".concat(e,' must be valid hex string, got "').concat(t,'". Cause: ').concat(o))}else{if(!hl(t))throw new Error("".concat(e," must be hex string or Uint8Array"));n=Uint8Array.from(t)}const i=n.length;if("number"===typeof r&&i!==r)throw new Error("".concat(e," expected ").concat(r," bytes, got ").concat(i));return n}function Sl(){let e=0;for(let n=0;n<arguments.length;n++){const t=n<0||arguments.length<=n?void 0:arguments[n];if(!hl(t))throw new Error("Uint8Array expected");e+=t.length}let t=new Uint8Array(e),r=0;for(let n=0;n<arguments.length;n++){const e=n<0||arguments.length<=n?void 0:arguments[n];t.set(e,r),r+=e.length}return t}const kl=e=>(dl<<BigInt(e-1))-ll,xl=e=>new Uint8Array(e),Il=e=>Uint8Array.from(e);function Tl(e,t,r){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof r)throw new Error("hmacFn must be a function");let n=xl(e),i=xl(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return r(i,n,...t)},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl();i=a(Il([0]),e),n=a(),0!==e.length&&(i=a(Il([1]),e),n=a())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return Sl(...r)};return(e,t)=>{let r;for(s(),c(e);!(r=t(u()));)c();return s(),r}}const Pl={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||hl(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function Rl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=(t,r,n)=>{const i=Pl[r];if("function"!==typeof i)throw new Error('Invalid validator "'.concat(r,'", expected function'));const o=e[t];if((!n||void 0!==o)&&!i(o,e))throw new Error("Invalid param ".concat(String(t),"=").concat(o," (").concat(typeof o,"), expected ").concat(r))};for(const[i,o]of Object.entries(t))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return e}const Cl=BigInt(0),Bl=BigInt(1),Ml=BigInt(2),Nl=BigInt(3),Ol=BigInt(4),Dl=BigInt(5),Ll=BigInt(8);BigInt(9),BigInt(16);function Ul(e,t){const r=e%t;return r>=Cl?r:t+r}function Fl(e,t,r){if(r<=Cl||t<Cl)throw new Error("Expected power/modulo > 0");if(r===Bl)return Cl;let n=Bl;for(;t>Cl;)t&Bl&&(n=n*e%r),e=e*e%r,t>>=Bl;return n}function jl(e,t,r){let n=e;for(;t-- >Cl;)n*=n,n%=r;return n}function ql(e,t){if(e===Cl||t<=Cl)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));let r=Ul(e,t),n=t,i=Cl,o=Bl,s=Bl,a=Cl;for(;r!==Cl;){const e=n/r,t=n%r,c=i-s*e,u=o-a*e;n=r,r=t,i=s,o=a,s=c,a=u}if(n!==Bl)throw new Error("invert: does not exist");return Ul(i,t)}function zl(e){if(e%Ol===Nl){const t=(e+Bl)/Ol;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%Ll===Dl){const t=(e-Dl)/Ll;return function(e,r){const n=e.mul(r,Ml),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,Ml),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-Bl)/Ml;let r,n,i;for(r=e-Bl,n=0;r%Ml===Cl;r/=Ml,n++);for(i=Ml;i<e&&Fl(i,t,e)!==e-Bl;i++);if(1===n){const t=(e+Bl)/Ol;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+Bl)/Ml;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),u=e.pow(s,o),l=e.pow(s,r);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(l);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const r=e.pow(c,Bl<<BigInt(a-t-1));c=e.sqr(r),u=e.mul(u,r),l=e.mul(l,c),a=t}return u}}(e)}const Hl=(e,t)=>(Ul(e,t)&Bl)===Bl,Kl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Vl(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Gl(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=Cl)throw new Error("Expected Field ORDER > 0, got ".concat(e));const{nBitLength:i,nByteLength:o}=Vl(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=zl(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:kl(i),ZERO:Cl,ONE:Bl,create:t=>Ul(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got ".concat(typeof t));return Cl<=t&&t<e},is0:e=>e===Cl,isOdd:e=>(e&Bl)===Bl,neg:t=>Ul(-t,e),eql:(e,t)=>e===t,sqr:t=>Ul(t*t,e),add:(t,r)=>Ul(t+r,e),sub:(t,r)=>Ul(t-r,e),mul:(t,r)=>Ul(t*r,e),pow:(e,t)=>function(e,t,r){if(r<Cl)throw new Error("Expected power > 0");if(r===Cl)return e.ONE;if(r===Bl)return t;let n=e.ONE,i=t;for(;r>Cl;)r&Bl&&(n=e.mul(n,i)),i=e.sqr(i),r>>=Bl;return n}(a,e,t),div:(t,r)=>Ul(t*ql(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ql(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?El(e,o):_l(e,o),fromBytes:e=>{if(e.length!==o)throw new Error("Fp.fromBytes: expected ".concat(o,", got ").concat(e.length));return r?wl(e):bl(e)}});return Object.freeze(a)}function Wl(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ql(e){const t=Wl(e);return t+Math.ceil(t/2)}const Jl=BigInt(0),Zl=BigInt(1);function Yl(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>Jl;)r&Zl&&(n=n.add(i)),i=i.double(),r>>=Zl;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),o=[];let s=e,a=s;for(let n=0;n<r;n++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){const{windows:s,windowSize:a}=n(t);let c=e.ZERO,u=e.BASE;const l=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let n=Number(o&l);o>>=h,n>a&&(n-=d,o+=Zl);const s=t,f=t+Math.abs(n)-1,p=e%2!==0,g=n<0;0===n?u=u.add(r(p,i[s])):c=c.add(r(g,i[f]))}return{p:c,f:u}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,n(o))),this.wNAF(i,o,r)}}}function Xl(e){return function(e){const t=Kl.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});Rl(e,t)}(e.Fp),Rl(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Vl(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const $l=BigInt(0),ed=BigInt(1),td=BigInt(2),rd=BigInt(8),nd={zip215:!0};function id(e){const t=function(e){const t=Xl(e);return Rl(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n:n,prehash:i,hash:o,randomBytes:s,nByteLength:a,h:c}=t,u=td<<BigInt(8*a)-ed,l=r.create,d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(n){return{isValid:!1,value:$l}}}),h=t.adjustScalarBytes||(e=>e),f=t.domain||((e,t,r)=>{if(t.length||r)throw new Error("Contexts/pre-hash are not supported");return e}),p=e=>"bigint"===typeof e&&$l<e,g=(e,t)=>p(e)&&p(t)&&e<t,m=e=>e===$l||g(e,u);function y(e,t){if(g(e,t))return e;throw new Error("Expected valid scalar < ".concat(t,", got ").concat(typeof e," ").concat(e))}function v(e){return e===$l?e:y(e,n)}const b=new Map;function w(e){if(!(e instanceof _))throw new Error("ExtendedPoint expected")}class _{constructor(e,t,r,n){if(this.ex=e,this.ey=t,this.ez=r,this.et=n,!m(e))throw new Error("x required");if(!m(t))throw new Error("y required");if(!m(r))throw new Error("z required");if(!m(n))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof _)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};if(!m(t)||!m(r))throw new Error("invalid affine point");return new _(t,r,ed,l(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(_.fromAffine)}_setWindowSize(e){this._WINDOW_SIZE=e,b.delete(this)}assertValidity(){const{a:e,d:r}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:n,ey:i,ez:o,et:s}=this,a=l(n*n),c=l(i*i),u=l(o*o),d=l(u*u),h=l(a*e);if(l(u*l(h+c))!==l(d+l(r*l(a*c))))throw new Error("bad point: equation left != right (1)");if(l(n*i)!==l(o*s))throw new Error("bad point: equation left != right (2)")}equals(e){w(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:o,ez:s}=e,a=l(t*s),c=l(i*n),u=l(r*s),d=l(o*n);return a===c&&u===d}is0(){return this.equals(_.ZERO)}negate(){return new _(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,o=l(r*r),s=l(n*n),a=l(td*l(i*i)),c=l(e*o),u=r+n,d=l(l(u*u)-o-s),h=c+s,f=h-a,p=c-s,g=l(d*f),m=l(h*p),y=l(d*p),v=l(f*h);return new _(g,m,v,y)}add(e){w(e);const{a:r,d:n}=t,{ex:i,ey:o,ez:s,et:a}=this,{ex:c,ey:u,ez:d,et:h}=e;if(r===BigInt(-1)){const e=l((o-i)*(u+c)),t=l((o+i)*(u-c)),r=l(t-e);if(r===$l)return this.double();const n=l(s*td*h),f=l(a*td*d),p=f+n,g=t+e,m=f-n,y=l(p*r),v=l(g*m),b=l(p*m),w=l(r*g);return new _(y,v,w,b)}const f=l(i*c),p=l(o*u),g=l(a*n*h),m=l(s*d),y=l((i+o)*(c+u)-f-p),v=m-g,b=m+g,E=l(p-r*f),A=l(y*v),S=l(b*E),k=l(y*E),x=l(v*b);return new _(A,S,x,k)}subtract(e){return this.add(e.negate())}wNAF(e){return S.wNAFCached(this,b,e,_.normalizeZ)}multiply(e){const{p:t,f:r}=this.wNAF(y(e,n));return _.normalizeZ([t,r])[0]}multiplyUnsafe(e){let t=v(e);return t===$l?A:this.equals(A)||t===ed?this:this.equals(E)?this.wNAF(t).p:S.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return S.unsafeLadder(this,n).is0()}toAffine(e){const{ex:t,ey:n,ez:i}=this,o=this.is0();null==e&&(e=o?rd:r.inv(i));const s=l(t*e),a=l(n*e),c=l(i*e);if(o)return{x:$l,y:ed};if(c!==ed)throw new Error("invZ was invalid");return{x:s,y:a}}clearCofactor(){const{h:e}=t;return e===ed?this:this.multiplyUnsafe(e)}static fromHex(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{d:i,a:o}=t,s=r.BYTES,a=(e=Al("pointHex",e,s)).slice(),c=e[s-1];a[s-1]=-129&c;const h=wl(a);h===$l||y(h,n?u:r.ORDER);const f=l(h*h),p=l(f-ed),g=l(i*f-o);let{isValid:m,value:v}=d(p,g);if(!m)throw new Error("Point.fromHex: invalid y coordinate");const b=(v&ed)===ed,w=0!==(128&c);if(!n&&v===$l&&w)throw new Error("Point.fromHex: x=0 and x_0=1");return w!==b&&(v=l(-v)),_.fromAffine({x:v,y:h})}static fromPrivateKey(e){return I(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=El(t,r.BYTES);return n[n.length-1]|=e&ed?128:0,n}toHex(){return pl(this.toRawBytes())}}_.BASE=new _(t.Gx,t.Gy,ed,l(t.Gx*t.Gy)),_.ZERO=new _($l,ed,ed,$l);const{BASE:E,ZERO:A}=_,S=Yl(_,8*a);function k(e){return Ul(e,n)}function x(e){return k(wl(e))}function I(e){const t=a;e=Al("private key",e,t);const r=Al("hashed private key",o(e),2*t),n=h(r.slice(0,t)),i=r.slice(t,2*t),s=x(n),c=E.multiply(s),u=c.toRawBytes();return{head:n,prefix:i,scalar:s,point:c,pointBytes:u}}function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const s=Sl(...r);return x(o(f(s,Al("context",e),!!i)))}const P=nd;E._setWindowSize(8);const R={getExtendedPublicKey:I,randomPrivateKey:()=>s(r.BYTES),precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};return{CURVE:t,getPublicKey:function(e){return I(e).pointBytes},sign:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Al("message",e),i&&(e=i(e));const{prefix:o,scalar:s,pointBytes:c}=I(t),u=T(n.context,o,e),l=E.multiply(u).toRawBytes(),d=k(u+T(n.context,l,c,e)*s);return v(d),Al("result",Sl(l,El(d,r.BYTES)),2*a)},verify:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P;const{context:s,zip215:a}=o,c=r.BYTES;e=Al("signature",e,2*c),t=Al("message",t),i&&(t=i(t));const u=wl(e.slice(c,2*c));let l,d,h;try{l=_.fromHex(n,a),d=_.fromHex(e.slice(0,c),a),h=E.multiplyUnsafe(u)}catch(p){return!1}if(!a&&l.isSmallOrder())return!1;const f=T(s,d.toRawBytes(),l.toRawBytes(),t);return d.add(l.multiplyUnsafe(f)).subtract(h).clearCofactor().equals(_.ZERO)},ExtendedPoint:_,utils:R}}const od=BigInt(0),sd=BigInt(1);function ad(e){const t=(Rl(r=e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...r}));var r;const{P:n}=t,i=e=>Ul(e,n),o=t.montgomeryBits,s=Math.ceil(o/8),a=t.nByteLength,c=t.adjustScalarBytes||(e=>e),u=t.powPminus2||(e=>Fl(e,n-BigInt(2),n));function l(e,t,r){const n=i(e*(t-r));return[t=i(t-n),r=i(r+n)]}function d(e){if("bigint"===typeof e&&od<=e&&e<n)return e;throw new Error("Expected valid scalar 0 < scalar < CURVE.P")}const h=(t.a-BigInt(2))/BigInt(4);function f(e){return El(i(e),s)}function p(e,t){const r=function(e){const t=Al("u coordinate",e,s);return 32===a&&(t[31]&=127),wl(t)}(t),n=function(e){const t=Al("scalar",e),r=t.length;if(r!==s&&r!==a)throw new Error("Expected ".concat(s," or ").concat(a," bytes, got ").concat(r));return wl(c(t))}(e),p=function(e,t){const r=d(e),n=d(t),s=r;let a,c=sd,f=od,p=r,g=sd,m=od;for(let u=BigInt(o-1);u>=od;u--){const e=n>>u&sd;m^=e,a=l(m,c,p),c=a[0],p=a[1],a=l(m,f,g),f=a[0],g=a[1],m=e;const t=c+f,r=i(t*t),o=c-f,d=i(o*o),y=r-d,v=p+g,b=i((p-g)*t),w=i(v*o),_=b+w,E=b-w;p=i(_*_),g=i(s*i(E*E)),c=i(r*d),f=i(y*(r+i(h*y)))}a=l(m,c,p),c=a[0],p=a[1],a=l(m,f,g),f=a[0],g=a[1];const y=u(f);return i(c*y)}(r,n);if(p===od)throw new Error("Invalid private or public key received");return f(p)}const g=f(t.Gu);function m(e){return p(e,g)}return{scalarMult:p,scalarMultBase:m,getSharedSecret:(e,t)=>p(e,t),getPublicKey:e=>m(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:g}}const cd=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ud=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),ld=(BigInt(0),BigInt(1)),dd=BigInt(2),hd=BigInt(5),fd=BigInt(10),pd=BigInt(20),gd=BigInt(40),md=BigInt(80);function yd(e){const t=cd,r=e*e%t*e%t,n=jl(r,dd,t)*r%t,i=jl(n,ld,t)*e%t,o=jl(i,hd,t)*i%t,s=jl(o,fd,t)*o%t,a=jl(s,pd,t)*s%t,c=jl(a,gd,t)*a%t,u=jl(c,md,t)*c%t,l=jl(u,md,t)*c%t,d=jl(l,fd,t)*o%t;return{pow_p_5_8:jl(d,dd,t)*e%t,b2:r}}function vd(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function bd(e,t){const r=cd,n=Ul(t*t*t,r),i=Ul(n*n*t,r);let o=Ul(e*n*yd(e*i).pow_p_5_8,r);const s=Ul(t*o*o,r),a=o,c=Ul(o*ud,r),u=s===e,l=s===Ul(-e,r),d=s===Ul(-e*ud,r);return u&&(o=a),(l||d)&&(o=c),Hl(o,r)&&(o=Ul(-o,r)),{isValid:u||l,value:o}}const wd=Gl(cd,void 0,!0),_d={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:wd,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ul,randomBytes:Ii,adjustScalarBytes:vd,uvRatio:bd},Ed=id(_d);function Ad(e,t,r){if(t.length>255)throw new Error("Context is too big");return Ei(wi("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}const Sd=(()=>ad({P:cd,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=cd,{pow_p_5_8:r,b2:n}=yd(e);return Ul(jl(r,BigInt(3),t)*n,t)},adjustScalarBytes:vd,randomBytes:Ii}))();const kd=(wd.ORDER+BigInt(3))/BigInt(8);wd.pow(dd,kd),wd.sqrt(wd.neg(wd.ONE)),wd.ORDER,BigInt(5),BigInt(8),BigInt(486662);!function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);e.isOdd(r)&&e.neg(r)}(wd,wd.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const xd=32,Id=64,Td=32;function Pd(e,t){const r=new Uint8Array(Id);for(let n=0;n<Td;n++)r[n]=e[n],r[Td+n]=t[n];return r}const Rd={get(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis).crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}},Cd={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};async function Bd(e,t){const r=function(e){var t,r,n,i,o,s;const a=null!==(t=null===e||void 0===e?void 0:e.algorithm)&&void 0!==t?t:"AES-GCM";let c=null!==(r=null===e||void 0===e?void 0:e.keyLength)&&void 0!==r?r:16;const u=null!==(n=null===e||void 0===e?void 0:e.nonceLength)&&void 0!==n?n:12,l=null!==(i=null===e||void 0===e?void 0:e.digest)&&void 0!==i?i:"SHA-256",d=null!==(o=null===e||void 0===e?void 0:e.saltLength)&&void 0!==o?o:16,h=null!==(s=null===e||void 0===e?void 0:e.iterations)&&void 0!==s?s:32767,f=Rd.get();return c*=8,{encrypt:async function(e,t){const r=f.getRandomValues(new Uint8Array(d)),n=f.getRandomValues(new Uint8Array(u)),i={name:a,iv:n};let o;if("string"===typeof t&&(t=Du(t)),0===t.length){o=await f.subtle.importKey("jwk",Cd,{name:"AES-GCM"},!0,["encrypt"]);try{const e={name:"PBKDF2",salt:r,iterations:h,hash:{name:l}},n=await f.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey"]);o=await f.subtle.deriveKey(e,n,{name:a,length:c},!0,["encrypt"])}catch{o=await f.subtle.importKey("jwk",Cd,{name:"AES-GCM"},!0,["encrypt"])}}else{const e={name:"PBKDF2",salt:r,iterations:h,hash:{name:l}},n=await f.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey"]);o=await f.subtle.deriveKey(e,n,{name:a,length:c},!0,["encrypt"])}const s=await f.subtle.encrypt(i,o,e);return Ku([r,i.iv,new Uint8Array(s)])},decrypt:async function(e,t){const r=e.subarray(0,d),n=e.subarray(d,d+u),i=e.subarray(d+u),o={name:a,iv:n};let s;if("string"===typeof t&&(t=Du(t)),0===t.length)try{const e={name:"PBKDF2",salt:r,iterations:h,hash:{name:l}},n=await f.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey"]);s=await f.subtle.deriveKey(e,n,{name:a,length:c},!0,["decrypt"])}catch{s=await f.subtle.importKey("jwk",Cd,{name:"AES-GCM"},!0,["decrypt"])}else{const e={name:"PBKDF2",salt:r,iterations:h,hash:{name:l}},n=await f.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey"]);s=await f.subtle.deriveKey(e,n,{name:a,length:c},!0,["decrypt"])}const p=await f.subtle.decrypt(o,s,i);return new Uint8Array(p)}}}(),n=await r.encrypt(e,t);return Uc.encode(n)}const Md=new Float32Array([-0]),Nd=new Uint8Array(Md.buffer);function Od(e,t,r){Md[0]=e,t[r]=Nd[0],t[r+1]=Nd[1],t[r+2]=Nd[2],t[r+3]=Nd[3]}const Dd=new Float64Array([-0]),Ld=new Uint8Array(Dd.buffer);function Ud(e,t,r){Dd[0]=e,t[r]=Ld[0],t[r+1]=Ld[1],t[r+2]=Ld[2],t[r+3]=Ld[3],t[r+4]=Ld[4],t[r+5]=Ld[5],t[r+6]=Ld[6],t[r+7]=Ld[7]}const Fd=BigInt(Number.MAX_SAFE_INTEGER),jd=BigInt(Number.MIN_SAFE_INTEGER);class qd{constructor(e,t){We(this,"lo",void 0),We(this,"hi",void 0),this.lo=0|e,this.hi=0|t}toNumber(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.hi>>>31>0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi}toBigInt(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!==0){const e=1+~this.lo>>>0;let t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(BigInt(e)+(BigInt(t)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.toBigInt(e).toString()}zzEncode(){const e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){const e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){const e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}static fromBigInt(e){if(0n===e)return zd;if(e<Fd&&e>jd)return this.fromNumber(Number(e));const t=e<0n;t&&(e=-e);let r=e>>32n,n=e-(r<<32n);return t&&(r=0n|~r,n=0n|~n,++n>Hd&&(n=0n,++r>Hd&&(r=0n))),new qd(Number(n),Number(r))}static fromNumber(e){if(0===e)return zd;const t=e<0;t&&(e=-e);let r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new qd(r,n)}static from(e){return"number"===typeof e?qd.fromNumber(e):"bigint"===typeof e?qd.fromBigInt(e):"string"===typeof e?qd.fromBigInt(BigInt(e)):null!=e.low||null!=e.high?new qd(e.low>>>0,e.high>>>0):zd}}const zd=new qd(0,0);zd.toBigInt=function(){return 0n},zd.zzEncode=zd.zzDecode=function(){return this},zd.length=function(){return 1};const Hd=4294967296n;function Kd(e,t,r){const n=r;let i,o;for(let s=0;s<e.length;++s)i=e.charCodeAt(s),i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296===(64512&i)&&56320===(64512&(o=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&o),++s,t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128);return r-n}function Vd(e,t){return RangeError("index out of range: ".concat(e.pos," + ").concat(null!==t&&void 0!==t?t:1," > ").concat(e.len))}function Gd(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}class Wd{constructor(e){We(this,"buf",void 0),We(this,"pos",void 0),We(this,"len",void 0),We(this,"_slice",Uint8Array.prototype.subarray),this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Vd(this,10);return e}int32(){return 0|this.uint32()}sint32(){const e=this.uint32();return e>>>1^-(1&e)|0}bool(){return 0!==this.uint32()}fixed32(){if(this.pos+4>this.len)throw Vd(this,4);return Gd(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw Vd(this,4);return 0|Gd(this.buf,this.pos+=4)}float(){if(this.pos+4>this.len)throw Vd(this,4);const e=(t=this.buf,r=this.pos,Nd[0]=t[r],Nd[1]=t[r+1],Nd[2]=t[r+2],Nd[3]=t[r+3],Md[0]);var t,r;return this.pos+=4,e}double(){if(this.pos+8>this.len)throw Vd(this,4);const e=(t=this.buf,r=this.pos,Ld[0]=t[r],Ld[1]=t[r+1],Ld[2]=t[r+2],Ld[3]=t[r+3],Ld[4]=t[r+4],Ld[5]=t[r+5],Ld[6]=t[r+6],Ld[7]=t[r+7],Dd[0]);var t,r;return this.pos+=8,e}bytes(){const e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw Vd(this,e);return this.pos+=e,t===r?new Uint8Array(0):this.buf.subarray(t,r)}string(){const e=this.bytes();return function(e,t,r){if(r-t<1)return"";let n;const i=[];let o,s=0;for(;t<r;){var a;o=e[t++],o<128?i[s++]=o:o>191&&o<224?i[s++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(o>>10),i[s++]=56320+(1023&o)):i[s++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((null!==(a=n)&&void 0!==a?a:n=[]).push(String.fromCharCode.apply(String,i)),s=0)}return null!=n?(s>0&&n.push(String.fromCharCode.apply(String,i.slice(0,s))),n.join("")):String.fromCharCode.apply(String,i.slice(0,s))}(e,0,e.length)}skip(e){if("number"===typeof e){if(this.pos+e>this.len)throw Vd(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw Vd(this)}while(0!==(128&this.buf[this.pos++]));return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type ".concat(e," at offset ").concat(this.pos))}return this}readLongVarint(){const e=new qd(0,0);let t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw Vd(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Vd(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw Vd(this,8);const e=Gd(this.buf,this.pos+=4),t=Gd(this.buf,this.pos+=4);return new qd(e,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){return this.readLongVarint().toNumber(!0)}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function Qd(e,t){const r=function(e){return new Wd(e instanceof Uint8Array?e:e.subarray())}(e);return t.decode(r)}function Jd(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Zd(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Jd(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}new Uint8Array(0);function Yd(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}var Xd=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var d=0,h=o-1;(0!==l||d<i)&&-1!==h;h--,d++)l+=a*s[h]>>>0,s[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=o-i;f!==o&&0===s[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var d=t[i],h=0,f=s-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}};const $d=Xd;class eh{constructor(e,t,r){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}class th{constructor(e,t,r){if(We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseDecode",void 0),We(this,"prefixCodePoint",void 0),this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return nh(this,e)}}class rh{constructor(e){We(this,"decoders",void 0),this.decoders=e}or(e){return nh(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}function nh(e,t){var r,n;return new rh({...null!==(r=e.decoders)&&void 0!==r?r:{[e.prefix]:e},...null!==(n=t.decoders)&&void 0!==n?n:{[t.prefix]:t}})}class ih{constructor(e,t,r,n){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),We(this,"baseDecode",void 0),We(this,"encoder",void 0),We(this,"decoder",void 0),this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new eh(e,t,r),this.decoder=new th(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function oh(e){let{name:t,prefix:r,encode:n,decode:i}=e;return new ih(t,r,n,i)}function sh(e){let{name:t,prefix:r,alphabet:n}=e;const{encode:i,decode:o}=$d(n,t);return oh({prefix:r,name:t,encode:i,decode:e=>Yd(o(e))})}function ah(e){let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return oh({prefix:r,name:t,encode:e=>function(e,t,r){const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(0!==s&&(o+=t[i&a<<r-s]),n)for(;0!==(o.length*r&7);)o+="=";return o}(e,i,n),decode:e=>function(e,t,r,n){const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let l=0;l<o;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|t,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||0!==(255&c<<8-a))throw new SyntaxError("Unexpected end of data");return s}(e,i,n,t)})}const ch=sh({prefix:"9",name:"base10",alphabet:"0123456789"}),uh=ah({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),lh=ah({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),dh=ah({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),hh=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),fh=hh.reduce(((e,t,r)=>(e[r]=t,e)),[]),ph=hh.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const gh=oh({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=fh[t]),"")},decode:function(e){const t=[];for(const r of e){const e=ph[r.codePointAt(0)];if(void 0===e)throw new Error("Non-base256emoji character: ".concat(r));t.push(e)}return new Uint8Array(t)}}),mh=ah({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yh=ah({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),vh=ah({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),bh=ah({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wh=ah({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_h=ah({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Eh=ah({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ah=ah({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Sh=ah({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),kh=sh({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),xh=sh({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ih=sh({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Th=sh({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Ph=ah({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Rh=ah({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ch=ah({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Bh=ah({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Mh=ah({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Nh=oh({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>function(e){return(new TextEncoder).encode(e)}(e)}),Oh=new TextEncoder,Dh=new TextDecoder,Lh="json",Uh=512;function Fh(e){return Oh.encode(JSON.stringify(e))}function jh(e){return JSON.parse(Dh.decode(e))}const qh="raw",zh=85;function Hh(e){return Yd(e)}function Kh(e){return Yd(e)}var Vh=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=Qh;)r[n++]=255&t|Gh,t/=128;for(;t&Wh;)r[n++]=255&t|Gh,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},Gh=128,Wh=-128,Qh=Math.pow(2,31);var Jh=function e(t,r){var n,i=0,o=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&Yh)<<o:(n&Yh)*Math.pow(2,o),o+=7}while(n>=Zh);return e.bytes=s-r,i},Zh=128,Yh=127;var Xh=Math.pow(2,7),$h=Math.pow(2,14),ef=Math.pow(2,21),tf=Math.pow(2,28),rf=Math.pow(2,35),nf=Math.pow(2,42),of=Math.pow(2,49),sf=Math.pow(2,56),af=Math.pow(2,63);const cf={encode:Vh,decode:Jh,encodingLength:function(e){return e<Xh?1:e<$h?2:e<ef?3:e<tf?4:e<rf?5:e<nf?6:e<of?7:e<sf?8:e<af?9:10}};function uf(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return cf.encode(e,t,r),t}function lf(e){return cf.encodingLength(e)}function df(e,t){const r=t.byteLength,n=lf(e),i=n+lf(r),o=new Uint8Array(i+r);return uf(e,o,0),uf(r,o,n),o.set(t,i),new hf(e,r,t,o)}class hf{constructor(e,t,r,n){We(this,"code",void 0),We(this,"size",void 0),We(this,"digest",void 0),We(this,"bytes",void 0),this.code=e,this.size=t,this.digest=r,this.bytes=n}}const ff=Yd;const pf={code:0,name:"identity",encode:ff,digest:function(e){return df(0,ff(e))}};function gf(e){let{name:t,code:r,encode:n}=e;return new mf(t,r,n)}class mf{constructor(e,t,r){We(this,"name",void 0),We(this,"code",void 0),We(this,"encode",void 0),this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?df(this.code,t):t.then((e=>df(this.code,e)))}throw Error("Unknown type, must be binary type")}}function yf(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const vf=gf({name:"sha2-256",code:18,encode:yf("SHA-256")}),bf=gf({name:"sha2-512",code:19,encode:yf("SHA-512")});let wf,_f;new WeakMap;wf=Symbol.toStringTag,_f=Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const Ef={...X,...V,...Y,...H,...K,...W,...Q,...J,...Z,...G};function Af(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Sf=Af("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),kf=Af("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Zd((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),xf={utf8:Sf,"utf-8":Sf,hex:Ef.base16,latin1:kf,ascii:kf,binary:kf,...Ef};class If{constructor(e,t,r){We(this,"fn",void 0),We(this,"len",void 0),We(this,"next",void 0),We(this,"val",void 0),this.fn=e,this.len=t,this.next=void 0,this.val=r}}function Tf(){}class Pf{constructor(e){We(this,"head",void 0),We(this,"tail",void 0),We(this,"len",void 0),We(this,"next",void 0),this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}const Rf=function(e){const t=null!==e&&void 0!==e?e:8192,r=t>>>1;let n,i=t;return function(e){if(e<1||e>r)return Zd(e);i+e>t&&(n=Zd(t),i=0);const o=n.subarray(i,i+=e);return 0!==(7&i)&&(i=1+(7|i)),o}}();class Cf{constructor(){We(this,"len",void 0),We(this,"head",void 0),We(this,"tail",void 0),We(this,"states",void 0),this.len=0,this.head=new If(Tf,0,0),this.tail=this.head,this.states=null}_push(e,t,r){return this.tail=this.tail.next=new If(e,t,r),this.len+=t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new Nf((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(Of,10,qd.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){const t=qd.fromBigInt(e);return this._push(Of,t.length(),t)}uint64Number(e){const t=qd.fromNumber(e);return this._push(Of,t.length(),t)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){const t=qd.fromBigInt(e).zzEncode();return this._push(Of,t.length(),t)}sint64Number(e){const t=qd.fromNumber(e).zzEncode();return this._push(Of,t.length(),t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(Bf,1,e?1:0)}fixed32(e){return this._push(Df,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){const t=qd.fromBigInt(e);return this._push(Df,4,t.lo)._push(Df,4,t.hi)}fixed64Number(e){const t=qd.fromNumber(e);return this._push(Df,4,t.lo)._push(Df,4,t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(Od,4,e)}double(e){return this._push(Ud,8,e)}bytes(e){const t=e.length>>>0;return 0===t?this._push(Bf,1,0):this.uint32(t)._push(Lf,t,e)}string(e){const t=function(e){let t=0,r=0;for(let n=0;n<e.length;++n)r=e.charCodeAt(n),r<128?t+=1:r<2048?t+=2:55296===(64512&r)&&56320===(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t}(e);return 0!==t?this.uint32(t)._push(Kd,t,e):this._push(Bf,1,0)}fork(){return this.states=new Pf(this),this.head=this.tail=new If(Tf,0,0),this.len=0,this}reset(){return null!=this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new If(Tf,0,0),this.len=0),this}ldelim(){const e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),0!==r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this}finish(){let e=this.head.next;const t=(r=this.len,null!=globalThis.Buffer?Zd(r):Rf(r));var r;let n=0;for(;null!=e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t}}function Bf(e,t,r){t[r]=255&e}function Mf(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}class Nf extends If{constructor(e,t){super(Mf,e,t),We(this,"next",void 0),this.next=void 0}}function Of(e,t,r){for(;0!==e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function Df(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function Lf(e,t,r){t.set(e,r)}function Uf(e,t,r){t.set(e,r)}function Ff(e,t,r){e.length<40?Kd(e,t,r):null!=t.utf8Write?t.utf8Write(e,r):t.set(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=xf[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):Jd(globalThis.Buffer.from(e,"utf-8"))}(e),r)}function jf(e,t){const r=new Cf;return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var qf,zf,Hf,Kf,Vf;function Gf(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function Wf(e){function t(t){if(null==e[t.toString()])throw new Error("Invalid enum value");return e[t]}return Gf("enum",qf.VARINT,(function(e,r){const n=t(e);r.int32(n)}),(function(e){return t(e.int32())}))}function Qf(e,t){return Gf("message",qf.LENGTH_DELIMITED,e,t)}null!=globalThis.Buffer&&(Cf.prototype.bytes=function(e){const t=e.length>>>0;return this.uint32(t),t>0&&this._push(Uf,t,e),this},Cf.prototype.string=function(e){const t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(Ff,t,e),this}),function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(qf||(qf={}));!function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(zf||(zf={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(Hf||(Hf={})),function(e){e.codec=()=>Wf(Hf)}(zf||(zf={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),zf.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=zf.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Kf||(Kf={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),zf.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=zf.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Vf||(Vf={}));class Jf{constructor(e){We(this,"_key",void 0),this._key=tp(e,xd)}verify(e,t){return function(e,t,r){return Ed.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}(this._key,t,e)}marshal(){return this._key}get bytes(){return Kf.encode({Type:zf.Ed25519,Data:this.marshal()}).subarray()}equals(e){return zu(this.bytes,e.bytes)}hash(){const e=xu.digest(this.bytes);return Qu(e)?e.then((e=>{let{bytes:t}=e;return t})):e.bytes}}class Zf{constructor(e,t){We(this,"_key",void 0),We(this,"_publicKey",void 0),this._key=tp(e,Id),this._publicKey=tp(t,xd)}sign(e){return function(e,t){const r=e.subarray(0,Td);return Ed.sign(t instanceof Uint8Array?t:t.subarray(),r)}(this._key,e)}get public(){return new Jf(this._publicKey)}marshal(){return this._key}get bytes(){return Vf.encode({Type:zf.Ed25519,Data:this.marshal()}).subarray()}equals(e){return zu(this.bytes,e.bytes)}async hash(){const e=xu.digest(this.bytes);let t;return Qu(e)?({bytes:t}=await e):t=e.bytes,t}async id(){const e=Eu.digest(this.public.bytes);return Dc.encode(e.bytes).substring(1)}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===t)return Bd(this.bytes,e);throw new Uu("export format '".concat(t,"' is not supported"),"ERR_INVALID_EXPORT_FORMAT")}}function Yf(e){if(e.length>Id){const t=(e=tp(e,Id+xd)).subarray(0,Id),r=e.subarray(Id,e.length);return new Zf(t,r)}const t=(e=tp(e,Id)).subarray(0,Id),r=e.subarray(xd);return new Zf(t,r)}function Xf(e){return e=tp(e,xd),new Jf(e)}async function $f(){const{privateKey:e,publicKey:t}=function(){const e=Ed.utils.randomPrivateKey(),t=Ed.getPublicKey(e);return{privateKey:Pd(e,t),publicKey:t}}();return new Zf(e,t)}async function ep(e){const{privateKey:t,publicKey:r}=function(e){if(e.length!==Td)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const t=e,r=Ed.getPublicKey(t);return{privateKey:Pd(t,r),publicKey:r}}(e);return new Zf(t,r)}function tp(e,t){var r;if((e=Uint8Array.from(null!==(r=e)&&void 0!==r?r:[])).length!==t)throw new Uu("Key must be a Uint8Array of length ".concat(t,", got ").concat(e.length),"ERR_INVALID_KEY_TYPE");return e}const rp={"P-256":256,"P-384":384,"P-521":521};Object.keys(rp).join(" / ");__webpack_require__(4770);__webpack_require__(5493);function np(e,t){return t.map((t=>Wu(e[t])))}async function ip(e){const t=[await Rd.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await sp(e)],r=await op({privateKey:t[0],publicKey:t[1]});return{privateKey:r[0],publicKey:r[1]}}async function op(e){if(null==e.privateKey||null==e.publicKey)throw new Uu("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([Rd.get().subtle.exportKey("jwk",e.privateKey),Rd.get().subtle.exportKey("jwk",e.publicKey)])}async function sp(e){return Rd.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function ap(e,t,r,n){const i=t?function(e){return ic.pki.setRsaPublicKey(...np(e,["n","e"]))}(e):function(e){return ic.pki.setRsaPrivateKey(...np(e,["n","e","d","p","q","dp","dq","qi"]))}(e);return Du(n(Vu(r instanceof Uint8Array?r:r.subarray(),"ascii"),i),"ascii")}function cp(e){if("RSA"!==e.kty)throw new Uu("invalid key type","ERR_INVALID_KEY_TYPE");if(null==e.n)throw new Uu("invalid key modulus","ERR_INVALID_KEY_MODULUS");return 8*Du(e.n,"base64url").length}const up=8192;class lp{constructor(e){We(this,"_key",void 0),this._key=e}verify(e,t){return async function(e,t,r){const n=await Rd.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Rd.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r instanceof Uint8Array?r:r.subarray())}(this._key,t,e)}marshal(){return function(e){if(null==e.n||null==e.e)throw new Uu("JWK was missing components","ERR_INVALID_PARAMETERS");const t=ic.pki.publicKeyToAsn1({n:Wu(e.n),e:Wu(e.e)});return Du(ic.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return Kf.encode({Type:zf.RSA,Data:this.marshal()}).subarray()}encrypt(e){return ap(this._key,!0,e,((e,t)=>t.encrypt(e)))}equals(e){return zu(this.bytes,e.bytes)}hash(){const e=xu.digest(this.bytes);return Qu(e)?e.then((e=>{let{bytes:t}=e;return t})):e.bytes}}class dp{constructor(e,t){We(this,"_key",void 0),We(this,"_publicKey",void 0),this._key=e,this._publicKey=t}genSecret(){return function(e){if(isNaN(e)||e<=0)throw new Uu("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Ii(e)}(16)}sign(e){return async function(e,t){const r=await Rd.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Rd.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,t instanceof Uint8Array?t:t.subarray());return new Uint8Array(n,0,n.byteLength)}(this._key,e)}get public(){if(null==this._publicKey)throw new Uu("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new lp(this._publicKey)}decrypt(e){return ap(this._key,!1,e,((e,t)=>t.decrypt(e)))}marshal(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw new Uu("JWK was missing components","ERR_INVALID_PARAMETERS");const t=ic.pki.privateKeyToAsn1({n:Wu(e.n),e:Wu(e.e),d:Wu(e.d),p:Wu(e.p),q:Wu(e.q),dP:Wu(e.dp),dQ:Wu(e.dq),qInv:Wu(e.qi)});return Du(ic.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return Vf.encode({Type:zf.RSA,Data:this.marshal()}).subarray()}equals(e){return zu(this.bytes,e.bytes)}hash(){const e=xu.digest(this.bytes);return Qu(e)?e.then((e=>{let{bytes:t}=e;return t})):e.bytes}async id(){return Vu(await this.public.hash(),"base58btc")}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pkcs-8";if("pkcs-8"===t){const t=new ic.util.ByteBuffer(this.marshal()),r=ic.asn1.fromDer(t),n=ic.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return ic.pki.encryptRsaPrivateKey(n,e,i)}if("libp2p-key"===t)return Bd(this.bytes,e);throw new Uu("export format '".concat(t,"' is not supported"),"ERR_INVALID_EXPORT_FORMAT")}}async function hp(e){const t=function(e){const t=ic.asn1.fromDer(Vu(e,"ascii")),r=ic.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:Gu(r.n),e:Gu(r.e),d:Gu(r.d),p:Gu(r.p),q:Gu(r.q),dp:Gu(r.dP),dq:Gu(r.dQ),qi:Gu(r.qInv),alg:"RS256"}}(e);if(cp(t)>up)throw new Uu("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const r=await ip(t);return new dp(r.privateKey,r.publicKey)}function fp(e){const t=function(e){const t=ic.asn1.fromDer(Vu(e,"ascii")),r=ic.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:Gu(r.n),e:Gu(r.e)}}(e);if(cp(t)>up)throw new Uu("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new lp(t)}async function pp(e){if(cp(e)>up)throw new Uu("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await ip(e);return new dp(t.privateKey,t.publicKey)}async function gp(e){if(e>up)throw new Uu("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await async function(e){const t=await Rd.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await op(t);return{privateKey:r[0],publicKey:r[1]}}(e);return new dp(t.privateKey,t.publicKey)}class mp extends Ai{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,di(e);const r=_i(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return hi(this),this.iHash.update(e),this}digestInto(e){hi(this),li(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const yp=(e,t,r)=>new mp(e,t).update(r).digest();yp.create=(e,t)=>new mp(e,t);const{bytesToNumberBE:vp,hexToBytes:bp}=z,wp={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(e){const{Err:t}=wp;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:vp(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=wp,r="string"===typeof e?bp(e):e;if(!hl(r))throw new Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=wp._parseInt(r.subarray(2)),{d:s,l:a}=wp._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:s}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?"0".concat(t):t},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),c=r(s);return"30".concat(r(s+o+4),"02").concat(c).concat(i,"02").concat(a).concat(n)}},_p=BigInt(0),Ep=BigInt(1),Ap=(BigInt(2),BigInt(3));BigInt(4);function Sp(e){const t=function(e){const t=Xl(e);Rl(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof r||"bigint"!==typeof r.beta||"function"!==typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{const i=t.toAffine();return Sl(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){return"bigint"===typeof e&&_p<e&&e<t.n}function a(e){if(!s(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=t;if(r&&"bigint"!==typeof e){if(hl(e)&&(e=pl(e)),"string"!==typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let s;try{s="bigint"===typeof e?e:bl(Al("private key",e,n))}catch(c){throw new Error("private key must be ".concat(n," bytes, hex or bigint, not ").concat(typeof e))}return i&&(s=Ul(s,o)),a(s),s}const u=new Map;function l(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof d)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?d.ZERO:new d(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(d.fromAffine)}static fromHex(e){const t=d.fromAffine(i(Al("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),s=o(e);if(!r.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){l(e);const{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(o,i)),u=r.eql(r.mul(n,a),r.mul(s,i));return c&&u}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,Ap),{px:o,py:s,pz:a}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,h=r.mul(o,o),f=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),l=r.mul(o,a),l=r.add(l,l),c=r.mul(e,l),u=r.mul(i,p),u=r.add(c,u),c=r.sub(f,u),u=r.add(f,u),u=r.mul(c,u),c=r.mul(g,c),l=r.mul(i,l),p=r.mul(e,p),g=r.sub(h,p),g=r.mul(e,g),g=r.add(g,l),l=r.add(h,h),h=r.add(l,h),h=r.add(h,p),h=r.mul(h,g),u=r.add(u,h),p=r.mul(s,a),p=r.add(p,p),h=r.mul(p,g),c=r.sub(c,h),l=r.mul(p,f),l=r.add(l,l),l=r.add(l,l),new d(c,u,l)}add(e){l(e);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:c}=e;let u=r.ZERO,h=r.ZERO,f=r.ZERO;const p=t.a,g=r.mul(t.b,Ap);let m=r.mul(n,s),y=r.mul(i,a),v=r.mul(o,c),b=r.add(n,i),w=r.add(s,a);b=r.mul(b,w),w=r.add(m,y),b=r.sub(b,w),w=r.add(n,o);let _=r.add(s,c);return w=r.mul(w,_),_=r.add(m,v),w=r.sub(w,_),_=r.add(i,o),u=r.add(a,c),_=r.mul(_,u),u=r.add(y,v),_=r.sub(_,u),f=r.mul(p,w),u=r.mul(g,v),f=r.add(u,f),u=r.sub(y,f),f=r.add(y,f),h=r.mul(u,f),y=r.add(m,m),y=r.add(y,m),v=r.mul(p,v),w=r.mul(g,w),y=r.add(y,v),v=r.sub(m,v),v=r.mul(p,v),w=r.add(w,v),m=r.mul(y,w),h=r.add(h,m),m=r.mul(_,w),u=r.mul(b,u),u=r.sub(u,m),m=r.mul(b,y),f=r.mul(_,f),f=r.add(f,m),new d(u,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,u,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(d.fromAffine)}))}multiplyUnsafe(e){const n=d.ZERO;if(e===_p)return n;if(a(e),e===Ep)return this;const{endo:i}=t;if(!i)return f.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:c,k2:u}=i.splitScalar(e),l=n,h=n,p=this;for(;s>_p||u>_p;)s&Ep&&(l=l.add(p)),u&Ep&&(h=h.add(p)),p=p.double(),s>>=Ep,u>>=Ep;return o&&(l=l.negate()),c&&(h=h.negate()),h=new d(r.mul(h.px,i.beta),h.py,h.pz),l.add(h)}multiply(e){a(e);let n,i,o=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:c}=s.splitScalar(o);let{p:u,f:l}=this.wNAF(t),{p:h,f:p}=this.wNAF(c);u=f.constTimeNegate(e,u),h=f.constTimeNegate(a,h),h=new d(r.mul(h.px,s.beta),h.py,h.pz),n=u.add(h),i=l.add(p)}else{const{p:e,f:t}=this.wNAF(o);n=e,i=t}return d.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=d.BASE,i=(e,t)=>t!==_p&&t!==Ep&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){const{px:t,py:n,pz:i}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(i));const s=r.mul(t,e),a=r.mul(n,e),c=r.mul(i,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===Ep)return!0;if(r)return r(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===Ep?this:r?r(d,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),n(d,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return pl(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const h=t.nBitLength,f=Yl(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function kp(e){const t=function(e){const t=Xl(e);return Rl(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return Ul(e,n)}function a(e){return ql(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:d}=Sp({...t,toBytes(e,t,n){const i=t.toAffine(),o=r.toBytes(i.x),s=Sl;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],s=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===o&&4===n){return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))}}throw new Error("Point of length ".concat(t," was invalid. Expected ").concat(i," compressed bytes or ").concat(o," uncompressed bytes"))}{const e=bl(s);if(!(_p<(a=e)&&a<r.ORDER))throw new Error("Point is not on curve");const t=l(e);let i=r.sqrt(t);return 1===(1&n)!==((i&Ep)===Ep)&&(i=r.neg(i)),{x:e,y:i}}var a}}),h=e=>pl(_l(e,t.nByteLength));function f(e){return e>n>>Ep}const p=(e,t,r)=>bl(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=Al("compactSignature",e,2*r),new g(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=wp.toSig(Al("DER",e));return new g(t,r)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:o}=this,u=b(Al("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const l=2===o||3===o?n+t.n:n;if(l>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=0===(1&o)?"02":"03",f=c.fromHex(d+h(l)),p=a(l),g=s(-u*p),m=s(i*p),y=c.BASE.multiplyAndAddUnsafe(f,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return vl(this.toDERHex())}toDERHex(){return wp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return vl(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(e){try{return u(e),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const e=Ql(t.n);return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=e.length,i=Wl(t),o=Ql(t);if(n<16||n<o||n>1024)throw new Error("expected ".concat(o,"-1024 bytes of input, got ").concat(n));const s=Ul(r?bl(e):wl(e),t-Bl)+Bl;return r?El(s,i):_l(s,i)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function y(e){const t=hl(e),r="string"===typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof c}const v=t.bits2int||function(e){const r=bl(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},b=t.bits2int_modN||function(e){return s(v(e))},w=kl(t.nBitLength);function _(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(_p<=e&&e<w))throw new Error("bigint expected < 2^".concat(t.nBitLength));return _l(e,t.nByteLength)}function E(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A;if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:l}=t;let{lowS:h,prehash:p,extraEntropy:m}=i;null==h&&(h=!0),e=Al("msgHash",e),p&&(e=Al("prehashed msgHash",o(e)));const y=b(e),w=u(n),E=[_(w),_(y)];if(null!=m){const e=!0===m?l(r.BYTES):m;E.push(Al("extraEntropy",e))}const S=Sl(...E),k=y;return{seed:S,k2sig:function(e){const t=v(e);if(!d(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=s(n.x);if(i===_p)return;const o=s(r*s(k+i*w));if(o===_p)return;let u=(n.x===i?0:2)|Number(n.y&Ep),l=o;return h&&f(o)&&(l=function(e){return f(e)?s(-e):e}(o),u^=1),new g(i,l,u)}}}const A={lowS:t.lowS,prehash:!1},S={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(u(e)).toRawBytes(r)},sign:function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A;const{seed:i,k2sig:o}=E(e,r,n),s=t;return Tl(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)},verify:function(e,r,n){var i;let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S;const u=e;if(r=Al("msgHash",r),n=Al("publicKey",n),"strict"in o)throw new Error("options.strict was renamed to lowS");const{lowS:l,prehash:d}=o;let h,f;try{if("string"===typeof u||hl(u))try{h=g.fromDER(u)}catch(A){if(!(A instanceof wp.Err))throw A;h=g.fromCompact(u)}else{if("object"!==typeof u||"bigint"!==typeof u.r||"bigint"!==typeof u.s)throw new Error("PARSE");{const{r:e,s:t}=u;h=new g(e,t)}}f=c.fromHex(n)}catch(k){if("PARSE"===k.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(l&&h.hasHighS())return!1;d&&(r=t.hash(r));const{r:p,s:m}=h,y=b(r),v=a(m),w=s(y*v),_=s(p*v),E=null===(i=c.BASE.multiplyAndAddUnsafe(f,w,_))||void 0===i?void 0:i.toAffine();return!!E&&s(E.x)===p},ProjectivePoint:c,Signature:g,utils:m}}function xp(e){return{hash:e,hmac:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return yp(e,t,Ei(...n))},randomBytes:Ii}}const Ip=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Tp=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Pp=BigInt(1),Rp=BigInt(2),Cp=(e,t)=>(e+t/Rp)/t;function Bp(e){const t=Ip,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=jl(l,r,t)*l%t,h=jl(d,r,t)*l%t,f=jl(h,Rp,t)*u%t,p=jl(f,i,t)*f%t,g=jl(p,o,t)*p%t,m=jl(g,a,t)*g%t,y=jl(m,c,t)*m%t,v=jl(y,a,t)*g%t,b=jl(v,r,t)*l%t,w=jl(b,s,t)*p%t,_=jl(w,n,t)*u%t,E=jl(_,Rp,t);if(!Mp.eql(Mp.sqr(E),e))throw new Error("Cannot find square root");return E}const Mp=Gl(Ip,void 0,void 0,{sqrt:Bp}),Np=function(e,t){const r=t=>kp({...e,...xp(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:Mp,n:Tp,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Tp,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Pp*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Cp(o*e,t),c=Cp(-n*e,t);let u=Ul(e-a*r-c*i,t),l=Ul(-a*n-c*o,t);const d=u>s,h=l>s;if(d&&(u=t-u),h&&(l=t-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},Ni);BigInt(0);Np.ProjectivePoint;function Op(e){try{Np.ProjectivePoint.fromHex(e)}catch(t){throw new Uu(String(t),"ERR_INVALID_PUBLIC_KEY")}}class Dp{constructor(e){We(this,"_key",void 0),Op(e),this._key=e}verify(e,t){return function(e,t,r){const n=xu.digest(r instanceof Uint8Array?r:r.subarray());if(Qu(n))return n.then((r=>{let{digest:n}=r;return Np.verify(t,n,e)})).catch((e=>{throw new Uu(String(e),"ERR_INVALID_INPUT")}));try{return Np.verify(t,n.digest,e)}catch(i){throw new Uu(String(i),"ERR_INVALID_INPUT")}}(this._key,t,e)}marshal(){return e=this._key,Np.ProjectivePoint.fromHex(e).toRawBytes(!0);var e}get bytes(){return Kf.encode({Type:zf.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return zu(this.bytes,e.bytes)}async hash(){const e=xu.digest(this.bytes);let t;return Qu(e)?({bytes:t}=await e):t=e.bytes,t}}class Lp{constructor(e,t){We(this,"_key",void 0),We(this,"_publicKey",void 0),this._key=e,this._publicKey=null!==t&&void 0!==t?t:function(e){try{return Np.getPublicKey(e,!0)}catch(t){throw new Uu(String(t),"ERR_INVALID_PRIVATE_KEY")}}(e),function(e){try{Np.getPublicKey(e,!0)}catch(t){throw new Uu(String(t),"ERR_INVALID_PRIVATE_KEY")}}(this._key),Op(this._publicKey)}sign(e){return function(e,t){const r=xu.digest(t instanceof Uint8Array?t:t.subarray());if(Qu(r))return r.then((t=>{let{digest:r}=t;return Np.sign(r,e).toDERRawBytes()})).catch((e=>{throw new Uu(String(e),"ERR_INVALID_INPUT")}));try{return Np.sign(r.digest,e).toDERRawBytes()}catch(n){throw new Uu(String(n),"ERR_INVALID_INPUT")}}(this._key,e)}get public(){return new Dp(this._publicKey)}marshal(){return this._key}get bytes(){return Vf.encode({Type:zf.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return zu(this.bytes,e.bytes)}hash(){const e=xu.digest(this.bytes);return Qu(e)?e.then((e=>{let{bytes:t}=e;return t})):e.bytes}async id(){return Vu(await this.public.hash(),"base58btc")}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===t)return Bd(this.bytes,e);throw new Uu("export format '".concat(t,"' is not supported"),"ERR_INVALID_EXPORT_FORMAT")}}function Up(e){return new Lp(e)}function Fp(e){return new Dp(e)}async function jp(){const e=Np.utils.randomPrivateKey();return new Lp(e)}const qp={rsa:ie,ed25519:ne,secp256k1:oe};class zp extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"The operation was aborted"),We(this,"code",void 0),We(this,"type",void 0),this.code=zp.code,this.type=zp.type}}We(zp,"code","ABORT_ERR"),We(zp,"type","aborted");class Hp extends Error{constructor(e,t,r){var n;super(e),We(this,"code",void 0),We(this,"props",void 0),this.code=t,this.name=null!==(n=null===r||void 0===r?void 0:r.name)&&void 0!==n?n:"CodeError",this.props=null!==r&&void 0!==r?r:{}}}class Kp extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected Peer"),We(this,"code",void 0),this.code=Kp.code}}We(Kp,"code","ERR_UNEXPECTED_PEER");class Vp extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto exchange"),We(this,"code",void 0),this.code=Vp.code}}We(Vp,"code","ERR_INVALID_CRYPTO_EXCHANGE");class Gp extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Invalid crypto transmission"),We(this,"code",void 0),this.code=Gp.code}}function Wp(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}let Qp;We(Gp,"code","ERR_INVALID_CRYPTO_TRANSMISSION");const Jp=Symbol.for("nodejs.util.inspect.custom"),Zp=Object.values(vs).map((e=>e.decoder)).reduce(((e,t)=>e.or(t)),vs.identity.decoder),Yp=114,Xp=36,$p=37;Qp=Symbol.toStringTag;class eg{constructor(e){We(this,"type",void 0),We(this,"multihash",void 0),We(this,"privateKey",void 0),We(this,"publicKey",void 0),We(this,"string",void 0),We(this,Qe,!0),this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Qp](){return"PeerId(".concat(this.toString(),")")}toString(){return null==this.string&&(this.string=fo.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return ls.createV1(Yp,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){var t;if(e instanceof Uint8Array)return Wp(this.multihash.bytes,e);if("string"===typeof e)return ig(e).equals(this);if(null!=(null===e||void 0===e||null===(t=e.multihash)||void 0===t?void 0:t.bytes))return Wp(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[Jp](){return"PeerId(".concat(this.toString(),")")}}class tg extends eg{constructor(e){super({...e,type:"RSA"}),We(this,"type","RSA"),We(this,"publicKey",void 0),this.publicKey=e.publicKey}}class rg extends eg{constructor(e){super({...e,type:"Ed25519"}),We(this,"type","Ed25519"),We(this,"publicKey",void 0),this.publicKey=e.multihash.digest}}class ng extends eg{constructor(e){super({...e,type:"secp256k1"}),We(this,"type","secp256k1"),We(this,"publicKey",void 0),this.publicKey=e.multihash.digest}}function ig(e,t){var r;if(t=null!==(r=t)&&void 0!==r?r:Zp,"1"===e.charAt(0)||"Q"===e.charAt(0)){const t=Xo(fo.decode("z".concat(e)));return e.startsWith("12D")?new rg({multihash:t}):e.startsWith("16U")?new ng({multihash:t}):new tg({multihash:t})}return og(Zp.decode(e))}function og(e){try{const t=Xo(e);if(t.code===ts.code){if(t.digest.length===Xp)return new rg({multihash:t});if(t.digest.length===$p)return new ng({multihash:t})}if(t.code===os.code)return new tg({multihash:t})}catch{return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&e.code!==Yp)throw new Error("Supplied PeerID CID is invalid");const t=e.multihash;if(t.code===os.code)return new tg({multihash:e.multihash});if(t.code===ts.code){if(t.digest.length===Xp)return new rg({multihash:e.multihash});if(t.digest.length===$p)return new ng({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}(ls.decode(e))}throw new Error("Supplied PeerID CID is invalid")}async function sg(e,t){return e.length===Xp?new rg({multihash:Yo(ts.code,e),privateKey:t}):e.length===$p?new ng({multihash:Yo(ts.code,e),privateKey:t}):new tg({multihash:await os.digest(e),publicKey:e,privateKey:t})}function ag(e){const t=e.reduce(((e,t)=>e+2+t.bytes.length),0),r=new Uint8Array(t),n=new DataView(r.buffer);let i=0;return e.forEach((e=>{if(e.getPeerId())throw new Error("`multiaddr` field MUST not contain peer id");n.setUint16(i,e.bytes.length),i+=2,r.set(e.bytes,i),i+=e.bytes.length})),r}const cg=e=>{if((e=new Uint8Array(e)).length<3)throw new Error("Insufficient data");const t=new DataView(e.buffer),r=t.getUint16(0),n=[];if(130===e.length)for(let i=0;i<1024;i++){const e=Math.floor(i/8)+2,r=7-i%8;t.getUint8(e)&1<<r&&n.push(i)}else{const r=t.getUint8(2);for(let i=0,o=3;i<r;i++,o+=2){if(o+1>=e.length)throw new Error("Unexpected end of data");n.push(t.getUint16(o))}}return{clusterId:r,shards:n}},ug=e=>{const{clusterId:t,shards:r}=e,n=r.length>=64?130:3+2*r.length,i=new ArrayBuffer(n),o=new DataView(i);if(o.setUint16(0,t),r.length>=64)for(const s of r){const e=Math.floor(s/8)+2,t=7-s%8;o.setUint8(e,o.getUint8(e)|1<<t)}else{o.setUint8(2,r.length);for(let e=0,t=3;e<r.length;e++,t+=2)o.setUint16(t,r[e])}return new Uint8Array(i)};function lg(e){let t=0;return e.lightPush&&(t+=1),t<<=1,e.filter&&(t+=1),t<<=1,e.store&&(t+=1),t<<=1,e.relay&&(t+=1),t}class dg extends Map{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(1),r=arguments.length>2?arguments[2]:void 0;super(Object.entries(e)),We(this,"seq",void 0),We(this,"signature",void 0),this.seq=t,this.signature=r}set(e,t){return this.signature=void 0,this.seq++,super.set(e,t)}get id(){const e=this.get("id");if(!e)throw new Error("id not found.");return Ps(e)}get publicKey(){if("v4"===this.id)return this.get("secp256k1");throw new Error(rc)}get rs(){const e=this.get("rs");if(e)return cg(e)}get rsv(){const e=this.get("rsv");if(e)return cg(e)}get ip(){return hg(this,"ip","ip4")}set ip(e){pg(this,"ip","ip4",e)}get tcp(){return fg(this,"tcp","tcp")}set tcp(e){gg(this,"tcp","tcp",e)}get udp(){return fg(this,"udp","udp")}set udp(e){gg(this,"udp","udp",e)}get ip6(){return hg(this,"ip6","ip6")}set ip6(e){pg(this,"ip6","ip6",e)}get tcp6(){return fg(this,"tcp6","tcp")}set tcp6(e){gg(this,"tcp6","tcp",e)}get udp6(){return fg(this,"udp6","udp")}set udp6(e){gg(this,"udp6","udp",e)}get multiaddrs(){const e=this.get("multiaddrs");if(e)return function(e){const t=[];let r=0;for(;r<e.length;){const n=new DataView(e.buffer,r,2).getUint16(0);r+=2;const i=e.slice(r,r+n);r+=n,t.push(Zn(i))}return t}(e)}set multiaddrs(e){mg(this,"multiaddrs",e,ag)}get waku2(){const e=this.get("waku2");if(e)return function(e){const t={relay:!1,store:!1,filter:!1,lightPush:!1};return e%2&&(t.relay=!0),(e>>=1)%2&&(t.store=!0),(e>>=1)%2&&(t.filter=!0),(e>>=1)%2&&(t.lightPush=!0),t}(e[0])}set waku2(e){mg(this,"waku2",e,(e=>new Uint8Array([lg(e)])))}}function hg(e,t,r){const n=e.get(t);if(n)return Sn(r,n)}function fg(e,t,r){const n=e.get(t);if(n)return Number(Sn(r,n))}function pg(e,t,r,n){mg(e,t,n,kn.bind({},r))}function gg(e,t,r,n){pg(e,t,r,null===n||void 0===n?void 0:n.toString(10))}function mg(e,t,r,n){void 0!==r?e.set(t,n(r)):e.delete(t)}async function yg(e,t){return async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{seed:n,m:i,d:o}=Wa(e,t,r.extraEntropy),s=new La(oa,ia);let a;for(await s.reseed(n);!(a=ja(await s.generate(),i,o,r.canonical));)await s.reseed();return Qa(a,r)}(ec(t),e,{der:!1})}const vg=new qs("enr");var bg,wg;!function(e){e.TCP="tcp",e.UDP="udp"}(bg||(bg={})),function(e){e.TCP4="tcp4",e.UDP4="udp4",e.TCP6="tcp6",e.UDP6="udp6"}(wg||(wg={}));class _g extends dg{constructor(){super(...arguments),We(this,"peerId",void 0),We(this,"getLocationMultiaddr",nc.bind({},this))}static async create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BigInt(1);const r=new _g(e,t,arguments.length>2?arguments[2]:void 0);try{const e=r.publicKey;e&&(r.peerId=await function(e){return sg(new qp.secp256k1.Secp256k1PublicKey(e).bytes,void 0)}(e))}catch(n){vg.error("Could not calculate peer id for ENR",n)}return r}get nodeId(){if("v4"===this.id)return this.publicKey?function(e){const t=ga.fromHex(e).toRawBytes(!1);return Ts(ec(t.slice(1)))}(this.publicKey):void 0;throw new Error(rc)}get shardInfo(){return this.rs&&this.rsv&&vg.warn("ENR contains both `rs` and `rsv` fields."),this.rs||this.rsv}setLocationMultiaddr(e){const t=e.protoNames();if(2!==t.length&&"udp"!==t[1]&&"tcp"!==t[1])throw new Error("Invalid multiaddr");const r=e.tuples();if(!r[0][1]||!r[1][1])throw new Error("Invalid multiaddr");4===r[0][0]?(this.set("ip",r[0][1]),this.set(t[1],r[1][1])):(this.set("ip6",r[0][1]),this.set(t[1]+"6",r[1][1]))}getAllLocationMultiaddrs(){var e;const t=[];for(const n of Object.values(wg)){const e=this.getLocationMultiaddr(n);e&&t.push(e)}const r=null!==(e=this.multiaddrs)&&void 0!==e?e:[];return t.concat(r)}get peerInfo(){const e=this.peerId;if(e)return{id:e,multiaddrs:this.getAllLocationMultiaddrs(),protocols:[]}}getFullMultiaddr(e){if(this.peerId){const t=this.getLocationMultiaddr(e);if(t)return t.encapsulate("/p2p/".concat(this.peerId.toString()))}}getFullMultiaddrs(){if(this.peerId&&this.multiaddrs){const e=this.peerId;return this.multiaddrs.map((t=>t.encapsulate("/p2p/".concat(e.toString()))))}return[]}verify(e,t){if(!this.get("id")||"v4"!==this.id)throw new Error(rc);if(!this.publicKey)throw new Error("Failed to verify ENR: No public key");return tc(t,ec(e),this.publicKey)}async sign(e,t){if("v4"!==this.id)throw new Error(rc);return this.signature=await yg(t,e),this.signature}}We(_g,"RECORD_PREFIX","enr:");let Eg=!1,Ag=!1;const Sg={debug:1,default:2,info:2,warning:3,error:4,off:5};let kg=Sg.default,xg=null;const Ig=function(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();var Tg,Pg;!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Tg||(Tg={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Pg||(Pg={}));const Rg="0123456789abcdef";class Cg{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==Sg[r]&&this.throwArgumentError("invalid log level name","logLevel",e),kg>Sg[r]||console.log.apply(console,t)}debug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._log(Cg.levels.DEBUG,t)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._log(Cg.levels.INFO,t)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this._log(Cg.levels.WARNING,t)}makeError(e,t,r){if(Ag)return this.makeError("censored error",t,{});t||(t=Cg.errors.UNKNOWN_ERROR),r||(r={});const n=[];Object.keys(r).forEach((e=>{const t=r[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=Rg[t[e]>>4],r+=Rg[15&t[e]];n.push(e+"=Uint8Array(0x"+r+")")}else n.push(e+"="+JSON.stringify(t))}catch(s){n.push(e+"="+JSON.stringify(r[e].toString()))}})),n.push("code=".concat(t)),n.push("version=".concat(this.version));const i=e;let o="";switch(t){case Pg.NUMERIC_FAULT:{o="NUMERIC_FAULT";const t=e;switch(t){case"overflow":case"underflow":case"division-by-zero":o+="-"+t;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result"}break}case Pg.CALL_EXCEPTION:case Pg.INSUFFICIENT_FUNDS:case Pg.MISSING_NEW:case Pg.NONCE_EXPIRED:case Pg.REPLACEMENT_UNDERPRICED:case Pg.TRANSACTION_REPLACED:case Pg.UNPREDICTABLE_GAS_LIMIT:o=t}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),n.length&&(e+=" ("+n.join(", ")+")");const s=new Error(e);return s.reason=i,s.code=t,Object.keys(r).forEach((function(e){s[e]=r[e]})),s}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,Cg.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),Ig&&this.throwError("platform missing String.prototype.normalize",Cg.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ig})}checkSafeUint53(e,t){"number"===typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,Cg.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,Cg.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,Cg.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,Cg.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",Cg.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",Cg.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",Cg.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return xg||(xg=new Cg("logger/5.7.0")),xg}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",Cg.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Eg){if(!e)return;this.globalLogger().throwError("error censorship permanent",Cg.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Ag=!!e,Eg=!!t}static setLogLevel(e){const t=Sg[e.toLowerCase()];null!=t?kg=t:Cg.globalLogger().warn("invalid log level - "+e)}static from(e){return new Cg(e)}}Cg.errors=Pg,Cg.levels=Tg;const Bg=new Cg("bytes/5.7.0");function Mg(e){return!!e.toHexString}function Ng(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Ng(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Og(e){return Fg(e)&&!(e.length%2)||Lg(e)}function Dg(e){return"number"===typeof e&&e==e&&e%1===0}function Lg(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Dg(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!Dg(r)||r<0||r>=256)return!1}return!0}function Ug(e,t){if(t||(t={}),"number"===typeof e){Bg.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),Ng(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Mg(e)&&(e=e.toHexString()),Fg(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":Bg.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return Ng(new Uint8Array(n))}return Lg(e)?Ng(new Uint8Array(e)):Bg.throwArgumentError("invalid arrayify value","value",e)}function Fg(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}const jg="0123456789abcdef";function qg(e,t){if(t||(t={}),"number"===typeof e){Bg.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=jg[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Mg(e))return e.toHexString();if(Fg(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Bg.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Lg(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=jg[(240&n)>>4]+jg[15&n]}return t}return Bg.throwArgumentError("invalid hexlify value","value",e)}const zg=new Cg("rlp/5.7.0");function Hg(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function Kg(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function Vg(e){if(Array.isArray(e)){let t=[];if(e.forEach((function(e){t=t.concat(Vg(e))})),t.length<=55)return t.unshift(192+t.length),t;const r=Hg(t.length);return r.unshift(247+r.length),r.concat(t)}Og(e)||zg.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(Ug(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=Hg(t.length);return r.unshift(183+r.length),r.concat(t)}function Gg(e){return qg(Vg(e))}function Wg(e,t,r,n){const i=[];for(;r<t+1+n;){const o=Qg(e,r);i.push(o.result),(r+=o.consumed)>t+1+n&&zg.throwError("child data too short",Cg.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Qg(e,t){if(0===e.length&&zg.throwError("data too short",Cg.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&zg.throwError("data short segment too short",Cg.errors.BUFFER_OVERRUN,{});const n=Kg(e,t+1,r);return t+1+r+n>e.length&&zg.throwError("data long segment too short",Cg.errors.BUFFER_OVERRUN,{}),Wg(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&zg.throwError("data array too short",Cg.errors.BUFFER_OVERRUN,{}),Wg(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&zg.throwError("data array too short",Cg.errors.BUFFER_OVERRUN,{});const n=Kg(e,t+1,r);t+1+r+n>e.length&&zg.throwError("data array too short",Cg.errors.BUFFER_OVERRUN,{});return{consumed:1+r+n,result:qg(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;t+1+r>e.length&&zg.throwError("data too short",Cg.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:qg(e.slice(t+1,t+1+r))}}return{consumed:1,result:qg(e[t])}}const Jg=new qs("enr:decoder");class Zg{static fromString(e){if(!e.startsWith(_g.RECORD_PREFIX))throw new Error("\"string encoded ENR must start with '".concat(_g.RECORD_PREFIX,"'"));return Zg.fromRLP(Du(e.slice(4),"base64url"))}static fromRLP(e){const t=function(e){const t=Ug(e),r=Qg(t,0);return r.consumed!==t.length&&zg.throwArgumentError("invalid rlp data","data",e),r.result}(e).map(Is);return async function(e){const{signature:t,seq:r,kvs:n}=function(e){if(!Array.isArray(e))throw new Error("Decoded ENR must be an array");if(e.length%2!==0)throw new Error("Decoded ENR must have an even number of elements");const[t,r,...n]=e;if(!t||Array.isArray(t))throw new Error("Decoded ENR invalid signature: must be a byte array");if(!r||Array.isArray(r))throw new Error("Decoded ENR invalid sequence number: must be a byte array");return{signature:t,seq:r,kvs:n}}(e),i={};for(let c=0;c<n.length;c+=2)try{i[Ps(n[c])]=n[c+1]}catch(a){Jg.error("Failed to decode ENR key to UTF-8, skipping it",n[c],a)}const o=function(e){return e.length?BigInt("0x"+Ts(e)):BigInt(0)}(r),s=await _g.create(i,o,t);return function(e,t,r,n){const i=Is(Gg([e,...t]));if(!r.verify(i,n))throw new Error("Unable to verify ENR signature")}(r,n,s,t),s}(t)}}var Yg,Xg,$g,em,tm,rm,nm,im,om,sm,am,cm,um,lm,dm,hm,fm,pm,gm,mm,ym,vm,bm,wm,_m,Em,Am,Sm,km,xm,Im,Tm;!function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.proof&&e.proof.byteLength>0&&(t.uint32(10),t.bytes(e.proof)),null!=e.merkleRoot&&e.merkleRoot.byteLength>0&&(t.uint32(18),t.bytes(e.merkleRoot)),null!=e.epoch&&e.epoch.byteLength>0&&(t.uint32(26),t.bytes(e.epoch)),null!=e.shareX&&e.shareX.byteLength>0&&(t.uint32(34),t.bytes(e.shareX)),null!=e.shareY&&e.shareY.byteLength>0&&(t.uint32(42),t.bytes(e.shareY)),null!=e.nullifier&&e.nullifier.byteLength>0&&(t.uint32(50),t.bytes(e.nullifier)),null!=e.rlnIdentifier&&e.rlnIdentifier.byteLength>0&&(t.uint32(58),t.bytes(e.rlnIdentifier)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={proof:new Uint8Array(0),merkleRoot:new Uint8Array(0),epoch:new Uint8Array(0),shareX:new Uint8Array(0),shareY:new Uint8Array(0),nullifier:new Uint8Array(0),rlnIdentifier:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.proof=e.bytes();break;case 2:r.merkleRoot=e.bytes();break;case 3:r.epoch=e.bytes();break;case 4:r.shareX=e.bytes();break;case 5:r.shareY=e.bytes();break;case 6:r.nullifier=e.bytes();break;case 7:r.rlnIdentifier=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Yg||(Yg={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.payload&&e.payload.byteLength>0&&(t.uint32(10),t.bytes(e.payload)),null!=e.contentTopic&&""!==e.contentTopic&&(t.uint32(18),t.string(e.contentTopic)),null!=e.version&&(t.uint32(24),t.uint32(e.version)),null!=e.timestamp&&(t.uint32(80),t.sint64(e.timestamp)),null!=e.meta&&(t.uint32(90),t.bytes(e.meta)),null!=e.rateLimitProof&&(t.uint32(170),Yg.codec().encode(e.rateLimitProof,t)),null!=e.ephemeral&&(t.uint32(248),t.bool(e.ephemeral)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={payload:new Uint8Array(0),contentTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.payload=e.bytes();break;case 2:r.contentTopic=e.string();break;case 3:r.version=e.uint32();break;case 10:r.timestamp=e.sint64();break;case 11:r.meta=e.bytes();break;case 21:r.rateLimitProof=Yg.codec().decode(e,e.uint32());break;case 31:r.ephemeral=e.bool();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Xg||(Xg={})),function(e){let t,r;!function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.contentTopic&&""!==e.contentTopic&&(t.uint32(10),t.string(e.contentTopic)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={contentTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3===1)r.contentTopic=e.string();else e.skipType(7&t)}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(t=e.ContentFilter||(e.ContentFilter={})),e.codec=()=>(null==r&&(r=Qf((function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),null!=t.subscribe&&!1!==t.subscribe&&(r.uint32(8),r.bool(t.subscribe)),null!=t.topic&&""!==t.topic&&(r.uint32(18),r.string(t.topic)),null!=t.contentFilters)for(const i of t.contentFilters)r.uint32(26),e.ContentFilter.codec().encode(i,r);!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={subscribe:!1,topic:"",contentFilters:[]},i=null==r?t.len:t.pos+r;for(;t.pos<i;){const r=t.uint32();switch(r>>>3){case 1:n.subscribe=t.bool();break;case 2:n.topic=t.string();break;case 3:n.contentFilters.push(e.ContentFilter.codec().decode(t,t.uint32()));break;default:t.skipType(7&r)}}return n}))),r),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}($g||($g={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.messages)for(const n of e.messages)t.uint32(10),nm.codec().encode(n,t);!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={messages:[]},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3===1)r.messages.push(nm.codec().decode(e,e.uint32()));else e.skipType(7&t)}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(em||(em={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.requestId&&""!==e.requestId&&(t.uint32(10),t.string(e.requestId)),null!=e.request&&(t.uint32(18),$g.codec().encode(e.request,t)),null!=e.push&&(t.uint32(26),em.codec().encode(e.push,t)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={requestId:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.requestId=e.string();break;case 2:r.request=$g.codec().decode(e,e.uint32());break;case 3:r.push=em.codec().decode(e,e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(tm||(tm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.proof&&e.proof.byteLength>0&&(t.uint32(10),t.bytes(e.proof)),null!=e.merkleRoot&&e.merkleRoot.byteLength>0&&(t.uint32(18),t.bytes(e.merkleRoot)),null!=e.epoch&&e.epoch.byteLength>0&&(t.uint32(26),t.bytes(e.epoch)),null!=e.shareX&&e.shareX.byteLength>0&&(t.uint32(34),t.bytes(e.shareX)),null!=e.shareY&&e.shareY.byteLength>0&&(t.uint32(42),t.bytes(e.shareY)),null!=e.nullifier&&e.nullifier.byteLength>0&&(t.uint32(50),t.bytes(e.nullifier)),null!=e.rlnIdentifier&&e.rlnIdentifier.byteLength>0&&(t.uint32(58),t.bytes(e.rlnIdentifier)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={proof:new Uint8Array(0),merkleRoot:new Uint8Array(0),epoch:new Uint8Array(0),shareX:new Uint8Array(0),shareY:new Uint8Array(0),nullifier:new Uint8Array(0),rlnIdentifier:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.proof=e.bytes();break;case 2:r.merkleRoot=e.bytes();break;case 3:r.epoch=e.bytes();break;case 4:r.shareX=e.bytes();break;case 5:r.shareY=e.bytes();break;case 6:r.nullifier=e.bytes();break;case 7:r.rlnIdentifier=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(rm||(rm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.payload&&e.payload.byteLength>0&&(t.uint32(10),t.bytes(e.payload)),null!=e.contentTopic&&""!==e.contentTopic&&(t.uint32(18),t.string(e.contentTopic)),null!=e.version&&(t.uint32(24),t.uint32(e.version)),null!=e.timestamp&&(t.uint32(80),t.sint64(e.timestamp)),null!=e.meta&&(t.uint32(90),t.bytes(e.meta)),null!=e.rateLimitProof&&(t.uint32(170),rm.codec().encode(e.rateLimitProof,t)),null!=e.ephemeral&&(t.uint32(248),t.bool(e.ephemeral)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={payload:new Uint8Array(0),contentTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.payload=e.bytes();break;case 2:r.contentTopic=e.string();break;case 3:r.version=e.uint32();break;case 10:r.timestamp=e.sint64();break;case 11:r.meta=e.bytes();break;case 21:r.rateLimitProof=rm.codec().decode(e,e.uint32());break;case 31:r.ephemeral=e.bool();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(nm||(nm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.contentTopic&&""!==e.contentTopic&&(t.uint32(18),t.string(e.contentTopic)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={contentTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3===2)r.contentTopic=e.string();else e.skipType(7&t)}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(im||(im={})),function(e){let t,r,n;!function(e){e.SUBSCRIBER_PING="SUBSCRIBER_PING",e.SUBSCRIBE="SUBSCRIBE",e.UNSUBSCRIBE="UNSUBSCRIBE",e.UNSUBSCRIBE_ALL="UNSUBSCRIBE_ALL"}(t=e.FilterSubscribeType||(e.FilterSubscribeType={})),function(e){e[e.SUBSCRIBER_PING=0]="SUBSCRIBER_PING",e[e.SUBSCRIBE=1]="SUBSCRIBE",e[e.UNSUBSCRIBE=2]="UNSUBSCRIBE",e[e.UNSUBSCRIBE_ALL=3]="UNSUBSCRIBE_ALL"}(r||(r={})),function(e){e.codec=()=>Wf(r)}(t=e.FilterSubscribeType||(e.FilterSubscribeType={})),e.codec=()=>(null==n&&(n=Qf((function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==i.lengthDelimited&&n.fork(),null!=t.requestId&&""!==t.requestId&&(n.uint32(10),n.string(t.requestId)),null!=t.filterSubscribeType&&0!==r[t.filterSubscribeType]&&(n.uint32(16),e.FilterSubscribeType.codec().encode(t.filterSubscribeType,n)),null!=t.pubsubTopic&&(n.uint32(82),n.string(t.pubsubTopic)),null!=t.contentTopics)for(const e of t.contentTopics)n.uint32(90),n.string(e);!1!==i.lengthDelimited&&n.ldelim()}),((r,n)=>{const i={requestId:"",filterSubscribeType:t.SUBSCRIBER_PING,contentTopics:[]},o=null==n?r.len:r.pos+n;for(;r.pos<o;){const t=r.uint32();switch(t>>>3){case 1:i.requestId=r.string();break;case 2:i.filterSubscribeType=e.FilterSubscribeType.codec().decode(r);break;case 10:i.pubsubTopic=r.string();break;case 11:i.contentTopics.push(r.string());break;default:r.skipType(7&t)}}return i}))),n),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(om||(om={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.requestId&&""!==e.requestId&&(t.uint32(10),t.string(e.requestId)),null!=e.statusCode&&0!==e.statusCode&&(t.uint32(80),t.uint32(e.statusCode)),null!=e.statusDesc&&(t.uint32(90),t.string(e.statusDesc)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={requestId:"",statusCode:0},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.requestId=e.string();break;case 10:r.statusCode=e.uint32();break;case 11:r.statusDesc=e.string();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(sm||(sm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.wakuMessage&&(t.uint32(10),um.codec().encode(e.wakuMessage,t)),null!=e.pubsubTopic&&(t.uint32(18),t.string(e.pubsubTopic)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.wakuMessage=um.codec().decode(e,e.uint32());break;case 2:r.pubsubTopic=e.string();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(am||(am={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.proof&&e.proof.byteLength>0&&(t.uint32(10),t.bytes(e.proof)),null!=e.merkleRoot&&e.merkleRoot.byteLength>0&&(t.uint32(18),t.bytes(e.merkleRoot)),null!=e.epoch&&e.epoch.byteLength>0&&(t.uint32(26),t.bytes(e.epoch)),null!=e.shareX&&e.shareX.byteLength>0&&(t.uint32(34),t.bytes(e.shareX)),null!=e.shareY&&e.shareY.byteLength>0&&(t.uint32(42),t.bytes(e.shareY)),null!=e.nullifier&&e.nullifier.byteLength>0&&(t.uint32(50),t.bytes(e.nullifier)),null!=e.rlnIdentifier&&e.rlnIdentifier.byteLength>0&&(t.uint32(58),t.bytes(e.rlnIdentifier)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={proof:new Uint8Array(0),merkleRoot:new Uint8Array(0),epoch:new Uint8Array(0),shareX:new Uint8Array(0),shareY:new Uint8Array(0),nullifier:new Uint8Array(0),rlnIdentifier:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.proof=e.bytes();break;case 2:r.merkleRoot=e.bytes();break;case 3:r.epoch=e.bytes();break;case 4:r.shareX=e.bytes();break;case 5:r.shareY=e.bytes();break;case 6:r.nullifier=e.bytes();break;case 7:r.rlnIdentifier=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(cm||(cm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.payload&&e.payload.byteLength>0&&(t.uint32(10),t.bytes(e.payload)),null!=e.contentTopic&&""!==e.contentTopic&&(t.uint32(18),t.string(e.contentTopic)),null!=e.version&&(t.uint32(24),t.uint32(e.version)),null!=e.timestamp&&(t.uint32(80),t.sint64(e.timestamp)),null!=e.meta&&(t.uint32(90),t.bytes(e.meta)),null!=e.rateLimitProof&&(t.uint32(170),cm.codec().encode(e.rateLimitProof,t)),null!=e.ephemeral&&(t.uint32(248),t.bool(e.ephemeral)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={payload:new Uint8Array(0),contentTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.payload=e.bytes();break;case 2:r.contentTopic=e.string();break;case 3:r.version=e.uint32();break;case 10:r.timestamp=e.sint64();break;case 11:r.meta=e.bytes();break;case 21:r.rateLimitProof=cm.codec().decode(e,e.uint32());break;case 31:r.ephemeral=e.bool();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(um||(um={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.pubsubTopic&&""!==e.pubsubTopic&&(t.uint32(10),t.string(e.pubsubTopic)),null!=e.message&&(t.uint32(18),pm.codec().encode(e.message,t)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={pubsubTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.pubsubTopic=e.string();break;case 2:r.message=pm.codec().decode(e,e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(lm||(lm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.isSuccess&&!1!==e.isSuccess&&(t.uint32(8),t.bool(e.isSuccess)),null!=e.info&&(t.uint32(18),t.string(e.info)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={isSuccess:!1},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.isSuccess=e.bool();break;case 2:r.info=e.string();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(dm||(dm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.requestId&&""!==e.requestId&&(t.uint32(10),t.string(e.requestId)),null!=e.request&&(t.uint32(18),lm.codec().encode(e.request,t)),null!=e.response&&(t.uint32(26),dm.codec().encode(e.response,t)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={requestId:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.requestId=e.string();break;case 2:r.request=lm.codec().decode(e,e.uint32());break;case 3:r.response=dm.codec().decode(e,e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(hm||(hm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.proof&&e.proof.byteLength>0&&(t.uint32(10),t.bytes(e.proof)),null!=e.merkleRoot&&e.merkleRoot.byteLength>0&&(t.uint32(18),t.bytes(e.merkleRoot)),null!=e.epoch&&e.epoch.byteLength>0&&(t.uint32(26),t.bytes(e.epoch)),null!=e.shareX&&e.shareX.byteLength>0&&(t.uint32(34),t.bytes(e.shareX)),null!=e.shareY&&e.shareY.byteLength>0&&(t.uint32(42),t.bytes(e.shareY)),null!=e.nullifier&&e.nullifier.byteLength>0&&(t.uint32(50),t.bytes(e.nullifier)),null!=e.rlnIdentifier&&e.rlnIdentifier.byteLength>0&&(t.uint32(58),t.bytes(e.rlnIdentifier)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={proof:new Uint8Array(0),merkleRoot:new Uint8Array(0),epoch:new Uint8Array(0),shareX:new Uint8Array(0),shareY:new Uint8Array(0),nullifier:new Uint8Array(0),rlnIdentifier:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.proof=e.bytes();break;case 2:r.merkleRoot=e.bytes();break;case 3:r.epoch=e.bytes();break;case 4:r.shareX=e.bytes();break;case 5:r.shareY=e.bytes();break;case 6:r.nullifier=e.bytes();break;case 7:r.rlnIdentifier=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(fm||(fm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.payload&&e.payload.byteLength>0&&(t.uint32(10),t.bytes(e.payload)),null!=e.contentTopic&&""!==e.contentTopic&&(t.uint32(18),t.string(e.contentTopic)),null!=e.version&&(t.uint32(24),t.uint32(e.version)),null!=e.timestamp&&(t.uint32(80),t.sint64(e.timestamp)),null!=e.meta&&(t.uint32(90),t.bytes(e.meta)),null!=e.rateLimitProof&&(t.uint32(170),fm.codec().encode(e.rateLimitProof,t)),null!=e.ephemeral&&(t.uint32(248),t.bool(e.ephemeral)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={payload:new Uint8Array(0),contentTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.payload=e.bytes();break;case 2:r.contentTopic=e.string();break;case 3:r.version=e.uint32();break;case 10:r.timestamp=e.sint64();break;case 11:r.meta=e.bytes();break;case 21:r.rateLimitProof=fm.codec().decode(e,e.uint32());break;case 31:r.ephemeral=e.bool();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(pm||(pm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.digest&&e.digest.byteLength>0&&(t.uint32(10),t.bytes(e.digest)),null!=e.receiverTime&&0n!==e.receiverTime&&(t.uint32(16),t.sint64(e.receiverTime)),null!=e.senderTime&&0n!==e.senderTime&&(t.uint32(24),t.sint64(e.senderTime)),null!=e.pubsubTopic&&""!==e.pubsubTopic&&(t.uint32(34),t.string(e.pubsubTopic)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={digest:new Uint8Array(0),receiverTime:0n,senderTime:0n,pubsubTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.digest=e.bytes();break;case 2:r.receiverTime=e.sint64();break;case 3:r.senderTime=e.sint64();break;case 4:r.pubsubTopic=e.string();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(gm||(gm={})),function(e){let t,r,n;!function(e){e.BACKWARD="BACKWARD",e.FORWARD="FORWARD"}(t=e.Direction||(e.Direction={})),function(e){e[e.BACKWARD=0]="BACKWARD",e[e.FORWARD=1]="FORWARD"}(r||(r={})),function(e){e.codec=()=>Wf(r)}(t=e.Direction||(e.Direction={})),e.codec=()=>(null==n&&(n=Qf((function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==n.lengthDelimited&&r.fork(),null!=t.pageSize&&(r.uint32(8),r.uint64(t.pageSize)),null!=t.cursor&&(r.uint32(18),gm.codec().encode(t.cursor,r)),null!=t.direction&&(r.uint32(24),e.Direction.codec().encode(t.direction,r)),!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={},i=null==r?t.len:t.pos+r;for(;t.pos<i;){const r=t.uint32();switch(r>>>3){case 1:n.pageSize=t.uint64();break;case 2:n.cursor=gm.codec().decode(t,t.uint32());break;case 3:n.direction=e.Direction.codec().decode(t);break;default:t.skipType(7&r)}}return n}))),n),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(mm||(mm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.contentTopic&&""!==e.contentTopic&&(t.uint32(10),t.string(e.contentTopic)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={contentTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3===1)r.contentTopic=e.string();else e.skipType(7&t)}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(ym||(ym={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.pubsubTopic&&(t.uint32(18),t.string(e.pubsubTopic)),null!=e.contentFilters)for(const n of e.contentFilters)t.uint32(26),ym.codec().encode(n,t);null!=e.pagingInfo&&(t.uint32(34),mm.codec().encode(e.pagingInfo,t)),null!=e.startTime&&(t.uint32(40),t.sint64(e.startTime)),null!=e.endTime&&(t.uint32(48),t.sint64(e.endTime)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={contentFilters:[]},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 2:r.pubsubTopic=e.string();break;case 3:r.contentFilters.push(ym.codec().decode(e,e.uint32()));break;case 4:r.pagingInfo=mm.codec().decode(e,e.uint32());break;case 5:r.startTime=e.sint64();break;case 6:r.endTime=e.sint64();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(vm||(vm={})),function(e){let t,r,n;!function(e){e.NONE="NONE",e.INVALID_CURSOR="INVALID_CURSOR"}(t=e.HistoryError||(e.HistoryError={})),function(e){e[e.NONE=0]="NONE",e[e.INVALID_CURSOR=1]="INVALID_CURSOR"}(r||(r={})),function(e){e.codec=()=>Wf(r)}(t=e.HistoryError||(e.HistoryError={})),e.codec=()=>(null==n&&(n=Qf((function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==i.lengthDelimited&&n.fork(),null!=t.messages)for(const e of t.messages)n.uint32(18),Em.codec().encode(e,n);null!=t.pagingInfo&&(n.uint32(26),mm.codec().encode(t.pagingInfo,n)),null!=t.error&&0!==r[t.error]&&(n.uint32(32),e.HistoryError.codec().encode(t.error,n)),!1!==i.lengthDelimited&&n.ldelim()}),((r,n)=>{const i={messages:[],error:t.NONE},o=null==n?r.len:r.pos+n;for(;r.pos<o;){const t=r.uint32();switch(t>>>3){case 2:i.messages.push(Em.codec().decode(r,r.uint32()));break;case 3:i.pagingInfo=mm.codec().decode(r,r.uint32());break;case 4:i.error=e.HistoryError.codec().decode(r);break;default:r.skipType(7&t)}}return i}))),n),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(bm||(bm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.requestId&&""!==e.requestId&&(t.uint32(10),t.string(e.requestId)),null!=e.query&&(t.uint32(18),vm.codec().encode(e.query,t)),null!=e.response&&(t.uint32(26),bm.codec().encode(e.response,t)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={requestId:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.requestId=e.string();break;case 2:r.query=vm.codec().decode(e,e.uint32());break;case 3:r.response=bm.codec().decode(e,e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(wm||(wm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.proof&&e.proof.byteLength>0&&(t.uint32(10),t.bytes(e.proof)),null!=e.merkleRoot&&e.merkleRoot.byteLength>0&&(t.uint32(18),t.bytes(e.merkleRoot)),null!=e.epoch&&e.epoch.byteLength>0&&(t.uint32(26),t.bytes(e.epoch)),null!=e.shareX&&e.shareX.byteLength>0&&(t.uint32(34),t.bytes(e.shareX)),null!=e.shareY&&e.shareY.byteLength>0&&(t.uint32(42),t.bytes(e.shareY)),null!=e.nullifier&&e.nullifier.byteLength>0&&(t.uint32(50),t.bytes(e.nullifier)),null!=e.rlnIdentifier&&e.rlnIdentifier.byteLength>0&&(t.uint32(58),t.bytes(e.rlnIdentifier)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={proof:new Uint8Array(0),merkleRoot:new Uint8Array(0),epoch:new Uint8Array(0),shareX:new Uint8Array(0),shareY:new Uint8Array(0),nullifier:new Uint8Array(0),rlnIdentifier:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.proof=e.bytes();break;case 2:r.merkleRoot=e.bytes();break;case 3:r.epoch=e.bytes();break;case 4:r.shareX=e.bytes();break;case 5:r.shareY=e.bytes();break;case 6:r.nullifier=e.bytes();break;case 7:r.rlnIdentifier=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(_m||(_m={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.payload&&e.payload.byteLength>0&&(t.uint32(10),t.bytes(e.payload)),null!=e.contentTopic&&""!==e.contentTopic&&(t.uint32(18),t.string(e.contentTopic)),null!=e.version&&(t.uint32(24),t.uint32(e.version)),null!=e.timestamp&&(t.uint32(80),t.sint64(e.timestamp)),null!=e.meta&&(t.uint32(90),t.bytes(e.meta)),null!=e.rateLimitProof&&(t.uint32(170),_m.codec().encode(e.rateLimitProof,t)),null!=e.ephemeral&&(t.uint32(248),t.bool(e.ephemeral)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={payload:new Uint8Array(0),contentTopic:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.payload=e.bytes();break;case 2:r.contentTopic=e.string();break;case 3:r.version=e.uint32();break;case 10:r.timestamp=e.sint64();break;case 11:r.meta=e.bytes();break;case 21:r.rateLimitProof=_m.codec().decode(e,e.uint32());break;case 31:r.ephemeral=e.bool();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Em||(Em={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.enr&&(t.uint32(10),t.bytes(e.enr)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3===1)r.enr=e.bytes();else e.skipType(7&t)}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Am||(Am={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.numPeers&&(t.uint32(8),t.uint64(e.numPeers)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3===1)r.numPeers=e.uint64();else e.skipType(7&t)}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Sm||(Sm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.peerInfos)for(const n of e.peerInfos)t.uint32(10),Am.codec().encode(n,t);!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={peerInfos:[]},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3===1)r.peerInfos.push(Am.codec().decode(e,e.uint32()));else e.skipType(7&t)}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(km||(km={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.query&&(t.uint32(10),Sm.codec().encode(e.query,t)),null!=e.response&&(t.uint32(18),km.codec().encode(e.response,t)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.query=Sm.codec().decode(e,e.uint32());break;case 2:r.response=km.codec().decode(e,e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(xm||(xm={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.clusterId&&(t.uint32(8),t.uint32(e.clusterId)),null!=e.shards)for(const n of e.shards)t.uint32(16),t.uint32(n);!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={shards:[]},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.clusterId=e.uint32();break;case 2:r.shards.push(e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Im||(Im={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.clusterId&&(t.uint32(8),t.uint32(e.clusterId)),null!=e.shards)for(const n of e.shards)t.uint32(16),t.uint32(n);!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={shards:[]},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.clusterId=e.uint32();break;case 2:r.shards.push(e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Tm||(Tm={}));const Pm=new qs("message:version-0"),Rm=BigInt(1e6);class Cm{constructor(e,t){We(this,"pubsubTopic",void 0),We(this,"proto",void 0),this.pubsubTopic=e,this.proto=t}get ephemeral(){return Boolean(this.proto.ephemeral)}get payload(){return this.proto.payload}get contentTopic(){return this.proto.contentTopic}get _rawTimestamp(){return this.proto.timestamp}get timestamp(){try{if(this.proto.timestamp){const e=this.proto.timestamp/Rm;return new Date(Number(e))}return}catch(e){return}}get meta(){return this.proto.meta}get version(){var e;return null!==(e=this.proto.version)&&void 0!==e?e:0}get rateLimitProof(){return this.proto.rateLimitProof}}class Bm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(We(this,"contentTopic",void 0),We(this,"ephemeral",void 0),We(this,"pubsubTopic",void 0),We(this,"metaSetter",void 0),this.contentTopic=e,this.ephemeral=t,this.pubsubTopic=r,this.metaSetter=n,!e||""===e)throw new Error("Content topic must be specified")}async toWire(e){return Xg.encode(await this.toProtoObj(e))}async toProtoObj(e){var t;const r=null!==(t=e.timestamp)&&void 0!==t?t:new Date,n={payload:e.payload,version:0,contentTopic:this.contentTopic,timestamp:BigInt(r.valueOf())*Rm,meta:void 0,rateLimitProof:e.rateLimitProof,ephemeral:this.ephemeral};if(this.metaSetter){const e=this.metaSetter(n);return{...n,meta:e}}return n}}function Mm(e){let{pubsubTopic:t,pubsubTopicShardInfo:r,contentTopic:n,ephemeral:i,metaSetter:o}=e;return new Bm(n,i,Ls(n,null!==t&&void 0!==t?t:r),o)}class Nm{constructor(e,t){if(We(this,"pubsubTopic",void 0),We(this,"contentTopic",void 0),this.pubsubTopic=e,this.contentTopic=t,!t||""===t)throw new Error("Content topic must be specified")}fromWireToProtoObj(e){var t,r,n,i,o;const s=Xg.decode(e);return Promise.resolve({payload:s.payload,contentTopic:s.contentTopic,version:null!==(t=s.version)&&void 0!==t?t:void 0,timestamp:null!==(r=s.timestamp)&&void 0!==r?r:void 0,meta:null!==(n=s.meta)&&void 0!==n?n:void 0,rateLimitProof:null!==(i=s.rateLimitProof)&&void 0!==i?i:void 0,ephemeral:null!==(o=s.ephemeral)&&void 0!==o&&o})}async fromProtoObj(e,t){var r;return null!==(r=t.version)&&void 0!==r&&r?(Pm.error("Failed to decode due to incorrect version, expected:",0,", actual:",t.version),Promise.resolve(void 0)):new Cm(e,t)}}const Om=new qs("keep-alive");class Dm{constructor(e,t){We(this,"pingKeepAliveTimers",void 0),We(this,"relayKeepAliveTimers",void 0),We(this,"options",void 0),We(this,"relay",void 0),this.pingKeepAliveTimers=new Map,this.relayKeepAliveTimers=new Map,this.options=e,this.relay=t}start(e,t,r){this.stop(e);const{pingKeepAlive:n,relayKeepAlive:i}=this.options,o=e.toString();if(0!==n){const i=setInterval((()=>{(async()=>{let i;try{try{i=await t.ping(e),Om.info("Ping succeeded (".concat(o,")"),i)}catch(s){return void Om.error("Ping failed for peer (".concat(o,").\n                Next ping will be attempted in ").concat(n," seconds.\n              "))}try{await r.patch(e,{metadata:{ping:Rs(i.toString())}})}catch(a){Om.error("Failed to update ping",a)}}catch(a){Om.error("Ping failed (".concat(o,")"),a)}})()}),1e3*n);this.pingKeepAliveTimers.set(o,i)}const s=this.relay;if(s&&0!==i){const t=this.scheduleRelayPings(s,i,e.toString());this.relayKeepAliveTimers.set(e,t)}}stop(e){const t=e.toString();var r;(this.pingKeepAliveTimers.has(t)&&(clearInterval(this.pingKeepAliveTimers.get(t)),this.pingKeepAliveTimers.delete(t)),this.relayKeepAliveTimers.has(e))&&(null===(r=this.relayKeepAliveTimers.get(e))||void 0===r||r.map(clearInterval),this.relayKeepAliveTimers.delete(e))}stopAll(){for(const e of[...Object.values(this.pingKeepAliveTimers),...Object.values(this.relayKeepAliveTimers)])clearInterval(e);this.pingKeepAliveTimers.clear(),this.relayKeepAliveTimers.clear()}connectionsExist(){return this.pingKeepAliveTimers.size>0||this.relayKeepAliveTimers.size>0}scheduleRelayPings(e,t,r){const n=[];for(const i of e.pubsubTopics){if(!e.getMeshPeers(i).includes(r))continue;const o=Mm({pubsubTopicShardInfo:Ms(i),contentTopic:"/relay-ping/1/ping/null",ephemeral:!0}),s=setInterval((()=>{Om.info("Sending Waku Relay ping message"),e.send(o,{payload:new Uint8Array([1])}).catch((e=>Om.error("Failed to send relay ping",e)))}),1e3*t);n.push(s)}return n}}const Lm=new qs("connection-manager");class Um extends Ks{isConnected(){return this.online}toggleOnline(){this.online||(this.online=!0,this.dispatchEvent(new Gs(ri.CONNECTION_STATUS,{detail:this.online})))}toggleOffline(){this.online&&0==this.libp2p.getConnections().length&&(this.online=!1,this.dispatchEvent(new Gs(ri.CONNECTION_STATUS,{detail:this.online})))}static create(e,t,r,n,i,o){let s=Um.instances.get(e);return s||(s=new Um(t,r,n,i,o),Um.instances.set(e,s)),s}async getPeersByDiscovery(){const e=await this.libp2p.peerStore.all(),t=this.libp2p.getConnections().map((e=>e.remotePeer)),r=[],n=[],i=[],o=[];for(const s of e){const e=await this.getTagNamesForPeer(s.id);e.includes(ei.BOOTSTRAP)?r.push(s):e.includes(ei.PEER_EXCHANGE)&&n.push(s)}for(const s of t){const e=await this.libp2p.peerStore.get(s),t=await this.getTagNamesForPeer(s);t.includes(ei.BOOTSTRAP)?i.push(e):t.includes(ei.PEER_EXCHANGE)&&o.push(e)}return{DISCOVERED:{[ei.BOOTSTRAP]:r,[ei.PEER_EXCHANGE]:n},CONNECTED:{[ei.BOOTSTRAP]:i,[ei.PEER_EXCHANGE]:o}}}constructor(e,t,r,n,i){super(),We(this,"configuredPubsubTopics",void 0),We(this,"keepAliveManager",void 0),We(this,"options",void 0),We(this,"libp2p",void 0),We(this,"dialAttemptsForPeer",new Map),We(this,"dialErrorsForPeer",new Map),We(this,"currentActiveParallelDialCount",0),We(this,"pendingPeerDialQueue",[]),We(this,"online",!1),We(this,"onEventHandlers",{"peer:discovery":e=>{(async()=>{const{id:t}=e.detail;await this.dispatchDiscoveryEvent(t);try{await this.attemptDial(t)}catch(r){Lm.error("Error dialing peer ".concat(t.toString()," : ").concat(r))}})()},"peer:connect":e=>{(async()=>{const t=e.detail;this.keepAliveManager.start(t,this.libp2p.services.ping,this.libp2p.peerStore);if((await this.getTagNamesForPeer(t)).includes(ei.BOOTSTRAP)){this.libp2p.getConnections().filter((e=>e.tags.includes(ei.BOOTSTRAP))).length>this.options.maxBootstrapPeersAllowed?await this.dropConnection(t):this.dispatchEvent(new Gs(ti.PEER_CONNECT_BOOTSTRAP,{detail:t}))}else this.dispatchEvent(new Gs(ti.PEER_CONNECT_PEER_EXCHANGE,{detail:t}));this.toggleOnline()})()},"peer:disconnect":e=>{(async()=>{this.keepAliveManager.stop(e.detail),this.toggleOffline()})()}}),this.configuredPubsubTopics=r,this.libp2p=e,this.configuredPubsubTopics=r,this.options={maxDialAttemptsForPeer:3,maxBootstrapPeersAllowed:1,maxParallelDials:3,...i},this.keepAliveManager=new Dm(t,n),this.run().then((()=>Lm.info("Connection Manager is now running"))).catch((e=>Lm.error("Unexpected error while running service",e))),this.dialPeerStorePeers().catch((e=>Lm.error("Unexpected error while dialing peer store peers",e)))}async dialPeerStorePeers(){const e=await this.libp2p.peerStore.all(),t=[];for(const n of e)this.libp2p.getConnections().find((e=>e.remotePeer===n.id))||t.push(this.attemptDial(n.id));try{await Promise.all(t)}catch(r){Lm.error("Unexpected error while dialing peer store peers",r)}}async run(){this.startPeerDiscoveryListener(),this.startPeerConnectionListener(),this.startPeerDisconnectionListener()}stop(){this.keepAliveManager.stopAll(),this.libp2p.removeEventListener("peer:connect",this.onEventHandlers["peer:connect"]),this.libp2p.removeEventListener("peer:disconnect",this.onEventHandlers["peer:disconnect"]),this.libp2p.removeEventListener("peer:discovery",this.onEventHandlers["peer:discovery"])}async dialPeer(e){this.currentActiveParallelDialCount+=1;let t=0;for(;t<this.options.maxDialAttemptsForPeer;)try{Lm.info("Dialing peer ".concat(e.toString()," on attempt ").concat(t+1)),await this.libp2p.dial(e);const r=await this.getTagNamesForPeer(e);this.libp2p.getConnections(e).forEach((e=>{e.tags=Array.from(new Set([...e.tags,...r]))})),this.dialAttemptsForPeer.set(e.toString(),-1);break}catch(r){r instanceof AggregateError?Lm.error("Error dialing peer ".concat(e.toString()," - ").concat(r.errors)):Lm.error("Error dialing peer ".concat(e.toString()," - ").concat(r.message)),this.dialErrorsForPeer.set(e.toString(),r),t++,this.dialAttemptsForPeer.set(e.toString(),t)}if(this.currentActiveParallelDialCount--,this.processDialQueue(),t===this.options.maxDialAttemptsForPeer)try{const t=this.dialErrorsForPeer.get(e.toString());if(t){let r;t instanceof AggregateError?t.errors?0===t.errors.length?Lm.warn("Errors array is empty for AggregateError"):r=JSON.stringify(t.errors[0]):Lm.warn("No errors array found for AggregateError"):r=t.message,Lm.info("Deleting undialable peer ".concat(e.toString()," from peer store. Reason: ").concat(r))}this.dialErrorsForPeer.delete(e.toString()),await this.libp2p.peerStore.delete(e)}catch(r){throw new Error("Error deleting undialable peer ".concat(e.toString()," from peer store - ").concat(r))}}async dropConnection(e){try{this.keepAliveManager.stop(e),await this.libp2p.hangUp(e),Lm.info("Dropped connection with peer ".concat(e.toString()))}catch(t){Lm.error("Error dropping connection with peer ".concat(e.toString()," - ").concat(t))}}processDialQueue(){if(this.pendingPeerDialQueue.length>0&&this.currentActiveParallelDialCount<this.options.maxParallelDials){const e=this.pendingPeerDialQueue.shift();if(!e)return;this.attemptDial(e).catch((e=>{Lm.error(e)}))}}startPeerDiscoveryListener(){this.libp2p.addEventListener("peer:discovery",this.onEventHandlers["peer:discovery"])}startPeerConnectionListener(){this.libp2p.addEventListener("peer:connect",this.onEventHandlers["peer:connect"])}startPeerDisconnectionListener(){this.libp2p.addEventListener("peer:disconnect",this.onEventHandlers["peer:disconnect"])}async attemptDial(e){await this.shouldDialPeer(e)&&(this.currentActiveParallelDialCount>=this.options.maxParallelDials?this.pendingPeerDialQueue.push(e):this.dialPeer(e).catch((t=>{Lm.error("Error dialing peer ".concat(e.toString()," : ").concat(t))})))}async shouldDialPeer(e){if(this.libp2p.getConnections(e).length>0)return Lm.warn("Already connected to peer ".concat(e.toString(),". Not dialing.")),!1;if(!await this.isPeerTopicConfigured(e)){const t=await this.getPeerShardInfo(e,this.libp2p.peerStore);return Lm.warn("Discovered peer ".concat(e.toString()," with ShardInfo ").concat(t," is not part of any of the configured pubsub topics (").concat(this.configuredPubsubTopics,").\n            Not dialing.")),!1}return await this.isPeerDialableBasedOnBootstrapStatus(e)?!this.dialAttemptsForPeer.has(e.toString())||(Lm.warn("Peer ".concat(e.toString()," has already been attempted dial before, or already has a dial attempt in progress, skipping dial")),!1):(Lm.warn("Peer ".concat(e.toString()," is not dialable based on bootstrap status. Not dialing.")),!1)}async isPeerDialableBasedOnBootstrapStatus(e){if(!(await this.getTagNamesForPeer(e)).some((e=>e===ei.BOOTSTRAP)))return!0;if(this.libp2p.getConnections().filter((e=>e.tags.find((e=>e===ei.BOOTSTRAP)))).length<this.options.maxBootstrapPeersAllowed)return!0;return!1}async dispatchDiscoveryEvent(e){const t=(await this.getTagNamesForPeer(e)).includes(ei.BOOTSTRAP);this.dispatchEvent(new Gs(t?ti.PEER_DISCOVERY_BOOTSTRAP:ti.PEER_DISCOVERY_PEER_EXCHANGE,{detail:e}))}async getTagNamesForPeer(e){try{const t=await this.libp2p.peerStore.get(e);return Array.from(t.tags.keys())}catch(t){return Lm.error("Failed to get peer ".concat(e,", error: ").concat(t)),[]}}async isPeerTopicConfigured(e){const t=await this.getPeerShardInfo(e,this.libp2p.peerStore);if(!t)return!0;return Bs(t).some((e=>this.configuredPubsubTopics.includes(e)))}async getPeerShardInfo(e,t){const r=(await t.get(e)).metadata.get("shardInfo");if(r)return cg(r)}}We(Um,"instances",new Map);const Fm="js-waku",jm=new qs("waku");class qm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;We(this,"libp2p",void 0),We(this,"relay",void 0),We(this,"store",void 0),We(this,"filter",void 0),We(this,"lightPush",void 0),We(this,"connectionManager",void 0),We(this,"pubsubTopics",void 0),this.pubsubTopics=n?Bs(n):t.length>0?t:[ni],this.libp2p=r,i&&(this.store=i(r)),s&&(this.filter=s(r)),o&&(this.lightPush=o(r)),a&&(this.relay=a(r));const c=e.pingKeepAlive||300,u=this.relay?e.relayKeepAlive||300:0,l=this.libp2p.peerId.toString();this.connectionManager=Um.create(l,r,{pingKeepAlive:c,relayKeepAlive:u},this.pubsubTopics,this.relay),jm.info("Waku node created",l,"relay: ".concat(!!this.relay,", store: ").concat(!!this.store,", light push: ").concat(!!this.lightPush,", filter: ").concat(!!this.filter))}async dial(e,t){const r=null!==t&&void 0!==t?t:[],n=function(e){return Je(e)?e:Zn(e)}(e);"undefined"===typeof t&&(this.relay&&r.push(Yn.Relay),this.store&&r.push(Yn.Store),this.filter&&r.push(Yn.Filter),this.lightPush&&r.push(Yn.LightPush));const i=[];return r.includes(Yn.Relay)&&(this.relay?this.relay.gossipSub.multicodecs.forEach((e=>i.push(e))):jm.error("Relay codec not included in dial codec: protocol not mounted locally")),r.includes(Yn.Store)&&(this.store?i.push(this.store.multicodec):jm.error("Store codec not included in dial codec: protocol not mounted locally")),r.includes(Yn.LightPush)&&(this.lightPush?i.push(this.lightPush.multicodec):jm.error("Light Push codec not included in dial codec: protocol not mounted locally")),r.includes(Yn.Filter)&&(this.filter?i.push(this.filter.multicodec):jm.error("Filter codec not included in dial codec: protocol not mounted locally")),jm.info("Dialing to ".concat(n.toString()," with protocols ").concat(r)),this.libp2p.dialProtocol(n,i)}async start(){await this.libp2p.start()}async stop(){this.connectionManager.stop(),await this.libp2p.stop()}isStarted(){return this.libp2p.isStarted()}isConnected(){return this.connectionManager.isConnected()}getLocalMultiaddrWithID(){const e=this.libp2p.getMultiaddrs().find((e=>e.toString().match(/127\.0\.0\.1/)));if(!e||""===e.toString())throw"Not listening on localhost";return e+"/p2p/"+this.libp2p.peerId.toString()}}const zm=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{const t=[];for await(const r of e)t.push(r);return t})();const t=[];for(const r of e)t.push(r);return t};function Hm(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Km(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.alloc)?Hm(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function Vm(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?Hm(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Gm(e,t){if(null!=globalThis.Buffer)return Hm(globalThis.Buffer.concat(e,t));null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const r=Vm(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return Hm(r)}function Wm(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}let Qm;const Jm=Symbol.for("@achingbrain/uint8arraylist");function Zm(e,t){if(null==t||t<0)throw new RangeError("index is out of bounds");let r=0;for(const n of e){const e=r+n.byteLength;if(t<e)return{buf:n,index:t-r};r=e}throw new RangeError("index is out of bounds")}function Ym(e){return Boolean(null===e||void 0===e?void 0:e[Jm])}Qm=Symbol.iterator;class Xm{constructor(){We(this,"bufs",void 0),We(this,"length",void 0),We(this,Jm,!0),this.bufs=[],this.length=0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.length>0&&this.appendAll(t)}*[Qm](){yield*this.bufs}get byteLength(){return this.length}append(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.appendAll(t)}appendAll(e){let t=0;for(const r of e)if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.push(r);else{if(!Ym(r))throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");t+=r.byteLength,this.bufs.push(...r.bufs)}this.length+=t}prepend(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.prependAll(t)}prependAll(e){let t=0;for(const r of e.reverse())if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.unshift(r);else{if(!Ym(r))throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");t+=r.byteLength,this.bufs.unshift(...r.bufs)}this.length+=t}get(e){const t=Zm(this.bufs,e);return t.buf[t.index]}set(e,t){const r=Zm(this.bufs,e);r.buf[r.index]=t}write(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof Uint8Array)for(let r=0;r<e.length;r++)this.set(t+r,e[r]);else{if(!Ym(e))throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList");for(let r=0;r<e.length;r++)this.set(t+r,e.get(r))}}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength)return this.bufs=[],void(this.length=0);for(;this.bufs.length>0;){if(!(e>=this.bufs[0].byteLength)){this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift()}}}slice(e,t){const{bufs:r,length:n}=this._subList(e,t);return Gm(r,n)}subarray(e,t){const{bufs:r,length:n}=this._subList(e,t);return 1===r.length?r[0]:Gm(r,n)}sublist(e,t){const{bufs:r,length:n}=this._subList(e,t),i=new Xm;return i.length=n,i.bufs=[...r],i}_subList(e,t){var r,n;if(e=null!==(r=e)&&void 0!==r?r:0,t=null!==(n=t)&&void 0!==n?n:this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:this.bufs,length:this.length};const i=[];let o=0;for(let s=0;s<this.bufs.length;s++){const r=this.bufs[s],n=o,a=n+r.byteLength;if(o=a,e>=a)continue;const c=e>=n&&e<a,u=t>n&&t<=a;if(c&&u){if(e===n&&t===a){i.push(r);break}const o=e-n;i.push(r.subarray(o,o+(t-e)));break}if(c){if(0===e){i.push(r);continue}i.push(r.subarray(e-n))}else{if(u){if(t===a){i.push(r);break}i.push(r.subarray(0,t-n));break}i.push(r)}}return{bufs:i,length:t-e}}indexOf(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Ym(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const n=e instanceof Uint8Array?e:e.subarray();if(r=Number(null!==(t=r)&&void 0!==t?t:0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),0===e.length)return r>this.length?this.length:r;const i=n.byteLength;if(0===i)throw new TypeError("search must be at least 1 byte long");const o=new Int32Array(256);for(let l=0;l<256;l++)o[l]=-1;for(let l=0;l<i;l++)o[n[l]]=l;const s=o,a=this.byteLength-n.byteLength,c=n.byteLength-1;let u;for(let l=r;l<=a;l+=u){u=0;for(let e=c;e>=0;e--){const t=this.get(l+e);if(n[e]!==t){u=Math.max(1,e-s[t]);break}}if(0===u)return l}return-1}getInt8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){const r=Vm(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt8(0,t),this.write(r,e)}getInt16(e,t){const r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt16(0,t)}setInt16(e,t,r){const n=Km(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt16(0,t,r),this.write(n,e)}getInt32(e,t){const r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt32(0,t)}setInt32(e,t,r){const n=Km(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt32(0,t,r),this.write(n,e)}getBigInt64(e,t){const r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigInt64(0,t)}setBigInt64(e,t,r){const n=Km(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigInt64(0,t,r),this.write(n,e)}getUint8(e){const t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){const r=Vm(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint8(0,t),this.write(r,e)}getUint16(e,t){const r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,t)}setUint16(e,t,r){const n=Km(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint16(0,t,r),this.write(n,e)}getUint32(e,t){const r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(0,t)}setUint32(e,t,r){const n=Km(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,t,r),this.write(n,e)}getBigUint64(e,t){const r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigUint64(0,t)}setBigUint64(e,t,r){const n=Km(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigUint64(0,t,r),this.write(n,e)}getFloat32(e,t){const r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(0,t)}setFloat32(e,t,r){const n=Km(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat32(0,t,r),this.write(n,e)}getFloat64(e,t){const r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(0,t)}setFloat64(e,t,r){const n=Km(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat64(0,t,r),this.write(n,e)}equals(e){if(null==e)return!1;if(!(e instanceof Xm))return!1;if(e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!Wm(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){const r=new Xm;return r.bufs=e,null==t&&(t=e.reduce(((e,t)=>e+t.byteLength),0)),r.length=t,r}}function $m(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?(r=globalThis.Buffer.allocUnsafe(t),null!=globalThis.Buffer?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r):new Uint8Array(t);var r}function ey(e){return null!=e[Symbol.asyncIterator]}const ty=e=>{const t=on(e),r=$m(t);return sn(e,r),ty.bytes=t,r};function ry(e,t){var r,n;const i=null!==(n=(t=null!==(r=t)&&void 0!==r?r:{}).lengthEncoder)&&void 0!==n?n:ty;function*o(e){const t=i(e.byteLength);t instanceof Uint8Array?yield t:yield*t,e instanceof Uint8Array?yield e:yield*e}return ey(e)?async function*(){for await(const t of e)yield*o(t)}():function*(){for(const t of e)yield*o(t)}()}ty.bytes=0,ry.single=(e,t)=>{var r,n;const i=null!==(n=(t=null!==(r=t)&&void 0!==r?r:{}).lengthEncoder)&&void 0!==n?n:ty;return new Xm(i(e.byteLength),e)};var ny=__webpack_require__(7963);const iy=8,oy=4194304;var sy;!function(e){e[e.LENGTH=0]="LENGTH",e[e.DATA=1]="DATA"}(sy||(sy={}));const ay=e=>{const t=an(e);return ay.bytes=on(t),t};function cy(e,t){var r,n,i;const o=new Xm;let s=sy.LENGTH,a=-1;const c=null!==(r=null===t||void 0===t?void 0:t.lengthDecoder)&&void 0!==r?r:ay,u=null!==(n=null===t||void 0===t?void 0:t.maxLengthLength)&&void 0!==n?n:iy,l=null!==(i=null===t||void 0===t?void 0:t.maxDataLength)&&void 0!==i?i:oy;function*d(){for(;o.byteLength>0;){if(s===sy.LENGTH)try{if(a=c(o),a<0)throw ny(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(a>l)throw ny(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const e=c.bytes;o.consume(e),null!=(null===t||void 0===t?void 0:t.onLength)&&t.onLength(a),s=sy.DATA}catch(e){if(e instanceof RangeError){if(o.byteLength>u)throw ny(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw e}if(s===sy.DATA){if(o.byteLength<a)break;const e=o.sublist(0,a);o.consume(a),null!=(null===t||void 0===t?void 0:t.onData)&&t.onData(e),yield e,s=sy.LENGTH}}}return ey(e)?async function*(){for await(const t of e)o.append(t),yield*d();if(o.byteLength>0)throw ny(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(const t of e)o.append(t),yield*d();if(o.byteLength>0)throw ny(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}function uy(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}ay.bytes=0,cy.fromReader=(e,t)=>{let r=1;return cy(async function*(){for(;;)try{const{done:t,value:n}=await e.next(r);if(!0===t)return;null!=n&&(yield n)}catch(t){if("ERR_UNDER_READ"===t.code)return{done:!0,value:null};throw t}finally{r=1}}(),{...null!==t&&void 0!==t?t:{},onLength:e=>{r=e}})};class ly{constructor(e){if(We(this,"buffer",void 0),We(this,"mask",void 0),We(this,"top",void 0),We(this,"btm",void 0),We(this,"next",void 0),!(e>0)||0!==(e-1&e))throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class dy{constructor(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};We(this,"size",void 0),We(this,"hwm",void 0),We(this,"head",void 0),We(this,"tail",void 0),this.hwm=null!==(e=t.splitLimit)&&void 0!==e?e:16,this.head=new ly(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return null!=(null===e||void 0===e?void 0:e.byteLength)?e.byteLength:1}push(e){if(null!=(null===e||void 0===e?void 0:e.value)&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const t=this.head;this.head=t.next=new ly(2*this.head.buffer.length),this.head.push(e)}}shift(){var e;let t=this.tail.shift();if(void 0===t&&null!=this.tail.next){const e=this.tail.next;this.tail.next=null,this.tail=e,t=this.tail.shift()}return null!=(null===(e=t)||void 0===e?void 0:e.value)&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}}class hy extends Error{constructor(e,t){super(null!==e&&void 0!==e?e:"The operation was aborted"),We(this,"type",void 0),We(this,"code",void 0),this.type="aborted",this.code=null!==t&&void 0!==t?t:"ABORT_ERR"}}function fy(){return py((e=>{const t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function py(e,t){var r;let n,i,o,s=(t=null!==(r=t)&&void 0!==r?r:{}).onEnd,a=new dy,c=uy();const u=e=>null!=i?i(e):(a.push(e),n),l=e=>{var r;if(o)return n;if(!0!==(null===(r=t)||void 0===r?void 0:r.objectMode)&&null==(null===e||void 0===e?void 0:e.byteLength))throw new Error("objectMode was not true but tried to push non-Uint8Array value");return u({done:!1,value:e})},d=e=>o?n:(o=!0,null!=e?(e=>(a=new dy,null!=i?i({error:e}):(a.push({error:e}),n)))(e):u({done:!0}));if(n={[Symbol.asyncIterator](){return this},next:async()=>{try{return a.isEmpty()?o?{done:!0}:await new Promise(((t,r)=>{i=o=>{i=null,a.push(o);try{t(e(a))}catch(s){r(s)}return n}})):e(a)}finally{a.isEmpty()&&queueMicrotask((()=>{c.resolve(),c=uy()}))}},return:()=>(a=new dy,d(),{done:!0}),throw:e=>(d(e),{done:!0}),push:l,end:d,get readableLength(){return a.size},onEmpty:async e=>{const t=null===e||void 0===e?void 0:e.signal;if(null===t||void 0===t||t.throwIfAborted(),a.isEmpty())return;let r,n;null!=t&&(r=new Promise(((e,r)=>{n=()=>{r(new hy)},t.addEventListener("abort",n)})));try{await Promise.race([c.promise,r])}finally{null!=n&&null!=t&&(null===t||void 0===t||t.removeEventListener("abort",n))}}},null==s)return n;const h=n;return n={[Symbol.asyncIterator](){return this},next:()=>h.next(),throw:e=>(h.throw(e),null!=s&&(s(e),s=void 0),{done:!0}),return:()=>(h.return(),null!=s&&(s(),s=void 0),{done:!0}),push:l,end:e=>(h.end(e),null!=s&&(s(e),s=void 0),n),get readableLength(){return h.readableLength},onEmpty:e=>h.onEmpty(e)},n}const gy=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=[];for(const i of t)null==i[Symbol.asyncIterator]&&n.push(i);return n.length===t.length?function*(){for(const e of n)yield*e}():async function*(){const e=fy({objectMode:!0});Promise.resolve().then((async()=>{try{await Promise.all(t.map((async t=>{for await(const r of t)e.push(r)}))),e.end()}catch(r){e.end(r)}})),yield*e}()};function my(e){if(null==e)throw new Error("Empty pipeline");if(wy(e)){const t=e;e=()=>t.source}else if(by(e)||vy(e)){const t=e;e=()=>t}for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=[e,...r];if(i.length>1&&wy(i[i.length-1])&&(i[i.length-1]=i[i.length-1].sink),i.length>2)for(let o=1;o<i.length-1;o++)wy(i[o])&&(i[o]=_y(i[o]));return yy(...i)}const yy=function(){let e;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(;r.length>0;)e=r.shift()(e);return e},vy=e=>null!=(null===e||void 0===e?void 0:e[Symbol.asyncIterator]),by=e=>null!=(null===e||void 0===e?void 0:e[Symbol.iterator]),wy=e=>null!=e&&(null!=e.sink&&null!=e.source),_y=e=>t=>{const r=e.sink(t);if(null!=(null===r||void 0===r?void 0:r.then)){const t=fy({objectMode:!0});let n;r.then((()=>{t.end()}),(e=>{t.end(e)}));const i=e.source;if(vy(i))n=async function*(){yield*i,t.end()};else{if(!by(i))throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");n=function*(){yield*i,t.end()}}return gy(t,n())}return e.source};async function Ey(e,t){const r=[];return await e.forEach((e=>{for(let n=0;n<t.length;n++)if(e.protocols.includes(t[n])){r.push(e);break}})),r}async function Ay(e,t,r){let n,i;if(r){if(n=await e.get(r),!n)throw new Error("Failed to retrieve connection details for provided peer in peer store: ".concat(r.toString()))}else{const r=await Ey(e,t);if(n=await async function(e,t){if(0===t.length)return;const r=(await Promise.all(t.map((async t=>{var r;const n=(await e.get(t.id)).metadata.get("ping");return n?{peer:t,ping:null!==(r=Number(Ps(n)))&&void 0!==r?r:1/0}:{peer:t,ping:1/0}})))).sort(((e,t)=>e.ping-t.ping))[0];return r&&r.ping!==1/0?r.peer:void 0}(e,r),!n&&(n=function(e){if(0===e.length)return;return e[Math.round(Math.random()*(e.length-1))]}(r),!n))throw new Error("Failed to find known peer that registers protocols: ".concat(t))}for(const o of t)n.protocols.includes(o)&&(i=o);if(!i)throw new Error("Peer does not register required protocols (".concat(n.id.toString(),"): ").concat(t));return{peer:n,protocol:i}}class Sy{constructor(e,t,r){We(this,"multicodec",void 0),We(this,"getConnections",void 0),We(this,"addEventListener",void 0),We(this,"streamPool",void 0),We(this,"log",void 0),We(this,"handlePeerUpdateStreamPool",(e=>{const t=e.detail.peer;t.protocols.includes(this.multicodec)&&(this.log.info("Preemptively opening a stream to ".concat(t.id.toString())),this.prepareNewStream(t))})),this.multicodec=e,this.getConnections=t,this.addEventListener=r,this.log=new qs("stream-manager:".concat(e)),this.addEventListener("peer:update",this.handlePeerUpdateStreamPool.bind(this)),this.getStream=this.getStream.bind(this),this.streamPool=new Map}async getStream(e){const t=e.id.toString(),r=this.streamPool.get(t);if(!r)return this.newStream(e);this.streamPool.delete(t),this.prepareNewStream(e);const n=await r;return n&&"closed"!==n.status?n:this.newStream(e)}async newStream(e){const t=function(e){if(!e.length)return;if(1===e.length)return e[0];let t;return e.forEach((e=>{"open"===e.status&&(t?e.timeline.open>t.timeline.open&&(t=e):t=e)})),t}(this.getConnections(e.id));if(!t)throw new Error("Failed to get a connection to the peer");return t.newStream(this.multicodec)}prepareNewStream(e){const t=this.newStream(e).catch((()=>{this.log.error("Failed to prepare a new stream for ".concat(e.id.toString()))}));this.streamPool.set(e.id.toString(),t)}}class ky{constructor(e,t){We(this,"multicodec",void 0),We(this,"components",void 0),We(this,"addLibp2pEventListener",void 0),We(this,"removeLibp2pEventListener",void 0),We(this,"streamManager",void 0),this.multicodec=e,this.components=t,this.addLibp2pEventListener=t.events.addEventListener.bind(t.events),this.removeLibp2pEventListener=t.events.removeEventListener.bind(t.events),this.streamManager=new Sy(e,t.connectionManager.getConnections.bind(t.connectionManager),this.addLibp2pEventListener)}async getStream(e){return this.streamManager.getStream(e)}get peerStore(){return this.components.peerStore}async peers(){return Ey(this.peerStore,[this.multicodec])}async getPeer(e){const{peer:t}=await Ay(this.peerStore,[this.multicodec],e);return t}async getPeers(){let{numPeers:e,maxBootstrapPeers:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxBootstrapPeers:1,numPeers:0};return async function(e,t,r){const n=e.filter((e=>e.tags.has(ei.BOOTSTRAP))).slice(0,r),i=e.filter((e=>!e.tags.has(ei.BOOTSTRAP)));if(0===t)return[...n,...i];const o=[...n];for(;o.length<t&&i.length>0;){const e=Math.floor(Math.random()*i.length),t=i.splice(e,1)[0];o.push(t)}return o}(await async function(e,t,r){const n=e.filter((e=>"open"===e.status)).map((async e=>{const n=await t.get(e.remotePeer);return n.protocols.some((e=>r.includes(e)))?n:null}));return(await Promise.all(n)).filter((e=>null!==e))}(this.components.connectionManager.getConnections(),this.peerStore,[this.multicodec]),e,t)}initializePubsubTopic(e){var t;return null!==(t=null===e||void 0===e?void 0:e.pubsubTopics)&&void 0!==t?t:null!==e&&void 0!==e&&e.shardInfo?Bs(e.shardInfo):[ni]}}const xy={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Iy;const Ty=new Uint8Array(16);function Py(){if(!Iy&&(Iy="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Iy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Iy(Ty)}const Ry=[];for(let tX=0;tX<256;++tX)Ry.push((tX+256).toString(16).slice(1));function Cy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ry[e[t+0]]+Ry[e[t+1]]+Ry[e[t+2]]+Ry[e[t+3]]+"-"+Ry[e[t+4]]+Ry[e[t+5]]+"-"+Ry[e[t+6]]+Ry[e[t+7]]+"-"+Ry[e[t+8]]+Ry[e[t+9]]+"-"+Ry[e[t+10]]+Ry[e[t+11]]+Ry[e[t+12]]+Ry[e[t+13]]+Ry[e[t+14]]+Ry[e[t+15]]}const By=function(e,t,r){if(xy.randomUUID&&!t&&!e)return xy.randomUUID();const n=(e=e||{}).random||(e.rng||Py)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return Cy(n)};class My{constructor(e){We(this,"proto",void 0),this.proto=e}static decode(e){const t=am.decode(e);return new My(t)}encode(){return am.encode(this.proto)}get wakuMessage(){return this.proto.wakuMessage}get pubsubTopic(){return this.proto.pubsubTopic}}class Ny{constructor(e){We(this,"proto",void 0),this.proto=e}static createSubscribeRequest(e,t){return new Ny({requestId:By(),filterSubscribeType:om.FilterSubscribeType.SUBSCRIBE,pubsubTopic:e,contentTopics:t})}static createUnsubscribeRequest(e,t){return new Ny({requestId:By(),filterSubscribeType:om.FilterSubscribeType.UNSUBSCRIBE,pubsubTopic:e,contentTopics:t})}static createUnsubscribeAllRequest(e){return new Ny({requestId:By(),filterSubscribeType:om.FilterSubscribeType.UNSUBSCRIBE_ALL,pubsubTopic:e,contentTopics:[]})}static createSubscriberPingRequest(){return new Ny({requestId:By(),filterSubscribeType:om.FilterSubscribeType.SUBSCRIBER_PING,pubsubTopic:"",contentTopics:[]})}static decode(e){const t=om.decode(e);return new Ny(t)}encode(){return om.encode(this.proto)}get filterSubscribeType(){return this.proto.filterSubscribeType}get requestId(){return this.proto.requestId}get pubsubTopic(){return this.proto.pubsubTopic}get contentTopics(){return this.proto.contentTopics}}class Oy{constructor(e){We(this,"proto",void 0),this.proto=e}static decode(e){const t=sm.decode(e);return new Oy(t)}encode(){return sm.encode(this.proto)}get statusCode(){return this.proto.statusCode}get statusDesc(){return this.proto.statusDesc}get requestId(){return this.proto.requestId}}const Dy=new qs("filter:v2"),Ly="/vac/waku/filter-subscribe/2.0.0-beta1",Uy="/vac/waku/filter-push/2.0.0-beta1";class Fy{constructor(e,t,r){We(this,"peer",void 0),We(this,"pubsubTopic",void 0),We(this,"newStream",void 0),We(this,"subscriptionCallbacks",void 0),this.peer=t,this.pubsubTopic=e,this.newStream=r,this.subscriptionCallbacks=new Map}async subscribe(e,t){const r=Array.isArray(e)?e:[e];r.forEach((e=>{if(e.pubsubTopic!==this.pubsubTopic)throw new Error("Pubsub topic not configured: decoder is configured for pubsub topic ".concat(e.pubsubTopic," but this subscription is for pubsub topic ").concat(this.pubsubTopic,". Please create a new Subscription for the different pubsub topic."))}));const n=oi(r),i=Array.from(n.keys()),o=await this.newStream(this.peer),s=Ny.createSubscribeRequest(this.pubsubTopic,i);try{const e=await my([s.encode()],ry,o,cy,(async e=>await zm(e)));if(!e||!e.length)throw Error("No response received for request ".concat(s.requestId,": ").concat(e));const{statusCode:t,requestId:r,statusDesc:n}=Oy.decode(e[0].slice());if(t<200||t>=300)throw new Error("Filter subscribe request ".concat(r," failed with status code ").concat(t,": ").concat(n));Dy.info("Subscribed to peer ",this.peer.id.toString(),"for content topics",i)}catch(a){throw new Error("Error subscribing to peer: "+this.peer.id.toString()+" for content topics: "+i+": "+a)}n.forEach(((e,r)=>{const n={decoders:e,callback:t};this.subscriptionCallbacks.set(r,n)}))}async unsubscribe(e){const t=await this.newStream(this.peer),r=Ny.createUnsubscribeRequest(this.pubsubTopic,e);try{await my([r.encode()],ry,t.sink)}catch(n){throw new Error("Error subscribing: "+n)}e.forEach((e=>{this.subscriptionCallbacks.delete(e)}))}async ping(){const e=await this.newStream(this.peer),t=Ny.createSubscriberPingRequest();try{const r=await my([t.encode()],ry,e,cy,(async e=>await zm(e)));if(!r||!r.length)throw Error("No response received for request ".concat(t.requestId,": ").concat(r));const{statusCode:n,requestId:i,statusDesc:o}=Oy.decode(r[0].slice());if(n<200||n>=300)throw new Error("Filter ping request ".concat(i," failed with status code ").concat(n,": ").concat(o));Dy.info("Ping successful")}catch(r){throw Dy.error("Error pinging: ",r),new Error("Error pinging: "+r)}}async unsubscribeAll(){const e=await this.newStream(this.peer),t=Ny.createUnsubscribeAllRequest(this.pubsubTopic);try{const r=await my([t.encode()],ry,e,cy,(async e=>await zm(e)));if(!r||!r.length)throw Error("No response received for request ".concat(t.requestId,": ").concat(r));const{statusCode:n,requestId:i,statusDesc:o}=Oy.decode(r[0].slice());if(n<200||n>=300)throw new Error("Filter unsubscribe all request ".concat(i," failed with status code ").concat(n,": ").concat(o));this.subscriptionCallbacks.clear(),Dy.info("Unsubscribed from all content topics")}catch(r){throw new Error("Error unsubscribing from all content topics: "+r)}}async processMessage(e){const t=e.contentTopic,r=this.subscriptionCallbacks.get(t);r?await async function(e,t,r){const{decoders:n,callback:i}=e,{contentTopic:o}=r;if(!o)return void Dy.warn("Message has no content topic, skipping");try{const e=n.map((e=>e.fromProtoObj(t,r).then((e=>e||Promise.reject("Decoding failed"))))),o=await Promise.any(e);await i(o)}catch(s){Dy.error("Error decoding message",s)}}(r,this.pubsubTopic,e):Dy.error("No subscription callback available for ",t)}}class jy extends ky{getActiveSubscription(e,t){return this.activeSubscriptions.get("".concat(e,"_").concat(t))}setActiveSubscription(e,t,r){return this.activeSubscriptions.set("".concat(e,"_").concat(t),r),r}constructor(e,t){super(Ly,e.components),We(this,"pubsubTopics",[]),We(this,"activeSubscriptions",new Map),We(this,"NUM_PEERS_PROTOCOL",1),this.pubsubTopics=this.initializePubsubTopic(t),e.handle(Uy,this.onRequest.bind(this)).catch((e=>{Dy.error("Failed to register ",Uy,e)})),this.activeSubscriptions=new Map}async createSubscription(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni;const r="string"==typeof t?t:Cs(t);Ns(r,this.pubsubTopics);const n=(await this.getPeers({maxBootstrapPeers:1,numPeers:this.NUM_PEERS_PROTOCOL}))[0];return null!==(e=this.getActiveSubscription(r,n.id.toString()))&&void 0!==e?e:this.setActiveSubscription(r,n.id.toString(),new Fy(r,n,this.getStream.bind(this,n)))}toSubscriptionIterator(e){return si(this,e)}async subscribe(e,t){const r=await this.createSubscription();await r.subscribe(e,t);const n=Array.from(oi(Array.isArray(e)?e:[e]).keys());return async()=>{await r.unsubscribe(n)}}onRequest(e){try{my(e.stream,cy,(async t=>{for await(const r of t){const t=My.decode(r.slice()),{pubsubTopic:n,wakuMessage:i}=t;if(!i)return void Dy.error("Received empty message");if(!n)return void Dy.error("Pubsub topic missing from push message");const o=e.connection.remotePeer.toString(),s=this.getActiveSubscription(n,o);if(!s)return void Dy.error("No subscription locally registered for topic ".concat(n));await s.processMessage(i)}})).then((()=>{Dy.info("Receiving pipe closed.")}),(e=>{Dy.error("Error with receiving pipe",e)}))}catch(t){Dy.error("Error decoding message",t)}}}class qy{constructor(e){We(this,"proto",void 0),this.proto=e}static createRequest(e,t){return new qy({requestId:By(),request:{message:e,pubsubTopic:t},response:void 0})}static decode(e){const t=hm.decode(e);return new qy(t)}encode(){return hm.encode(this.proto)}get query(){return this.proto.request}get response(){return this.proto.response}}const zy=new qs("light-push");class Hy extends ky{constructor(e,t){super("/vac/waku/lightpush/2.0.0-beta1",e.components),We(this,"pubsubTopics",void 0),We(this,"NUM_PEERS_PROTOCOL",1),this.pubsubTopics=this.initializePubsubTopic(t)}async preparePushMessage(e,t,r){try{if(!t.payload||0===t.payload.length)return zy.error("Failed to send waku light push: payload is empty"),{query:null,error:Xn.EMPTY_PAYLOAD};if(!await async function(e,t){const r=await e.toWire(t);return!!r&&ci(r)}(e,t))return zy.error("Failed to send waku light push: message is bigger than 1MB"),{query:null,error:Xn.SIZE_TOO_BIG};const n=await e.toProtoObj(t);if(!n)return zy.error("Failed to encode to protoMessage, aborting push"),{query:null,error:Xn.ENCODE_FAILED};return{query:qy.createRequest(n,r),error:null}}catch(n){return zy.error("Failed to prepare push message",n),{query:null,error:Xn.GENERIC_FAIL}}}async send(e,t){const{pubsubTopic:r}=e;Ns(r,this.pubsubTopics);const n=[],{query:i,error:o}=await this.preparePushMessage(e,t,r);if(o||!i)return{recipients:n,errors:[o]};const s=await this.getPeers({maxBootstrapPeers:1,numPeers:this.NUM_PEERS_PROTOCOL});if(!s.length)return{recipients:n,errors:[Xn.NO_PEER_AVAILABLE]};const a=s.map((async e=>{let t,r;try{t=await this.getStream(e)}catch(a){return zy.error("Failed to get a stream for remote peer".concat(e.id.toString()),a),{recipients:n,error:Xn.REMOTE_PEER_FAULT}}try{r=await my([i.encode()],ry,t,cy,(async e=>await zm(e)))}catch(a){return zy.error("Failed to send waku light push request",a),{recipients:n,error:Xn.GENERIC_FAIL}}const o=new Xm;let s;r.forEach((e=>{o.append(e)}));try{s=qy.decode(o).response}catch(a){return zy.error("Failed to decode push reply",a),{recipients:n,error:Xn.DECODE_FAILED}}return s?s.isSuccess?(n.some((t=>t.equals(e.id)))||n.push(e.id),{recipients:n}):(zy.error("Remote peer rejected the message: ",s.info),{recipients:n,error:Xn.REMOTE_PEER_REJECTED}):(zy.error("Remote peer fault: No response in PushRPC"),{recipients:n,error:Xn.REMOTE_PEER_FAULT})})),c=(await Promise.allSettled(a)).filter((e=>"fulfilled"===e.status)).map((e=>e.value.error)).filter((e=>void 0!==e));return{recipients:n,errors:c}}}const Ky={payload:new Uint8Array,contentTopic:"",version:void 0,timestamp:void 0,meta:void 0,rateLimitProof:void 0,ephemeral:void 0};function Vy(e){return{...Ky,...e}}const Gy=BigInt(1e6);var Wy;!function(e){e.BACKWARD="backward",e.FORWARD="forward"}(Wy||(Wy={}));class Qy{constructor(e){We(this,"proto",void 0),this.proto=e}get query(){return this.proto.query}get response(){return this.proto.response}static createQuery(e){const t=e.contentTopics.map((e=>({contentTopic:e}))),r=function(e){switch(e){case Wy.BACKWARD:return mm.Direction.BACKWARD;case Wy.FORWARD:return mm.Direction.FORWARD;default:return mm.Direction.BACKWARD}}(e.pageDirection),n={pageSize:BigInt(e.pageSize),cursor:e.cursor,direction:r};let i,o;return e.startTime&&(i=BigInt(e.startTime.valueOf())*Gy),e.endTime&&(o=BigInt(e.endTime.valueOf())*Gy),new Qy({requestId:By(),query:{pubsubTopic:e.pubsubTopic,contentFilters:t,pagingInfo:n,startTime:i,endTime:o},response:void 0})}decode(e){const t=wm.decode(e);return new Qy(t)}encode(){return wm.encode(this.proto)}}var Jy=bm.HistoryError;const Zy=new qs("store");class Yy extends ky{constructor(e,t){super("/vac/waku/store/2.0.0-beta4",e.components),We(this,"pubsubTopics",void 0),We(this,"NUM_PEERS_PROTOCOL",1),We(this,"queryOrderedCallback",this.queryWithOrderedCallback),this.pubsubTopics=this.initializePubsubTopic(t)}async processMessages(e,t,r){let n=!1;let i=(await Promise.all(e)).filter(ii);return this.shouldReverseOrder(r)&&(i=i.reverse()),await Promise.all(i.map((async e=>{e&&!n&&(n=Boolean(await t(e)))}))),n}shouldReverseOrder(e){return"undefined"===typeof(null===e||void 0===e?void 0:e.pageDirection)||(null===e||void 0===e?void 0:e.pageDirection)===Wy.BACKWARD}async queryWithOrderedCallback(e,t,r){for await(const n of this.queryGenerator(e,r))if(await this.processMessages(n,t,r))break}async queryWithPromiseCallback(e,t,r){let n=!1;for await(const i of this.queryGenerator(e,r)){const e=i.map((async e=>{n||(n=Boolean(await t(e)))}));if(await Promise.all(e),n)break}}async*queryGenerator(e,t){var r;if(0===e.length)throw new Error("No decoders provided");let n,i;null!==t&&void 0!==t&&t.timeFilter&&(n=t.timeFilter.startTime,i=t.timeFilter.endTime);const o=Array.from(new Set(e.map((e=>e.pubsubTopic))));if(o.length>1)throw new Error("API does not support querying multiple pubsub topics at once");const s=o[0];var a;if(Ns(s,this.pubsubTopics),null!==t&&void 0!==t&&null!==(r=t.cursor)&&void 0!==r&&r.pubsubTopic&&t.cursor.pubsubTopic!==s)throw new Error("Cursor pubsub topic (".concat(null===t||void 0===t||null===(a=t.cursor)||void 0===a?void 0:a.pubsubTopic,") does not match decoder pubsub topic (").concat(s,")"));const c=new Map;e.forEach((e=>{if(c.has(e.contentTopic))throw new Error("API does not support different decoder per content topic");c.set(e.contentTopic,e)}));const u=e.filter((e=>e.pubsubTopic===s)).map((e=>e.contentTopic));if(0===u.length)throw new Error("No decoders found for topic "+s);const l=Object.assign({pubsubTopic:s,pageDirection:Wy.BACKWARD,pageSize:10},t,{contentTopics:u,startTime:n,endTime:i}),d=(await this.getPeers({numPeers:this.NUM_PEERS_PROTOCOL,maxBootstrapPeers:1}))[0];for await(const h of async function*(e,t,r,n){if(t.contentTopics.toString()!==Array.from(r.keys()).toString())throw new Error("Internal error, the decoders should match the query's content topics");let i=n;for(;;){var o,s,a;t.cursor=i;const n=Qy.createQuery(t);Zy.info("Querying store peer","for (".concat(t.pubsubTopic,")"),t.contentTopics);const c=await e(),u=await my([n.encode()],ry,c,cy,(async e=>await zm(e))),l=new Xm;u.forEach((e=>{l.append(e)}));const d=n.decode(l);if(!d.response){Zy.warn("Stopping pagination due to store `response` field missing");break}const h=d.response;if(h.error&&h.error!==Jy.NONE)throw"History response contains an Error: "+h.error;if(!h.messages||!h.messages.length){Zy.warn("Stopping pagination due to store `response.messages` field missing or empty");break}Zy.error("".concat(h.messages.length," messages retrieved from store")),yield h.messages.map((e=>{const n=e.contentTopic;if("undefined"!==typeof n){const i=r.get(n);if(i)return i.fromProtoObj(t.pubsubTopic,Vy(e))}return Promise.resolve(void 0)}));const f=null===(o=h.pagingInfo)||void 0===o?void 0:o.cursor;if("undefined"===typeof f){Zy.warn("Stopping pagination due to `response.pagingInfo.cursor` missing from store response");break}i=f;const p=null===(s=h.pagingInfo)||void 0===s?void 0:s.pageSize,g=null===(a=n.query)||void 0===a||null===(a=a.pagingInfo)||void 0===a?void 0:a.pageSize;if(p&&g&&p<g)break}}(this.getStream.bind(this,d),l,c,null===t||void 0===t?void 0:t.cursor))yield h}}class Xy extends Error{constructor(e){super(e),this.name="TimeoutError"}}class $y extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const ev=e=>void 0===globalThis.DOMException?new $y(e):new DOMException(e),tv=e=>{const t=void 0===e.reason?ev("This operation was aborted."):e.reason;return t instanceof Error?t:ev(t)};function rv(e,t){const{milliseconds:r,fallback:n,message:i,customTimers:o={setTimeout:setTimeout,clearTimeout:clearTimeout}}=t;let s;const a=new Promise(((a,c)=>{if("number"!==typeof r||1!==Math.sign(r))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(r,"`"));if(t.signal){const{signal:e}=t;e.aborted&&c(tv(e)),e.addEventListener("abort",(()=>{c(tv(e))}))}if(r===Number.POSITIVE_INFINITY)return void e.then(a,c);const u=new Xy;s=o.setTimeout.call(void 0,(()=>{if(n)try{a(n())}catch(t){c(t)}else"function"===typeof e.cancel&&e.cancel(),!1===i?a():i instanceof Error?c(i):(u.message=null!==i&&void 0!==i?i:"Promise timed out after ".concat(r," milliseconds"),c(u))}),r),(async()=>{try{a(await e)}catch(t){c(t)}})()})).finally((()=>{a.clear()}));return a.clear=()=>{o.clearTimeout.call(void 0,s),s=void 0},a}const nv=e=>{const t=e.on||e.addListener||e.addEventListener,r=e.off||e.removeListener||e.removeEventListener;if(!t||!r)throw new TypeError("Emitter is not compatible");return{addListener:t.bind(e),removeListener:r.bind(e)}};function iv(e,t,r){"function"===typeof r&&(r={filter:r});const n=function(e,t,r){let n;const i=new Promise(((i,o)=>{var s;if(!((r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r}).count>=0)||r.count!==Number.POSITIVE_INFINITY&&!Number.isInteger(r.count))throw new TypeError("The `count` option should be at least 0 or more");null===(s=r.signal)||void 0===s||s.throwIfAborted();const a=[t].flat(),c=[],{addListener:u,removeListener:l}=nv(e),d=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];const s=r.multiArgs?t:t[0];r.filter&&!r.filter(s)||(c.push(s),r.count===c.length&&(n(),i(c)))},h=e=>{n(),o(e)};n=()=>{for(const e of a)l(e,d);for(const e of r.rejectionEvents)l(e,h)};for(const e of a)u(e,d);for(const e of r.rejectionEvents)u(e,h);r.signal&&r.signal.addEventListener("abort",(()=>{h(r.signal.reason)}),{once:!0}),r.resolveImmediately&&i(c)}));if(i.cancel=n,"number"===typeof r.timeout){const e=rv(i,{milliseconds:r.timeout});return e.cancel=n,e}return i}(e,t,r={...r,count:1,resolveImmediately:!1}),i=n.then((e=>e[0]));return i.cancel=n.cancel,i}const ov=new qs("wait-for-remote-peer");async function sv(e,t,r){var n;if(t=null!==(n=t)&&void 0!==n?n:function(e){const t=[];e.relay&&t.push(Yn.Relay);e.filter&&t.push(Yn.Filter);e.store&&t.push(Yn.Store);e.lightPush&&t.push(Yn.LightPush);return t}(e),!e.isStarted())return Promise.reject("Waku node is not started");const i=[];if(t.includes(Yn.Relay)){if(!e.relay)throw new Error("Cannot wait for Relay peer: protocol not mounted");i.push(async function(e){let t=e.getMeshPeers();const r=e.pubsubTopics;for(const n of r)for(;0==t.length;)await iv(e.gossipSub,"gossipsub:heartbeat"),t=e.getMeshPeers(n)}(e.relay))}if(t.includes(Yn.Store)){if(!e.store)throw new Error("Cannot wait for Store peer: protocol not mounted");i.push(av(e.store))}if(t.includes(Yn.LightPush)){if(!e.lightPush)throw new Error("Cannot wait for LightPush peer: protocol not mounted");i.push(av(e.lightPush))}if(t.includes(Yn.Filter)){if(!e.filter)throw new Error("Cannot wait for Filter peer: protocol not mounted");i.push(av(e.filter))}r?await async function(e,t,r){await Promise.race([e,cv(t,r)])}(Promise.all(i),r,"Timed out waiting for a remote peer."):await Promise.all(i)}async function av(e){const t=e.multicodec,r=await e.peers();r.length?ov.info("".concat(t," peer found: "),r[0].id.toString()):await new Promise((r=>{const n=i=>{var o;null!==(o=i.detail)&&void 0!==o&&null!==(o=o.protocols)&&void 0!==o&&o.includes(t)&&(e.removeLibp2pEventListener("peer:identify",n),r())};e.addLibp2pEventListener("peer:identify",n)}))}const cv=(e,t)=>new Promise(((r,n)=>setTimeout((()=>n(t)),e)));const uv=new qs("metadata"),lv="/vac/waku/metadata/1.0.0";class dv extends ky{constructor(e,t){super(lv,t.components),We(this,"shardInfo",void 0),We(this,"libp2pComponents",void 0),this.libp2pComponents=t,this.shardInfo=e,t.registrar.handle(lv,(e=>{this.onRequest(e)}))}async onRequest(e){try{const{stream:t,connection:r}=e,n=Tm.encode(this.shardInfo),i=await my([n],ry,t,cy,(async e=>await zm(e))),o=this.decodeMetadataResponse(i);await this.libp2pComponents.peerStore.merge(r.remotePeer,{metadata:{shardInfo:ug(o)}})}catch(t){uv.error("Error handling metadata request",t)}}async query(e){const t=Im.encode(this.shardInfo),r=await this.getPeer(e),n=await this.getStream(r),i=await my([t],ry,n,cy,(async e=>await zm(e)));return this.decodeMetadataResponse(i)}decodeMetadataResponse(e){const t=new Xm;e.forEach((e=>{t.append(e)}));const r=Tm.decode(t);return r||uv.error("Error decoding metadata response"),r}}function hv(e){return t=>new dv(e,t)}class fv extends Error{constructor(e,t){super(null!==e&&void 0!==e?e:"The operation was aborted"),We(this,"type",void 0),We(this,"code",void 0),this.type="aborted",this.name="AbortError",this.code=null!==t&&void 0!==t?t:"ABORT_ERR"}}async function pv(e,t,r){if(null==t)return e;if(t.aborted)return Promise.reject(new fv(null===r||void 0===r?void 0:r.errorMessage,null===r||void 0===r?void 0:r.errorCode));let n;const i=new fv(null===r||void 0===r?void 0:r.errorMessage,null===r||void 0===r?void 0:r.errorCode);try{return await Promise.race([e,new Promise(((e,r)=>{n=()=>{r(i)},t.addEventListener("abort",n)}))])}finally{null!=n&&t.removeEventListener("abort",n)}}let gv;gv=Symbol.asyncIterator;class mv{constructor(){We(this,"needNext",void 0),We(this,"haveNext",void 0),We(this,"ended",void 0),We(this,"nextResult",void 0),this.ended=!1,this.needNext=uy(),this.haveNext=uy()}[gv](){return this}async next(){if(null==this.nextResult&&await this.haveNext.promise,null==this.nextResult)throw new Error("Have next but next was undefined");const e=this.nextResult;return this.nextResult=void 0,this.needNext.resolve(),this.needNext=uy(),e}async throw(e){this.ended=!0,null!=e&&this.haveNext.reject(e);return{done:!0,value:void 0}}async return(){const e={done:!0,value:void 0};return await this._push(void 0),e}async push(e,t){await this._push(e,t)}async end(e,t){null!=e?await this.throw(e):await this._push(void 0,t)}async _push(e,t){if(null!=e&&this.ended)throw new Error("Cannot push value onto an ended pushable");null!=this.nextResult&&await this.needNext.promise,null!=e?this.nextResult={done:!1,value:e}:(this.ended=!0,this.nextResult={done:!0,value:void 0}),this.haveNext.resolve(),this.haveNext=uy(),await pv(this.needNext.promise,null===t||void 0===t?void 0:t.signal,t)}}class yv extends Error{constructor(e,t){super(e),We(this,"code",void 0),this.code=t}}class vv extends yv{constructor(e){super(e,"ABORT_ERR"),We(this,"type",void 0),this.type="aborted"}}function bv(e,t){const r=new mv;e.sink(r).catch((async e=>{await r.end(e)})),e.sink=async e=>{for await(const t of e)await r.push(t);await r.end()};let n=e.source;null!=e.source[Symbol.iterator]?n=e.source[Symbol.iterator]():null!=e.source[Symbol.asyncIterator]&&(n=e.source[Symbol.asyncIterator]());const i=new Xm,o={read:async(e,t)=>{var r;let o;null===t||void 0===t||null===(r=t.signal)||void 0===r||r.throwIfAborted();const s=new Promise(((e,r)=>{var n;o=()=>{r(new vv("Read aborted"))},null===t||void 0===t||null===(n=t.signal)||void 0===n||n.addEventListener("abort",o)}));try{if(null==e){const{done:e,value:t}=await Promise.race([n.next(),s]);return!0===e?new Xm:t}for(;i.byteLength<e;){const{value:e,done:t}=await Promise.race([n.next(),s]);if(!0===t)throw new yv("unexpected end of input","ERR_UNEXPECTED_EOF");i.append(e)}const t=i.sublist(0,e);return i.consume(e),t}finally{var a;if(null!=o)null===t||void 0===t||null===(a=t.signal)||void 0===a||a.removeEventListener("abort",o)}},write:async(e,t)=>{var n;null===t||void 0===t||null===(n=t.signal)||void 0===n||n.throwIfAborted(),e instanceof Uint8Array?await r.push(e,t):await r.push(e.subarray(),t)},unwrap:()=>{if(i.byteLength>0){const r=e.source;e.source=async function*(){!1===(null===t||void 0===t?void 0:t.yieldBytes)?yield i:yield*i,yield*r}()}return e}};return o}class wv extends Error{constructor(e,t){super(e),We(this,"code",void 0),this.code=t}}const _v=e=>an(e);function Ev(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=bv(e,t);null!=t.maxDataLength&&null==t.maxLengthLength&&(t.maxLengthLength=on(t.maxDataLength));return{read:async e=>{var n;let i=-1;const o=new Xm,s=null!==(n=null===t||void 0===t?void 0:t.lengthDecoder)&&void 0!==n?n:_v;for(;;){o.append(await r.read(1,e));try{i=s(o)}catch(a){if(a instanceof RangeError)continue;throw a}if(null!=(null===t||void 0===t?void 0:t.maxLengthLength)&&o.byteLength>t.maxLengthLength)throw new wv("message length length too long","ERR_MSG_LENGTH_TOO_LONG");if(i>-1)break}if(null!=(null===t||void 0===t?void 0:t.maxDataLength)&&i>t.maxDataLength)throw new wv("message length too long","ERR_MSG_DATA_TOO_LONG");return r.read(i,e)},write:async(e,n)=>{await r.write(ry.single(e,t),n)},writeV:async(e,n)=>{const i=new Xm(...e.map((e=>ry.single(e,t))));await r.write(i,n)},unwrap:()=>r.unwrap()}}function Av(){const e=uy();let t=!1;return{sink:async r=>{if(t)throw new Error("already piped");t=!0,e.resolve(r)},source:async function*(){const t=await e.promise;yield*t}()}}var Sv;_v.bytes=0;const kv=65535,xv=Boolean(null===(Sv=globalThis.process)||void 0===Sv||null===(Sv=Sv.env)||void 0===Sv?void 0:Sv.DUMP_SESSION_KEYS),Iv=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));function Tv(e){return e instanceof Uint8Array||null!=e&&"object"===typeof e&&"Uint8Array"===e.constructor.name}const Pv=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Rv(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got ".concat(typeof e));return new Uint8Array((new TextEncoder).encode(e))}function Cv(e){if("string"===typeof e)e=Rv(e);else{if(!Tv(e))throw new Error("expected Uint8Array, got ".concat(typeof e));e=e.slice()}return e}const Bv=e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object;function Mv(e,t){if(!Tv(e))throw new Error("Uint8Array expected");if("number"===typeof t&&e.length!==t)throw new Error("Uint8Array length ".concat(t," expected"))}const Nv=(e,t)=>(Object.assign(t,e),t);function Ov(e,t,r,n){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}function Dv(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("wrong positive integer: ".concat(e))}function Lv(e){if("boolean"!==typeof e)throw new Error("boolean expected, not ".concat(e))}function Uv(e){if(null==(t=e)||"object"!==typeof t||!(t instanceof Uint8Array||"Uint8Array"===t.constructor.name))throw new Error("Uint8Array expected");for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length ".concat(n,", not of length=").concat(e.length))}function Fv(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function jv(e,t){Uv(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least ".concat(r))}const qv=(e,t)=>255&e[t++]|(255&e[t++])<<8;class zv{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,Mv(e=Cv(e),32);const t=qv(e,0),r=qv(e,2),n=qv(e,4),i=qv(e,6),o=qv(e,8),s=qv(e,10),a=qv(e,12),c=qv(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|n<<6),this.r[3]=8191&(n>>>7|i<<9),this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|s<<2),this.r[7]=8065&(s>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let u=0;u<8;u++)this.pad[u]=qv(e,16+2*u)}process(e,t){const r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?0:2048,{h:n,r:i}=this,o=i[0],s=i[1],a=i[2],c=i[3],u=i[4],l=i[5],d=i[6],h=i[7],f=i[8],p=i[9],g=qv(e,t+0),m=qv(e,t+2),y=qv(e,t+4),v=qv(e,t+6),b=qv(e,t+8),w=qv(e,t+10),_=qv(e,t+12),E=qv(e,t+14);let A=n[0]+(8191&g),S=n[1]+(8191&(g>>>13|m<<3)),k=n[2]+(8191&(m>>>10|y<<6)),x=n[3]+(8191&(y>>>7|v<<9)),I=n[4]+(8191&(v>>>4|b<<12)),T=n[5]+(b>>>1&8191),P=n[6]+(8191&(b>>>14|w<<2)),R=n[7]+(8191&(w>>>11|_<<5)),C=n[8]+(8191&(_>>>8|E<<8)),B=n[9]+(E>>>5|r),M=0,N=M+A*o+S*(5*p)+k*(5*f)+x*(5*h)+I*(5*d);M=N>>>13,N&=8191,N+=T*(5*l)+P*(5*u)+R*(5*c)+C*(5*a)+B*(5*s),M+=N>>>13,N&=8191;let O=M+A*s+S*o+k*(5*p)+x*(5*f)+I*(5*h);M=O>>>13,O&=8191,O+=T*(5*d)+P*(5*l)+R*(5*u)+C*(5*c)+B*(5*a),M+=O>>>13,O&=8191;let D=M+A*a+S*s+k*o+x*(5*p)+I*(5*f);M=D>>>13,D&=8191,D+=T*(5*h)+P*(5*d)+R*(5*l)+C*(5*u)+B*(5*c),M+=D>>>13,D&=8191;let L=M+A*c+S*a+k*s+x*o+I*(5*p);M=L>>>13,L&=8191,L+=T*(5*f)+P*(5*h)+R*(5*d)+C*(5*l)+B*(5*u),M+=L>>>13,L&=8191;let U=M+A*u+S*c+k*a+x*s+I*o;M=U>>>13,U&=8191,U+=T*(5*p)+P*(5*f)+R*(5*h)+C*(5*d)+B*(5*l),M+=U>>>13,U&=8191;let F=M+A*l+S*u+k*c+x*a+I*s;M=F>>>13,F&=8191,F+=T*o+P*(5*p)+R*(5*f)+C*(5*h)+B*(5*d),M+=F>>>13,F&=8191;let j=M+A*d+S*l+k*u+x*c+I*a;M=j>>>13,j&=8191,j+=T*s+P*o+R*(5*p)+C*(5*f)+B*(5*h),M+=j>>>13,j&=8191;let q=M+A*h+S*d+k*l+x*u+I*c;M=q>>>13,q&=8191,q+=T*a+P*s+R*o+C*(5*p)+B*(5*f),M+=q>>>13,q&=8191;let z=M+A*f+S*h+k*d+x*l+I*u;M=z>>>13,z&=8191,z+=T*c+P*a+R*s+C*o+B*(5*p),M+=z>>>13,z&=8191;let H=M+A*p+S*f+k*h+x*d+I*l;M=H>>>13,H&=8191,H+=T*u+P*c+R*a+C*s+B*o,M+=H>>>13,H&=8191,M=(M<<2)+M|0,M=M+N|0,N=8191&M,M>>>=13,O+=M,n[0]=N,n[1]=O,n[2]=D,n[3]=L,n[4]=U,n[5]=F,n[6]=j,n[7]=q,n[8]=z,n[9]=H}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let s=2;s<10;s++)e[s]+=n,n=e[s]>>>13,e[s]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let s=1;s<10;s++)r[s]=e[s]+n,n=r[s]>>>13,r[s]&=8191;r[9]-=8192;let i=(1^n)-1;for(let s=0;s<10;s++)r[s]&=i;i=~i;for(let s=0;s<10;s++)e[s]=e[s]&i|r[s];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let o=e[0]+t[0];e[0]=65535&o;for(let s=1;s<8;s++)o=(e[s]+t[s]|0)+(o>>>16)|0,e[s]=65535&o}update(e){Fv(this);const{buffer:t,blockLen:r}=this,n=(e=Cv(e)).length;for(let i=0;i<n;){const o=Math.min(r-this.pos,n-i);if(o!==r)t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=n-i;i+=r)this.process(e,i)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(e){Fv(this),jv(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}const Hv=function(e){const t=(t,r)=>e(r).update(Cv(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}((e=>new zv(e))),Kv=Rv("expand 16-byte k"),Vv=Rv("expand 32-byte k"),Gv=Iv(Kv),Wv=Iv(Vv);function Qv(e,t){return e<<t|e>>>32-t}function Jv(e){return e.byteOffset%4===0}const Zv=64,Yv=16,Xv=2**32-1,$v=new Uint32Array;function eb(e,t){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:o,rounds:s}=function(e,t){if(void 0!==t&&("object"!==typeof t||!Bv(t)))throw new Error("options must be object or undefined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!==typeof e)throw new Error("core must be a function");return Dv(i),Dv(s),Lv(o),Lv(r),function(t,a,c,u){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Uv(t),Uv(a),Uv(c);const d=c.length;if(u||(u=new Uint8Array(d)),Uv(u),Dv(l),l<0||l>=Xv)throw new Error("arx: counter overflow");if(u.length<d)throw new Error("arx: output (".concat(u.length,") is shorter than data (").concat(d,")"));const h=[];let f,p,g=t.length;if(32===g)f=t.slice(),h.push(f),p=Wv;else{if(16!==g||!r)throw new Error("arx: invalid 32-byte key, got length=".concat(g));f=new Uint8Array(32),f.set(t),f.set(t,16),p=Gv,h.push(f)}Jv(a)||(a=a.slice(),h.push(a));const m=Iv(f);if(n){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");n(p,m,Iv(a.subarray(0,16)),m),a=a.subarray(16)}const y=16-i;if(y!==a.length)throw new Error("arx: nonce must be ".concat(y," or 16 bytes"));if(12!==y){const e=new Uint8Array(12);e.set(a,o?0:12-a.length),a=e,h.push(a)}const v=Iv(a);for(!function(e,t,r,n,i,o,s,a){const c=i.length,u=new Uint8Array(Zv),l=Iv(u),d=Jv(i)&&Jv(o),h=d?Iv(i):$v,f=d?Iv(o):$v;for(let p=0;p<c;s++){if(e(t,r,n,l,s,a),s>=Xv)throw new Error("arx: counter overflow");const g=Math.min(Zv,c-p);if(d&&g===Zv){const e=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let t,r=0;r<Yv;r++)t=e+r,f[t]=h[t]^l[r];p+=Zv}else{for(let e,t=0;t<g;t++)e=p+t,o[e]=i[e]^u[t];p+=g}}}(e,p,m,v,c,u,l,s);h.length>0;)h.pop().fill(0);return u}}function tb(e,t,r,n,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,s=e[0],a=e[1],c=e[2],u=e[3],l=t[0],d=t[1],h=t[2],f=t[3],p=t[4],g=t[5],m=t[6],y=t[7],v=i,b=r[0],w=r[1],_=r[2],E=s,A=a,S=c,k=u,x=l,I=d,T=h,P=f,R=p,C=g,B=m,M=y,N=v,O=b,D=w,L=_;for(let F=0;F<o;F+=2)E=E+x|0,N=Qv(N^E,16),R=R+N|0,x=Qv(x^R,12),E=E+x|0,N=Qv(N^E,8),R=R+N|0,x=Qv(x^R,7),A=A+I|0,O=Qv(O^A,16),C=C+O|0,I=Qv(I^C,12),A=A+I|0,O=Qv(O^A,8),C=C+O|0,I=Qv(I^C,7),S=S+T|0,D=Qv(D^S,16),B=B+D|0,T=Qv(T^B,12),S=S+T|0,D=Qv(D^S,8),B=B+D|0,T=Qv(T^B,7),k=k+P|0,L=Qv(L^k,16),M=M+L|0,P=Qv(P^M,12),k=k+P|0,L=Qv(L^k,8),M=M+L|0,P=Qv(P^M,7),E=E+I|0,L=Qv(L^E,16),B=B+L|0,I=Qv(I^B,12),E=E+I|0,L=Qv(L^E,8),B=B+L|0,I=Qv(I^B,7),A=A+T|0,N=Qv(N^A,16),M=M+N|0,T=Qv(T^M,12),A=A+T|0,N=Qv(N^A,8),M=M+N|0,T=Qv(T^M,7),S=S+P|0,O=Qv(O^S,16),R=R+O|0,P=Qv(P^R,12),S=S+P|0,O=Qv(O^S,8),R=R+O|0,P=Qv(P^R,7),k=k+x|0,D=Qv(D^k,16),C=C+D|0,x=Qv(x^C,12),k=k+x|0,D=Qv(D^k,8),C=C+D|0,x=Qv(x^C,7);let U=0;n[U++]=s+E|0,n[U++]=a+A|0,n[U++]=c+S|0,n[U++]=u+k|0,n[U++]=l+x|0,n[U++]=d+I|0,n[U++]=h+T|0,n[U++]=f+P|0,n[U++]=p+R|0,n[U++]=g+C|0,n[U++]=m+B|0,n[U++]=y+M|0,n[U++]=v+N|0,n[U++]=b+O|0,n[U++]=w+D|0,n[U++]=_+L|0}const rb=eb(tb,{counterRight:!1,counterLength:4,allowShortKeys:!1}),nb=eb(tb,{counterRight:!1,counterLength:8,extendNonceFn:function(e,t,r,n){let i=e[0],o=e[1],s=e[2],a=e[3],c=t[0],u=t[1],l=t[2],d=t[3],h=t[4],f=t[5],p=t[6],g=t[7],m=r[0],y=r[1],v=r[2],b=r[3];for(let _=0;_<20;_+=2)i=i+c|0,m=Qv(m^i,16),h=h+m|0,c=Qv(c^h,12),i=i+c|0,m=Qv(m^i,8),h=h+m|0,c=Qv(c^h,7),o=o+u|0,y=Qv(y^o,16),f=f+y|0,u=Qv(u^f,12),o=o+u|0,y=Qv(y^o,8),f=f+y|0,u=Qv(u^f,7),s=s+l|0,v=Qv(v^s,16),p=p+v|0,l=Qv(l^p,12),s=s+l|0,v=Qv(v^s,8),p=p+v|0,l=Qv(l^p,7),a=a+d|0,b=Qv(b^a,16),g=g+b|0,d=Qv(d^g,12),a=a+d|0,b=Qv(b^a,8),g=g+b|0,d=Qv(d^g,7),i=i+u|0,b=Qv(b^i,16),p=p+b|0,u=Qv(u^p,12),i=i+u|0,b=Qv(b^i,8),p=p+b|0,u=Qv(u^p,7),o=o+l|0,m=Qv(m^o,16),g=g+m|0,l=Qv(l^g,12),o=o+l|0,m=Qv(m^o,8),g=g+m|0,l=Qv(l^g,7),s=s+d|0,y=Qv(y^s,16),h=h+y|0,d=Qv(d^h,12),s=s+d|0,y=Qv(y^s,8),h=h+y|0,d=Qv(d^h,7),a=a+c|0,v=Qv(v^a,16),f=f+v|0,c=Qv(c^f,12),a=a+c|0,v=Qv(v^a,8),f=f+v|0,c=Qv(c^f,7);let w=0;n[w++]=i,n[w++]=o,n[w++]=s,n[w++]=a,n[w++]=m,n[w++]=y,n[w++]=v,n[w++]=b},allowShortKeys:!1}),ib=new Uint8Array(16),ob=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(ib.subarray(r))},sb=new Uint8Array(32);function ab(e,t,r,n,i){const o=e(t,r,sb),s=Hv.create(o);i&&ob(s,i),ob(s,n);const a=new Uint8Array(16),c=Pv(a);Ov(c,0,BigInt(i?i.length:0),!0),Ov(c,8,BigInt(n.length),!0),s.update(a);const u=s.digest();return o.fill(0),u}const cb=e=>(t,r,n)=>{const i=16;return Mv(t,32),Mv(r),{encrypt:(o,s)=>{const a=o.length,c=a+i;s?Mv(s,c):s=new Uint8Array(c),e(t,r,o,s,1);const u=ab(e,t,r,s.subarray(0,-16),n);return s.set(u,a),s},decrypt:(o,s)=>{const a=o.length,c=a-i;if(a<i)throw new Error("encrypted data must be at least ".concat(i," bytes"));s?Mv(s,c):s=new Uint8Array(c);const u=o.subarray(0,-16);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(o.subarray(-16),ab(e,t,r,u,n)))throw new Error("invalid tag");return e(t,r,u,s,1),s}}},ub=Nv({blockSize:64,nonceLength:12,tagLength:16},cb(rb));cb(nb);function lb(e,t,r){return di(e),void 0===r&&(r=new Uint8Array(e.outputLen)),yp(e,_i(r),_i(t))}const db=new Uint8Array([0]),hb=new Uint8Array;function fb(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;if(di(e),ui(n),n>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/e.outputLen);void 0===r&&(r=hb);const o=new Uint8Array(i*e.outputLen),s=yp.create(e,t),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let u=0;u<i;u++)db[0]=u+1,a.update(0===u?hb:c).update(r).update(db).digestInto(c),o.set(c,e.outputLen*u),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),db.fill(0),o.slice(0,n)}const pb={hashSHA256:e=>Ni(e),getHKDF(e,t){const r=lb(Ni,t,e),n=fb(Ni,r,void 0,96);return[n.subarray(0,32),n.subarray(32,64),n.subarray(64,96)]},generateX25519KeyPair(){const e=Sd.utils.randomPrivateKey();return{publicKey:Sd.getPublicKey(e),privateKey:e}},generateX25519KeyPairFromSeed:e=>({publicKey:Sd.getPublicKey(e),privateKey:e}),generateX25519SharedKey:(e,t)=>Sd.getSharedSecret(e,t),chaCha20Poly1305Encrypt:(e,t,r,n)=>ub(n,t,r).encrypt(e),chaCha20Poly1305Decrypt:(e,t,r,n,i)=>ub(n,t,r).decrypt(e,i)};function gb(e,t){null==t&&(t=e.reduce(((e,t)=>e+t.length),0));const r=ws(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return Oi(r)}const mb=e=>{const t=ws(2);return new DataView(t.buffer,t.byteOffset,t.byteLength).setUint16(0,e,!1),t};mb.bytes=2;const yb=e=>{if(e.length<2)throw RangeError("Could not decode int16BE");return e instanceof Uint8Array?new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1):e.getUint16(0)};yb.bytes=2;const vb=32,bb=64,wb=32;function _b(e,t){const r=new Uint8Array(bb);for(let n=0;n<wb;n++)r[n]=e[n],r[wb+n]=t[n];return r}const Eb={get(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:globalThis).crypto;if(null==e||null==e.subtle)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}},Ab={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function Sb(e){var t,r,n,i,o,s;const a=null!==(t=null===e||void 0===e?void 0:e.algorithm)&&void 0!==t?t:"AES-GCM";let c=null!==(r=null===e||void 0===e?void 0:e.keyLength)&&void 0!==r?r:16;const u=null!==(n=null===e||void 0===e?void 0:e.nonceLength)&&void 0!==n?n:12,l=null!==(i=null===e||void 0===e?void 0:e.digest)&&void 0!==i?i:"SHA-256",d=null!==(o=null===e||void 0===e?void 0:e.saltLength)&&void 0!==o?o:16,h=null!==(s=null===e||void 0===e?void 0:e.iterations)&&void 0!==s?s:32767,f=Eb.get();c*=8;return{encrypt:async function(e,t){const r=f.getRandomValues(new Uint8Array(d)),n=f.getRandomValues(new Uint8Array(u)),i={name:a,iv:n};let o;if("string"===typeof t&&(t=ks(t)),0===t.length){o=await f.subtle.importKey("jwk",Ab,{name:"AES-GCM"},!0,["encrypt"]);try{const e={name:"PBKDF2",salt:r,iterations:h,hash:{name:l}},n=await f.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey"]);o=await f.subtle.deriveKey(e,n,{name:a,length:c},!0,["encrypt"])}catch{o=await f.subtle.importKey("jwk",Ab,{name:"AES-GCM"},!0,["encrypt"])}}else{const e={name:"PBKDF2",salt:r,iterations:h,hash:{name:l}},n=await f.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey"]);o=await f.subtle.deriveKey(e,n,{name:a,length:c},!0,["encrypt"])}const s=await f.subtle.encrypt(i,o,e);return gb([r,i.iv,new Uint8Array(s)])},decrypt:async function(e,t){const r=e.subarray(0,d),n=e.subarray(d,d+u),i=e.subarray(d+u),o={name:a,iv:n};let s;if("string"===typeof t&&(t=ks(t)),0===t.length)try{const e={name:"PBKDF2",salt:r,iterations:h,hash:{name:l}},n=await f.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey"]);s=await f.subtle.deriveKey(e,n,{name:a,length:c},!0,["decrypt"])}catch{s=await f.subtle.importKey("jwk",Ab,{name:"AES-GCM"},!0,["decrypt"])}else{const e={name:"PBKDF2",salt:r,iterations:h,hash:{name:l}},n=await f.subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveKey"]);s=await f.subtle.deriveKey(e,n,{name:a,length:c},!0,["decrypt"])}const p=await f.subtle.decrypt(o,s,i);return new Uint8Array(p)}}}async function kb(e,t){const r=Sb(),n=await r.encrypt(e,t);return go.encode(n)}var xb,Ib,Tb,Pb;!function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"}(xb||(xb={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"}(Ib||(Ib={})),function(e){e.codec=()=>Wf(Ib)}(xb||(xb={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),xb.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=xb.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Tb||(Tb={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),xb.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.Type=xb.codec().decode(e);break;case 2:r.Data=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(Pb||(Pb={}));class Rb{constructor(e){We(this,"_key",void 0),this._key=Db(e,vb)}async verify(e,t){return async function(e,t,r){return Ed.verify(t,r,e)}(this._key,t,e)}marshal(){return this._key}get bytes(){return Tb.encode({Type:xb.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Wp(this.bytes,e.bytes)}async hash(){const{bytes:e}=await os.digest(this.bytes);return e}}class Cb{constructor(e,t){We(this,"_key",void 0),We(this,"_publicKey",void 0),this._key=Db(e,bb),this._publicKey=Db(t,vb)}async sign(e){return async function(e,t){const r=e.subarray(0,wb);return Ed.sign(t,r)}(this._key,e)}get public(){return new Rb(this._publicKey)}marshal(){return this._key}get bytes(){return Pb.encode({Type:xb.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Wp(this.bytes,e.bytes)}async hash(){const{bytes:e}=await os.digest(this.bytes);return e}async id(){const e=ts.digest(this.public.bytes);return fo.encode(e.bytes).substring(1)}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===t)return kb(this.bytes,e);throw new Hp("export format '".concat(t,"' is not supported"),"ERR_INVALID_EXPORT_FORMAT")}}function Bb(e){if(e.length>bb){const t=(e=Db(e,bb+vb)).subarray(0,bb),r=e.subarray(bb,e.length);return new Cb(t,r)}const t=(e=Db(e,bb)).subarray(0,bb),r=e.subarray(vb);return new Cb(t,r)}function Mb(e){return e=Db(e,vb),new Rb(e)}async function Nb(){const{privateKey:e,publicKey:t}=await async function(){const e=Ed.utils.randomPrivateKey(),t=Ed.getPublicKey(e);return{privateKey:_b(e,t),publicKey:t}}();return new Cb(e,t)}async function Ob(e){const{privateKey:t,publicKey:r}=await async function(e){if(e.length!==wb)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const t=e,r=Ed.getPublicKey(t);return{privateKey:_b(t,r),publicKey:r}}(e);return new Cb(t,r)}function Db(e,t){var r;if((e=Uint8Array.from(null!==(r=e)&&void 0!==r?r:[])).length!==t)throw new Hp("Key must be a Uint8Array of length ".concat(t,", got ").concat(e.length),"ERR_INVALID_KEY_TYPE");return e}function Lb(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=0===r[0]?r.subarray(1):r,null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=gb([new Uint8Array(t-r.length),r])}return xs(r,"base64url")}function Ub(e){const t=function(e,t){let r=ks(e,"base64urlpad");if(null!=t){if(r.length>t)throw new Error("byte array longer than desired length");r=gb([new Uint8Array(t-r.length),r])}return r}(e);return new ic.jsbn.BigInteger(xs(t,"base16"),16)}const Fb={"P-256":256,"P-384":384,"P-521":521};Object.keys(Fb).join(" / ");function jb(e){if(isNaN(e)||e<=0)throw new Hp("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Ii(e)}function qb(e,t){return t.map((t=>Ub(e[t])))}async function zb(e){const t=[await Eb.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await Kb(e)],r=await Hb({privateKey:t[0],publicKey:t[1]});return{privateKey:r[0],publicKey:r[1]}}async function Hb(e){if(null==e.privateKey||null==e.publicKey)throw new Hp("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([Eb.get().subtle.exportKey("jwk",e.privateKey),Eb.get().subtle.exportKey("jwk",e.publicKey)])}async function Kb(e){return Eb.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Vb(e,t,r,n){const i=t?function(e){return ic.pki.setRsaPublicKey(...qb(e,["n","e"]))}(e):function(e){return ic.pki.setRsaPrivateKey(...qb(e,["n","e","d","p","q","dp","dq","qi"]))}(e);return ks(n(xs(Uint8Array.from(r),"ascii"),i),"ascii")}function Gb(e){if("RSA"!==e.kty)throw new Hp("invalid key type","ERR_INVALID_KEY_TYPE");if(null==e.n)throw new Hp("invalid key modulus","ERR_INVALID_KEY_MODULUS");return 8*ks(e.n,"base64url").length}const Wb=8192;class Qb{constructor(e){We(this,"_key",void 0),this._key=e}async verify(e,t){return async function(e,t,r){const n=await Eb.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Eb.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}(this._key,t,e)}marshal(){return function(e){if(null==e.n||null==e.e)throw new Hp("JWK was missing components","ERR_INVALID_PARAMETERS");const t=ic.pki.publicKeyToAsn1({n:Ub(e.n),e:Ub(e.e)});return ks(ic.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return Tb.encode({Type:xb.RSA,Data:this.marshal()}).subarray()}encrypt(e){return Vb(this._key,!0,e,((e,t)=>t.encrypt(e)))}equals(e){return Wp(this.bytes,e.bytes)}async hash(){const{bytes:e}=await os.digest(this.bytes);return e}}class Jb{constructor(e,t){We(this,"_key",void 0),We(this,"_publicKey",void 0),this._key=e,this._publicKey=t}genSecret(){return jb(16)}async sign(e){return async function(e,t){const r=await Eb.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Eb.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}(this._key,e)}get public(){if(null==this._publicKey)throw new Hp("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Qb(this._publicKey)}decrypt(e){return Vb(this._key,!1,e,((e,t)=>t.decrypt(e)))}marshal(){return function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw new Hp("JWK was missing components","ERR_INVALID_PARAMETERS");const t=ic.pki.privateKeyToAsn1({n:Ub(e.n),e:Ub(e.e),d:Ub(e.d),p:Ub(e.p),q:Ub(e.q),dP:Ub(e.dp),dQ:Ub(e.dq),qInv:Ub(e.qi)});return ks(ic.asn1.toDer(t).getBytes(),"ascii")}(this._key)}get bytes(){return Pb.encode({Type:xb.RSA,Data:this.marshal()}).subarray()}equals(e){return Wp(this.bytes,e.bytes)}async hash(){const{bytes:e}=await os.digest(this.bytes);return e}async id(){return xs(await this.public.hash(),"base58btc")}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pkcs-8";if("pkcs-8"===t){const t=new ic.util.ByteBuffer(this.marshal()),r=ic.asn1.fromDer(t),n=ic.pki.privateKeyFromAsn1(r),i={algorithm:"aes256",count:1e4,saltSize:16,prfAlgorithm:"sha512"};return ic.pki.encryptRsaPrivateKey(n,e,i)}if("libp2p-key"===t)return kb(this.bytes,e);throw new Hp("export format '".concat(t,"' is not supported"),"ERR_INVALID_EXPORT_FORMAT")}}async function Zb(e){const t=function(e){const t=ic.asn1.fromDer(xs(e,"ascii")),r=ic.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:Lb(r.n),e:Lb(r.e),d:Lb(r.d),p:Lb(r.p),q:Lb(r.q),dp:Lb(r.dP),dq:Lb(r.dQ),qi:Lb(r.qInv),alg:"RS256"}}(e);if(Gb(t)>Wb)throw new Hp("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const r=await zb(t);return new Jb(r.privateKey,r.publicKey)}function Yb(e){const t=function(e){const t=ic.asn1.fromDer(xs(e,"ascii")),r=ic.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:Lb(r.n),e:Lb(r.e)}}(e);if(Gb(t)>Wb)throw new Hp("key size is too large","ERR_KEY_SIZE_TOO_LARGE");return new Qb(t)}async function Xb(e){if(Gb(e)>Wb)throw new Hp("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await zb(e);return new Jb(t.privateKey,t.publicKey)}async function $b(e){if(e>Wb)throw new Hp("key size is too large","ERR_KEY_SIZE_TOO_LARGE");const t=await async function(e){const t=await Eb.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Hb(t);return{privateKey:r[0],publicKey:r[1]}}(e);return new Jb(t.privateKey,t.publicKey)}function ew(e){try{Np.ProjectivePoint.fromHex(e)}catch(t){throw new Hp(String(t),"ERR_INVALID_PUBLIC_KEY")}}class tw{constructor(e){We(this,"_key",void 0),ew(e),this._key=e}async verify(e,t){return async function(e,t,r){try{const{digest:n}=await os.digest(r);return Np.verify(t,n,e)}catch(n){throw new Hp(String(n),"ERR_INVALID_INPUT")}}(this._key,t,e)}marshal(){return e=this._key,Np.ProjectivePoint.fromHex(e).toRawBytes(!0);var e}get bytes(){return Tb.encode({Type:xb.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Wp(this.bytes,e.bytes)}async hash(){const{bytes:e}=await os.digest(this.bytes);return e}}class rw{constructor(e,t){We(this,"_key",void 0),We(this,"_publicKey",void 0),this._key=e,this._publicKey=null!==t&&void 0!==t?t:function(e){try{return Np.getPublicKey(e,!0)}catch(t){throw new Hp(String(t),"ERR_INVALID_PRIVATE_KEY")}}(e),function(e){try{Np.getPublicKey(e,!0)}catch(t){throw new Hp(String(t),"ERR_INVALID_PRIVATE_KEY")}}(this._key),ew(this._publicKey)}async sign(e){return async function(e,t){const{digest:r}=await os.digest(t);try{return Np.sign(r,e).toDERRawBytes()}catch(n){throw new Hp(String(n),"ERR_INVALID_INPUT")}}(this._key,e)}get public(){return new tw(this._publicKey)}marshal(){return this._key}get bytes(){return Pb.encode({Type:xb.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Wp(this.bytes,e.bytes)}async hash(){const{bytes:e}=await os.digest(this.bytes);return e}async id(){return xs(await this.public.hash(),"base58btc")}async export(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"libp2p-key";if("libp2p-key"===t)return kb(this.bytes,e);throw new Hp("export format '".concat(t,"' is not supported"),"ERR_INVALID_EXPORT_FORMAT")}}function nw(e){return new rw(e)}function iw(e){return new tw(e)}async function ow(){const e=Np.utils.randomPrivateKey();return new rw(e)}const sw={rsa:ae,ed25519:se,secp256k1:ce};function aw(e){const t=Object.keys(sw).join(" / ");return new Hp("invalid or unsupported key type ".concat(e,". Must be ").concat(t),"ERR_UNSUPPORTED_KEY_TYPE")}function cw(e){if("rsa"===(e=e.toLowerCase())||"ed25519"===e||"secp256k1"===e)return sw[e];throw aw(e)}async function uw(e,t){return cw(e).generateKeyPair(null!==t&&void 0!==t?t:2048)}function lw(e){var t,r;const n=Tb.decode(e),i=null!==(t=n.Data)&&void 0!==t?t:new Uint8Array;switch(n.Type){case xb.RSA:return sw.rsa.unmarshalRsaPublicKey(i);case xb.Ed25519:return sw.ed25519.unmarshalEd25519PublicKey(i);case xb.Secp256k1:return sw.secp256k1.unmarshalSecp256k1PublicKey(i);default:throw aw(null!==(r=n.Type)&&void 0!==r?r:"unknown")}}function dw(e,t){var r;return cw(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}async function hw(e){var t,r;const n=Pb.decode(e),i=null!==(t=n.Data)&&void 0!==t?t:new Uint8Array;switch(n.Type){case xb.RSA:return sw.rsa.unmarshalRsaPrivateKey(i);case xb.Ed25519:return sw.ed25519.unmarshalEd25519PrivateKey(i);case xb.Secp256k1:return sw.secp256k1.unmarshalSecp256k1PrivateKey(i);default:throw aw(null!==(r=n.Type)&&void 0!==r?r:"RSA")}}async function fw(e,t){try{const r=await async function(e,t){const r=go.decode(e);return Sb().decrypt(r,t)}(e,t);return await hw(r)}catch(i){}const r=ic.pki.decryptRsaPrivateKey(e,t);if(null===r)throw new Hp("Cannot read the key, most likely the password is wrong or not a RSA key","ERR_CANNOT_DECRYPT_PEM");let n=ic.asn1.toDer(ic.pki.privateKeyToAsn1(r));return n=ks(n.getBytes(),"ascii"),sw.rsa.unmarshalRsaPrivateKey(n)}var pw,gw;async function mw(e,t,r){const n=await async function(e,t){if(null==e.privateKey)throw new Error("PrivateKey was missing from PeerId");const r=await hw(e.privateKey);return r.sign(t)}(e,bw(t));if(null==e.publicKey)throw new Error("PublicKey was missing from local PeerId");return function(e,t,r){return gw.encode({identityKey:e,identitySig:t,extensions:null!==r&&void 0!==r?r:{webtransportCerthashes:[]}}).subarray()}(e.publicKey,n,r)}async function yw(e){return sg(e.identityKey)}function vw(e){return gw.decode(e)}function bw(e){const t=ks("noise-libp2p-static-key:");return gb([t,e],t.length+e.length)}async function ww(e,t,r){const n=await sg(t.identityKey);if(!n.equals(r))throw new Error("Payload identity key ".concat(n.toString()," does not match expected remote peer ").concat(r.toString()));const i=bw(e);if(null==n.publicKey)throw new Error("PublicKey was missing from PeerId");if(null==t.identitySig)throw new Error("Signature was missing from message");const o=lw(n.publicKey);if(!await o.verify(i,t.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return n}function _w(e){return e instanceof Uint8Array&&32===e.length}function Ew(){return{forComponent:e=>Aw(e)}}function Aw(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}("".concat(e,":trace"));return Fs.enabled("".concat(e,":trace"))&&null!=Fs.names.map((e=>e.toString())).find((e=>e.includes(":trace")))&&(t=Fs("".concat(e,":trace"))),Object.assign(Fs(e),{error:Fs("".concat(e,":error")),trace:t})}!function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.webtransportCerthashes)for(const n of e.webtransportCerthashes)t.uint32(10),t.bytes(n);!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={webtransportCerthashes:[]},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3===1)r.webtransportCerthashes.push(e.bytes());else e.skipType(7&t)}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(pw||(pw={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.identityKey&&e.identityKey.byteLength>0&&(t.uint32(10),t.bytes(e.identityKey)),null!=e.identitySig&&e.identitySig.byteLength>0&&(t.uint32(18),t.bytes(e.identitySig)),null!=e.extensions&&(t.uint32(34),pw.codec().encode(e.extensions,t)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={identityKey:bs(0),identitySig:bs(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.identityKey=e.bytes();break;case 2:r.identitySig=e.bytes();break;case 4:r.extensions=pw.codec().decode(e,e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(gw||(gw={})),Fs.formatters.b=e=>null==e?"undefined":fo.baseEncode(e),Fs.formatters.t=e=>null==e?"undefined":to.baseEncode(e),Fs.formatters.m=e=>null==e?"undefined":go.baseEncode(e),Fs.formatters.p=e=>null==e?"undefined":e.toString(),Fs.formatters.c=e=>null==e?"undefined":e.toString(),Fs.formatters.k=e=>null==e?"undefined":e.toString(),Fs.formatters.a=e=>null==e?"undefined":e.toString();const Sw=Aw("libp2p:noise");let kw;function xw(e){e?(kw("LOCAL_PUBLIC_EPHEMERAL_KEY ".concat(xs(e.publicKey,"hex"))),kw("LOCAL_PRIVATE_EPHEMERAL_KEY ".concat(xs(e.privateKey,"hex")))):kw("Missing local ephemeral keys.")}function Iw(e){kw("REMOTE_EPHEMERAL_PUBLIC_KEY ".concat(xs(e,"hex")))}kw=xv?Sw:Object.assign((()=>{}),{enabled:!1,trace:()=>{},error:()=>{}});class Tw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;We(this,"n",void 0),We(this,"bytes",void 0),We(this,"view",void 0),this.n=e,this.bytes=bs(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>4294967295)throw new Error("Cipherstate has reached maximum n, a new handshake must be performed")}}class Pw{constructor(e){We(this,"crypto",void 0),this.crypto=e}encryptWithAd(e,t,r){const n=this.encrypt(e.k,e.n,t,r);return e.n.increment(),n}decryptWithAd(e,t,r,n){const{plaintext:i,valid:o}=this.decrypt(e.k,e.n,t,r,n);return o&&e.n.increment(),{plaintext:i,valid:o}}hasKey(e){return!this.isEmptyKey(e.k)}createEmptyKey(){return bs(32)}isEmptyKey(e){return Wp(this.createEmptyKey(),e)}encrypt(e,t,r,n){return t.assertValue(),this.crypto.chaCha20Poly1305Encrypt(n,t.getBytes(),r,e)}encryptAndHash(e,t){let r;return r=this.hasKey(e.cs)?this.encryptWithAd(e.cs,e.h,t):t,this.mixHash(e,r),r}decrypt(e,t,r,n,i){t.assertValue();const o=this.crypto.chaCha20Poly1305Decrypt(n,t.getBytes(),r,e,i);return o?{plaintext:o,valid:!0}:{plaintext:bs(0),valid:!1}}decryptAndHash(e,t){let r,n=!0;return this.hasKey(e.cs)?({plaintext:r,valid:n}=this.decryptWithAd(e.cs,e.h,t)):r=t,this.mixHash(e,t),{plaintext:r,valid:n}}dh(e,t){try{const r=this.crypto.generateX25519SharedKey(e,t);return 32===r.length?r:r.subarray(0,32)}catch(r){const e=r;return Sw.error(e),bs(32)}}mixHash(e,t){e.h=this.getHash(e.h,t)}getHash(e,t){return this.crypto.hashSHA256(gb([e,t],e.length+t.length))}mixKey(e,t){const[r,n]=this.crypto.getHKDF(e.ck,t);e.cs=this.initializeKey(n),e.ck=r}initializeKey(e){return{k:e,n:new Tw}}initializeSymmetric(e){const t=ks(e,"utf-8"),r=this.hashProtocolName(t),n=r,i=this.createEmptyKey();return{cs:this.initializeKey(i),ck:n,h:r}}hashProtocolName(e){if(e.length<=32){const t=bs(32);return t.set(e),t}return this.getHash(e,bs(0))}split(e){const[t,r]=this.crypto.getHKDF(e.ck,bs(0));return{cs1:this.initializeKey(t),cs2:this.initializeKey(r)}}writeMessageRegular(e,t){const r=this.encryptWithAd(e,bs(0),t);return{ne:this.createEmptyKey(),ns:bs(0),ciphertext:r}}readMessageRegular(e,t){return this.decryptWithAd(e,bs(0),t.ciphertext)}}class Rw extends Pw{initializeInitiator(e,t,r,n){const i=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(i,e);return{ss:i,s:t,rs:r,psk:n,re:bs(32)}}initializeResponder(e,t,r,n){const i=this.initializeSymmetric("Noise_XX_25519_ChaChaPoly_SHA256");this.mixHash(i,e);return{ss:i,s:t,rs:r,psk:n,re:bs(32)}}writeMessageA(e,t,r){const n=bs(0);e.e=void 0!==r?r:this.crypto.generateX25519KeyPair();const i=e.e.publicKey;this.mixHash(e.ss,i);return{ne:i,ns:n,ciphertext:this.encryptAndHash(e.ss,t)}}writeMessageB(e,t){e.e=this.crypto.generateX25519KeyPair();const r=e.e.publicKey;this.mixHash(e.ss,r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const n=e.s.publicKey,i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));return{ne:r,ns:i,ciphertext:this.encryptAndHash(e.ss,t)}}writeMessageC(e,t){const r=e.s.publicKey,n=this.encryptAndHash(e.ss,r);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));const i=this.encryptAndHash(e.ss,t),o={ne:this.createEmptyKey(),ns:n,ciphertext:i},{cs1:s,cs2:a}=this.split(e.ss);return{h:e.ss.h,messageBuffer:o,cs1:s,cs2:a}}readMessageA(e,t){return _w(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,t.ciphertext)}readMessageB(e,t){if(_w(t.ne)&&(e.re=t.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ns);n&&_w(r)&&(e.rs=r),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:i,valid:o}=this.decryptAndHash(e.ss,t.ciphertext);return{plaintext:i,valid:n&&o}}readMessageC(e,t){const{plaintext:r,valid:n}=this.decryptAndHash(e.ss,t.ns);if(n&&_w(r)&&(e.rs=r),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));const{plaintext:i,valid:o}=this.decryptAndHash(e.ss,t.ciphertext),{cs1:s,cs2:a}=this.split(e.ss);return{h:e.ss.h,plaintext:i,valid:n&&o,cs1:s,cs2:a}}initSession(e,t,r){const n=this.createEmptyKey(),i=bs(32);let o;return o=e?this.initializeInitiator(t,r,i,n):this.initializeResponder(t,r,i,n),{hs:o,i:e,mc:0}}sendMessage(e,t,r){let n;if(0===e.mc)n=this.writeMessageA(e.hs,t,r);else if(1===e.mc)n=this.writeMessageB(e.hs,t);else if(2===e.mc){const{h:r,messageBuffer:i,cs1:o,cs2:s}=this.writeMessageC(e.hs,t);n=i,e.h=r,e.cs1=o,e.cs2=s}else{if(!(e.mc>2))throw new Error("Session invalid.");if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");n=this.writeMessageRegular(e.cs1,t)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");n=this.writeMessageRegular(e.cs2,t)}}return e.mc++,n}recvMessage(e,t){let r=bs(0),n=!1;if(0===e.mc)({plaintext:r,valid:n}=this.readMessageA(e.hs,t));else if(1===e.mc)({plaintext:r,valid:n}=this.readMessageB(e.hs,t));else if(2===e.mc){const{h:i,plaintext:o,valid:s,cs1:a,cs2:c}=this.readMessageC(e.hs,t);r=o,n=s,e.h=i,e.cs1=a,e.cs2=c}return e.mc++,{plaintext:r,valid:n}}}class Cw{constructor(e,t,r,n,i,o,s,a){We(this,"isInitiator",void 0),We(this,"session",void 0),We(this,"remotePeer",void 0),We(this,"remoteExtensions",{webtransportCerthashes:[]}),We(this,"payload",void 0),We(this,"connection",void 0),We(this,"xx",void 0),We(this,"staticKeypair",void 0),We(this,"prologue",void 0),this.isInitiator=e,this.payload=t,this.prologue=r,this.staticKeypair=i,this.connection=o,s&&(this.remotePeer=s),this.xx=null!==a&&void 0!==a?a:new Rw(n),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){var e;if(e=this.session.hs.s,kw("LOCAL_STATIC_PUBLIC_KEY ".concat(xs(e.publicKey,"hex"))),kw("LOCAL_STATIC_PRIVATE_KEY ".concat(xs(e.privateKey,"hex"))),this.isInitiator){Sw.trace("Stage 0 - Initiator starting to send first message.");const e=this.xx.sendMessage(this.session,bs(0));await this.connection.write(function(e){return gb([e.ne,e.ciphertext],e.ne.length+e.ciphertext.length)}(e)),Sw.trace("Stage 0 - Initiator finished sending first message."),xw(this.session.hs.e)}else{Sw.trace("Stage 0 - Responder waiting to receive first message...");const e=function(e){if(e.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:e.subarray(0,32),ciphertext:e.subarray(32,e.length),ns:bs(0)}}((await this.connection.read()).subarray()),{valid:t}=this.xx.recvMessage(this.session,e);if(!t)throw new Vp("xx handshake stage 0 validation fail");Sw.trace("Stage 0 - Responder received first message."),Iw(this.session.hs.re)}}async exchange(){if(this.isInitiator){Sw.trace("Stage 1 - Initiator waiting to receive first message from responder...");const r=function(e){if(e.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:e.subarray(0,32),ns:e.subarray(32,80),ciphertext:e.subarray(80,e.length)}}((await this.connection.read()).subarray()),{plaintext:n,valid:i}=this.xx.recvMessage(this.session,r);if(!i)throw new Vp("xx handshake stage 1 validation fail");Sw.trace("Stage 1 - Initiator received the message."),Iw(this.session.hs.re),e=this.session.hs.rs,kw("REMOTE_STATIC_PUBLIC_KEY ".concat(xs(e,"hex"))),Sw.trace("Initiator going to check remote's signature...");try{const e=vw(n);this.remotePeer=this.remotePeer||await yw(e),await ww(this.session.hs.rs,e,this.remotePeer),this.setRemoteNoiseExtension(e.extensions)}catch(t){throw new Kp("Error occurred while verifying signed payload: ".concat(t.message))}Sw.trace("All good with the signature!")}else{Sw.trace("Stage 1 - Responder sending out first message with signed payload and static key.");const e=this.xx.sendMessage(this.session,this.payload);await this.connection.write(function(e){return gb([e.ne,e.ns,e.ciphertext],e.ne.length+e.ns.length+e.ciphertext.length)}(e)),Sw.trace("Stage 1 - Responder sent the second handshake message with signed payload."),xw(this.session.hs.e)}var e}async finish(){if(this.isInitiator){Sw.trace("Stage 2 - Initiator sending third handshake message.");const e=this.xx.sendMessage(this.session,this.payload);await this.connection.write(function(e){return gb([e.ns,e.ciphertext],e.ns.length+e.ciphertext.length)}(e)),Sw.trace("Stage 2 - Initiator sent message with signed payload.")}else{Sw.trace("Stage 2 - Responder waiting for third handshake message...");const e=function(e){if(e.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:bs(0),ns:e.subarray(0,48),ciphertext:e.subarray(48,e.length)}}((await this.connection.read()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Vp("xx handshake stage 2 validation fail");Sw.trace("Stage 2 - Responder received the message, finished handshake.");try{const e=vw(r);this.remotePeer=this.remotePeer||await yw(e),await ww(this.session.hs.rs,e,this.remotePeer),this.setRemoteNoiseExtension(e.extensions)}catch(t){throw new Kp("Error occurred while verifying signed payload: ".concat(t.message))}}var e;(e=this.session).cs1&&e.cs2?(kw("CIPHER_STATE_1 ".concat(e.cs1.n.getUint64()," ").concat(xs(e.cs1.k,"hex"))),kw("CIPHER_STATE_2 ".concat(e.cs2.n.getUint64()," ").concat(xs(e.cs2.k,"hex")))):kw("Missing cipher state.")}encrypt(e,t){const r=this.getCS(t);return this.xx.encryptWithAd(r,bs(0),e)}decrypt(e,t,r){const n=this.getCS(t,!1);return this.xx.decryptWithAd(n,bs(0),e,r)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e.cs1||!e.cs2)throw new Vp("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?t?e.cs1:e.cs2:t?e.cs2:e.cs1}setRemoteNoiseExtension(e){e&&(this.remoteExtensions=e)}}class Bw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};We(this,"protocol","/noise"),We(this,"crypto",void 0),We(this,"prologue",void 0),We(this,"staticKeys",void 0),We(this,"extensions",void 0),We(this,"metrics",void 0);const{staticNoiseKey:t,extensions:r,crypto:n,prologueBytes:i,metrics:o}=e;this.crypto=null!==n&&void 0!==n?n:pb,this.extensions=r,this.metrics=o?function(e){return{xxHandshakeSuccesses:e.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:e.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:e.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:e.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:e.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}(o):void 0,this.staticKeys=t?this.crypto.generateX25519KeyPairFromSeed(t):this.crypto.generateX25519KeyPair(),this.prologue=null!==i&&void 0!==i?i:bs(0)}async secureOutbound(e,t,r){const n=Ev(t,{lengthEncoder:mb,lengthDecoder:yb,maxDataLength:kv}),i=await this.performHandshake({connection:n,isInitiator:!0,localPeer:e,remotePeer:r});return{conn:await this.createSecureConnection(n,i),remoteExtensions:i.remoteExtensions,remotePeer:i.remotePeer}}async secureInbound(e,t,r){const n=Ev(t,{lengthEncoder:mb,lengthDecoder:yb,maxDataLength:kv}),i=await this.performHandshake({connection:n,isInitiator:!1,localPeer:e,remotePeer:r});return{conn:await this.createSecureConnection(n,i),remotePeer:i.remotePeer,remoteExtensions:i.remoteExtensions}}async performHandshake(e){const t=await mw(e.localPeer,this.staticKeys.publicKey,this.extensions);return this.performXXHandshake(e,t)}async performXXHandshake(e,t){const{isInitiator:r,remotePeer:n,connection:i}=e,o=new Cw(r,t,this.prologue,this.crypto,this.staticKeys,i,n);try{var s;await o.propose(),await o.exchange(),await o.finish(),null===(s=this.metrics)||void 0===s||s.xxHandshakeSuccesses.increment()}catch(c){var a;if(null===(a=this.metrics)||void 0===a||a.xxHandshakeErrors.increment(),c instanceof Error)throw c.message="Error occurred during XX handshake: ".concat(c.message),c}return o}async createSecureConnection(e,t){const[r,n]=function(){const e=Av(),t=Av();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}(),i=e.unwrap();return await my(r,function(e,t){return async function*(r){for await(const n of r)for(let r=0;r<n.length;r+=65519){let i=r+65519;i>n.length&&(i=n.length);const o=e.encrypt(n.subarray(r,i),e.session);null===t||void 0===t||t.encryptedPackets.increment(),yield gb([mb(o.byteLength),o],2+o.byteLength)}}}(t,this.metrics),i,(e=>cy(e,{lengthDecoder:yb})),function(e,t){return async function*(r){for await(const n of r)for(let r=0;r<n.length;r+=kv){let i=r+kv;if(i>n.length&&(i=n.length),i-16<r)throw new Error("Invalid chunk");const o=n.subarray(r,i),s=n.subarray(r,i-16),{plaintext:a,valid:c}=e.decrypt(o,e.session,s);if(!c)throw null===t||void 0===t||t.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");null===t||void 0===t||t.decryptedPackets.increment(),yield a}}}(t,this.metrics),r),n}}function Mw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return()=>new Bw(e)}class Nw extends Error{constructor(e,t){super(null!==e&&void 0!==e?e:"The operation was aborted"),this.type="aborted",this.code=null!==t&&void 0!==t?t:"ABORT_ERR"}}function Ow(e,t,r){const n=null!==r&&void 0!==r?r:{},i=function(e){if(null!=e){if("function"===typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"===typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"===typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}(e);return async function*(){let r;const o=()=>{null!=r&&r()};for(t.addEventListener("abort",o);;){let a;try{if(t.aborted){const{abortMessage:e,abortCode:t}=n;throw new Nw(e,t)}const e=new Promise(((e,t)=>{r=()=>{const{abortMessage:e,abortCode:r}=n;t(new Nw(e,r))}}));a=await Promise.race([e,i.next()]),r=null}catch(s){t.removeEventListener("abort",o);const r="aborted"===s.type&&t.aborted;if(r&&null!=n.onAbort&&n.onAbort(e),"function"===typeof i.return)try{const e=i.return();e instanceof Promise&&e.catch((e=>{null!=n.onReturnError&&n.onReturnError(e)}))}catch(s){null!=n.onReturnError&&n.onReturnError(s)}if(r&&!0===n.returnOnAbort)return;throw s}if(!0===a.done)break;yield a.value}t.removeEventListener("abort",o)}()}var Dw,Lw=__webpack_require__(7896);!function(e){e[e.NEW_STREAM=0]="NEW_STREAM",e[e.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",e[e.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",e[e.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",e[e.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",e[e.RESET_RECEIVER=5]="RESET_RECEIVER",e[e.RESET_INITIATOR=6]="RESET_INITIATOR"}(Dw||(Dw={}));const Uw=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),Fw=Object.freeze({NEW_STREAM:Dw.NEW_STREAM,MESSAGE:Dw.MESSAGE_INITIATOR,CLOSE:Dw.CLOSE_INITIATOR,RESET:Dw.RESET_INITIATOR}),jw=Object.freeze({MESSAGE:Dw.MESSAGE_RECEIVER,CLOSE:Dw.CLOSE_RECEIVER,RESET:Dw.RESET_RECEIVER}),qw=1<<20;class zw{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qw,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4194304;We(this,"_buffer",void 0),We(this,"_headerInfo",void 0),We(this,"_maxMessageSize",void 0),We(this,"_maxUnprocessedMessageQueueSize",void 0),this._buffer=new Xm,this._headerInfo=null,this._maxMessageSize=e,this._maxUnprocessedMessageQueueSize=t}write(e){if(null==e||0===e.length)return[];if(this._buffer.append(e),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw Object.assign(new Error("unprocessed message queue size too large!"),{code:"ERR_MSG_QUEUE_TOO_BIG"});const t=[];for(;0!==this._buffer.length;){if(null==this._headerInfo)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(r){if("ERR_MSG_TOO_BIG"===r.code)throw r;break}const{id:e,type:n,length:i,offset:o}=this._headerInfo;if(this._buffer.length-o<i)break;const s={id:e,type:n};n!==Dw.NEW_STREAM&&n!==Dw.MESSAGE_INITIATOR&&n!==Dw.MESSAGE_RECEIVER||(s.data=this._buffer.sublist(o,o+i)),t.push(s),this._buffer.consume(o+i),this._headerInfo=null}return t}_decodeHeader(e){const{value:t,offset:r}=Vw(e),{value:n,offset:i}=Vw(e,r),o=7&t;if(null==Uw[o])throw new Error("Invalid type received: ".concat(o));if(n>this._maxMessageSize)throw Object.assign(new Error("message size too large!"),{code:"ERR_MSG_TOO_BIG"});return{id:t>>3,type:o,offset:r+i,length:n}}}const Hw=128,Kw=127;function Vw(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0,i=0,o=r;const s=e.length;do{if(o>=s||i>49)throw r=0,new RangeError("Could not decode varint");t=e.get(o++),n+=i<28?(t&Kw)<<i:(t&Kw)*Math.pow(2,i),i+=7}while(t>=Hw);return r=o-r,{value:n,offset:r}}const Gw=1048576,Ww=(e,t)=>{t.append(e)};const Qw=function(e,t){return null!=e[Symbol.asyncIterator]?async function*(r,n,i){let o=new Xm,s=!1,a=uy(),c=Number(null!==(r=null===t||void 0===t?void 0:t.size)&&void 0!==r?r:Gw);if((isNaN(c)||0===c||c<0)&&(c=Gw),c!==Math.round(c))throw new Error("Batch size must be an integer");const u=null!==(n=null===t||void 0===t?void 0:t.yieldAfter)&&void 0!==n?n:0,l=null!==(i=null===t||void 0===t?void 0:t.serialize)&&void 0!==i?i:Ww;for(Promise.resolve().then((async()=>{try{let t;for await(const r of e)l(r,o),o.byteLength>=c?(clearTimeout(t),a.resolve()):t=setTimeout((()=>{a.resolve()}),u);clearTimeout(t),a.resolve()}catch(t){a.reject(t)}finally{s=!0}}));!s;)if(await a.promise,a=uy(),o.byteLength>0){const e=o;o=new Xm,yield e.subarray()}}():function*(r,n){const i=new Xm;let o=Number(null!==(r=null===t||void 0===t?void 0:t.size)&&void 0!==r?r:Gw);if((isNaN(o)||0===o||o<0)&&(o=Gw),o!==Math.round(o))throw new Error("Batch size must be an integer");const s=null!==(n=null===t||void 0===t?void 0:t.serialize)&&void 0!==n?n:Ww;for(const t of e)s(t,i),i.byteLength>=o&&(yield i.subarray(0,o),i.consume(o));i.byteLength>0&&(yield i.subarray())}()};function Jw(e){return new Uint8Array(e)}const Zw=10240;const Yw=new class{constructor(){We(this,"_pool",void 0),We(this,"_poolOffset",void 0),this._pool=Jw(Zw),this._poolOffset=0}write(e,t){const r=this._pool;let n=this._poolOffset;sn(e.id<<3|e.type,r,n),n+=on(e.id<<3|e.type),e.type!==Dw.NEW_STREAM&&e.type!==Dw.MESSAGE_INITIATOR&&e.type!==Dw.MESSAGE_RECEIVER||null==e.data?(sn(0,r,n),n+=on(0)):(sn(e.data.length,r,n),n+=on(e.data.length));const i=r.subarray(this._poolOffset,n);Zw-n<100?(this._pool=Jw(Zw),this._poolOffset=0):this._poolOffset=n,t.append(i),e.type!==Dw.NEW_STREAM&&e.type!==Dw.MESSAGE_INITIATOR&&e.type!==Dw.MESSAGE_RECEIVER||null==e.data||t.append(e.data)}};function Xw(e){return null!=e&&"function"===typeof e.then}class $w{constructor(e){var t,r;We(this,"id",void 0),We(this,"direction",void 0),We(this,"timeline",void 0),We(this,"protocol",void 0),We(this,"metadata",void 0),We(this,"source",void 0),We(this,"status",void 0),We(this,"readStatus",void 0),We(this,"writeStatus",void 0),We(this,"sinkController",void 0),We(this,"sinkEnd",void 0),We(this,"endErr",void 0),We(this,"streamSource",void 0),We(this,"onEnd",void 0),We(this,"onCloseRead",void 0),We(this,"onCloseWrite",void 0),We(this,"onReset",void 0),We(this,"onAbort",void 0),We(this,"sendCloseWriteTimeout",void 0),We(this,"log",void 0),this.sinkController=new AbortController,this.sinkEnd=uy(),this.log=e.log,this.status="open",this.readStatus="ready",this.writeStatus="ready",this.id=e.id,this.metadata=null!==(t=e.metadata)&&void 0!==t?t:{},this.direction=e.direction,this.timeline={open:Date.now()},this.sendCloseWriteTimeout=null!==(r=e.sendCloseWriteTimeout)&&void 0!==r?r:5e3,this.onEnd=e.onEnd,this.onCloseRead=null===e||void 0===e?void 0:e.onCloseRead,this.onCloseWrite=null===e||void 0===e?void 0:e.onCloseWrite,this.onReset=null===e||void 0===e?void 0:e.onReset,this.onAbort=null===e||void 0===e?void 0:e.onAbort,this.source=this.streamSource=fy({onEnd:e=>{null!=e?this.log.trace("source ended with error",e):this.log.trace("source ended"),this.onSourceEnd(e)}}),this.sink=this.sink.bind(this)}async sink(e){if("ready"!==this.writeStatus)throw new Hp('writable end state is "'.concat(this.writeStatus,'" not "ready"'),"ERR_SINK_INVALID_STATE");try{this.writeStatus="writing";const t={signal:this.sinkController.signal};if("outbound"===this.direction){const e=this.sendNewStream(t);Xw(e)&&await e}e=Ow(e,this.sinkController.signal,{returnOnAbort:!0}),this.log.trace("sink reading from source");for await(let r of e){r=r instanceof Uint8Array?new Xm(r):r;const e=this.sendData(r,t);Xw(e)&&await e}this.log.trace('sink finished reading from source, write status is "%s"',this.writeStatus),"writing"===this.writeStatus&&(this.writeStatus="closing",this.log.trace("send close write to remote"),await this.sendCloseWrite({signal:AbortSignal.timeout(this.sendCloseWriteTimeout)}),this.writeStatus="closed"),this.onSinkEnd()}catch(t){throw this.log.trace("sink ended with error, calling abort with error",t),this.abort(t),t}finally{this.log.trace("resolve sink end"),this.sinkEnd.resolve()}}onSourceEnd(e){var t;null==this.timeline.closeRead&&(this.timeline.closeRead=Date.now(),this.readStatus="closed",null!=e&&null==this.endErr&&(this.endErr=e),null===(t=this.onCloseRead)||void 0===t||t.call(this),null!=this.timeline.closeWrite?(this.log.trace("source and sink ended"),this.timeline.close=Date.now(),"aborted"!==this.status&&"reset"!==this.status&&(this.status="closed"),null!=this.onEnd&&this.onEnd(this.endErr)):this.log.trace("source ended, waiting for sink to end"))}onSinkEnd(e){var t;null==this.timeline.closeWrite&&(this.timeline.closeWrite=Date.now(),this.writeStatus="closed",null!=e&&null==this.endErr&&(this.endErr=e),null===(t=this.onCloseWrite)||void 0===t||t.call(this),null!=this.timeline.closeRead?(this.log.trace("sink and source ended"),this.timeline.close=Date.now(),"aborted"!==this.status&&"reset"!==this.status&&(this.status="closed"),null!=this.onEnd&&this.onEnd(this.endErr)):this.log.trace("sink ended, waiting for source to end"))}async close(e){this.log.trace("closing gracefully"),this.status="closing",await Promise.all([this.closeRead(e),this.closeWrite(e)]),this.status="closed",this.log.trace("closed gracefully")}async closeRead(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("closing"===this.readStatus||"closed"===this.readStatus)return;this.log.trace('closing readable end of stream with starting read status "%s"',this.readStatus);const t=this.readStatus;this.readStatus="closing","reset"!==this.status&&"aborted"!==this.status&&null==this.timeline.closeRead&&(this.log.trace("send close read to remote"),await this.sendCloseRead(e)),"ready"===t&&(this.log.trace("ending internal source queue"),this.streamSource.end()),this.log.trace("closed readable end of stream")}async closeWrite(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"closing"!==this.writeStatus&&"closed"!==this.writeStatus&&(this.log.trace('closing writable end of stream with starting write status "%s"',this.writeStatus),"ready"===this.writeStatus&&(this.log.trace("sink was never sunk, sink an empty array"),await pv(this.sink([]),e.signal)),"writing"===this.writeStatus&&await new Promise(((t,r)=>{queueMicrotask((()=>{this.log.trace("aborting source passed to .sink"),this.sinkController.abort(),pv(this.sinkEnd.promise,e.signal).then(t,r)}))})),this.writeStatus="closed",this.log.trace("closed writable end of stream"))}abort(e){var t;if("closed"===this.status||"aborted"===this.status||"reset"===this.status)return;this.log("abort with error",e),this.log("try to send reset to remote");const r=this.sendReset();Xw(r)&&r.catch((e=>{this.log.error("error sending reset message",e)})),this.status="aborted",this.timeline.abort=Date.now(),this._closeSinkAndSource(e),null===(t=this.onAbort)||void 0===t||t.call(this,e)}reset(){var e;if("closed"===this.status||"aborted"===this.status||"reset"===this.status)return;const t=new Hp("stream reset","ERR_STREAM_RESET");this.status="reset",this.timeline.reset=Date.now(),this._closeSinkAndSource(t),null===(e=this.onReset)||void 0===e||e.call(this)}_closeSinkAndSource(e){this._closeSink(e),this._closeSource(e)}_closeSink(e){"writing"===this.writeStatus&&(this.log.trace("end sink source"),this.sinkController.abort()),this.onSinkEnd(e)}_closeSource(e){"closing"!==this.readStatus&&"closed"!==this.readStatus&&(this.log.trace("ending source with %d bytes to be read by consumer",this.streamSource.readableLength),this.readStatus="closing",this.streamSource.end(e))}remoteCloseWrite(){"closing"!==this.readStatus&&"closed"!==this.readStatus?(this.log.trace("remote close write"),this._closeSource()):this.log("received remote close write but local source is already closed")}remoteCloseRead(){"closing"!==this.writeStatus&&"closed"!==this.writeStatus?(this.log.trace("remote close read"),this._closeSink()):this.log("received remote close read but local sink is already closed")}destroy(){"closed"!==this.status&&"aborted"!==this.status&&"reset"!==this.status?(this.log.trace("stream destroyed"),this._closeSinkAndSource()):this.log("received destroy but we are already closed")}sourcePush(e){this.streamSource.push(e)}sourceReadableLength(){return this.streamSource.readableLength}}class e_ extends $w{constructor(e){super(e),We(this,"name",void 0),We(this,"streamId",void 0),We(this,"send",void 0),We(this,"types",void 0),We(this,"maxDataSize",void 0),this.types="outbound"===e.direction?Fw:jw,this.send=e.send,this.name=e.name,this.streamId=e.streamId,this.maxDataSize=e.maxDataSize}async sendNewStream(){await this.send({id:this.streamId,type:Fw.NEW_STREAM,data:new Xm(ks(this.name))})}async sendData(e){for(e=e.sublist();e.byteLength>0;){const t=Math.min(e.byteLength,this.maxDataSize);await this.send({id:this.streamId,type:this.types.MESSAGE,data:e.sublist(0,t)}),e.consume(t)}}async sendReset(){await this.send({id:this.streamId,type:this.types.RESET})}async sendCloseWrite(){await this.send({id:this.streamId,type:this.types.CLOSE})}async sendCloseRead(){}}const t_=Aw("libp2p:mplex");function r_(e){const t={...e,type:"".concat(Uw[e.type]," (").concat(e.type,")")};return e.type===Dw.NEW_STREAM&&(t.data=xs(e.data instanceof Uint8Array?e.data:e.data.subarray())),e.type!==Dw.MESSAGE_INITIATOR&&e.type!==Dw.MESSAGE_RECEIVER||(t.data=xs(e.data instanceof Uint8Array?e.data:e.data.subarray(),"base16")),t}class n_{constructor(e){var t,r,n;We(this,"protocol","/mplex/6.7.0"),We(this,"sink",void 0),We(this,"source",void 0),We(this,"_streamId",void 0),We(this,"_streams",void 0),We(this,"_init",void 0),We(this,"_source",void 0),We(this,"closeController",void 0),We(this,"rateLimiter",void 0),We(this,"closeTimeout",void 0),e=null!==(t=e)&&void 0!==t?t:{},this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=e,this.closeTimeout=null!==(r=e.closeTimeout)&&void 0!==r?r:500,this.sink=this._createSink(),this._source=function(){return py((e=>{let t;const r=[];for(;!e.isEmpty()&&(t=e.shift(),null!=t);){if(null!=t.error)throw t.error;!1===t.done&&r.push(t.value)}return null==t?{done:!0}:{done:!0===t.done,value:r}}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}({objectMode:!0,onEnd:()=>{for(const e of this._streams.initiators.values())e.destroy();for(const e of this._streams.receivers.values())e.destroy()}}),this.source=my(this._source,(e=>function(e){try{let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return async function*(){if(null!=t&&0!==t)yield*Qw(e,{size:t,serialize:(e,t)=>{for(const r of e)Yw.write(r,t)}});else for await(const t of e){const e=new Xm;for(const r of t)Yw.write(r,e);yield e.subarray()}}()}catch(t){return Promise.reject(t)}}(e,this._init.minSendBytes))),this.closeController=new AbortController,this.rateLimiter=new Lw.RateLimiterMemory({points:null!==(n=e.disconnectThreshold)&&void 0!==n?n:5,duration:1})}get streams(){const e=[];for(const t of this._streams.initiators.values())e.push(t);for(const t of this._streams.receivers.values())e.push(t);return e}newStream(e){if(this.closeController.signal.aborted)throw new Error("Muxer already closed");const t=this._streamId++;e=null==e?t.toString():e.toString();const r=this._streams.initiators;return this._newStream({id:t,name:e,type:"initiator",registry:r})}async close(e){var t;if(this.closeController.signal.aborted)return;const r=null!==(t=null===e||void 0===e?void 0:e.signal)&&void 0!==t?t:AbortSignal.timeout(this.closeTimeout);try{await Promise.all(this.streams.map((async e=>e.close({signal:r})))),this._source.end(),await this._source.onEmpty({signal:r}),this.closeController.abort()}catch(n){this.abort(n)}}abort(e){this.closeController.signal.aborted||(this.streams.forEach((t=>{t.abort(e)})),this.closeController.abort(e))}_newReceiverStream(e){const{id:t,name:r}=e,n=this._streams.receivers;return this._newStream({id:t,name:r,type:"receiver",registry:n})}_newStream(e){var t;const{id:r,name:n,type:i,registry:o}=e;if(t_("new %s stream %s",i,r),"initiator"===i&&this._streams.initiators.size===(null!==(t=this._init.maxOutboundStreams)&&void 0!==t?t:1024))throw new Hp("Too many outbound streams open","ERR_TOO_MANY_OUTBOUND_STREAMS");if(o.has(r))throw new Error("".concat(i," stream ").concat(r," already exists!"));const s=function(e){const{id:t,name:r,send:n,onEnd:i,type:o="initiator",maxMsgSize:s=qw}=e;return new e_({id:"initiator"===o?"i".concat(t):"r".concat(t),streamId:t,name:"".concat(null==r?t:r),direction:"initiator"===o?"outbound":"inbound",maxDataSize:s,onEnd:i,send:n,log:Aw("libp2p:mplex:stream:".concat(o,":").concat(t))})}({id:r,name:n,send:async e=>{t_.enabled&&t_.trace("%s stream %s send",i,r,r_(e)),this._source.push(e)},type:i,onEnd:()=>{t_("%s stream with id %s and protocol %s ended",i,r,s.protocol),o.delete(r),null!=this._init.onStreamEnd&&this._init.onStreamEnd(s)},maxMsgSize:this._init.maxMsgSize});return o.set(r,s),s}_createSink(){return async e=>{try{e=Ow(e,this.closeController.signal,{returnOnAbort:!0});const t=new zw(this._init.maxMsgSize,this._init.maxUnprocessedMessageQueueSize);for await(const r of e)for(const e of t.write(r))await this._handleIncoming(e);this._source.end()}catch(t){t_("error in sink",t),this._source.end(t)}}}async _handleIncoming(e){var t;const{id:r,type:n}=e;if(t_.enabled&&t_.trace("incoming message",r_(e)),e.type===Dw.NEW_STREAM){var i;if(this._streams.receivers.size===(null!==(i=this._init.maxInboundStreams)&&void 0!==i?i:1024)){t_("too many inbound streams open"),this._source.push({id:r,type:Dw.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{return t_("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),void this.abort(new Error("Too many open streams"))}return}const t=this._newReceiverStream({id:r,name:xs(e.data instanceof Uint8Array?e.data:e.data.subarray())});return void(null!=this._init.onIncomingStream&&this._init.onIncomingStream(t))}const o=(1===(1&n)?this._streams.initiators:this._streams.receivers).get(r);if(null==o){t_("missing stream %s for message type %s",r,Uw[n]);try{await this.rateLimiter.consume("missing-stream",1)}catch{return t_("rate limit hit when receiving messages for streams that do not exist - closing remote connection"),void this.abort(new Error("Too many messages for missing streams"))}return}const s=null!==(t=this._init.maxStreamBufferSize)&&void 0!==t?t:4194304;try{switch(n){case Dw.MESSAGE_INITIATOR:case Dw.MESSAGE_RECEIVER:if(o.sourceReadableLength()>s)throw this._source.push({id:e.id,type:n===Dw.MESSAGE_INITIATOR?Dw.RESET_RECEIVER:Dw.RESET_INITIATOR}),new Hp("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers","ERR_STREAM_INPUT_BUFFER_FULL");o.sourcePush(e.data);break;case Dw.CLOSE_INITIATOR:case Dw.CLOSE_RECEIVER:o.remoteCloseWrite();break;case Dw.RESET_INITIATOR:case Dw.RESET_RECEIVER:o.reset();break;default:t_("unknown message type %s",n)}}catch(a){t_.error("error while processing message",a),o.abort(a)}}}class i_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};We(this,"protocol","/mplex/6.7.0"),We(this,"_init",void 0),this._init=e}createStreamMuxer(){return new n_({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},...this._init})}}function o_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return()=>new i_(e)}const s_=Symbol.for("@libp2p/transport");var a_;function c_(e){let t;try{t=An("sni").code}catch(r){return null}for(const[n,i]of e)if(n===t&&void 0!==i)return i;return null}function u_(e){return e.some((e=>{let[t,r]=e;return t===An("tls").code}))}function l_(e,t,r){const n=d_[An(e).name];if(void 0===n)throw new Error("Can't interpret protocol ".concat(An(e).name));const i=n(t,r);return e===An("ip6").code?"[".concat(i,"]"):i}!function(e){e[e.FATAL_ALL=0]="FATAL_ALL",e[e.NO_FATAL=1]="NO_FATAL"}(a_||(a_={}));const d_={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:"[".concat(e,"]"),tcp:(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return"tcp://".concat(l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t),":").concat(e)},udp:(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return"udp://".concat(l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t),":").concat(e)},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return"".concat(l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t),"/ipfs/").concat(e)},p2p:(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return"".concat(l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t),"/p2p/").concat(e)},http:(e,t)=>{var r;const n=u_(t),i=c_(t);if(n&&null!==i)return"https://".concat(i);const o=n?"https://":"http://",s=t.pop();if(void 0===s)throw new Error("Unexpected end of multiaddr");let a=l_(s[0],null!==(r=s[1])&&void 0!==r?r:"",t);return a=a.replace("tcp://",""),"".concat(o).concat(a)},tls:(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t)},sni:(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t)},https:(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let i=l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t);return i=i.replace("tcp://",""),"https://".concat(i)},ws:(e,t)=>{var r;const n=u_(t),i=c_(t);if(n&&null!==i)return"wss://".concat(i);const o=n?"wss://":"ws://",s=t.pop();if(void 0===s)throw new Error("Unexpected end of multiaddr");let a=l_(s[0],null!==(r=s[1])&&void 0!==r?r:"",t);return a=a.replace("tcp://",""),"".concat(o).concat(a)},wss:(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");let i=l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t);return i=i.replace("tcp://",""),"wss://".concat(i)},"p2p-websocket-star":(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return"".concat(l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t),"/p2p-websocket-star")},"p2p-webrtc-star":(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return"".concat(l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t),"/p2p-webrtc-star")},"p2p-webrtc-direct":(e,t)=>{var r;const n=t.pop();if(void 0===n)throw new Error("Unexpected end of multiaddr");return"".concat(l_(n[0],null!==(r=n[1])&&void 0!==r?r:"",t),"/p2p-webrtc-direct")}};const h_=async e=>{if(e.readyState>=2)throw new Error("socket closed");1!==e.readyState&&await new Promise(((t,r)=>{function n(){e.removeEventListener("open",i),e.removeEventListener("error",o)}function i(){n(),t()}function o(t){var i;n(),r(null!==(i=t.error)&&void 0!==i?i:new Error("connect ECONNREFUSED ".concat(e.url)))}e.addEventListener("open",i),e.addEventListener("error",o)}))},f_=(e,t)=>{var r;(t=null!==(r=t)&&void 0!==r?r:{}).closeOnEnd=!1!==t.closeOnEnd;return async r=>{for await(const t of r){try{await h_(e)}catch(n){if("socket closed"===n.message)break;throw n}if(e.readyState===e.CLOSING||e.readyState===e.CLOSED)break;e.send(t)}null!=t.closeOnEnd&&e.readyState<=1&&await new Promise(((t,r)=>{e.addEventListener("close",(e=>{if(e.wasClean||1006===e.code)t();else{const t=Object.assign(new Error("ws error"),{event:e});r(t)}})),setTimeout((()=>{e.close()}))}))}};var p_=__webpack_require__(3634);function g_(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}new Uint8Array(0);function m_(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}var y_=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var d=0,h=o-1;(0!==l||d<i)&&-1!==h;h--,d++)l+=a*s[h]>>>0,s[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=o-i;f!==o&&0===s[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var d=t[i],h=0,f=s-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}};const v_=y_;class b_{constructor(e,t,r){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}class w_{constructor(e,t,r){if(We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseDecode",void 0),We(this,"prefixCodePoint",void 0),this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return E_(this,e)}}class __{constructor(e){We(this,"decoders",void 0),this.decoders=e}or(e){return E_(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}function E_(e,t){var r,n;return new __({...null!==(r=e.decoders)&&void 0!==r?r:{[e.prefix]:e},...null!==(n=t.decoders)&&void 0!==n?n:{[t.prefix]:t}})}class A_{constructor(e,t,r,n){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),We(this,"baseDecode",void 0),We(this,"encoder",void 0),We(this,"decoder",void 0),this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new b_(e,t,r),this.decoder=new w_(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function S_(e){let{name:t,prefix:r,encode:n,decode:i}=e;return new A_(t,r,n,i)}function k_(e){let{name:t,prefix:r,alphabet:n}=e;const{encode:i,decode:o}=v_(n,t);return S_({prefix:r,name:t,encode:i,decode:e=>m_(o(e))})}function x_(e){let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return S_({prefix:r,name:t,encode:e=>function(e,t,r){const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(0!==s&&(o+=t[i&a<<r-s]),n)for(;0!==(o.length*r&7);)o+="=";return o}(e,i,n),decode:e=>function(e,t,r,n){const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let l=0;l<o;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|t,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||0!==(255&c<<8-a))throw new SyntaxError("Unexpected end of data");return s}(e,i,n,t)})}const I_=k_({prefix:"9",name:"base10",alphabet:"0123456789"}),T_=x_({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),P_=x_({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),R_=x_({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),C_=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),B_=C_.reduce(((e,t,r)=>(e[r]=t,e)),[]),M_=C_.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const N_=S_({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=B_[t]),"")},decode:function(e){const t=[];for(const r of e){const e=M_[r.codePointAt(0)];if(void 0===e)throw new Error("Non-base256emoji character: ".concat(r));t.push(e)}return new Uint8Array(t)}}),O_=x_({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),D_=x_({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),L_=x_({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),U_=x_({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),F_=x_({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),j_=x_({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),q_=x_({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),z_=x_({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),H_=x_({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),K_=k_({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),V_=k_({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),G_=k_({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),W_=k_({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Q_=x_({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),J_=x_({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Z_=x_({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Y_=x_({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),X_=x_({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),$_=S_({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>function(e){return(new TextEncoder).encode(e)}(e)}),eE=new TextEncoder,tE=new TextDecoder,rE="json",nE=512;function iE(e){return eE.encode(JSON.stringify(e))}function oE(e){return JSON.parse(tE.decode(e))}const sE="raw",aE=85;function cE(e){return m_(e)}function uE(e){return m_(e)}var lE=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=fE;)r[n++]=255&t|dE,t/=128;for(;t&hE;)r[n++]=255&t|dE,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},dE=128,hE=-128,fE=Math.pow(2,31);var pE=function e(t,r){var n,i=0,o=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&mE)<<o:(n&mE)*Math.pow(2,o),o+=7}while(n>=gE);return e.bytes=s-r,i},gE=128,mE=127;var yE=Math.pow(2,7),vE=Math.pow(2,14),bE=Math.pow(2,21),wE=Math.pow(2,28),_E=Math.pow(2,35),EE=Math.pow(2,42),AE=Math.pow(2,49),SE=Math.pow(2,56),kE=Math.pow(2,63);const xE={encode:lE,decode:pE,encodingLength:function(e){return e<yE?1:e<vE?2:e<bE?3:e<wE?4:e<_E?5:e<EE?6:e<AE?7:e<SE?8:e<kE?9:10}};function IE(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return xE.encode(e,t,r),t}function TE(e){return xE.encodingLength(e)}function PE(e,t){const r=t.byteLength,n=TE(e),i=n+TE(r),o=new Uint8Array(i+r);return IE(e,o,0),IE(r,o,n),o.set(t,i),new RE(e,r,t,o)}class RE{constructor(e,t,r,n){We(this,"code",void 0),We(this,"size",void 0),We(this,"digest",void 0),We(this,"bytes",void 0),this.code=e,this.size=t,this.digest=r,this.bytes=n}}const CE=m_;const BE={code:0,name:"identity",encode:CE,digest:function(e){return PE(0,CE(e))}};function ME(e){let{name:t,code:r,encode:n}=e;return new NE(t,r,n)}class NE{constructor(e,t,r){We(this,"name",void 0),We(this,"code",void 0),We(this,"encode",void 0),this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?PE(this.code,t):t.then((e=>PE(this.code,e)))}throw Error("Unknown type, must be binary type")}}function OE(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const DE=ME({name:"sha2-256",code:18,encode:OE("SHA-256")}),LE=ME({name:"sha2-512",code:19,encode:OE("SHA-512")});let UE,FE;new WeakMap;UE=Symbol.toStringTag,FE=Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const jE={...ve,...de,...ye,...ue,...le,...fe,...pe,...ge,...me,...he};function qE(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const zE=qE("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),HE=qE("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?g_(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),KE={utf8:zE,"utf-8":zE,hex:jE.base16,latin1:HE,ascii:HE,binary:HE,...jE};function VE(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===e||void 0===e||null===(t=e.constructor)||void 0===t?void 0:t.name)&&"number"===typeof(null===e||void 0===e?void 0:e.byteLength)}const GE=e=>{e.binaryType="arraybuffer";const t=async()=>{await new Promise(((t,r)=>{if(i)return void t();if(null!=n)return void r(n);const o=t=>{e.removeEventListener("open",s),e.removeEventListener("error",a),t()},s=()=>{o(t)},a=t=>{o((()=>{var n;r(null!==(n=t.error)&&void 0!==n?n:new Error("connect ECONNREFUSED ".concat(e.url)))}))};e.addEventListener("open",s),e.addEventListener("error",a)}))},r=async function*(){const r=new p_.zN((t=>{let{push:r,stop:n,fail:i}=t;const o=e=>{let t=null;"string"===typeof e.data&&(t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=KE[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):g_(globalThis.Buffer.from(e,"utf-8"))}(e.data)),VE(e.data)&&(t=new Uint8Array(e.data)),e.data instanceof Uint8Array&&(t=e.data),null!=t&&r(t)},s=e=>{var t;i(null!==(t=e.error)&&void 0!==t?t:new Error("Socket error"))};return e.addEventListener("message",o),e.addEventListener("error",s),e.addEventListener("close",n),()=>{e.removeEventListener("message",o),e.removeEventListener("error",s),e.removeEventListener("close",n)}}),{highWaterMark:1/0});await t();for await(const e of r)yield VE(e)?new Uint8Array(e):e}();let n,i=1===e.readyState;return e.addEventListener("open",(()=>{i=!0,n=null})),e.addEventListener("close",(()=>{i=!1,n=null})),e.addEventListener("error",(t=>{var r;i||(n=null!==(r=t.error)&&void 0!==r?r:new Error("connect ECONNREFUSED ".concat(e.url)))})),Object.assign(r,{connected:t})},WE=WebSocket,QE={"http:":"ws:","https:":"wss:"};function JE(e,t){var r;t=null!==(r=t)&&void 0!==r?r:{};const n=((e,t)=>{var r;if(e.startsWith("//")&&(e="".concat(null!==(r=null===t||void 0===t?void 0:t.protocol)&&void 0!==r?r:"ws:").concat(e)),e.startsWith("/")&&null!=t){var n;const r=null!==(n=t.protocol)&&void 0!==n?n:"ws:",i=t.host,o=null!=t.port&&!0!==(null===i||void 0===i?void 0:i.endsWith(":".concat(t.port)))?":".concat(t.port):"";e="".concat(r,"//").concat(i).concat(o).concat(e)}const i=new URL(e);for(const[o,s]of Object.entries(QE))i.protocol===o&&(i.protocol=s);return i})(e,"undefined"===typeof window?void 0:window.location);return((e,t)=>{var r;t=null!==(r=t)&&void 0!==r?r:{};const n=GE(e);let i=t.remoteAddress,o=t.remotePort;if(null!=e.url)try{const t=new URL(e.url);i=t.hostname,o=parseInt(t.port,10)}catch{}if(null==i||null==o)throw new Error("Remote connection did not have address and/or port");return{sink:f_(e,t),source:n,connected:async()=>{await n.connected()},close:async()=>{e.readyState!==e.CONNECTING&&e.readyState!==e.OPEN||await new Promise((t=>{e.addEventListener("close",(()=>{t()})),e.close()}))},destroy:()=>{null!=e.terminate?e.terminate():e.close()},remoteAddress:i,remotePort:o,socket:e}})(new WE(n.toString(),t.websocket),t)}var ZE=__webpack_require__(2193);const YE="object"===typeof window&&"object"===typeof document&&9===document.nodeType,XE=ZE(),$E=YE&&!XE,eA=XE&&!YE,tA=XE&&YE,rA="undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.release&&"node"===globalThis.process.release.name&&!XE,nA="function"===typeof importScripts&&"undefined"!==typeof self&&"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,iA=("undefined"!==typeof globalThis.process&&"undefined"!==typeof globalThis.process.env&&globalThis.process.env.NODE_ENV,"undefined"!==typeof navigator&&"ReactNative"===navigator.product),oA=OA("dns4"),sA=OA("dns6"),aA=OA("dnsaddr"),cA=NA(OA("dns"),aA,oA,sA),uA=NA(OA("ip4"),OA("ip6")),lA=NA(MA(uA,OA("tcp")),MA(cA,OA("tcp"))),dA=MA(uA,OA("udp")),hA=MA(dA,OA("utp")),fA=MA(dA,OA("quic")),pA=MA(dA,OA("quic-v1")),gA=NA(MA(lA,OA("ws")),MA(cA,OA("ws"))),mA=NA(MA(gA,OA("p2p")),gA),yA=NA(MA(lA,OA("wss")),MA(cA,OA("wss")),MA(lA,OA("tls"),OA("ws")),MA(cA,OA("tls"),OA("ws"))),vA=NA(MA(yA,OA("p2p")),yA),bA=NA(MA(lA,OA("http")),MA(uA,OA("http")),MA(cA,OA("http"))),wA=NA(MA(lA,OA("https")),MA(uA,OA("https")),MA(cA,OA("https"))),_A=MA(dA,OA("webrtc-direct"),OA("certhash")),EA=NA(MA(_A,OA("p2p")),_A),AA=MA(pA,OA("webtransport"),OA("certhash"),OA("certhash")),SA=NA(MA(AA,OA("p2p")),AA),kA=NA(MA(mA,OA("p2p-webrtc-star"),OA("p2p")),MA(vA,OA("p2p-webrtc-star"),OA("p2p")),MA(mA,OA("p2p-webrtc-star")),MA(vA,OA("p2p-webrtc-star"))),xA=(NA(MA(mA,OA("p2p-websocket-star"),OA("p2p")),MA(vA,OA("p2p-websocket-star"),OA("p2p")),MA(mA,OA("p2p-websocket-star")),MA(vA,OA("p2p-websocket-star"))),NA(MA(bA,OA("p2p-webrtc-direct"),OA("p2p")),MA(wA,OA("p2p-webrtc-direct"),OA("p2p")),MA(bA,OA("p2p-webrtc-direct")),MA(wA,OA("p2p-webrtc-direct")))),IA=NA(gA,yA,bA,wA,kA,xA,lA,hA,fA,cA,EA,SA),TA=(NA(MA(IA,OA("p2p-stardust"),OA("p2p")),MA(IA,OA("p2p-stardust"))),NA(MA(IA,OA("p2p")),kA,xA,EA,SA,OA("p2p"))),PA=NA(MA(TA,OA("p2p-circuit"),TA),MA(TA,OA("p2p-circuit")),MA(OA("p2p-circuit"),TA),MA(IA,OA("p2p-circuit")),MA(OA("p2p-circuit"),IA),OA("p2p-circuit")),RA=()=>NA(MA(PA,RA),PA),CA=RA();NA(MA(CA,TA,CA),MA(TA,CA),MA(CA,TA),CA,TA),NA(MA(CA,OA("webrtc"),OA("p2p")),MA(CA,OA("webrtc")),MA(IA,OA("webrtc"),OA("p2p")),MA(IA,OA("webrtc")),OA("webrtc"));function BA(e){return function(t){let r;try{r=Zn(t)}catch(i){return!1}const n=e(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function MA(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){if(e.length<t.length)return null;let r=e;return t.some((t=>(r="function"===typeof t?t().partialMatch(e):t.partialMatch(e),Array.isArray(r)&&(e=r),null===r))),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:BA(n),partialMatch:n}}function NA(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){let r=null;return t.some((t=>{const n="function"===typeof t?t().partialMatch(e):t.partialMatch(e);return null!=n&&(r=n,!0)})),r}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:BA(n),partialMatch:n}}function OA(e){const t=e;return{toString:function(){return t},matches:function(e){let r;try{r=Zn(e)}catch(i){return!1}const n=r.protoNames();return 1===n.length&&n[0]===t},partialMatch:function(e){return 0===e.length?null:e[0]===t?e.slice(1):null}}}const DA=421,LA=290;function UA(e){return e.filter((e=>{if(e.protoCodes().includes(LA))return!1;const t=e.decapsulateCode(DA);return mA.matches(t)||vA.matches(t)}))}const FA=Aw("libp2p:websockets:socket");let jA;const qA=Aw("libp2p:websockets");jA=Symbol.toStringTag;class zA{constructor(e){We(this,"init",void 0),We(this,jA,"@libp2p/websockets"),We(this,s_,!0),this.init=e}async dial(e,t){var r;qA("dialing %s",e),t=null!==(r=t)&&void 0!==r?r:{};const n=function(e,t,r){var n;const i={async sink(t){var n;null!=(null===(n=r)||void 0===n?void 0:n.signal)&&(t=Ow(t,r.signal));try{await e.sink(t)}catch(i){"aborted"!==i.type&&FA.error(i)}},source:null!=(r=null!==(n=r)&&void 0!==n?n:{}).signal?Ow(e.source,r.signal):e.source,remoteAddr:t,timeline:{open:Date.now()},async close(){var t;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=Date.now();if(null==r.signal){const e=AbortSignal.timeout(500);r={...r,signal:e}}const o=()=>{const{host:e,port:t}=i.remoteAddr.toOptions();FA("timeout closing stream to %s:%s after %dms, destroying it manually",e,t,Date.now()-n),this.abort(new Hp("Socket close timeout","ERR_SOCKET_CLOSE_TIMEOUT"))};null===(t=r.signal)||void 0===t||t.addEventListener("abort",o);try{await e.close()}catch(a){FA.error("error closing WebSocket gracefully",a),this.abort(a)}finally{var s;null===(s=r.signal)||void 0===s||s.removeEventListener("abort",o),i.timeline.close=Date.now()}},abort(t){const{host:r,port:n}=i.remoteAddr.toOptions();FA("timeout closing stream to %s:%s due to error",r,n,t),e.destroy(),i.timeline.close=Date.now()}};return e.socket.addEventListener("close",(()=>{null==i.timeline.close&&(i.timeline.close=Date.now())}),{once:!0}),i}(await this._connect(e,t),e);qA("new outbound connection %s",n.remoteAddr);const i=await t.upgrader.upgradeOutbound(n);return qA("outbound connection %s upgraded",n.remoteAddr),i}async _connect(e,t){var r;if(!0===(null===t||void 0===t||null===(r=t.signal)||void 0===r?void 0:r.aborted))throw new zp;const n=e.toOptions();qA("dialing %s:%s",n.host,n.port);const i=uy(),o=JE(function(e,t){var r;const n=Zn(e).stringTuples(),i=n.pop();if(void 0===i)throw new Error("Unexpected end of multiaddr");const o=An(i[0]),s=d_[o.name];if(null==s)throw new Error("No interpreter found for ".concat(o.name));let a=s(null!==(r=i[1])&&void 0!==r?r:"",n);return!1!==(null===t||void 0===t?void 0:t.assumeHttp)&&i[0]===An("tcp").code&&(a=a.replace("tcp://","http://"),"443"!==i[1]&&"80"!==i[1]||("443"===i[1]&&(a=a.replace("http://","https://")),a=a.substring(0,a.lastIndexOf(":")))),a}(e),this.init);if(o.socket.addEventListener("error",(()=>{const t=new Hp("Could not connect to ".concat(e.toString()),"ERR_CONNECTION_FAILED");qA.error("connection error:",t),i.reject(t)})),null==t.signal)return await Promise.race([o.connected(),i.promise]),qA("connected %s",e),o;let s;const a=new Promise(((e,r)=>{var n,i;s=()=>{r(new zp),o.close().catch((e=>{qA.error("error closing raw socket",e)}))},!0!==(null===t||void 0===t||null===(n=t.signal)||void 0===n?void 0:n.aborted)?null===t||void 0===t||null===(i=t.signal)||void 0===i||i.addEventListener("abort",s):s()}));try{await Promise.race([a,i.promise,o.connected()])}finally{var c;if(null!=s)null===t||void 0===t||null===(c=t.signal)||void 0===c||c.removeEventListener("abort",s)}return qA("connected %s",e),o}createListener(e){return function(){throw new Error("WebSocket Servers can not be created in the browser!")}(this.init)}filter(e){var t,r;return e=Array.isArray(e)?e:[e],null!=(null===(t=this.init)||void 0===t?void 0:t.filter)?null===(r=this.init)||void 0===r?void 0:r.filter(e):$E||nA?function(e){return e.filter((e=>{if(e.protoCodes().includes(LA))return!1;const t=e.decapsulateCode(DA);return vA.matches(t)}))}(e):UA(e)}}function HA(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return()=>new zA(e)}var KA,VA=new WeakMap;class GA extends EventTarget{constructor(){super(...arguments),Ye(this,VA,{writable:!0,value:new Map})}listenerCount(e){const t=$e(this,VA).get(e);return null==t?0:t.length}addEventListener(e,t,r){var n;super.addEventListener(e,t,r);let i=$e(this,VA).get(e);null==i&&(i=[],$e(this,VA).set(e,i)),i.push({callback:t,once:null!==(n=!0!==r&&!1!==r&&(null===r||void 0===r?void 0:r.once))&&void 0!==n&&n})}removeEventListener(e,t,r){super.removeEventListener(e.toString(),null!==t&&void 0!==t?t:null,r);let n=$e(this,VA).get(e);null!=n&&(n=n.filter((e=>{let{callback:r}=e;return r!==t})),$e(this,VA).set(e,n))}dispatchEvent(e){const t=super.dispatchEvent(e);let r=$e(this,VA).get(e.type);return null==r||(r=r.filter((e=>{let{once:t}=e;return!t})),$e(this,VA).set(e.type,r)),t}safeDispatchEvent(e,t){return this.dispatchEvent(new QA(e,t))}}class WA extends Event{constructor(e,t){super(e,t),We(this,"detail",void 0),this.detail=null===t||void 0===t?void 0:t.detail}}const QA=null!==(KA=globalThis.CustomEvent)&&void 0!==KA?KA:WA,JA=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n]}catch{}},ZA=Symbol.for("@libp2p/peer-discovery"),YA={TEST:"enrtree://AO47IDOLBKH72HIZZOXQP6NMRESAN7CHYWIBNXDXWRJRZWLODKII6@test.wakuv2.nodes.status.im",PROD:"enrtree://ANEDLO25QVUGJOUTQFRYKWX6P4Z4GKVESBMHML7DZ6YK4LGS5FC5O@prod.wakuv2.nodes.status.im"},XA="bootstrap",$A={store:2,filter:1,lightPush:1},eS=/^(\d{1,3}\.){3,3}\d{1,3}$/,tS=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,rS={name:"v4",size:4,isFormat:e=>eS.test(e),encode(e,t,r){r=~~r,t=t||new Uint8Array(r+4);const n=e.length;let i=0;for(let o=0;o<n;){const n=e.charCodeAt(o++);46===n?(t[r++]=i,i=0):i=10*i+(n-48)}return t[r]=i,t},decode:(e,t)=>(t=~~t,"".concat(e[t++],".").concat(e[t++],".").concat(e[t++],".").concat(e[t]))},nS={name:"v6",size:16,isFormat:e=>e.length>0&&tS.test(e),encode(e,t,r){let n=(r=~~r)+16,i=-1,o=0,s=0,a=!0,c=!1;t=t||new Uint8Array(r+16);for(let u=0;u<e.length;u++){let l=e.charCodeAt(u);58===l?(a?-1!==i?(r<n&&(t[r]=0),r<n-1&&(t[r+1]=0),r+=2):r<n&&(i=r):(!0===c?(r<n&&(t[r]=s),r++):(r<n&&(t[r]=o>>8),r<n-1&&(t[r+1]=255&o),r+=2),o=0,s=0),a=!0,c=!1):46===l?(r<n&&(t[r]=s),r++,s=0,o=0,a=!1,c=!0):(a=!1,l>=97?l-=87:l>=65?l-=55:(l-=48,s=10*s+l),o=(o<<4)+l)}if(!1===a)!0===c?(r<n&&(t[r]=s),r++):(r<n&&(t[r]=o>>8),r<n-1&&(t[r+1]=255&o),r+=2);else if(0===i)r<n&&(t[r]=0),r<n-1&&(t[r+1]=0),r+=2;else if(-1!==i){r+=2;for(let e=Math.min(r-1,n-1);e>=i+2;e--)t[e]=t[e-2];t[i]=0,t[i+1]=0,i=r}if(i!==r&&-1!==i)for(r>n-2&&(r=n-2);n>i;)t[--n]=r<n&&r>i?t[--r]:0;else for(;r<n;)t[r++]=0;return t},decode(e,t){t=~~t;let r="";for(let n=0;n<16;n+=2)0!==n&&(r+=":"),r+=(e[t+n]<<8|e[t+n+1]).toString(16);return r.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};function iS(e){if(rS.isFormat(e))return rS.size;if(nS.isFormat(e))return nS.size;throw Error("Invalid ip address: ".concat(e))}function oS(e){switch(e){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+e}function sS(e){switch(e.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":case"*":return 255}return e.toUpperCase().startsWith("UNKNOWN_")?parseInt(e.slice(8)):0}function aS(e){switch(e){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+e}function cS(e){switch(e){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+e}function uS(e){switch(e){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+e}function lS(e){switch(e.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}function dS(e){if("number"===typeof e)return e;if(!e)return-1;switch(e.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const t=e.match(/_(\d+)$/);return t?parseInt(t[1],10):-1}const hS=55296,fS=56320;function pS(e){let t=0;const r=e.length;for(let n=0;n<r;n+=1){const i=e.charCodeAt(n);if(i<=127)t+=1;else if(i<=2047)t+=2;else if((63488&i)!==hS)t+=3;else{const o=n+1;if(o===r||i>=fS)t+=3;else{(64512&e.charCodeAt(o))!==fS?t+=3:(n=o,t+=4)}}}return t}function gS(e,t,r){const n=e.length;void 0!==r&&null!==r||(r=0),void 0===t&&(t=new Uint8Array(pS(e)+r));let i=r;for(let o=0;o<n;o+=1){let r=e.charCodeAt(o);if(r<=127)t[i++]=r;else if(r<=2047)t[i++]=192|(1984&r)>>6,t[i++]=128|63&r;else if((63488&r)!==hS)t[i++]=224|(61440&r)>>12,t[i++]=128|(4032&r)>>6,t[i++]=128|63&r;else{const s=o+1;if(s===n||r>=fS)t[i++]=239,t[i++]=191,t[i++]=189;else{const n=e.charCodeAt(s);(64512&n)!==fS?(t[i++]=239,t[i++]=191,t[i++]=189):(o=s,r=65536|(1023&r)<<10|1023&n,t[i++]=240|(1835008&r)>>18,t[i++]=128|(258048&r)>>12,t[i++]=128|(4032&r)>>6,t[i++]=128|63&r)}}}return gS.bytes=i-r,t}function mS(e,t,r){let n="";void 0!==t&&null!==t||(t=0),void 0!==r&&null!==r||(r=e.length);for(let i=t;i<r;){const t=e[i++];let r;if(t<=128)r=t;else if(t>191&&t<224)r=(31&t)<<6|63&e[i++];else if(t>239&&t<365){r=((7&t)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++])-65536;const o=hS|r>>10&1023;n+=String.fromCharCode(o),r=fS|1023&r}else r=(15&t)<<12|(63&e[i++])<<6|63&e[i++];n+=String.fromCharCode(r)}return mS.bytes=r-t,n}gS.bytes=0,mS.bytes=0;const yS=e=>e instanceof Uint8Array;function vS(e){return"string"===typeof e?pS(e):e.byteLength}function bS(e){return e instanceof Uint8Array?e:Array.isArray(e)?new Uint8Array(e):gS(e)}function wS(e,t,r){if("string"!==typeof t)throw new Error("unknown input type");return gS(t,e,r),gS.bytes}const _S=Math.pow(2,24),ES=Math.pow(2,16),AS=Math.pow(2,8),SS=(e,t)=>e[t]*_S+e[t+1]*ES+e[t+2]*AS+e[t+3],kS=(e,t)=>e[t]<<8|e[t+1],xS=(e,t,r)=>(t=+t,e[r+3]=t,t>>>=8,e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,r+4),IS=(e,t,r)=>(e[r]=t>>8,e[r+1]=255&t,r+2);function TS(e,t,r,n,i){return r<0&&(n-=r,r=0),n<0&&(n=0),i<0?new Uint8Array(0):r>=t.length||n>=i?0:function(e,t,r,n,i){i-n>t.length-r&&(i=n+t.length-r);let o=i-n;const s=e.length-n;o>s&&(o=s);(0!==n||i<e.length)&&(e=new Uint8Array(e.buffer,e.byteOffset+n,o));return t.set(e,r),o}(e,t,r,n,i)}const PS=32768;function RS(e){let{bytes:t=0,encode:r,decode:n,encodingLength:i}=e;return r.bytes=t,n.bytes=t,{encode:r,decode:n,encodingLength:i||(()=>t)}}const CS=RS({encode(e,t,r){t||(t=new Uint8Array(CS.encodingLength(e))),r||(r=0);const n=r,i=e.replace(/^\.|\.$/gm,"");if(i.length){const e=i.split(".");for(let n=0;n<e.length;n++){const i=wS(t,e[n],r+1);t[r]=i,r+=i+1}}return t[r++]=0,CS.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=[];let n=t,i=0,o=0,s=!1;for(;;){if(t>=e.length)throw new Error("Cannot decode name (buffer overflow)");const a=e[t++];if(o+=s?0:1,0===a)break;if(0===(192&a)){if(t+a>e.length)throw new Error("Cannot decode name (buffer overflow)");if(i+=a+1,i>254)throw new Error("Cannot decode name (name too long)");r.push(mS(e,t,t+a)),t+=a,o+=s?0:a}else{if(192!==(192&a))throw new Error("Cannot decode name (bad label)");{if(t+1>e.length)throw new Error("Cannot decode name (buffer overflow)");const r=kS(e,t-1)-49152;if(r>=n)throw new Error("Cannot decode name (bad pointer)");t=r,n=r,o+=s?0:1,s=!0}}}return CS.decode.bytes=o,0===r.length?".":r.join(".")},encodingLength:e=>"."===e||".."===e?1:vS(e.replace(/^\.|\.$/gm,""))+2}),BS=RS({encode(e,t,r){t||(t=new Uint8Array(BS.encodingLength(e))),r||(r=0);const n=wS(t,e,r+1);return t[r]=n,BS.encode.bytes=n+1,t},decode(e,t){t||(t=0);const r=e[t],n=mS(e,t+1,t+1+r);return BS.decode.bytes=r+1,n},encodingLength:e=>vS(e)+1}),MS=RS({bytes:12,encode(e,t,r){t||(t=new Uint8Array(MS.encodingLength(e))),r||(r=0);const n=32767&(e.flags||0),i="response"===e.type?32768:0;return IS(t,e.id||0,r),IS(t,n|i,r+2),IS(t,e.questions.length,r+4),IS(t,e.answers.length,r+6),IS(t,e.authorities.length,r+8),IS(t,e.additionals.length,r+10),t},decode(e,t){if(t||(t=0),e.length<12)throw new Error("Header must be 12 bytes");const r=kS(e,t+2);return{id:kS(e,t),type:32768&r?"response":"query",flags:32767&r,flag_qr:1===(r>>15&1),opcode:cS(r>>11&15),flag_aa:1===(r>>10&1),flag_tc:1===(r>>9&1),flag_rd:1===(r>>8&1),flag_ra:1===(r>>7&1),flag_z:1===(r>>6&1),flag_ad:1===(r>>5&1),flag_cd:1===(r>>4&1),rcode:aS(15&r),questions:new Array(kS(e,t+4)),answers:new Array(kS(e,t+6)),authorities:new Array(kS(e,t+8)),additionals:new Array(kS(e,t+10))}},encodingLength:()=>12}),NS=RS({encode(e,t,r){t||(t=new Uint8Array(NS.encodingLength(e))),r||(r=0);const n=e.length;return IS(t,n,r),TS(e,t,r+2,0,n),NS.encode.bytes=n+2,t},decode(e,t){t||(t=0);const r=kS(e,t),n=e.slice(t+2,t+2+r);return NS.decode.bytes=r+2,n},encodingLength:e=>e.length+2}),OS=RS({encode:(e,t,r)=>(t||(t=new Uint8Array(OS.encodingLength(e))),r||(r=0),CS.encode(e,t,r+2),IS(t,CS.encode.bytes,r),OS.encode.bytes=CS.encode.bytes+2,t),decode(e,t){t||(t=0);const r=kS(e,t),n=CS.decode(e,t+2);return OS.decode.bytes=r+2,n},encodingLength:e=>CS.encodingLength(e)+2}),DS=RS({encode(e,t,r){t||(t=new Uint8Array(DS.encodingLength(e))),r||(r=0);const n=r;return r+=2,CS.encode(e.mname,t,r),r+=CS.encode.bytes,CS.encode(e.rname,t,r),r+=CS.encode.bytes,xS(t,e.serial||0,r),r+=4,xS(t,e.refresh||0,r),r+=4,xS(t,e.retry||0,r),r+=4,xS(t,e.expire||0,r),r+=4,xS(t,e.minimum||0,r),IS(t,(r+=4)-n-2,n),DS.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n={};return t+=2,n.mname=CS.decode(e,t),t+=CS.decode.bytes,n.rname=CS.decode(e,t),t+=CS.decode.bytes,n.serial=SS(e,t),t+=4,n.refresh=SS(e,t),t+=4,n.retry=SS(e,t),t+=4,n.expire=SS(e,t),t+=4,n.minimum=SS(e,t),t+=4,DS.decode.bytes=t-r,n},encodingLength:e=>22+CS.encodingLength(e.mname)+CS.encodingLength(e.rname)}),LS=RS({encode(e,t,r){Array.isArray(e)||(e=[e]);for(let i=0;i<e.length;i++)if("string"===typeof e[i]&&(e[i]=bS(e[i])),!yS(e[i]))throw new Error("Must be a Buffer");t||(t=new Uint8Array(LS.encodingLength(e))),r||(r=0);const n=r;return r+=2,e.forEach((function(e){t[r++]=e.length,TS(e,t,r,0,e.length),r+=e.length})),IS(t,r-n-2,n),LS.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t;let n=kS(e,t);t+=2;const i=[];for(;n>0;){const r=e[t++];if(--n,n<r)throw new Error("Buffer overflow");i.push(e.slice(t,t+r)),t+=r,n-=r}return LS.decode.bytes=t-r,i},encodingLength(e){Array.isArray(e)||(e=[e]);let t=2;return e.forEach((function(e){t+="string"===typeof e?vS(e)+1:e.length+1})),t}}),US=RS({encode(e,t,r){t||(t=new Uint8Array(US.encodingLength(e))),r||(r=0),"string"===typeof e&&(e=bS(e)),e||(e=new Uint8Array(0));const n=r;r+=2;const i=e.length;return TS(e,t,r,0,i),IS(t,(r+=i)-n-2,n),US.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n=kS(e,t);t+=2;const i=e.slice(t,t+n);return t+=n,US.decode.bytes=t-r,i},encodingLength:e=>e?(yS(e)?e.length:vS(e))+2:2}),FS=RS({encode(e,t,r){t||(t=new Uint8Array(FS.encodingLength(e))),r||(r=0);const n=r;return r+=2,BS.encode(e.cpu,t,r),r+=BS.encode.bytes,BS.encode(e.os,t,r),r+=BS.encode.bytes,IS(t,r-n-2,n),FS.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n={};return t+=2,n.cpu=BS.decode(e,t),t+=BS.decode.bytes,n.os=BS.decode(e,t),t+=BS.decode.bytes,FS.decode.bytes=t-r,n},encodingLength:e=>BS.encodingLength(e.cpu)+BS.encodingLength(e.os)+2}),jS=RS({encode:(e,t,r)=>(t||(t=new Uint8Array(jS.encodingLength(e))),r||(r=0),CS.encode(e,t,r+2),IS(t,CS.encode.bytes,r),jS.encode.bytes=CS.encode.bytes+2,t),decode(e,t){t||(t=0);const r=CS.decode(e,t+2);return jS.decode.bytes=CS.decode.bytes+2,r},encodingLength:e=>CS.encodingLength(e)+2}),qS=RS({encode(e,t,r){t||(t=new Uint8Array(qS.encodingLength(e))),r||(r=0),IS(t,e.priority||0,r+2),IS(t,e.weight||0,r+4),IS(t,e.port||0,r+6),CS.encode(e.target,t,r+8);const n=CS.encode.bytes+6;return IS(t,n,r),qS.encode.bytes=n+2,t},decode(e,t){t||(t=0);const r=kS(e,t),n={};return n.priority=kS(e,t+2),n.weight=kS(e,t+4),n.port=kS(e,t+6),n.target=CS.decode(e,t+8),qS.decode.bytes=r+2,n},encodingLength:e=>8+CS.encodingLength(e.target)}),zS=RS({encode(e,t,r){const n=zS.encodingLength(e);return t||(t=new Uint8Array(zS.encodingLength(e))),r||(r=0),e.issuerCritical&&(e.flags=zS.ISSUER_CRITICAL),IS(t,n-2,r),t[r+=2]=e.flags||0,r+=1,BS.encode(e.tag,t,r),r+=BS.encode.bytes,wS(t,e.value,r),r+=vS(e.value),zS.encode.bytes=n,t},decode(e,t){t||(t=0);const r=kS(e,t),n=t+=2,i={};return i.flags=e[t],t+=1,i.tag=BS.decode(e,t),t+=BS.decode.bytes,i.value=mS(e,t,n+r),i.issuerCritical=!!(i.flags&zS.ISSUER_CRITICAL),zS.decode.bytes=r+2,i},encodingLength:e=>BS.encodingLength(e.tag)+BS.encodingLength(e.value)+2});zS.ISSUER_CRITICAL=128;const HS=RS({encode(e,t,r){t||(t=new Uint8Array(HS.encodingLength(e))),r||(r=0);const n=r;return r+=2,IS(t,e.preference||0,r),r+=2,CS.encode(e.exchange,t,r),r+=CS.encode.bytes,IS(t,r-n-2,n),HS.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n={};return t+=2,n.preference=kS(e,t),t+=2,n.exchange=CS.decode(e,t),t+=CS.decode.bytes,HS.decode.bytes=t-r,n},encodingLength:e=>4+CS.encodingLength(e.exchange)}),KS=RS({encode:(e,t,r)=>(t||(t=new Uint8Array(KS.encodingLength(e))),r||(r=0),IS(t,4,r),r+=2,rS.encode(e,t,r),t),decode(e,t){t||(t=0),t+=2;return rS.decode(e,t)},bytes:6}),VS=RS({encode:(e,t,r)=>(t||(t=new Uint8Array(VS.encodingLength(e))),r||(r=0),IS(t,16,r),r+=2,nS.encode(e,t,r),VS.encode.bytes=18,t),decode(e,t){t||(t=0),t+=2;const r=nS.decode(e,t);return VS.decode.bytes=18,r},bytes:18}),GS=e=>new Uint8Array(e),WS=RS({encode(e,t,r){t||(t=new Uint8Array(WS.encodingLength(e))),r||(r=0);const n=r,i=dS(e.code);if(IS(t,i,r),r+=2,e.data)IS(t,e.data.length,r),r+=2,TS(e.data,t,r),r+=e.data.length;else switch(i){case 8:{const n=e.sourcePrefixLength||0,i=e.family||function(e){return iS(e)===rS.size?1:2}(e.ip),o=function(e,t,r){r=~~r;const n=iS(e);return"function"===typeof t&&(t=t(r+n)),n===rS.size?rS.encode(e,t,r):nS.encode(e,t,r)}(e.ip,GS),s=Math.ceil(n/8);IS(t,s+4,r),IS(t,i,r+=2),r+=2,t[r++]=n,t[r++]=e.scopePrefixLength||0,TS(o,t,r,0,s),r+=s}break;case 11:e.timeout?(IS(t,2,r),r+=2,IS(t,e.timeout,r),r+=2):(IS(t,0,r),r+=2);break;case 12:{const n=e.length||0;IS(t,n,r),r+=2,t.fill(0,r,r+n),r+=n}break;case 14:{const n=2*e.tags.length;IS(t,n,r),r+=2;for(const i of e.tags)IS(t,i,r),r+=2}break;default:throw new Error("Unknown roption code: ".concat(e.code))}return WS.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r={};r.code=kS(e,t),r.type=function(e){switch(e){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return e<0?null:"OPTION_".concat(e)}(r.code);const n=kS(e,t+=2);switch(t+=2,r.data=e.slice(t,t+n),r.code){case 8:r.family=kS(e,t),t+=2,r.sourcePrefixLength=e[t++],r.scopePrefixLength=e[t++];{const i=new Uint8Array(1===r.family?4:16);TS(e,i,0,t,t+n-4),r.ip=function(e,t,r){if(t=~~t,(r=r||e.length-t)===rS.size)return rS.decode(e,t,r);if(r===nS.size)return nS.decode(e,t,r);throw Error("Invalid buffer size needs to be ".concat(rS.size," for v4 or ").concat(nS.size," for v6."))}(i)}break;case 11:n>0&&(r.timeout=kS(e,t),t+=2);break;case 14:r.tags=[];for(let i=0;i<n;i+=2)r.tags.push(kS(e,t)),t+=2}return WS.decode.bytes=n+4,r},encodingLength(e){if(e.data)return e.data.length+4;switch(dS(e.code)){case 8:{const t=e.sourcePrefixLength||0;return Math.ceil(t/8)+8}case 11:return"number"===typeof e.timeout?6:4;case 12:return e.length+4;case 14:return 4+2*e.tags.length}throw new Error("Unknown roption code: ".concat(e.code))}}),QS=RS({encode(e,t,r){t||(t=new Uint8Array(QS.encodingLength(e))),r||(r=0);const n=r,i=fk(e,WS);return IS(t,i,r),r=pk(e,WS,t,r+2),QS.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r=t,n=[];let i=kS(e,t);t+=2;let o=0;for(;i>0;)n[o++]=WS.decode(e,t),t+=WS.decode.bytes,i-=WS.decode.bytes;return QS.decode.bytes=t-r,n},encodingLength:e=>2+fk(e||[],WS)}),JS=RS({encode(e,t,r){t||(t=new Uint8Array(JS.encodingLength(e))),r||(r=0);const n=r,i=e.key;if(!yS(i))throw new Error("Key must be a Buffer");return r+=2,IS(t,e.flags,r),t[r+=2]=JS.PROTOCOL_DNSSEC,t[r+=1]=e.algorithm,TS(i,t,r+=1,0,i.length),r+=i.length,JS.encode.bytes=r-n,IS(t,JS.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},i=kS(e,t);if(t+=2,n.flags=kS(e,t),e[t+=2]!==JS.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return t+=1,n.algorithm=e[t],t+=1,n.key=e.slice(t,r+i+2),t+=n.key.length,JS.decode.bytes=t-r,n},encodingLength:e=>6+vS(e.key)});JS.PROTOCOL_DNSSEC=3,JS.ZONE_KEY=128,JS.SECURE_ENTRYPOINT=32768;const ZS=RS({encode(e,t,r){t||(t=new Uint8Array(ZS.encodingLength(e))),r||(r=0);const n=r,i=e.signature;if(!yS(i))throw new Error("Signature must be a Buffer");return r+=2,IS(t,sS(e.typeCovered),r),t[r+=2]=e.algorithm,t[r+=1]=e.labels,r+=1,xS(t,e.originalTTL,r),r+=4,xS(t,e.expiration,r),r+=4,xS(t,e.inception,r),r+=4,IS(t,e.keyTag,r),r+=2,CS.encode(e.signersName,t,r),TS(i,t,r+=CS.encode.bytes,0,i.length),r+=i.length,ZS.encode.bytes=r-n,IS(t,ZS.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},i=kS(e,t);return t+=2,n.typeCovered=oS(kS(e,t)),t+=2,n.algorithm=e[t],t+=1,n.labels=e[t],t+=1,n.originalTTL=SS(e,t),t+=4,n.expiration=SS(e,t),t+=4,n.inception=SS(e,t),t+=4,n.keyTag=kS(e,t),t+=2,n.signersName=CS.decode(e,t),t+=CS.decode.bytes,n.signature=e.slice(t,r+i+2),t+=n.signature.length,ZS.decode.bytes=t-r,n},encodingLength:e=>20+CS.encodingLength(e.signersName)+vS(e.signature)}),YS=RS({encode(e,t,r){t||(t=new Uint8Array(YS.encodingLength(e))),r||(r=0);const n=r;return r+=2,CS.encode(e.mbox||".",t,r),r+=CS.encode.bytes,CS.encode(e.txt||".",t,r),r+=CS.encode.bytes,YS.encode.bytes=r-n,IS(t,YS.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={};return t+=2,n.mbox=CS.decode(e,t)||".",t+=CS.decode.bytes,n.txt=CS.decode(e,t)||".",t+=CS.decode.bytes,YS.decode.bytes=t-r,n},encodingLength:e=>2+CS.encodingLength(e.mbox||".")+CS.encodingLength(e.txt||".")}),XS=RS({encode(e,t,r){t||(t=new Uint8Array(XS.encodingLength(e))),r||(r=0);const n=r,i=[];for(let o=0;o<e.length;o++){const t=sS(e[o]);void 0===i[t>>8]&&(i[t>>8]=[]),i[t>>8][t>>3&31]|=1<<7-(7&t)}for(let o=0;o<i.length;o++)if(void 0!==i[o]){const e=bS(i[o]);t[r]=o,t[r+=1]=e.length,TS(e,t,r+=1,0,e.length),r+=e.length}return XS.encode.bytes=r-n,t},decode(e,t,r){t||(t=0);const n=t,i=[];for(;t-n<r;){const r=e[t],n=e[t+=1];t+=1;for(let o=0;o<n;o++){const n=e[t+o];for(let e=0;e<8;e++)if(n&1<<7-e){const t=oS(r<<8|o<<3|e);i.push(t)}}t+=n}return XS.decode.bytes=t-n,i},encodingLength(e){const t=[];for(let n=0;n<e.length;n++){const r=sS(e[n]);t[r>>8]=Math.max(t[r>>8]||0,255&r)}let r=0;for(let n=0;n<t.length;n++)void 0!==t[n]&&(r+=2+Math.ceil((t[n]+1)/8));return r}}),$S=RS({encode(e,t,r){t||(t=new Uint8Array($S.encodingLength(e))),r||(r=0);const n=r;return r+=2,CS.encode(e.nextDomain,t,r),r+=CS.encode.bytes,XS.encode(e.rrtypes,t,r),r+=XS.encode.bytes,$S.encode.bytes=r-n,IS(t,$S.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},i=kS(e,t);return t+=2,n.nextDomain=CS.decode(e,t),t+=CS.decode.bytes,n.rrtypes=XS.decode(e,t,i-(t-r)),t+=XS.decode.bytes,$S.decode.bytes=t-r,n},encodingLength:e=>2+CS.encodingLength(e.nextDomain)+XS.encodingLength(e.rrtypes)}),ek=RS({encode(e,t,r){t||(t=new Uint8Array(ek.encodingLength(e))),r||(r=0);const n=r,i=e.salt;if(!yS(i))throw new Error("salt must be a Buffer");const o=e.nextDomain;if(!yS(o))throw new Error("nextDomain must be a Buffer");return t[r+=2]=e.algorithm,t[r+=1]=e.flags,r+=1,IS(t,e.iterations,r),t[r+=2]=i.length,TS(i,t,r+=1,0,i.length),t[r+=i.length]=o.length,TS(o,t,r+=1,0,o.length),r+=o.length,XS.encode(e.rrtypes,t,r),r+=XS.encode.bytes,ek.encode.bytes=r-n,IS(t,ek.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},i=kS(e,t);t+=2,n.algorithm=e[t],t+=1,n.flags=e[t],t+=1,n.iterations=kS(e,t);const o=e[t+=2];t+=1,n.salt=e.slice(t,t+o);const s=e[t+=o];return t+=1,n.nextDomain=e.slice(t,t+s),t+=s,n.rrtypes=XS.decode(e,t,i-(t-r)),t+=XS.decode.bytes,ek.decode.bytes=t-r,n},encodingLength:e=>8+e.salt.length+e.nextDomain.length+XS.encodingLength(e.rrtypes)}),tk=RS({encode(e,t,r){t||(t=new Uint8Array(tk.encodingLength(e))),r||(r=0);const n=r,i=e.digest;if(!yS(i))throw new Error("Digest must be a Buffer");return r+=2,IS(t,e.keyTag,r),t[r+=2]=e.algorithm,t[r+=1]=e.digestType,TS(i,t,r+=1,0,i.length),r+=i.length,tk.encode.bytes=r-n,IS(t,tk.encode.bytes-2,n),t},decode(e,t){t||(t=0);const r=t,n={},i=kS(e,t);return t+=2,n.keyTag=kS(e,t),t+=2,n.algorithm=e[t],t+=1,n.digestType=e[t],t+=1,n.digest=e.slice(t,r+i+2),t+=n.digest.length,tk.decode.bytes=t-r,n},encodingLength:e=>6+vS(e.digest)});function rk(e){switch(e.toUpperCase()){case"A":return KS;case"PTR":case"CNAME":case"DNAME":return jS;case"TXT":return LS;case"NULL":return US;case"AAAA":return VS;case"SRV":return qS;case"HINFO":return FS;case"CAA":return zS;case"NS":return OS;case"SOA":return DS;case"MX":return HS;case"OPT":return QS;case"DNSKEY":return JS;case"RRSIG":return ZS;case"RP":return YS;case"NSEC":return $S;case"NSEC3":return ek;case"DS":return tk}return NS}const nk=RS({encode(e,t,r){t||(t=new Uint8Array(nk.encodingLength(e))),r||(r=0);const n=r;if(CS.encode(e.name,t,r),r+=CS.encode.bytes,IS(t,sS(e.type),r),"OPT"===e.type.toUpperCase()){if("."!==e.name)throw new Error("OPT name must be root.");IS(t,e.udpPayloadSize||4096,r+2),t[r+4]=e.extendedRcode||0,t[r+5]=e.ednsVersion||0,IS(t,e.flags||0,r+6),r+=8,QS.encode(e.options||[],t,r),r+=QS.encode.bytes}else{let n=lS(void 0===e.class?"IN":e.class);e.flush&&(n|=PS),IS(t,n,r+2),xS(t,e.ttl||0,r+4),r+=8;const i=rk(e.type);i.encode(e.data,t,r),r+=i.encode.bytes}return nk.encode.bytes=r-n,t},decode(e,t){t||(t=0);const r={},n=t;if(r.name=CS.decode(e,t),t+=CS.decode.bytes,r.type=oS(kS(e,t)),"OPT"===r.type)r.udpPayloadSize=kS(e,t+2),r.extendedRcode=e[t+4],r.ednsVersion=e[t+5],r.flags=kS(e,t+6),r.flag_do=1===(r.flags>>15&1),r.options=QS.decode(e,t+8),t+=8+QS.decode.bytes;else{const n=kS(e,t+2);r.ttl=SS(e,t+4),r.class=uS(-32769&n),r.flush=!!(n&PS);const i=rk(r.type);r.data=i.decode(e,t+8),t+=8+i.decode.bytes}return nk.decode.bytes=t-n,r},encodingLength(e){const t=null!==e.data&&void 0!==e.data?e.data:e.options;return CS.encodingLength(e.name)+8+rk(e.type).encodingLength(t)}}),ik=RS({encode(e,t,r){t||(t=new Uint8Array(ik.encodingLength(e))),r||(r=0);const n=r;return CS.encode(e.name,t,r),r+=CS.encode.bytes,IS(t,sS(e.type),r),r+=2,IS(t,lS(void 0===e.class?"IN":e.class),r),r+=2,ik.encode.bytes=r-n,e},decode(e,t){t||(t=0);const r=t,n={};n.name=CS.decode(e,t),t+=CS.decode.bytes,n.type=oS(kS(e,t)),t+=2,n.class=uS(kS(e,t)),t+=2;return!!(32768&n.class)&&(n.class&=-32769),ik.decode.bytes=t-r,n},encodingLength:e=>CS.encodingLength(e.name)+4}),ok=256,sk={encode:function(e,t,r){const n=!t;n&&(t=new Uint8Array(hk(e))),r||(r=0);const i=r;return e.questions||(e.questions=[]),e.answers||(e.answers=[]),e.authorities||(e.authorities=[]),e.additionals||(e.additionals=[]),MS.encode(e,t,r),r+=MS.encode.bytes,r=pk(e.questions,ik,t,r),r=pk(e.answers,nk,t,r),r=pk(e.authorities,nk,t,r),r=pk(e.additionals,nk,t,r),sk.encode.bytes=r-i,n&&lk.bytes!==t.length?t.slice(0,lk.bytes):t},decode:function(e,t){t||(t=0);const r=t,n=MS.decode(e,t);return t+=MS.decode.bytes,t=gk(n.questions,ik,e,t),t=gk(n.answers,nk,e,t),t=gk(n.authorities,nk,e,t),t=gk(n.additionals,nk,e,t),sk.decode.bytes=t-r,n},encodingLength:function(e){return MS.encodingLength(e)+fk(e.questions||[],ik)+fk(e.answers||[],nk)+fk(e.authorities||[],nk)+fk(e.additionals||[],nk)}};function ak(e,t){if(e.questions)throw new Error("Only one .question object expected instead of a .questions array!");const r=Object.assign({type:t},e);return r.question&&(r.questions=[r.question],delete r.question),r}sk.encode.bytes=0,sk.decode.bytes=0;const ck={encode:function(e,t,r){return t=sk.encode(ak(e,"query"),t,r),ck.encode.bytes=sk.encode.bytes,t},decode:function(e,t){const r=sk.decode(e,t);return ck.decode.bytes=sk.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(e){return sk.encodingLength(ak(e,"query"))}};ck.encode.bytes=0,ck.decode.bytes=0;const uk={encode:function(e,t,r){return t=sk.encode(ak(e,"response"),t,r),uk.encode.bytes=sk.encode.bytes,t},decode:function(e,t){const r=sk.decode(e,t);return uk.decode.bytes=sk.decode.bytes,r.questions&&(r.question=r.questions[0],delete r.questions),r},encodingLength:function(e){return sk.encodingLength(ak(e,"response"))}};uk.encode.bytes=0,uk.decode.bytes=0;const lk=sk.encode,dk=sk.decode,hk=sk.encodingLength;function fk(e,t){let r=0;for(let n=0;n<e.length;n++)r+=t.encodingLength(e[n]);return r}function pk(e,t,r,n){for(let i=0;i<e.length;i++)t.encode(e[i],r,n),n+=t.encode.bytes;return n}function gk(e,t,r,n){for(let i=0;i<e.length;i++)e[i]=t.decode(r,n),n+=t.decode.bytes;return n}function mk(e,t,r,n){if(64!==t.length)throw new Error("Charset needs to be 64 characters long! (".concat(t.length,")"));const i=new Uint8Array(256),o=new Uint8Array(64);for(let c=0;c<64;c+=1){const e=t.charCodeAt(c);if(e>255)throw new Error("Character #".concat(c," in charset [code=").concat(e,", char=").concat(t.charAt(c),"] is too high! (max=255)"));if(0!==i[e])throw new Error("Character [code=".concat(e,", char=").concat(t.charAt(c),"] is more than once in the charset!"));i[e]=c,o[c]=e}const s=r.charCodeAt(0),a={name:e,encodingLength(e){const t=e.length,r=.75*t|0;return e.charCodeAt(t-1)===s?e.charCodeAt(t-2)===s?r-2:r-1:r},encode(e,t,r){null!==t&&void 0!==t||(t=new Uint8Array(a.encodingLength(e))),null!==r&&void 0!==r||(r=0);let n=e.length;e.charCodeAt(n-1)===s&&(e.charCodeAt(n-2)===s?n-=2:n-=1);const o=n%4,c=n-o;let u=r,l=0;for(;l<c;){const r=i[e.charCodeAt(l)]<<18|i[e.charCodeAt(l+1)]<<12|i[e.charCodeAt(l+2)]<<6|i[e.charCodeAt(l+3)];t[u++]=r>>16,t[u++]=r>>8,t[u++]=r,l+=4}if(3===o){const r=i[e.charCodeAt(l)]<<10|i[e.charCodeAt(l+1)]<<4|i[e.charCodeAt(l+2)]>>2;t[u++]=r>>8,t[u++]=r}else 2===o&&(t[u++]=i[e.charCodeAt(l)]<<2|i[e.charCodeAt(l+1)]>>4);return a.encode.bytes=u-r,t},decode(e,t,r){null!==t&&void 0!==t||(t=0),null!==r&&void 0!==r||(r=e.length);const i=r-t,c=i%3,u=t+i-c,l=[];for(let n=t;n<u;n+=3){const t=e[n]<<16|e[n+1]<<8|e[n+2];l.push(o[t>>18&63],o[t>>12&63],o[t>>6&63],o[63&t])}if(2===c){const t=(e[r-2]<<8)+e[r-1];l.push(o[t>>10],o[t>>4&63],o[t<<2&63]),1===n&&l.push(s)}else if(1===c){const t=e[r-1];l.push(o[t>>2],o[t<<4&63]),1===n&&l.push(s,s)}return a.decode.bytes=i,String.fromCharCode.apply(String,l)}};return a}mk("base64","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/","=",1);const yk=mk("base64-url","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_","=",2);let vk="undefined"!==typeof global?global.AbortError:"undefined"!==typeof window?window.AbortError:null;vk||(vk=class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Request aborted.")}}),vk.prototype.name="AbortError",vk.prototype.code="ABORT_ERR";const bk="undefined"!==typeof globalThis&&globalThis.URL||require("url").URL;class wk extends Error{constructor(e,t,r){super("status="+t+" while requesting "+e+" ["+r+"]"),this.uri=e,this.status=t,this.method=r}toJSON(){return{code:this.code,uri:this.uri,status:this.status,method:this.method,endpoint:this.endpoint}}}wk.prototype.name="HTTPStatusError",wk.prototype.code="HTTP_STATUS";class _k extends Error{constructor(e,t){super(e),this.cause=t}toJSON(){return{message:this.message,endpoint:this.endpoint,code:this.code,cause:kk(this.cause)}}}_k.prototype.name="ResponseError",_k.prototype.code="RESPONSE_ERR";class Ek extends Error{constructor(e){super("Timeout (t="+e+")."),this.timeout=e}toJSON(){return{code:this.code,endpoint:this.endpoint,timeout:this.timeout}}}Ek.prototype.name="TimeoutError",Ek.prototype.code="ETIMEOUT";const Ak=/^((\d{1,3}\.){3,3}\d{1,3})(:(\d{2,5}))?$/,Sk=/^((::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?)(:(\d{2,5}))?$/i;function kk(e){if("string"===typeof e)return{message:e};try{const t=JSON.stringify(e);if("{}"!==t)return JSON.parse(t)}catch(r){}const t={message:String(e.message||e)};return void 0!==e.code&&(t.code=String(e.code)),t}const xk=/^(([a-z0-9]+:)\/\/)?([^/[\s:]+|\[[^\]]+\])?(:([^/\s]+))?(\/[^\s]*)?(.*)$/,Ik=/\[(post|get|((ipv4|ipv6|name)=([^\]]+)))\]/gi,Tk=/\[(((pk|name)=([^\]]+)))\]/gi;function Pk(e,t){t.lastIndex=0;const r={};for(;;){const n=t.exec(e);if(!n)break;n[2]?r[n[3].toLowerCase()]=n[4]:r[n[1].toLowerCase()]=!0}return r}class Rk extends Error{constructor(e,t){super('Invalid Endpoint: unsupported protocol "'.concat(e,'" for endpoint: ').concat(t,", supported protocols: ").concat(Ck.join(", "))),this.protocol=e,this.endpoint=t}toJSON(){return{code:this.code,endpoint:this.endpoint,timeout:this.timeout}}}Rk.prototype.name="InvalidProtocolError",Rk.prototype.code="EPROTOCOL";const Ck=["http:","https:","udp4:","udp6:"];class Bk{constructor(e,t){this.name=e.name||null,this.protocol=e.protocol;const r="string"===typeof e.port?e.port=parseInt(e.port,10):e.port;if(void 0===r||null===r)this.port=t?"https:"===this.protocol?443:80:e.pk?443:53;else{if("number"!==typeof r&&!isNaN(r))throw new Error('Invalid Endpoint: port "'.concat(e.port,'" needs to be a number: ').concat(JSON.stringify(e)));this.port=r}}toJSON(){return this.toString()}}class Mk extends Bk{constructor(e){super(e,!1),this.pk=e.pk||null}toString(){const e=this.port!==(this.pk?443:53)?":".concat(this.port):"",t=this.pk?" [pk=".concat(this.pk,"]"):"",r=this.name?" [name=".concat(this.name,"]"):"";return"udp://".concat(this.ipv4||"[".concat(this.ipv6,"]")).concat(e).concat(t).concat(r)}}class Nk extends Mk{constructor(e){if(super(Object.assign({protocol:"udp4:"},e)),!e.ipv4||"string"!==typeof e.ipv4)throw new Error('Invalid Endpoint: .ipv4 "'.concat(e.ipv4,'" needs to be set: ').concat(JSON.stringify(e)));this.ipv4=e.ipv4}}class Ok extends Mk{constructor(e){if(super(Object.assign({protocol:"udp6:"},e)),!e.ipv6||"string"!==typeof e.ipv6)throw new Error('Invalid Endpoint: .ipv6 "'.concat(e.ipv6,'" needs to be set: ').concat(JSON.stringify(e)));this.ipv6=e.ipv6}}function Dk(e){return Sk.test(e)&&!Ak.test(e)?"[".concat(e,"]"):e}class Lk extends Bk{constructor(e){if(super(Object.assign({protocol:"https:"},e),!0),e.host||(e.ipv4&&(e.host=e.ipv4),e.ipv6&&(e.host="[".concat(e.ipv6,"]"))),!e.host||"string"!==typeof e.host)throw new Error('Invalid Endpoint: host "'.concat(e.path,'" needs to be set: ').concat(JSON.stringify(e)));if(this.host=e.host,this.path=e.path||"/dns-query",this.method=/^post$/i.test(e.method)?"POST":"GET",this.ipv4=e.ipv4,this.ipv6=e.ipv6,!this.ipv6){const e=Sk.exec(this.host);e&&(this.ipv6=e[1])}this.ipv4||Ak.test(this.host)&&(this.ipv4=this.host);const t="".concat(this.protocol,"//").concat(Dk(this.host),":").concat(this.port).concat(this.path);try{this.url=new bk(t)}catch(r){throw new Error(r.message+" [".concat(t,"]"))}}toString(){const e="https:"===this.protocol?"":"http://",t=this.port!==("https:"===this.protocol?443:80)?":".concat(this.port):"",r="GET"!==this.method?" [post]":"",n="/dns-query"===this.path?"":this.path,i=this.name?" [name=".concat(this.name,"]"):"",o=this.ipv4&&this.ipv4!==this.host?" [ipv4=".concat(this.ipv4,"]"):"",s=this.ipv6&&this.ipv6!==this.host?" [ipv6=".concat(this.ipv6,"]"):"";return"".concat(e).concat(Dk(this.host)).concat(t).concat(n).concat(r).concat(o).concat(s).concat(i)}}function Uk(e){let t;if("string"===typeof e)t=function(e){const t=xk.exec(e),r=t[2]||"https:",n=t[3],i=t[5],o=t[6],s=t[7];if("https:"===r||"http:"===r){const e=Pk(s,Ik);return{name:e.name,protocol:r,ipv4:e.ipv4,ipv6:e.ipv6,host:n,port:i,path:o,method:e.post?"POST":"GET"}}if("udp:"===r||"udp4:"===r||"udp6:"===r){const t=Pk(s,Tk),o=/^\[(.*)\]$/.exec(n);if(o&&"udp4:"===r)throw new Error("Endpoint parsing error: Cannot use ipv6 host with udp4: (endpoint=".concat(e,")"));if(!o&&"udp6:"===r)throw new Error("Endpoint parsing error: Incorrectly formatted host for udp6: (endpoint=".concat(e,")"));return o?new Ok({protocol:"udp6:",ipv6:o[1],port:i,pk:t.pk,name:t.name}):new Nk({protocol:"udp4:",ipv4:n,port:i,pk:t.pk,name:t.name})}throw new Rk(r,e)}(e);else{if("object"!==typeof e||null===e||Array.isArray(e))throw new Error("Can not convert ".concat(e," to an endpoint"));if(e instanceof Bk)return e;t=e}null!==t.protocol&&void 0!==t.protocol||(t.protocol="https:");const r=t.protocol;if("udp4:"===r)return new Nk(t);if("udp6:"===r)return new Ok(t);if("https:"===r||"http:"===r)return new Lk(t);throw new Rk(r,JSON.stringify(t))}const Fk="application/dns-message";function jk(){}function qk(e,t,r,n,i){return new Promise(((o,s)=>{const a=new bk(e);"GET"===t&&r&&(a.search="?dns="+yk.decode(r));const c=a.toString(),u=new XMLHttpRequest;u.open(t,c,!0),u.setRequestHeader("Accept",Fk),"POST"===t&&u.setRequestHeader("Content-Type",Fk),u.responseType="arraybuffer",u.timeout=n,u.ontimeout=function(){l(new Ek(n));try{u.abort()}catch(e){}},u.onreadystatechange=function(){if(u.readyState>1&&200!==u.status&&0!==u.status){l(new wk(c,u.status,t));try{u.abort()}catch(e){}}},u.onerror=function(){l(200===u.status?new Error("Inexplicable XHR Error"):new wk(c,u.status,t))},u.onload=function(){if(200!==u.status)l(new wk(c,u.status,t));else{let e;if("string"===typeof u.response)e=gS(u.response);else if(u.response instanceof Uint8Array)e=u.response;else{if(!(Array.isArray(u.response)||u.response instanceof ArrayBuffer))throw new Error("Unprocessable response "+u.response);e=new Uint8Array(u.response)}l(null,e)}},"POST"===t?u.send(r):u.send(),i&&i.addEventListener("abort",d);let l=function(e,t){l=jk,i&&i.removeEventListener("abort",d),o(e?{error:e,response:u}:{data:t,response:u})};function d(){l(new vk);try{u.abort()}catch(e){}}}))}function zk(e){const t=null===e.time||void 0===e.time?Date.now():e.time,r=function(e){return e.filter((e=>e.cors||e.endpoint.cors))}(e.data.map((e=>(e.endpoint=Uk(Object.assign({name:e.name},e.endpoint)),e)))),n=r.map((e=>e.endpoint));return{data:{resolvers:r,resolverByName:r.reduce(((e,t)=>(e[t.name]=t,e)),{}),endpoints:n,endpointByName:n.reduce(((e,t)=>(e[t.name]=t,e)),{})},time:t}}const Hk=zk({data:[{name:"adfree.usableprivacy.net",endpoint:{protocol:"https:",host:"adfree.usableprivacy.net"},description:"Public updns DoH service with advertising, tracker and malware filters.\nHosted in Europe by @usableprivacy, details see: https://docs.usableprivacy.com",country:"Germany",location:{lat:51.2993,long:9.491},filter:!0},{name:"adguard-dns-doh",endpoint:{protocol:"https:",host:"dns.adguard.com",ipv4:"94.140.15.15"},description:"Remove ads and protect your computer from malware (over DoH)",country:"France",location:{lat:48.8582,long:2.3387},filter:!0},{name:"adguard-dns-family-doh",endpoint:{protocol:"https:",host:"dns-family.adguard.com",ipv4:"94.140.15.16"},description:"Adguard DNS with safesearch and adult content blocking (over DoH)",country:"France",location:{lat:48.8582,long:2.3387},filter:!0},{name:"adguard-dns-unfiltered-doh",endpoint:{protocol:"https:",host:"dns-unfiltered.adguard.com",ipv4:"94.140.14.140"},description:"AdGuard public DNS servers without filters (over DoH)",country:"France",location:{lat:48.8582,long:2.3387}},{name:"ahadns-doh-chi",endpoint:{protocol:"https:",host:"doh.chi.ahadns.net",cors:!0},description:"A zero logging DNS with support for DNS-over-HTTPS (DoH) & DNS-over-TLS (DoT). Blocks ads, malware, trackers, viruses, ransomware, telemetry and more. No persistent logs. DNSSEC. Hosted in Chicago, USA. By https://ahadns.com/\nServer statistics can be seen at: https://statistics.ahadns.com/?server=chi",country:"United States",location:{lat:41.8483,long:-87.6517},filter:!0,cors:!0},{name:"ahadns-doh-in",endpoint:{protocol:"https:",host:"doh.in.ahadns.net",cors:!0},description:"A zero logging DNS with support for DNS-over-HTTPS (DoH) & DNS-over-TLS (DoT). Blocks ads, malware, trackers, viruses, ransomware, telemetry and more. No persistent logs. DNSSEC. Hosted in Mumbai, India. By https://ahadns.com/\nServer statistics can be seen at: https://statistics.ahadns.com/?server=in",country:"India",location:{lat:19.0748,long:72.8856},filter:!0,cors:!0},{name:"ahadns-doh-la",endpoint:{protocol:"https:",host:"doh.la.ahadns.net",cors:!0},description:"A zero logging DNS with support for DNS-over-HTTPS (DoH) & DNS-over-TLS (DoT). Blocks ads, malware, trackers, viruses, ransomware, telemetry and more. No persistent logs. DNSSEC. Hosted in Los Angeles, USA. By https://ahadns.com/\nServer statistics can be seen at: https://statistics.ahadns.com/?server=la",country:"United States",location:{lat:34.0549,long:-118.2578},filter:!0,cors:!0},{name:"ahadns-doh-nl",endpoint:{protocol:"https:",host:"doh.nl.ahadns.net",cors:!0},description:"A zero logging DNS with support for DNS-over-HTTPS (DoH) & DNS-over-TLS (DoT). Blocks ads, malware, trackers, viruses, ransomware, telemetry and more. No persistent logs. DNSSEC. Hosted in Amsterdam, Netherlands. By https://ahadns.com/\nServer statistics can be seen at: https://statistics.ahadns.com/?server=nl",country:"Netherlands",location:{lat:52.3824,long:4.8995},filter:!0,cors:!0},{name:"ahadns-doh-ny",endpoint:{protocol:"https:",host:"doh.ny.ahadns.net",cors:!0},description:"A zero logging DNS with support for DNS-over-HTTPS (DoH) & DNS-over-TLS (DoT). Blocks ads, malware, trackers, viruses, ransomware, telemetry and more. No persistent logs. DNSSEC. Hosted in New York. By https://ahadns.com/\nServer statistics can be seen at: https://statistics.ahadns.com/?server=ny",country:"United States",location:{lat:40.7308,long:-73.9975},filter:!0,cors:!0},{name:"ahadns-doh-pl",endpoint:{protocol:"https:",host:"doh.pl.ahadns.net",cors:!0},description:"A zero logging DNS with support for DNS-over-HTTPS (DoH) & DNS-over-TLS (DoT). Blocks ads, malware, trackers, viruses, ransomware, telemetry and more. No persistent logs. DNSSEC. Hosted in Poland. By https://ahadns.com/\nServer statistics can be seen at: https://statistics.ahadns.com/?server=pl",country:"Netherlands",location:{lat:52.3824,long:4.8995},filter:!0,cors:!0},{name:"alidns-doh",endpoint:{protocol:"https:",host:"dns.alidns.com",ipv4:"223.5.5.5",cors:!0},description:"A public DNS resolver that supports DoH/DoT in mainland China, provided by Alibaba-Cloud.\nWarning: GFW filtering rules are applied by that resolver.\nHomepage: https://alidns.com/",country:"China",location:{lat:34.7725,long:113.7266},filter:!0,log:!0,cors:!0},{name:"ams-ads-doh-nl",endpoint:{protocol:"https:",host:"dnsnl-noads.alekberg.net"},description:"Resolver in Amsterdam. DoH protocol. Non-logging. Blocks ads, malware and trackers. DNSSEC enabled.",country:"Romania",location:{lat:45.9968,long:24.997},filter:!0},{name:"ams-doh-nl",endpoint:{protocol:"https:",host:"dnsnl.alekberg.net"},description:"Resolver in Amsterdam. DoH protocol. Non-logging, non-filtering, DNSSEC.",country:"Romania",location:{lat:45.9968,long:24.997}},{name:"att",endpoint:{protocol:"https:",host:"dohtrial.att.net"},description:"AT&T test DoH server.",log:!0},{name:"bcn-ads-doh",endpoint:{protocol:"https:",host:"dnses-noads.alekberg.net"},description:"Resolver in Spain. DoH protocol. Non-logging, remove ads and malware, DNSSEC.",country:"Spain",location:{lat:41.3891,long:2.1611},filter:!0},{name:"bcn-doh",endpoint:{protocol:"https:",host:"dnses.alekberg.net"},description:"Resolver in Spain. DoH protocol. Non-logging, non-filtering, DNSSEC.",country:"Spain",location:{lat:41.3891,long:2.1611}},{name:"brahma-world",endpoint:{protocol:"https:",host:"dns.brahma.world"},description:"DNS-over-HTTPS server. Non Logging, filters ads, trackers and malware. DNSSEC ready, QNAME Minimization, No EDNS Client-Subnet.\nHosted in Stockholm, Sweden. (https://dns.brahma.world)",country:"United States",location:{lat:37.751,long:-97.822},filter:!0},{name:"cisco-doh",endpoint:{protocol:"https:",host:"doh.opendns.com",ipv4:"146.112.41.2"},description:"Remove your DNS blind spot (DoH protocol)\nWarning: modifies your queries to include a copy of your network\naddress when forwarding them to a selection of companies and organizations.",country:"United States",location:{lat:37.751,long:-97.822},filter:!0,log:!0},{name:"cloudflare",endpoint:{protocol:"https:",host:"dns.cloudflare.com",ipv4:"1.0.0.1",cors:!0},description:"Cloudflare DNS (anycast) - aka 1.1.1.1 / 1.0.0.1",country:"Australia",location:{lat:-33.494,long:143.2104},cors:!0},{name:"cloudflare-family",endpoint:{protocol:"https:",host:"family.cloudflare-dns.com",ipv4:"1.0.0.3",cors:!0},description:"Cloudflare DNS (anycast) with malware protection and parental control - aka 1.1.1.3 / 1.0.0.3",country:"Australia",location:{lat:-33.494,long:143.2104},filter:!0,cors:!0},{name:"cloudflare-ipv6",endpoint:{protocol:"https:",host:"1dot1dot1dot1.cloudflare-dns.com",cors:!0},description:"Cloudflare DNS over IPv6 (anycast)",country:"United States",location:{lat:37.751,long:-97.822},cors:!0},{name:"cloudflare-security",endpoint:{protocol:"https:",host:"security.cloudflare-dns.com",ipv4:"1.0.0.2",cors:!0},description:"Cloudflare DNS (anycast) with malware blocking - aka 1.1.1.2 / 1.0.0.2",country:"Australia",location:{lat:-33.494,long:143.2104},filter:!0,cors:!0},{name:"controld-block-malware",endpoint:{protocol:"https:",host:"freedns.controld.com",path:"/p1"},description:"ControlD Free DNS. Take CONTROL of your Internet. Block unwanted content, bypass geo-restrictions and be more productive. DoH protocol and No logging. - https://controld.com/free-dns\nThis DNS blocks Malware domains.",country:"Canada",location:{lat:43.6319,long:-79.3716},filter:!0},{name:"controld-block-malware-ad",endpoint:{protocol:"https:",host:"freedns.controld.com",path:"/p2"},description:"ControlD Free DNS. Take CONTROL of your Internet. Block unwanted content, bypass geo-restrictions and be more productive. DoH protocol and No logging. - https://controld.com/free-dns\nThis DNS blocks Malware, Ads & Tracking domains.",country:"Canada",location:{lat:43.6319,long:-79.3716},filter:!0},{name:"controld-block-malware-ad-social",endpoint:{protocol:"https:",host:"freedns.controld.com",path:"/p3"},description:"ControlD Free DNS. Take CONTROL of your Internet. Block unwanted content, bypass geo-restrictions and be more productive. DoH protocol and No logging. - https://controld.com/free-dns\nThis DNS blocks Malware, Ads & Tracking and Social Networks domains.",country:"Canada",location:{lat:43.6319,long:-79.3716},filter:!0},{name:"controld-family-friendly",endpoint:{protocol:"https:",host:"freedns.controld.com",path:"/family"},description:"ControlD Free DNS. Take CONTROL of your Internet. Block unwanted content, bypass geo-restrictions and be more productive. DoH protocol and No logging. - https://controld.com/free-dns\nThis DNS blocks Malware, Ads & Tracking, Adult Content and Drugs domains.",country:"Canada",location:{lat:43.6319,long:-79.3716},filter:!0},{name:"controld-uncensored",endpoint:{protocol:"https:",host:"freedns.controld.com",path:"/uncensored"},description:"ControlD Free DNS. Take CONTROL of your Internet. Block unwanted content, bypass geo-restrictions and be more productive. DoH protocol and No logging. - https://controld.com/free-dns\nThis DNS unblocks censored domains from various countries.",country:"Canada",location:{lat:43.6319,long:-79.3716}},{name:"controld-unfiltered",endpoint:{protocol:"https:",host:"freedns.controld.com",path:"/p0"},description:"ControlD Free DNS. Take CONTROL of your Internet. Block unwanted content, bypass geo-restrictions and be more productive. DoH protocol and No logging. - https://controld.com/free-dns\nThis is a Unfiltered DNS, no DNS record blocking or manipulation here, if you want to block Malware, Ads & Tracking or Social Network domains, use the other ControlD DNS configs.",country:"Canada",location:{lat:43.6319,long:-79.3716}},{name:"dns.digitale-gesellschaft.ch",endpoint:{protocol:"https:",host:"dns.digitale-gesellschaft.ch"},description:"Public DoH resolver operated by the Digital Society (https://www.digitale-gesellschaft.ch).\nHosted in Zurich, Switzerland.\nNon-logging, non-filtering, supports DNSSEC.",country:"Switzerland",location:{lat:47.1449,long:8.1551}},{name:"dns.ryan-palmer",endpoint:{protocol:"https:",host:"dns1.ryan-palmer.com"},description:"Non-logging, non-filtering, DNSSEC DoH Server. Hosted in the UK.",country:"United Kingdom",location:{lat:51.5164,long:-.093}},{name:"dns.sb",endpoint:{protocol:"https:",host:"doh.sb",ipv4:"185.222.222.222",cors:!0},description:"DNSSEC-enabled DoH server by https://xtom.com/\nhttps://dns.sb/doh/",country:"Unknown",location:{lat:47,long:8},cors:!0},{name:"dns.therifleman.name",endpoint:{protocol:"https:",host:"dns.therifleman.name"},description:"DNS-over-HTTPS DNS forwarder from Mumbai, India. Blocks web and Android trackers and ads.\nIP addresses are not logged, but queries are logged for 24 hours for debugging.\nReport issues, send suggestions @ joker349 at protonmail.com.\nAlso supports DoT (for android) @ dns.therifleman.name and plain DNS @ 172.104.206.174",country:"United States",location:{lat:37.751,long:-97.822},filter:!0},{name:"dnsforfamily-doh",endpoint:{protocol:"https:",host:"dns-doh.dnsforfamily.com"},description:"(DoH Protocol) (Now supports DNSSEC). Block adult websites, gambling websites, malwares and advertisements.\nIt also enforces safe search in: Google, YouTube, Bing, DuckDuckGo and Yandex.\nSocial websites like Facebook and Instagram are not blocked. No DNS queries are logged.\nAs of 26-May-2022 5.9 million websites are blocked and new websites are added to blacklist daily.\nCompletely free, no ads or any commercial motive. Operating for 4 years now.\nProvided by: https://dnsforfamily.com",country:"Finland",location:{lat:60.1758,long:24.9349},filter:!0},{name:"dnsforfamily-doh-no-safe-search",endpoint:{protocol:"https:",host:"dns-doh-no-safe-search.dnsforfamily.com"},description:"(DoH Protocol) (Now supports DNSSEC) Block adult websites, gambling websites, malwares and advertisements.\nUnlike other dnsforfamily servers, this one does not enforces safe search. So Google, YouTube, Bing, DuckDuckGo and Yandex are completely accessible without any restriction.\nSocial websites like Facebook and Instagram are not blocked. No DNS queries are logged.\nAs of 26-May-2022 5.9 million websites are blocked and new websites are added to blacklist daily.\nCompletely free, no ads or any commercial motive. Operating for 4 years now.\nWarning: This server is incompatible with anonymization.\nProvided by: https://dnsforfamily.com",country:"Finland",location:{lat:60.1758,long:24.9349},filter:!0},{name:"dnsforge.de",endpoint:{protocol:"https:",host:"dnsforge.de",cors:!0},description:"Public DoH resolver running with Pihole for Adblocking (https://dnsforge.de).\nNon-logging, AD-filtering, supports DNSSEC. Hosted in Germany.",country:"Germany",location:{lat:52.2998,long:9.447},filter:!0,cors:!0},{name:"dnshome-doh",endpoint:{protocol:"https:",host:"dns.dnshome.de"},description:"https://www.dnshome.de/ public resolver in Germany"},{name:"dnspod-doh",endpoint:{protocol:"https:",host:"doh.pub",cors:!0},description:"A public DNS resolver in mainland China provided by DNSPod (Tencent Cloud).\nhttps://www.dnspod.cn/Products/Public.DNS?lang=en",filter:!0,log:!0,cors:!0},{name:"dnswarden-asia-adblock-dohv4",endpoint:{protocol:"https:",host:"doh.asia.dnswarden.com",path:"/adblock"},description:"Hosted in Singapore. For more information look [here](https://github.com/bhanupratapys/dnswarden) or [here](https://dnswarden.com).",country:"Singapore",location:{lat:1.2929,long:103.8547},filter:!0},{name:"dnswarden-asia-adultfilter-dohv4",endpoint:{protocol:"https:",host:"doh.asia.dnswarden.com",path:"/adultfilter"},description:"Hosted in Singapore. For more information look [here](https://github.com/bhanupratapys/dnswarden) or [here](https://dnswarden.com).",country:"Singapore",location:{lat:1.2929,long:103.8547},filter:!0},{name:"dnswarden-asia-uncensor-dohv4",endpoint:{protocol:"https:",host:"doh.asia.dnswarden.com",path:"/uncensored"},description:"Hosted in Singapore. For more information look [here](https://github.com/bhanupratapys/dnswarden) or [here](https://dnswarden.com).",country:"Singapore",location:{lat:1.2929,long:103.8547}},{name:"dnswarden-eu-adblock-dohv4",endpoint:{protocol:"https:",host:"doh.eu.dnswarden.com"},description:"Hosted in Germany. For more information look [here](https://github.com/bhanupratapys/dnswarden) or [here](https://dnswarden.com).",country:"Germany",location:{lat:50.1103,long:8.7147},filter:!0},{name:"dnswarden-us-adblock-dohv4",endpoint:{protocol:"https:",host:"doh.us.dnswarden.com"},description:"Hosted in USA (Dallas) . For more information look [here](https://github.com/bhanupratapys/dnswarden) or [here](https://dnswarden.com).",country:"United States",location:{lat:32.7889,long:-96.8021},filter:!0},{name:"doh-ch-blahdns",endpoint:{protocol:"https:",host:"doh-ch.blahdns.com",cors:!0},description:"Blocks ad and Tracking, no Logging, DNSSEC, Hosted in Switzerland. By https://blahdns.com/",country:"Netherlands",location:{lat:52.3824,long:4.8995},filter:!0,cors:!0},{name:"doh-cleanbrowsing-adult",endpoint:{protocol:"https:",host:"doh.cleanbrowsing.org",path:"/doh/adult-filter/",cors:!0},description:"Blocks access to all adult, pornographic and explicit sites. It does\nnot block proxy or VPNs, nor mixed-content sites. Sites like Reddit\nare allowed. Google and Bing are set to the Safe Mode.\nBy https://cleanbrowsing.org/",filter:!0,cors:!0},{name:"doh-cleanbrowsing-family",endpoint:{protocol:"https:",host:"doh.cleanbrowsing.org",path:"/doh/family-filter/",cors:!0},description:"Blocks access to all adult, pornographic and explicit sites. It also\nblocks proxy and VPN domains that are used to bypass the filters.\nMixed content sites (like Reddit) are also blocked. Google, Bing and\nYoutube are set to the Safe Mode.\nBy https://cleanbrowsing.org/",filter:!0,cors:!0},{name:"doh-cleanbrowsing-security",endpoint:{protocol:"https:",host:"doh.cleanbrowsing.org",path:"/doh/security-filter/",cors:!0},description:"Block access to phishing, malware and malicious domains. It does not block adult content.\nBy https://cleanbrowsing.org/",filter:!0,cors:!0},{name:"doh-crypto-sx",endpoint:{protocol:"https:",host:"doh.crypto.sx",cors:!0},description:"DNS-over-HTTPS server. Anycast, no logs, no censorship, DNSSEC.\nBackend hosted by Scaleway, globally cached via Cloudflare.\nMaintained by Frank Denis.",country:"United States",location:{lat:37.751,long:-97.822},cors:!0},{name:"doh-crypto-sx-ipv6",endpoint:{protocol:"https:",host:"doh-ipv6.crypto.sx",cors:!0},description:"DNS-over-HTTPS server accessible over IPv6. Anycast, no logs, no censorship, DNSSEC.\nBackend hosted by Scaleway, globally cached via Cloudflare.\nMaintained by Frank Denis.",country:"United States",location:{lat:37.751,long:-97.822},cors:!0},{name:"doh-de-blahdns",endpoint:{protocol:"https:",host:"doh-de.blahdns.com",cors:!0},description:"Blocks ad and Tracking, no Logging, DNSSEC, Hosted in Germany. By https://blahdns.com/",country:"Germany",location:{lat:51.2993,long:9.491},filter:!0,cors:!0},{name:"doh-fi-blahdns",endpoint:{protocol:"https:",host:"doh-fi.blahdns.com",cors:!0},description:"Blocks ad and Tracking, no Logging, DNSSEC, Hosted in Finland. By https://blahdns.com/",country:"Finland",location:{lat:60.1758,long:24.9349},filter:!0,cors:!0},{name:"doh-ibksturm",endpoint:{protocol:"https:",host:"ibksturm.synology.me"},description:"DoH & DoT Server, No Logging, No Filters, DNSSEC\nRunning privately by ibksturm in Thurgau, Switzerland"},{name:"doh-jp-blahdns",endpoint:{protocol:"https:",host:"doh-jp.blahdns.com",cors:!0},description:"Blocks ad and Tracking, no Logging, DNSSEC, Hosted in Japan. By https://blahdns.com/",country:"Japan",location:{lat:35.6882,long:139.7532},filter:!0,cors:!0},{name:"doh.ffmuc.net",endpoint:{protocol:"https:",host:"doh.ffmuc.net"},description:"An open (non-logging, non-filtering, non-censoring) DoH resolver operated by Freifunk Munich with nodes in DE.\nhttps://ffmuc.net/",country:"Germany",location:{lat:51.2993,long:9.491}},{name:"doh.tiarap.org",endpoint:{protocol:"https:",host:"doh.tiarap.org"},description:"Non-Logging DNS-over-HTTPS server, cached via Cloudflare.\nFilters out ads, trackers and malware, NO ECS, supports DNSSEC.",country:"United States",location:{lat:37.751,long:-97.822},filter:!0},{name:"google",endpoint:{protocol:"https:",host:"dns.google",ipv4:"8.8.8.8",cors:!0},description:"Google DNS (anycast)",country:"United States",location:{lat:37.751,long:-97.822},log:!0,cors:!0},{name:"hdns",endpoint:{protocol:"https:",host:"query.hdns.io",cors:!0},description:"HDNS is a public DNS resolver that supports Handshake domains.\nhttps://www.hdns.io",country:"United States",location:{lat:37.7771,long:-122.406},cors:!0},{name:"he",endpoint:{protocol:"https:",host:"ordns.he.net"},description:"Hurricane Electric DoH server (anycast)\nUnknown logging policy.",country:"United States",location:{lat:37.751,long:-97.822},log:!0},{name:"id-gmail-doh",endpoint:{protocol:"https:",host:"doh.tiar.app"},description:"Non-Logging DNS-over-HTTPS server located in Singapore.\nFilters out ads, trackers and malware, supports DNSSEC, provided by id-gmail.",country:"Singapore",location:{lat:1.2929,long:103.8547},filter:!0},{name:"iij",endpoint:{protocol:"https:",host:"public.dns.iij.jp"},description:"DoH server operated by Internet Initiative Japan in Tokyo.\nhttps://www.iij.ad.jp/",country:"Japan",location:{lat:35.69,long:139.69},log:!0},{name:"iqdns-doh",endpoint:{protocol:"https:",host:"a.passcloud.xyz"},description:'Non-logging DoH service runned by V2EX.com user johnsonwil.\nReturns "no such domain" for anti-Chinese government websites. Supports DNSSEC.\nFor more information: https://www.v2ex.com/t/785666',filter:!0},{name:"jp.tiar.app-doh",endpoint:{protocol:"https:",host:"jp.tiar.app"},description:"Non-Logging, Non-Filtering DNS-over-HTTPS server in Japan.\nNo ECS, Support DNSSEC",country:"Japan",location:{lat:35.6882,long:139.7532}},{name:"jp.tiarap.org",endpoint:{protocol:"https:",host:"jp.tiarap.org"},description:"DNS-over-HTTPS Server. Non-Logging, Non-Filtering, No ECS, Support DNSSEC.\nCached via Cloudflare."},{name:"libredns",endpoint:{protocol:"https:",host:"doh.libredns.gr"},description:"DoH server in Germany. No logging, but no DNS padding and no DNSSEC support.\nhttps://libredns.gr/",country:"Germany",location:{lat:51.2993,long:9.491}},{name:"nextdns",endpoint:{protocol:"https:",host:"anycsast.dns.nextdns.io"},description:"NextDNS is a cloud-based private DNS service that gives you full control\nover what is allowed and what is blocked on the Internet.\nDNSSEC, Anycast, Non-logging, NoFilters\nhttps://www.nextdns.io/",country:"Netherlands",location:{lat:52.3891,long:4.6563}},{name:"nextdns-ultralow",endpoint:{protocol:"https:",host:"dns.nextdns.io",path:"/dnscrypt-proxy"},description:'NextDNS is a cloud-based private DNS service that gives you full control\nover what is allowed and what is blocked on the Internet.\nhttps://www.nextdns.io/\nTo select the server location, the "-ultralow" variant relies on bootstrap servers\ninstead of anycast.'},{name:"njalla-doh",endpoint:{protocol:"https:",host:"dns.njal.la",cors:!0},description:"Non-logging DoH server in Sweden operated by Njalla.\nhttps://dns.njal.la/",country:"Sweden",location:{lat:59.3247,long:18.056},cors:!0},{name:"odoh-cloudflare",endpoint:{protocol:"https:",host:"odoh.cloudflare-dns.com",cors:!0},description:"Cloudflare ODoH server.\nhttps://cloudflare.com",cors:!0},{name:"odoh-crypto-sx",endpoint:{protocol:"https:",host:"odoh.crypto.sx",cors:!0},description:"ODoH target server. Anycast, no logs.\nBackend hosted by Scaleway. Maintained by Frank Denis.",cors:!0},{name:"odoh-id-gmail",endpoint:{protocol:"https:",host:"doh.tiar.app",path:"/odoh"},description:"ODoH target server. Based in Singapore, no logs.\nFilter ads, trackers and malware.",filter:!0},{name:"odoh-jp.tiar.app",endpoint:{protocol:"https:",host:"jp.tiar.app",path:"/odoh"},description:"ODoH target server. no logs."},{name:"odoh-jp.tiarap.org",endpoint:{protocol:"https:",host:"jp.tiarap.org",path:"/odoh"},description:"ODoH target server via Cloudflare, no logs."},{name:"odoh-resolver4.dns.openinternet.io",endpoint:{protocol:"https:",host:"resolver4.dns.openinternet.io"},description:"ODoH target server. no logs, no filter, DNSSEC.\nRunning on dedicated hardware colocated at Sonic.net in Santa Rosa, CA in the United States.\nUses Sonic's recusrive DNS servers as upstream resolvers (but is not affiliated with Sonic\nin any way). Provided by https://openinternet.io"},{name:"odoh-tiarap.org",endpoint:{protocol:"https:",host:"doh.tiarap.org",path:"/odoh"},description:"ODoH target server via Cloudflare, no logs.\nFilter ads, trackers and malware.",filter:!0},{name:"publicarray-au2-doh",endpoint:{protocol:"https:",host:"doh-2.seby.io",cors:!0},description:"DNSSEC \u2022 OpenNIC \u2022 Non-logging \u2022 Uncensored - hosted on ovh.com.au\nMaintained by publicarray - https://dns.seby.io",country:"Australia",location:{lat:-33.8591,long:151.2002},cors:!0},{name:"puredns-doh",endpoint:{protocol:"https:",host:"puredns.org",ipv4:"146.190.6.13",cors:!0},description:"Public uncensored DNS resolver in Singapore - https://puredns.org\n** Only available in Indonesia and Singapore **",country:"United States",location:{lat:37.751,long:-97.822},cors:!0},{name:"quad101",endpoint:{protocol:"https:",host:"dns.twnic.tw",cors:!0},description:"DNSSEC-aware public resolver by the Taiwan Network Information Center (TWNIC)\nhttps://101.101.101.101/index_en.html",cors:!0},{name:"quad9-doh-ip4-port443-filter-ecs-pri",endpoint:{protocol:"https:",host:"dns11.quad9.net",ipv4:"149.112.112.11"},description:"Quad9 (anycast) dnssec/no-log/filter/ecs 9.9.9.11 - 149.112.112.11",country:"United States",location:{lat:37.751,long:-97.822},filter:!0},{name:"quad9-doh-ip4-port443-filter-pri",endpoint:{protocol:"https:",host:"dns.quad9.net",ipv4:"149.112.112.112"},description:"Quad9 (anycast) dnssec/no-log/filter 9.9.9.9 - 149.112.112.9 - 149.112.112.112",country:"United States",location:{lat:37.751,long:-97.822},filter:!0},{name:"quad9-doh-ip4-port443-nofilter-ecs-pri",endpoint:{protocol:"https:",host:"dns12.quad9.net",ipv4:"9.9.9.12"},description:"Quad9 (anycast) no-dnssec/no-log/no-filter/ecs 9.9.9.12 - 149.112.112.12",country:"United States",location:{lat:37.751,long:-97.822}},{name:"quad9-doh-ip4-port443-nofilter-pri",endpoint:{protocol:"https:",host:"dns10.quad9.net",ipv4:"149.112.112.10"},description:"Quad9 (anycast) no-dnssec/no-log/no-filter 9.9.9.10 - 149.112.112.10",country:"United States",location:{lat:37.751,long:-97.822}},{name:"quad9-doh-ip6-port5053-filter-pri",endpoint:{protocol:"https:",host:"dns9.quad9.net"},description:"Quad9 (anycast) dnssec/no-log/filter 2620:fe::fe - 2620:fe::9 - 2620:fe::fe:9",country:"United States",location:{lat:37.751,long:-97.822},filter:!0},{name:"safesurfer-doh",endpoint:{protocol:"https:",host:"doh.safesurfer.io"},description:"Family safety focused blocklist for over 2 million adult sites, as well as phishing and malware and more.\nFree to use, paid for customizing blocking for more categories+sites and viewing usage at my.safesurfer.io. Logs taken for viewing\nusage, data never sold - https://safesurfer.io",filter:!0,log:!0},{name:"sth-ads-doh-se",endpoint:{protocol:"https:",host:"dnsse-noads.alekberg.net"},description:"Resolver in Stockholm, Sweden. DoH server. Non-logging, remove ads and malware, DNSSEC.",country:"Bulgaria",location:{lat:42.696,long:23.332},filter:!0},{name:"sth-doh-se",endpoint:{protocol:"https:",host:"dnsse.alekberg.net"},description:"Resolver in Stockholm, Sweden. DoH server. Non-logging, non-filtering, DNSSEC.",country:"Bulgaria",location:{lat:42.696,long:23.332}},{name:"switch",endpoint:{protocol:"https:",host:"dns.switch.ch"},description:"Public DoH service provided by SWITCH in Switzerland\nhttps://www.switch.ch\nProvides protection against malware, but does not block ads.",filter:!0},{name:"uncensoreddns-dk-ipv4",endpoint:{protocol:"https:",host:"unicast.uncensoreddns.org"},description:"Also known as censurfridns.\nDoH, no logs, no filter, DNSSEC, unicast hosted in Denmark - https://blog.uncensoreddns.org",country:"Denmark",location:{lat:55.7123,long:12.0564}},{name:"uncensoreddns-ipv4",endpoint:{protocol:"https:",host:"anycast.uncensoreddns.org"},description:"Also known as censurfridns.\nDoH, no logs, no filter, DNSSEC, anycast - https://blog.uncensoreddns.org",country:"Denmark",location:{lat:55.7123,long:12.0564}},{name:"v.dnscrypt.uk-doh-ipv4",endpoint:{protocol:"https:",host:"v.dnscrypt.uk"},description:"DoH, no logs, uncensored, DNSSEC. Hosted in London UK on Digital Ocean\nhttps://www.dnscrypt.uk",country:"United Kingdom",location:{lat:51.4964,long:-.1224}}],time:1654187067783});function Kk(e,t,r,n){return n&&n.aborted?Promise.reject(new vk):"udp4:"===e.protocol||"udp6:"===e.protocol?function(){throw new Error('Only "doh" endpoints are supported in the browser')}():function(e,t,r,n){return function(e,t,r,n,i){return qk(e,t,r,n,i)}(e.url,e.method,lk(Object.assign({flags:ok},t)),r,n).then((function(e){const t=e.data,r=e.response;let n=e.error;if(void 0===n)if(0===t.length)n=new _k("Empty.");else try{const e=dk(t);return e.response=r,e}catch(i){n=new _k("Invalid packet (cause="+i.message+")",i)}throw Object.assign(n,{response:r})}))}(e,t,r,n)}const Vk=new bk("https://martinheidegger.github.io/dns-query/resolvers.json");function Gk(e){return/^@/.test(e)}const Wk=new class{constructor(e){this.opts=Object.assign({timeout:5e3,update:!0,updateURL:Vk,persist:!1,localStoragePrefix:"dnsquery_",maxAge:3e5},e),this._dataP=null}_data(e,t){return e||null===this._dataP?(this._dataP=this.opts.update?async function(e,t,r,n){const i=t?t.localStoragePrefix+t.name:null;if(i)try{const e=JSON.parse(localStorage.getItem(i));if(e&&e.time>t.maxTime)return e}catch(a){}const{data:o}=await qk(e,"GET",null,r,n),s={time:Date.now(),data:JSON.parse(mS(o))};if(i)try{localStorage.setItem(i,JSON.stringify(s))}catch(a){s.time=null}return s}(this.opts.updateURL,this.opts.persist?{name:"resolvers.json",localStoragePrefix:this.opts.localStoragePrefix,maxTime:Date.now()-this.opts.maxAge}:null,this.opts.timeout).then((e=>zk({data:e.data.resolvers,time:e.time}))).catch((()=>t||Hk)):Promise.resolve(Hk),this._dataP):this._dataP.then((e=>e.time<Date.now()-this.opts.maxAge?this._data(!0,e):e))}data(){return this._data(!1).then((e=>e.data))}endpoints(e){if(null===e||void 0===e)return this.data().then((e=>e.endpoints));if("doh"===e&&(e=Zk),"dns"===e&&(e=Yk),"function"===typeof e)return this.data().then((t=>t.endpoints.filter(e)));if("string"===typeof e||"function"!==typeof e[Symbol.iterator])return Promise.reject(new Error("Endpoints (".concat(e,") needs to be iterable (array).")));if(-1===(e=Array.from(e).filter(Boolean)).findIndex(Gk))try{return Promise.resolve(e.map(Uk))}catch(t){return Promise.reject(t)}return this.data().then((t=>e.map((e=>{if(Gk(e)){const r=t.endpointByName[e.substring(1)];if(!r)throw new Error("Endpoint ".concat(e," is not known."));return r}return Uk(e)}))))}};function Qk(e,t){return t=Object.assign({retries:5,timeout:3e4},t),e.question?(r=t.endpoints,function(e){return null!==e&&"object"===typeof e&&"function"===typeof e.then}(r)?r:Promise.resolve(r)).then((r=>{if(!Array.isArray(r)||0===r.length)throw new Error("No endpoints defined to lookup dns records.");return Jk(r.map(Uk),function(e){const t=Object.assign({type:"query"},e);return delete t.question,t.questions=[],e.question&&t.questions.push(e.question),t}(e),t)})).then((e=>(e.question=e.questions[0],delete e.questions,e))):Promise.reject(new Error("To request data you need to specify a .question!"));var r}function Jk(e,t,r){const n=1===e.length?e[0]:e[Math.floor(Math.random()*e.length)%e.length];return Kk(n,t,r.timeout,r.signal).then((e=>(e.endpoint=n.toString(),e)),(i=>{if("AbortError"===i.name||0===r.retries)throw i.endpoint=n.toString(),i;return r.retries>0&&(r.retries-=1),Jk(e,t,r)}))}function Zk(e){return"https:"===e.protocol||"http:"===e.protocol}function Yk(e){return"udp4:"===e.protocol||"udp6:"===e.protocol}const Xk=new qs("dns-over-https");class $k{static async create(e,t){const r=null!==e&&void 0!==e?e:await Wk.endpoints("doh");return new $k(r,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;We(this,"endpoints",void 0),We(this,"retries",void 0),this.endpoints=e,this.retries=t}async resolveTXT(e){let t;try{t=(await Qk({question:{type:"TXT",name:e}},{endpoints:this.endpoints,retries:this.retries})).answers}catch(i){throw Xk.error("query failed: ",i),new Error("DNS query failed")}if(!t)throw new Error("Could not resolve ".concat(e));const r=t.map((e=>e.data)),n=[];return r.forEach((e=>{"string"===typeof e?n.push(e):Array.isArray(e)?e.forEach((e=>{"string"===typeof e?n.push(e):n.push(Ps(e))})):n.push(Ps(e))})),n}}var ex=__webpack_require__(9437);class tx{static parseAndVerifyRoot(e,t){if(!e.startsWith(this.ROOT_PREFIX))throw new Error("ENRTree root entry must start with '".concat(this.ROOT_PREFIX,"'"));const r=tx.parseRootValues(e),n=ex.decode.asBytes(t),i=e.split(" sig")[0],o=Rs(i);if(!tc(ks(r.signature,"base64url").slice(0,64),ec(o),new Uint8Array(n)))throw new Error("Unable to verify ENRTree root signature");return r.eRoot}static parseRootValues(e){const t=e.match(/^enrtree-root:v1 e=([^ ]+) l=([^ ]+) seq=(\d+) sig=([^ ]+)$/);if(!Array.isArray(t))throw new Error("Could not parse ENRTree root entry");t.shift();const[r,n,i,o]=t;if(!r)throw new Error("Could not parse 'e' value from ENRTree root entry");if(!n)throw new Error("Could not parse 'l' value from ENRTree root entry");if(!i)throw new Error("Could not parse 'seq' value from ENRTree root entry");if(!o)throw new Error("Could not parse 'sig' value from ENRTree root entry");return{eRoot:r,lRoot:n,seq:Number(i),signature:o}}static parseTree(e){if(!e.startsWith(this.TREE_PREFIX))throw new Error("ENRTree tree entry must start with '".concat(this.TREE_PREFIX,"'"));const t=e.match(/^enrtree:\/\/([^@]+)@(.+)$/);if(!Array.isArray(t))throw new Error("Could not parse ENRTree tree entry");t.shift();const[r,n]=t;if(!r)throw new Error("Could not parse public key from ENRTree tree entry");if(!n)throw new Error("Could not parse domain from ENRTree tree entry");return{publicKey:r,domain:n}}static parseBranch(e){if(!e.startsWith(this.BRANCH_PREFIX))throw new Error("ENRTree branch entry must start with '".concat(this.BRANCH_PREFIX,"'"));return e.split(this.BRANCH_PREFIX)[1].split(",")}}We(tx,"RECORD_PREFIX",_g.RECORD_PREFIX),We(tx,"TREE_PREFIX","enrtree:"),We(tx,"BRANCH_PREFIX","enrtree-branch:"),We(tx,"ROOT_PREFIX","enrtree-root:");const rx=new qs("discovery:fetch_nodes");function nx(e,t){return t.relay>=e.relay&&t.store>=e.store&&t.filter>=e.filter&&t.lightPush>=e.lightPush}function ix(e,t){if(!e.nodeId)return!1;for(const r of t)if(e.nodeId===r.nodeId)return!1;return!0}function ox(e,t){e.relay&&(t.relay+=1),e.store&&(t.store+=1),e.filter&&(t.filter+=1),e.lightPush&&(t.lightPush+=1)}function sx(e,t,r){if(nx(t,r))throw"Internal Error: Waku2 wanted capabilities are already fulfilled";const n=function(e,t){return{relay:t.relay<e.relay,store:t.store<e.store,filter:t.filter<e.filter,lightPush:t.lightPush<e.lightPush}}(t,r);return n.relay&&e.relay||n.store&&e.store||n.filter&&e.filter||n.lightPush&&e.lightPush}const ax=new qs("discovery:dns");class cx{static async dnsOverHttp(e){return e||(e=await $k.create()),new cx(e)}async getPeers(e,t){const r=Math.floor(Math.random()*e.length),{publicKey:n,domain:i}=tx.parseTree(e[r]),o={domain:i,publicKey:n,visits:{}},s=await async function(e,t,r){var n,i,o,s;const a={relay:null!==(n=e.relay)&&void 0!==n?n:0,store:null!==(i=e.store)&&void 0!==i?i:0,filter:null!==(o=e.filter)&&void 0!==o?o:0,lightPush:null!==(s=e.lightPush)&&void 0!==s?s:0},c=a.relay+a.store+a.filter+a.lightPush,u={relay:0,store:0,filter:0,lightPush:0};let l=0;const d=[];for(;!nx(a,u)&&l<c+t;){const e=await r();e&&ix(e,d)&&(e.waku2&&sx(e.waku2,a,u)&&(ox(e.waku2,u),d.push(e)),rx.info("got new peer candidate from DNS address=".concat(e.nodeId,"@").concat(e.ip))),l++}return d}(t,this._errorTolerance,(()=>this._search(i,o)));return ax.info("retrieved peers: ",s.map((e=>{var t,r;return{id:null===(t=e.peerId)||void 0===t?void 0:t.toString(),multiaddrs:null===(r=e.multiaddrs)||void 0===r?void 0:r.map((e=>e.toString()))}}))),s}constructor(e){We(this,"dns",void 0),We(this,"_DNSTreeCache",void 0),We(this,"_errorTolerance",10),this._DNSTreeCache={},this.dns=e}async*getNextPeer(e,t){const r=Math.floor(Math.random()*e.length),{publicKey:n,domain:i}=tx.parseTree(e[r]),o={domain:i,publicKey:n,visits:{}};for await(const s of async function*(e,t,r){var n,i,o,s;const a={relay:null!==(n=e.relay)&&void 0!==n?n:0,store:null!==(i=e.store)&&void 0!==i?i:0,filter:null!==(o=e.filter)&&void 0!==o?o:0,lightPush:null!==(s=e.lightPush)&&void 0!==s?s:0},c=a.relay+a.store+a.filter+a.lightPush,u={relay:0,store:0,filter:0,lightPush:0};let l=0;const d=new Set;for(;!nx(a,u)&&l<c+t;){const e=await r();e&&e.nodeId&&!d.has(e.nodeId)&&(d.add(e.nodeId),e.waku2&&sx(e.waku2,a,u)&&(ox(e.waku2,u),yield e),rx.info("got new peer candidate from DNS address=".concat(e.nodeId,"@").concat(e.ip))),l++}}(t,this._errorTolerance,(()=>this._search(i,o))))yield s}async _search(e,t){try{const n=await this._getTXTRecord(e,t);let i,o;t.visits[e]=!0;const s=function(e){return e.startsWith(tx.ROOT_PREFIX)?tx.ROOT_PREFIX:e.startsWith(tx.BRANCH_PREFIX)?tx.BRANCH_PREFIX:e.startsWith(tx.RECORD_PREFIX)?tx.RECORD_PREFIX:""}(n);try{switch(s){case tx.ROOT_PREFIX:return i=tx.parseAndVerifyRoot(n,t.publicKey),await this._search(i,t);case tx.BRANCH_PREFIX:return o=tx.parseBranch(n),i=function(e,t){const r={};for(const[i,o]of e.entries())t.visits[o]&&(r[i]=!0);if(Object.keys(r).length===e.length)throw new Error("Unresolvable circular path detected");let n;do{n=Math.floor(Math.random()*e.length)}while(r[n]);return e[n]}(o,t),await this._search(i,t);case tx.RECORD_PREFIX:return Zg.fromString(n);default:return null}}catch(r){return ax.error("Failed to search DNS tree ".concat(s," at subdomain ").concat(e,": ").concat(r)),null}}catch(r){return ax.error("Failed to retrieve TXT record at subdomain ".concat(e,": ").concat(r)),null}}async _getTXTRecord(e,t){if(this._DNSTreeCache[e])return this._DNSTreeCache[e];const r=e!==t.domain?"".concat(e,".").concat(t.domain):t.domain,n=await this.dns.resolveTXT(r);if(!n.length)throw new Error("Received empty result array while fetching TXT record");if(!n[0].length)throw new Error("Received empty TXT record");const i=n.join("");return this._DNSTreeCache[e]=i,i}}let ux;const lx=new qs("peer-discovery-dns");ux=Symbol.toStringTag;class dx extends GA{constructor(e,t){super(),We(this,"nextPeer",void 0),We(this,"_started",void 0),We(this,"_components",void 0),We(this,"_options",void 0),this._started=!1,this._components=e,this._options=t;const{enrUrls:r}=t;lx.info("Use following EIP-1459 ENR Tree URLs: ",r)}async start(){if(lx.info("Starting peer discovery via dns"),this._started=!0,void 0===this.nextPeer){let{enrUrls:e}=this._options;Array.isArray(e)||(e=[e]);const{wantedNodeCapabilityCount:t}=this._options,r=await cx.dnsOverHttp();this.nextPeer=r.getNextPeer.bind(r,e,t)}for await(const r of this.nextPeer()){var e,t;if(!this._started)return;const{peerInfo:n,shardInfo:i}=r;if(!n)continue;const o={[XA]:{value:null!==(e=this._options.tagValue)&&void 0!==e?e:50,ttl:null!==(t=this._options.tagTTL)&&void 0!==t?t:1e8}};let s=!1;if(await this._components.peerStore.has(n.id)){(await this._components.peerStore.get(n.id)).tags.has(XA)||(s=!0,await this._components.peerStore.merge(n.id,{tags:o}))}else s=!0,await this._components.peerStore.save(n.id,{tags:o,...i&&{metadata:{shardInfo:ug(i)}}});s&&this.dispatchEvent(new QA("peer",{detail:n}))}}stop(){this._started=!1}get[ZA](){return!0}get[ux](){return"@waku/bootstrap"}}function hx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$A;return r=>new dx(r,{enrUrls:e,wantedNodeCapabilityCount:t})}class fx{constructor(e){We(this,"proto",void 0),this.proto=e}static createRequest(e){const{numPeers:t}=e;return new fx({query:{numPeers:t},response:void 0})}encode(){return xm.encode(this.proto)}static decode(e){const t=xm.decode(e);return new fx(t)}get query(){return this.proto.query}get response(){return this.proto.response}}const px="/vac/waku/peer-exchange/2.0.0-alpha1",gx=new qs("peer-exchange");class mx extends ky{constructor(e){super(px,e)}async query(e){const{numPeers:t}=e,r=fx.createRequest({numPeers:BigInt(t)}),n=await this.getPeer(e.peerId),i=await this.getStream(n),o=await my([r.encode()],ry,i,cy,(async e=>await zm(e)));try{const e=new Xm;o.forEach((t=>{e.append(t)}));const{response:t}=fx.decode(e);return t?Promise.all(t.peerInfos.map((e=>e.enr)).filter(ii).map((async e=>({ENR:await Zg.fromRLP(e)})))):void gx.error("PeerExchangeRPC message did not contains a `response` field")}catch(s){return void gx.error("Failed to decode push reply",s)}}}let yx;const vx=new qs("peer-exchange-discovery"),bx=1e4,wx=3,_x=ei.PEER_EXCHANGE;yx=Symbol.toStringTag;class Ex extends GA{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),We(this,"components",void 0),We(this,"peerExchange",void 0),We(this,"options",void 0),We(this,"isStarted",void 0),We(this,"queryingPeers",new Set),We(this,"queryAttempts",new Map),We(this,"handleDiscoveredPeer",(e=>{const{protocols:t,peerId:r}=e.detail;t.includes(px)&&!this.queryingPeers.has(r.toString())&&(this.queryingPeers.add(r.toString()),this.startRecurringQueries(r).catch((e=>vx.error("Error querying peer ".concat(e)))))})),We(this,"startRecurringQueries",(async e=>{var t,r;const n=e.toString(),{queryInterval:i=bx,maxRetries:o=wx}=this.options;vx.info("Querying peer: ".concat(n," (attempt ").concat(null!==(t=this.queryAttempts.get(n))&&void 0!==t?t:1,")")),await this.query(e);const s=null!==(r=this.queryAttempts.get(n))&&void 0!==r?r:1;s>o?this.abortQueriesForPeer(n):setTimeout((()=>{this.queryAttempts.set(n,s+1),this.startRecurringQueries(e).catch((e=>{vx.error("Error in startRecurringQueries: ".concat(e))}))}),i*s)})),this.components=e,this.peerExchange=new mx(e),this.options=t,this.isStarted=!1}start(){this.isStarted||(vx.info("Starting peer exchange node discovery, discovering peers"),this.components.events.addEventListener("peer:identify",this.handleDiscoveredPeer))}stop(){this.isStarted&&(vx.info("Stopping peer exchange node discovery"),this.isStarted=!1,this.queryingPeers.clear(),this.components.events.removeEventListener("peer:identify",this.handleDiscoveredPeer))}get[ZA](){return!0}get[yx](){return"@waku/peer-exchange"}async query(e){const t=await this.peerExchange.query({numPeers:10,peerId:e});if(t)for(const i of t){var r,n;const{ENR:e}=i;if(!e){vx.warn("No ENR in peerInfo object, skipping");continue}const{peerId:t,peerInfo:o,shardInfo:s}=e;if(!t||!o)continue;await this.components.peerStore.has(t)||(await this.components.peerStore.save(t,{tags:{[_x]:{value:null!==(r=this.options.tagValue)&&void 0!==r?r:50,ttl:null!==(n=this.options.tagTTL)&&void 0!==n?n:1e8}},...s&&{metadata:{shardInfo:ug(s)}}}),vx.info("Discovered peer: ".concat(t.toString())),this.dispatchEvent(new QA("peer",{detail:{id:t,protocols:[],multiaddrs:o.multiaddrs}})))}else vx.error("Peer exchange query failed, no peer info returned")}abortQueriesForPeer(e){vx.info("Aborting queries for peer: ".concat(e)),this.queryingPeers.delete(e),this.queryAttempts.delete(e)}}const Ax="StrictSign",Sx="StrictNoSign";var kx;!function(e){e.Accept="accept",e.Ignore="ignore",e.Reject="reject"}(kx||(kx={}));const xx="/floodsub/1.0.0",Ix="/meshsub/1.0.0",Tx="/meshsub/1.1.0",Px=5e3;var Rx=__webpack_require__(886);const Cx={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};function Bx(e,t){t={...t};const r=Rx.Reader.create(e),n=e.length,i=void 0===n?r.len:r.pos+n,o={};for(;r.pos<i;){const e=r.uint32();switch(e>>>3){case 1:null!=o.subscriptions&&o.subscriptions.length>0||(o.subscriptions=[]),o.subscriptions.length<t.maxSubscriptions?o.subscriptions.push(Mx(r,r.uint32())):r.skipType(7&e);break;case 2:null!=o.messages&&o.messages.length>0||(o.messages=[]),o.messages.length<t.maxMessages?o.messages.push(Nx(r,r.uint32())):r.skipType(7&e);break;case 3:o.control=Ox(r,r.uint32(),t);break;default:r.skipType(7&e)}}return o}function Mx(e,t){const r=void 0===t?e.len:e.pos+t,n={};for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.subscribe=e.bool();break;case 2:n.topic=e.string();break;default:e.skipType(7&t)}}return n}function Nx(e,t){const r=void 0===t?e.len:e.pos+t,n={};for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.from=e.bytes();break;case 2:n.data=e.bytes();break;case 3:n.seqno=e.bytes();break;case 4:n.topic=e.string();break;case 5:n.signature=e.bytes();break;case 6:n.key=e.bytes();break;default:e.skipType(7&t)}}if(!n.topic)throw Error("missing required 'topic'");return n}function Ox(e,t,r){const n=void 0===t?e.len:e.pos+t,i={};for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:null!=i.ihave&&i.ihave.length>0||(i.ihave=[]),i.ihave.length<r.maxControlMessages?i.ihave.push(Dx(e,e.uint32(),r)):e.skipType(7&t);break;case 2:null!=i.iwant&&i.iwant.length>0||(i.iwant=[]),i.iwant.length<r.maxControlMessages?i.iwant.push(Lx(e,e.uint32(),r)):e.skipType(7&t);break;case 3:null!=i.graft&&i.graft.length>0||(i.graft=[]),i.graft.length<r.maxControlMessages?i.graft.push(Ux(e,e.uint32())):e.skipType(7&t);break;case 4:null!=i.prune&&i.prune.length>0||(i.prune=[]),i.prune.length<r.maxControlMessages?i.prune.push(Fx(e,e.uint32(),r)):e.skipType(7&t);break;default:e.skipType(7&t)}}return i}function Dx(e,t,r){const n=void 0===t?e.len:e.pos+t,i={};for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:i.topicID=e.string();break;case 2:null!=i.messageIDs&&i.messageIDs.length>0||(i.messageIDs=[]),r.maxIhaveMessageIDs-- >0?i.messageIDs.push(e.bytes()):e.skipType(7&t);break;default:e.skipType(7&t)}}return i}function Lx(e,t,r){const n=void 0===t?e.len:e.pos+t,i={};for(;e.pos<n;){const t=e.uint32();if(t>>>3===1)null!=i.messageIDs&&i.messageIDs.length>0||(i.messageIDs=[]),r.maxIwantMessageIDs-- >0?i.messageIDs.push(e.bytes()):e.skipType(7&t);else e.skipType(7&t)}return i}function Ux(e,t){const r=void 0===t?e.len:e.pos+t,n={};for(;e.pos<r;){const t=e.uint32();if(t>>>3===1)n.topicID=e.string();else e.skipType(7&t)}return n}function Fx(e,t,r){const n=void 0===t?e.len:e.pos+t,i={};for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:i.topicID=e.string();break;case 2:null!=i.peers&&i.peers.length>0||(i.peers=[]),r.maxPeerInfos-- >0?i.peers.push(jx(e,e.uint32())):e.skipType(7&t);break;case 3:i.backoff=e.uint64();break;default:e.skipType(7&t)}}return i}function jx(e,t){const r=void 0===t?e.len:e.pos+t,n={};for(;e.pos<r;){const t=e.uint32();switch(t>>>3){case 1:n.peerID=e.bytes();break;case 2:n.signedPeerRecord=e.bytes();break;default:e.skipType(7&t)}}return n}const qx=__webpack_require__.p+"static/media/rpc.3ba5ca7bdb004060d5e2.cjs",{RPC:zx}=qx;class Hx{constructor(e,t,r){We(this,"gossip",void 0),We(this,"msgs",new Map),We(this,"msgIdToStrFn",void 0),We(this,"history",[]),We(this,"notValidatedCount",0),this.gossip=e,this.msgIdToStrFn=r;for(let n=0;n<t;n++)this.history[n]=[]}get size(){return this.msgs.size}put(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{msgIdStr:n}=e;return!this.msgs.has(n)&&(this.msgs.set(n,{message:t,validated:r,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:t.topic}),r||this.notValidatedCount++,!0)}observeDuplicate(e,t){const r=this.msgs.get(e);null==r||r.validated||r.originatingPeers.add(t)}get(e){var t;return null===(t=this.msgs.get(this.msgIdToStrFn(e)))||void 0===t?void 0:t.message}getWithIWantCount(e,t){var r;const n=this.msgs.get(e);if(null==n)return null;const i=(null!==(r=n.iwantCounts.get(t))&&void 0!==r?r:0)+1;return n.iwantCounts.set(t,i),{msg:n.message,count:i}}getGossipIDs(e){const t=new Map;for(let r=0;r<this.gossip;r++)this.history[r].forEach((r=>{var n;const i=this.msgs.get(r.msgIdStr);if(null!==(n=null===i||void 0===i?void 0:i.validated)&&void 0!==n&&n&&e.has(r.topic)){let e=t.get(r.topic);null==e&&(e=[],t.set(r.topic,e)),e.push(r.msgId)}}));return t}validate(e){const t=this.msgs.get(e);if(null==t)return null;t.validated||this.notValidatedCount--;const{message:r,originatingPeers:n}=t;return t.validated=!0,t.originatingPeers=new Set,{message:r,originatingPeers:n}}shift(){this.history[this.history.length-1].forEach((e=>{const t=this.msgs.get(e.msgIdStr);null!=t&&(this.msgs.delete(e.msgIdStr),t.validated||this.notValidatedCount--)})),this.history.pop(),this.history.unshift([])}remove(e){const t=this.msgs.get(e);return null==t?null:(this.msgs.delete(e),t)}}var Kx,Vx,Gx,Wx,Qx,Jx,Zx,Yx,Xx,$x,eI;function tI(e){switch(e){case kx.Ignore:return Gx.Ignore;case kx.Reject:return Gx.Reject;default:throw new Error("Unreachable")}}!function(e){e.StrictSign="StrictSign",e.StrictNoSign="StrictNoSign"}(Kx||(Kx={})),function(e){e[e.Signing=0]="Signing",e[e.Anonymous=1]="Anonymous"}(Vx||(Vx={})),function(e){e.Error="error",e.Ignore="ignore",e.Reject="reject",e.Blacklisted="blacklisted"}(Gx||(Gx={})),function(e){e.InvalidSignature="invalid_signature",e.InvalidSeqno="invalid_seqno",e.InvalidPeerId="invalid_peerid",e.SignaturePresent="signature_present",e.SeqnoPresent="seqno_present",e.FromPresent="from_present",e.TransformFailed="transform_failed"}(Wx||(Wx={})),function(e){e.duplicate="duplicate",e.invalid="invalid",e.valid="valid"}(Qx||(Qx={})),function(e){e.forward="forward",e.publish="publish"}(Jx||(Jx={})),function(e){e.Fanout="fanout",e.Random="random",e.Subscribed="subscribed",e.Outbound="outbound",e.NotEnough="not_enough",e.Opportunistic="opportunistic"}(Zx||(Zx={})),function(e){e.Dc="disconnected",e.BadScore="bad_score",e.Prune="prune",e.Excess="excess"}(Yx||(Yx={})),function(e){e.GraftBackoff="graft_backoff",e.BrokenPromise="broken_promise",e.MessageDeficit="message_deficit",e.IPColocation="IP_colocation"}(Xx||(Xx={})),function(e){e.LowScore="low_score",e.MaxIhave="max_ihave",e.MaxIasked="max_iasked"}($x||($x={})),function(e){e.graylist="graylist",e.publish="publish",e.gossip="gossip",e.mesh="mesh"}(eI||(eI={}));const rI="ERR_INVALID_PEER_SCORE_PARAMS",nI={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},iI={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function oI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...nI,...e,topics:null!=e.topics?Object.entries(e.topics).reduce(((e,t)=>{let[r,n]=t;return e[r]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...iI,...e}}(n),e}),{}):{}}}function sI(e){if(e.topicWeight<0)throw new Hp("invalid topic weight; must be >= 0",rI);if(0===e.timeInMeshQuantum)throw new Hp("invalid TimeInMeshQuantum; must be non zero",rI);if(e.timeInMeshWeight<0)throw new Hp("invalid TimeInMeshWeight; must be positive (or 0 to disable)",rI);if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw new Hp("invalid TimeInMeshQuantum; must be positive",rI);if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw new Hp("invalid TimeInMeshCap; must be positive",rI);if(e.firstMessageDeliveriesWeight<0)throw new Hp("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)",rI);if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw new Hp("invalid FirstMessageDeliveriesDecay; must be between 0 and 1",rI);if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw new Hp("invalid FirstMessageDeliveriesCap; must be positive",rI);if(e.meshMessageDeliveriesWeight>0)throw new Hp("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)",rI);if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw new Hp("invalid MeshMessageDeliveriesDecay; must be between 0 and 1",rI);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw new Hp("invalid MeshMessageDeliveriesCap; must be positive",rI);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw new Hp("invalid MeshMessageDeliveriesThreshold; must be positive",rI);if(e.meshMessageDeliveriesWindow<0)throw new Hp("invalid MeshMessageDeliveriesWindow; must be non-negative",rI);if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw new Hp("invalid MeshMessageDeliveriesActivation; must be at least 1s",rI);if(e.meshFailurePenaltyWeight>0)throw new Hp("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)",rI);if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw new Hp("invalid MeshFailurePenaltyDecay; must be between 0 and 1",rI);if(e.invalidMessageDeliveriesWeight>0)throw new Hp("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)",rI);if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw new Hp("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1",rI)}const aI={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function cI(){return{...aI,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}function uI(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;const n=new Set;if(t<=0)return n;for(const i of e){if(n.size>=t)break;r(i)&&(n.add(i),e.delete(i))}return n}class lI extends Map{constructor(e){super(),We(this,"getDefault",void 0),this.getDefault=e}getOrDefault(e){let t=super.get(e);return void 0===t&&(t=this.getDefault(),this.set(e,t)),t}}function dI(e,t,r,n){let i=0;Object.entries(t.topics).forEach((e=>{let[t,n]=e;const o=r.topics[t];if(void 0===o)return;let s=0;if(n.inMesh){let e=n.meshTime/o.timeInMeshQuantum;e>o.timeInMeshCap&&(e=o.timeInMeshCap),s+=e*o.timeInMeshWeight}let a=n.firstMessageDeliveries;if(a>o.firstMessageDeliveriesCap&&(a=o.firstMessageDeliveriesCap),s+=a*o.firstMessageDeliveriesWeight,n.meshMessageDeliveriesActive&&n.meshMessageDeliveries<o.meshMessageDeliveriesThreshold){const e=o.meshMessageDeliveriesThreshold-n.meshMessageDeliveries;s+=e*e*o.meshMessageDeliveriesWeight}s+=n.meshFailurePenalty*o.meshFailurePenaltyWeight;s+=n.invalidMessageDeliveries*n.invalidMessageDeliveries*o.invalidMessageDeliveriesWeight,i+=s*o.topicWeight})),r.topicScoreCap>0&&i>r.topicScoreCap&&(i=r.topicScoreCap);const o=r.appSpecificScore(e);if(i+=o*r.appSpecificWeight,t.knownIPs.forEach((e=>{if(r.IPColocationFactorWhitelist.has(e))return;const t=n.get(e),o=null!=t?t.size:0;if(o>r.IPColocationFactorThreshold){const e=o-r.IPColocationFactorThreshold;i+=e*e*r.IPColocationFactorWeight}})),t.behaviourPenalty>r.behaviourPenaltyThreshold){const e=t.behaviourPenalty-r.behaviourPenaltyThreshold;i+=e*e*r.behaviourPenaltyWeight}return i}var hI,fI=__webpack_require__(8718);!function(e){e[e.unknown=0]="unknown",e[e.valid=1]="valid",e[e.invalid=2]="invalid",e[e.ignored=3]="ignored"}(hI||(hI={}));class pI{constructor(){We(this,"records",void 0),We(this,"queue",void 0),this.records=new Map,this.queue=new fI}getRecord(e){return this.records.get(e)}ensureRecord(e){let t=this.records.get(e);if(null!=t)return t;t={status:hI.unknown,firstSeenTsMs:Date.now(),validated:0,peers:new Set},this.records.set(e,t);const r={msgId:e,expire:Date.now()+12e4};return this.queue.push(r),t}gc(){const e=Date.now();let t=this.queue.peekFront();for(;null!=t&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}const gI=Aw("libp2p:gossipsub:score");class mI{constructor(e,t,r){var n;We(this,"params",void 0),We(this,"metrics",void 0),We(this,"peerStats",new Map),We(this,"peerIPs",new lI((()=>new Set))),We(this,"scoreCache",new Map),We(this,"deliveryRecords",new pI),We(this,"_backgroundInterval",void 0),We(this,"scoreCacheValidityMs",void 0),We(this,"computeScore",void 0),this.params=e,this.metrics=t,function(e){for(const[r,n]of Object.entries(e.topics))try{sI(n)}catch(t){throw new Hp("invalid score parameters for topic ".concat(r,": ").concat(t.message),rI)}if(e.topicScoreCap<0)throw new Hp("invalid topic score cap; must be positive (or 0 for no cap)",rI);if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw new Hp("missing application specific score function",rI);if(e.IPColocationFactorWeight>0)throw new Hp("invalid IPColocationFactorWeight; must be negative (or 0 to disable)",rI);if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw new Hp("invalid IPColocationFactorThreshold; must be at least 1",rI);if(e.behaviourPenaltyWeight>0)throw new Hp("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)",rI);if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw new Hp("invalid BehaviourPenaltyDecay; must be between 0 and 1",rI);if(e.decayInterval<1e3)throw new Hp("invalid DecayInterval; must be at least 1s",rI);if(e.decayToZero<=0||e.decayToZero>=1)throw new Hp("invalid DecayToZero; must be between 0 and 1",rI)}(e),this.scoreCacheValidityMs=r.scoreCacheValidityMs,this.computeScore=null!==(n=r.computeScore)&&void 0!==n?n:dI}get size(){return this.peerStats.size}start(){null==this._backgroundInterval?(this._backgroundInterval=setInterval((()=>{this.background()}),this.params.decayInterval),gI("started")):gI("Peer score already running")}stop(){null!=this._backgroundInterval?(clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),gI("stopped")):gI("Peer score already stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map((e=>{let[t,r]=e;return[t,r]})))}messageFirstSeenTimestampMs(e){const t=this.deliveryRecords.getRecord(e);return null!=t?t.firstSeenTsMs:null}refreshScores(){const e=Date.now(),t=this.params.decayToZero;this.peerStats.forEach(((r,n)=>{r.connected?(Object.entries(r.topics).forEach((r=>{let[n,i]=r;const o=this.params.topics[n];void 0!==o&&(i.firstMessageDeliveries*=o.firstMessageDeliveriesDecay,i.firstMessageDeliveries<t&&(i.firstMessageDeliveries=0),i.meshMessageDeliveries*=o.meshMessageDeliveriesDecay,i.meshMessageDeliveries<t&&(i.meshMessageDeliveries=0),i.meshFailurePenalty*=o.meshFailurePenaltyDecay,i.meshFailurePenalty<t&&(i.meshFailurePenalty=0),i.invalidMessageDeliveries*=o.invalidMessageDeliveriesDecay,i.invalidMessageDeliveries<t&&(i.invalidMessageDeliveries=0),i.inMesh&&(i.meshTime=e-i.graftTime,i.meshTime>o.meshMessageDeliveriesActivation&&(i.meshMessageDeliveriesActive=!0)))})),r.behaviourPenalty*=this.params.behaviourPenaltyDecay,r.behaviourPenalty<t&&(r.behaviourPenalty=0)):e>r.expire&&(this.removeIPsForPeer(n,r.knownIPs),this.peerStats.delete(n),this.scoreCache.delete(n))}))}score(e){var t,r;null===(t=this.metrics)||void 0===t||t.scoreFnCalls.inc();const n=this.peerStats.get(e);if(null==n)return 0;const i=Date.now(),o=this.scoreCache.get(e);if(null!=o&&o.cacheUntil>i)return o.score;null===(r=this.metrics)||void 0===r||r.scoreFnRuns.inc();const s=this.computeScore(e,n,this.params,this.peerIPs),a=i+this.scoreCacheValidityMs;var c;null!=o?(null===(c=this.metrics)||void 0===c||c.scoreCachedDelta.observe(Math.abs(s-o.score)),o.score=s,o.cacheUntil=a):this.scoreCache.set(e,{score:s,cacheUntil:a});return s}addPenalty(e,t,r){const n=this.peerStats.get(e);var i;null!=n&&(n.behaviourPenalty+=t,null===(i=this.metrics)||void 0===i||i.onScorePenalty(r))}addPeer(e){const t={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(e,t)}addIP(e,t){const r=this.peerStats.get(e);null!=r&&r.knownIPs.add(t),this.peerIPs.getOrDefault(t).add(e)}removeIP(e,t){const r=this.peerStats.get(e);null!=r&&r.knownIPs.delete(t);const n=this.peerIPs.get(t);null!=n&&(n.delete(e),0===n.size&&this.peerIPs.delete(t))}removePeer(e){const t=this.peerStats.get(e);if(null!=t){if(this.score(e)>0)return this.removeIPsForPeer(e,t.knownIPs),void this.peerStats.delete(e);Object.entries(t.topics).forEach((e=>{let[t,r]=e;r.firstMessageDeliveries=0;const n=this.params.topics[t].meshMessageDeliveriesThreshold;if(r.inMesh&&r.meshMessageDeliveriesActive&&r.meshMessageDeliveries<n){const e=n-r.meshMessageDeliveries;r.meshFailurePenalty+=e*e}r.inMesh=!1,r.meshMessageDeliveriesActive=!1})),t.connected=!1,t.expire=Date.now()+this.params.retainScore}}graft(e,t){const r=this.peerStats.get(e);if(null!=r){const e=this.getPtopicStats(r,t);null!=e&&(e.inMesh=!0,e.graftTime=Date.now(),e.meshTime=0,e.meshMessageDeliveriesActive=!1)}}prune(e,t){const r=this.peerStats.get(e);if(null!=r){const e=this.getPtopicStats(r,t);if(null!=e){const r=this.params.topics[t].meshMessageDeliveriesThreshold;if(e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<r){const t=r-e.meshMessageDeliveries;e.meshFailurePenalty+=t*t}e.meshMessageDeliveriesActive=!1,e.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,t,r){this.markFirstMessageDelivery(e,r);const n=this.deliveryRecords.ensureRecord(t),i=Date.now();n.status===hI.unknown?(n.status=hI.valid,n.validated=i,n.peers.forEach((t=>{t!==e.toString()&&this.markDuplicateMessageDelivery(t,r)}))):gI("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,i-n.firstSeenTsMs,hI[n.status])}rejectInvalidMessage(e,t){this.markInvalidMessageDelivery(e,t)}rejectMessage(e,t,r,n){switch(n){case Gx.Error:return void this.markInvalidMessageDelivery(e,r);case Gx.Blacklisted:return}const i=this.deliveryRecords.ensureRecord(t);if(i.status===hI.unknown){if(n===Gx.Ignore)return i.status=hI.ignored,void i.peers.clear();i.status=hI.invalid,this.markInvalidMessageDelivery(e,r),i.peers.forEach((e=>{this.markInvalidMessageDelivery(e,r)})),i.peers.clear()}else gI("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-i.firstSeenTsMs,hI[i.status])}duplicateMessage(e,t,r){const n=this.deliveryRecords.ensureRecord(t);if(!n.peers.has(e))switch(n.status){case hI.unknown:n.peers.add(e);break;case hI.valid:n.peers.add(e),this.markDuplicateMessageDelivery(e,r,n.validated);break;case hI.invalid:this.markInvalidMessageDelivery(e,r);case hI.ignored:}}markInvalidMessageDelivery(e,t){const r=this.peerStats.get(e);if(null!=r){const e=this.getPtopicStats(r,t);null!=e&&(e.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,t){const r=this.peerStats.get(e);if(null!=r){const e=this.getPtopicStats(r,t);if(null!=e){let r=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries=Math.min(r,e.firstMessageDeliveries+1),e.inMesh&&(r=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries=Math.min(r,e.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,t,r){const n=this.peerStats.get(e);if(null!=n){const e=void 0!==r?Date.now():0,o=this.getPtopicStats(n,t);if(null!=o&&o.inMesh){const n=this.params.topics[t];if(void 0!==r){var i;const o=e-r,s=o>n.meshMessageDeliveriesWindow;if(null===(i=this.metrics)||void 0===i||i.onDuplicateMsgDelivery(t,o,s),s)return}const s=n.meshMessageDeliveriesCap;o.meshMessageDeliveries=Math.min(s,o.meshMessageDeliveries+1)}}}removeIPsForPeer(e,t){for(const r of t){const t=this.peerIPs.get(r);null!=t&&(t.delete(e),0===t.size&&this.peerIPs.delete(r))}}getPtopicStats(e,t){let r=e.topics[t];return void 0!==r?r:void 0!==this.params.topics[t]?(r={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=r,r):null}}function yI(e,t,r,n,i){let o=0;const s=new Map;if(Object.entries(t.topics).forEach((e=>{var t;let[n,a]=e;const c=null!==(t=i.get(n))&&void 0!==t?t:"unknown",u=r.topics[n];if(void 0===u)return;let l=s.get(c);null==l&&(l={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},s.set(c,l));let d=0,h=0,f=0,p=0,g=0;if(a.inMesh){d+=Math.max(a.meshTime/u.timeInMeshQuantum,u.timeInMeshCap)*u.timeInMeshWeight}let m=a.firstMessageDeliveries;if(m>u.firstMessageDeliveriesCap&&(m=u.firstMessageDeliveriesCap),h+=m*u.firstMessageDeliveriesWeight,a.meshMessageDeliveriesActive&&a.meshMessageDeliveries<u.meshMessageDeliveriesThreshold){const e=u.meshMessageDeliveriesThreshold-a.meshMessageDeliveries;f+=e*e*u.meshMessageDeliveriesWeight}p+=a.meshFailurePenalty*u.meshFailurePenaltyWeight;g+=a.invalidMessageDeliveries*a.invalidMessageDeliveries*u.invalidMessageDeliveriesWeight,o+=(d+h+f+p+g)*u.topicWeight,l.p1w+=d,l.p2w+=h,l.p3w+=f,l.p3bw+=p,l.p4w+=g})),r.topicScoreCap>0&&o>r.topicScoreCap){o=r.topicScoreCap;const e=r.topicScoreCap/o;for(const t of s.values())t.p1w*=e,t.p2w*=e,t.p3w*=e,t.p3bw*=e,t.p4w*=e}let a=0,c=0,u=0;a+=r.appSpecificScore(e)*r.appSpecificWeight,t.knownIPs.forEach((e=>{if(r.IPColocationFactorWhitelist.has(e))return;const t=n.get(e),i=null!=t?t.size:0;if(i>r.IPColocationFactorThreshold){const e=i-r.IPColocationFactorThreshold;c+=e*e*r.IPColocationFactorWeight}}));return u+=t.behaviourPenalty*t.behaviourPenalty*r.behaviourPenaltyWeight,o+=a+c+u,{byTopic:s,p5w:a,p6w:c,p7w:u,score:o}}class vI{constructor(e,t,r){var n;We(this,"rawStream",void 0),We(this,"pushable",void 0),We(this,"closeController",void 0),We(this,"maxBufferSize",void 0),this.rawStream=e,this.pushable=fy({objectMode:!1}),this.closeController=new AbortController,this.maxBufferSize=null!==(n=r.maxBufferSize)&&void 0!==n?n:1/0,my(Ow(this.pushable,this.closeController.signal,{returnOnAbort:!0}),(e=>ry(e)),this.rawStream).catch(t)}get protocol(){return this.rawStream.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error("OutboundStream buffer full, size > ".concat(this.maxBufferSize));this.pushable.push(e)}async close(){this.closeController.abort(),await this.pushable.return(),await this.rawStream.close()}}class bI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};We(this,"source",void 0),We(this,"rawStream",void 0),We(this,"closeController",void 0),this.rawStream=e,this.closeController=new AbortController,this.source=Ow(my(this.rawStream,(e=>cy(e,t))),this.closeController.signal,{returnOnAbort:!0})}async close(){this.closeController.abort(),await this.rawStream.close()}}class wI{constructor(e,t,r){We(this,"gossipsubIWantFollowupMs",void 0),We(this,"msgIdToStrFn",void 0),We(this,"metrics",void 0),We(this,"promises",new Map),We(this,"requestMsByMsg",new Map),We(this,"requestMsByMsgExpire",void 0),this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=t,this.metrics=r,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,t){const r=t[Math.floor(Math.random()*t.length)],n=this.msgIdToStrFn(r);let i=this.promises.get(n);null==i&&(i=new Map,this.promises.set(n,i));const o=Date.now();i.has(e)||(i.set(e,o+this.gossipsubIWantFollowupMs),null!=this.metrics&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(n)||this.requestMsByMsg.set(n,o)))}getBrokenPromises(){var e;const t=Date.now(),r=new Map;let n=0;return this.promises.forEach(((e,i)=>{e.forEach(((i,o)=>{var s;i<t&&(r.set(o,(null!==(s=r.get(o))&&void 0!==s?s:0)+1),e.delete(o),n++)})),0===e.size&&this.promises.delete(i)})),null===(e=this.metrics)||void 0===e||e.iwantPromiseBroken.inc(n),r}deliverMessage(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.trackMessage(e);const r=this.promises.get(e);null!=r&&(this.promises.delete(e),null!=this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),t&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(r.size)))}rejectMessage(e,t){this.trackMessage(e),t!==Gx.Error&&this.promises.delete(e)}clear(){this.promises.clear()}prune(){var e;const t=Date.now()-this.requestMsByMsgExpire;let r=0;for(const[n,i]of this.requestMsByMsg.entries()){if(!(i<t))break;this.requestMsByMsg.delete(n),r++}null===(e=this.metrics)||void 0===e||e.iwantMessagePruned.inc(r)}trackMessage(e){if(null!=this.metrics){const t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}__webpack_require__(8605);var _I=__webpack_require__(6019);const EI={sha1:"sha1","sha2-256":"sha256","sha2-512":"sha512"};function AI(e,t,r,n,i){if("sha1"!==i&&"sha2-256"!==i&&"sha2-512"!==i){const e=Object.keys(EI).join(" / ");throw new Hp("Hash '".concat(i,"' is unknown or not supported. Must be ").concat(e),"ERR_UNSUPPORTED_HASH_TYPE")}const o=_I(e,t,r,n,EI[i]);return Hu.encode64(o,null)}const SI=ks("libp2p-pubsub:");function kI(e){if(e.length<=1)return e;for(let t=0;t<e.length;t++){const r=Math.floor(Math.random()*Math.floor(e.length)),n=e[t];e[t]=e[r],e[r]=n}return e}function xI(e){return xs(e,"base64")}function II(e){if("signed"!==e.type)throw new Error("expected signed message type");if(null==e.sequenceNumber)throw Error("missing seqno field");return((e,t)=>{const r=ks(t.toString(16).padStart(16,"0"),"base16"),n=new Uint8Array(e.length+r.length);return n.set(e,0),n.set(r,e.length),n})(e.from.toBytes(),e.sequenceNumber)}async function TI(e){return os.encode(e.data)}var PI;!function(e){e[e.ip4=4]="ip4",e[e.ip6=41]="ip6"}(PI||(PI={}));class RI{constructor(e){We(this,"entries",new Map),We(this,"validityMs",void 0),this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,t){return!!this.entries.has(e)||(this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){const e=Date.now();for(const[t,r]of this.entries.entries()){if(!(r.validUntilMs<e))break;this.entries.delete(t)}}has(e){return this.entries.has(e)}get(e){const t=this.entries.get(e);return null!=t&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries.clear()}}var CI;!function(e){e[e.started=0]="started",e[e.stopped=1]="stopped"}(CI||(CI={}));class BI extends GA{constructor(e){var t,r,n,i,o;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),We(this,"globalSignaturePolicy",void 0),We(this,"multicodecs",[Tx,Ix]),We(this,"publishConfig",void 0),We(this,"dataTransform",void 0),We(this,"peers",new Set),We(this,"streamsInbound",new Map),We(this,"streamsOutbound",new Map),We(this,"outboundInflightQueue",fy({objectMode:!0})),We(this,"direct",new Set),We(this,"floodsubPeers",new Set),We(this,"seenCache",void 0),We(this,"acceptFromWhitelist",new Map),We(this,"topics",new Map),We(this,"subscriptions",new Set),We(this,"mesh",new Map),We(this,"fanout",new Map),We(this,"fanoutLastpub",new Map),We(this,"gossip",new Map),We(this,"control",new Map),We(this,"peerhave",new Map),We(this,"iasked",new Map),We(this,"backoff",new Map),We(this,"outbound",new Map),We(this,"msgIdFn",void 0),We(this,"fastMsgIdFn",void 0),We(this,"msgIdToStrFn",void 0),We(this,"fastMsgIdCache",void 0),We(this,"publishedMessageIds",void 0),We(this,"mcache",void 0),We(this,"score",void 0),We(this,"topicValidators",new Map),We(this,"log",void 0),We(this,"heartbeatTicks",0),We(this,"gossipTracer",void 0),We(this,"components",void 0),We(this,"directPeerInitial",null),We(this,"opts",void 0),We(this,"decodeRpcLimits",void 0),We(this,"metrics",void 0),We(this,"status",{code:CI.stopped}),We(this,"maxInboundStreams",void 0),We(this,"maxOutboundStreams",void 0),We(this,"allowedTopics",void 0),We(this,"heartbeatTimer",null),We(this,"runHeartbeat",(()=>{var e;const t=null===(e=this.metrics)||void 0===e?void 0:e.heartbeatDuration.startTimer();this.heartbeat().catch((e=>{this.log("Error running heartbeat",e)})).finally((()=>{if(null!=t&&t(),this.status.code===CI.started){clearTimeout(this.status.heartbeatTimeout);let t=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;var e;if(t<.25*this.opts.heartbeatInterval)t+=this.opts.heartbeatInterval,null===(e=this.metrics)||void 0===e||e.heartbeatSkipped.inc();this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,t)}}))}));const a={fallbackToFloodsub:!0,floodPublish:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:12e4,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,unsubcribeBackoff:1e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300,...s,scoreParams:oI(s.scoreParams),scoreThresholds:cI(s.scoreThresholds)};if(this.components=e,this.decodeRpcLimits=null!==(t=a.decodeRpcLimits)&&void 0!==t?t:Cx,this.globalSignaturePolicy=null!==(r=a.globalSignaturePolicy)&&void 0!==r?r:Ax,a.fallbackToFloodsub&&this.multicodecs.push(xx),this.log=Aw(null!==(n=a.debugName)&&void 0!==n?n:"libp2p:gossipsub"),this.opts=a,this.direct=new Set(a.directPeers.map((e=>e.id.toString()))),this.seenCache=new RI({validityMs:a.seenTTL}),this.publishedMessageIds=new RI({validityMs:a.seenTTL}),null!=s.msgIdFn)this.msgIdFn=s.msgIdFn;else switch(this.globalSignaturePolicy){case Ax:this.msgIdFn=II;break;case Sx:this.msgIdFn=TI;break;default:throw new Error("Invalid globalSignaturePolicy: ".concat(this.globalSignaturePolicy))}if(null!=s.fastMsgIdFn&&(this.fastMsgIdFn=s.fastMsgIdFn,this.fastMsgIdCache=new RI({validityMs:a.seenTTL})),this.msgIdToStrFn=null!==(i=s.msgIdToStrFn)&&void 0!==i?i:xI,this.mcache=null!==(o=s.messageCache)&&void 0!==o?o:new Hx(a.mcacheGossip,a.mcacheLength,this.msgIdToStrFn),null!=s.dataTransform&&(this.dataTransform=s.dataTransform),null!=s.metricsRegister){if(null==s.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");const e=Math.max(...Object.values(a.scoreParams.topics).map((e=>e.meshMessageDeliveriesWindow)),1e3),t=function(e,t,r){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEventsFanout:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_fanout_total",help:"Number of times we include peers in a topic mesh for fanout reasons",labelNames:["topic"]}),meshPeerInclusionEventsRandom:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_random_total",help:"Number of times we include peers in a topic mesh for random reasons",labelNames:["topic"]}),meshPeerInclusionEventsSubscribed:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_subscribed_total",help:"Number of times we include peers in a topic mesh for subscribed reasons",labelNames:["topic"]}),meshPeerInclusionEventsOutbound:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_outbound_total",help:"Number of times we include peers in a topic mesh for outbound reasons",labelNames:["topic"]}),meshPeerInclusionEventsNotEnough:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_not_enough_total",help:"Number of times we include peers in a topic mesh for not_enough reasons",labelNames:["topic"]}),meshPeerInclusionEventsOpportunistic:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_opportunistic_total",help:"Number of times we include peers in a topic mesh for opportunistic reasons",labelNames:["topic"]}),meshPeerInclusionEventsUnknown:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_unknown_total",help:"Number of times we include peers in a topic mesh for unknown reasons",labelNames:["topic"]}),meshPeerChurnEventsDisconnected:e.gauge({name:"gossipsub_peer_churn_events_disconnected_total",help:"Number of times we remove peers in a topic mesh for disconnected reasons",labelNames:["topic"]}),meshPeerChurnEventsBadScore:e.gauge({name:"gossipsub_peer_churn_events_bad_score_total",help:"Number of times we remove peers in a topic mesh for bad_score reasons",labelNames:["topic"]}),meshPeerChurnEventsPrune:e.gauge({name:"gossipsub_peer_churn_events_prune_total",help:"Number of times we remove peers in a topic mesh for prune reasons",labelNames:["topic"]}),meshPeerChurnEventsExcess:e.gauge({name:"gossipsub_peer_churn_events_excess_total",help:"Number of times we remove peers in a topic mesh for excess reasons",labelNames:["topic"]}),meshPeerChurnEventsUnknown:e.gauge({name:"gossipsub_peer_churn_events_unknown_total",help:"Number of times we remove peers in a topic mesh for unknown reasons",labelNames:["topic"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),acceptedMessagesTotal:e.gauge({name:"gossipsub_accepted_messages_total",help:"Total accepted messages for each topic",labelNames:["topic"]}),ignoredMessagesTotal:e.gauge({name:"gossipsub_ignored_messages_total",help:"Total ignored messages for each topic",labelNames:["topic"]}),rejectedMessagesTotal:e.gauge({name:"gossipsub_rejected_messages_total",help:"Total rejected messages for each topic",labelNames:["topic"]}),unknownValidationResultsTotal:e.gauge({name:"gossipsub_unknown_validation_results_total",help:"Total unknown validation results for each topic",labelNames:["topic"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),asyncValidationDelayFromFirstSeenSec:e.histogram({name:"gossipsub_async_validation_delay_from_first_seen",help:"Async validation report delay from first seen in second",labelNames:["topic"],buckets:[.01,.03,.1,.3,1,3,10]}),asyncValidationUnknownFirstSeen:e.gauge({name:"gossipsub_async_validation_unknown_first_seen_count_total",help:"Async validation report unknown first seen value for message"}),peerReadStreamError:e.gauge({name:"gossipsub_peer_read_stream_err_count_total",help:"Peer read stream error"}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcDataError:e.gauge({name:"gossipsub_rpc_data_err_count_total",help:"RPC data error"}),rpcRecvError:e.gauge({name:"gossipsub_rpc_recv_err_count_total",help:"RPC recv error"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeersByTopic:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),directPeersPublishedTotal:e.gauge({name:"gossipsub_direct_peers_published_total",help:"Total direct peers that we publish a msg to",labelNames:["topic"]}),floodsubPeersPublishedTotal:e.gauge({name:"gossipsub_floodsub_peers_published_total",help:"Total floodsub peers that we publish a msg to",labelNames:["topic"]}),meshPeersPublishedTotal:e.gauge({name:"gossipsub_mesh_peers_published_total",help:"Total mesh peers that we publish a msg to",labelNames:["topic"]}),fanoutPeersPublishedTotal:e.gauge({name:"gossipsub_fanout_peers_published_total",help:"Total fanout peers that we publish a msg to",labelNames:["topic"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgPublishTime:e.histogram({name:"gossipsub_msg_publish_seconds",help:"Total time in seconds to publish a message",buckets:[.001,.002,.005,.01,.1,.5,1],labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedError:e.gauge({name:"gossipsub_msg_received_error_total",help:"Total count of recv msgs error",labelNames:["topic"]}),prevalidationInvalidTotal:e.gauge({name:"gossipsub_pre_validation_invalid_total",help:"Total count of invalid messages received",labelNames:["topic"]}),prevalidationValidTotal:e.gauge({name:"gossipsub_pre_validation_valid_total",help:"Total count of valid messages received",labelNames:["topic"]}),prevalidationDuplicateTotal:e.gauge({name:"gossipsub_pre_validation_duplicate_total",help:"Total count of duplicate messages received",labelNames:["topic"]}),prevalidationUnknownTotal:e.gauge({name:"gossipsub_pre_validation_unknown_status_total",help:"Total count of unknown_status messages received",labelNames:["topic"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["error"]}),msgReceivedInvalidByTopic:e.gauge({name:"gossipsub_msg_received_invalid_by_topic_total",help:"Tracks specific invalid message by topic",labelNames:["topic"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,Number(r.maxMeshMessageDeliveriesWindowSec),2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:e.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores"}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,Number(r.behaviourPenaltyThreshold),2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:e.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:e.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,Number(r.gossipPromiseExpireSec),2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),iwantPromiseUntracked:e.gauge({name:"gossip_iwant_promise_untracked",help:"Total count of untracked IWANT promise"}),connectedPeersBackoffSec:e.histogram({name:"gossipsub_connected_peers_backoff_seconds",help:"Backoff time in seconds",buckets:[1,2,4,10,20,60,120]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:e.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:e.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:e.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:t,toTopic(e){var t;return null!==(t=this.topicStrToLabel.get(e))&&void 0!==t?t:e},onJoin(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh(e,t,r){const n=this.toTopic(e);switch(t){case Zx.Fanout:this.meshPeerInclusionEventsFanout.inc({topic:n},r);break;case Zx.Random:this.meshPeerInclusionEventsRandom.inc({topic:n},r);break;case Zx.Subscribed:this.meshPeerInclusionEventsSubscribed.inc({topic:n},r);break;case Zx.Outbound:this.meshPeerInclusionEventsOutbound.inc({topic:n},r);break;case Zx.NotEnough:this.meshPeerInclusionEventsNotEnough.inc({topic:n},r);break;case Zx.Opportunistic:this.meshPeerInclusionEventsOpportunistic.inc({topic:n},r);break;default:this.meshPeerInclusionEventsUnknown.inc({topic:n},r)}},onRemoveFromMesh(e,t,r){const n=this.toTopic(e);switch(t){case Yx.Dc:this.meshPeerChurnEventsDisconnected.inc({topic:n},r);break;case Yx.BadScore:this.meshPeerChurnEventsBadScore.inc({topic:n},r);break;case Yx.Prune:this.meshPeerChurnEventsPrune.inc({topic:n},r);break;case Yx.Excess:this.meshPeerChurnEventsExcess.inc({topic:n},r);break;default:this.meshPeerChurnEventsUnknown.inc({topic:n},r)}},onReportValidation(e,t,r){if(this.asyncValidationMcacheHit.inc({hit:null!=e?"hit":"miss"}),null!=e){const r=this.toTopic(e.message.topic);switch(t){case kx.Accept:this.acceptedMessagesTotal.inc({topic:r});break;case kx.Ignore:this.ignoredMessagesTotal.inc({topic:r});break;case kx.Reject:this.rejectedMessagesTotal.inc({topic:r});break;default:this.unknownValidationResultsTotal.inc({topic:r})}}null!=r?this.asyncValidationDelayFromFirstSeenSec.observe((Date.now()-r)/1e3):this.asyncValidationUnknownFirstSeen.inc()},onScorePenalty(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv(e,t,r){const n=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:n},t),this.ihaveRcvNotSeenMsgids.inc({topic:n},r)},onIwantRcv(e,t){for(const[r,n]of e){const e=this.toTopic(r);this.iwantRcvMsgids.inc({topic:e},n)}this.iwantRcvDonthaveMsgids.inc(t)},onForwardMsg(e,t){const r=this.toTopic(e);this.msgForwardCount.inc({topic:r},1),this.msgForwardPeers.inc({topic:r},t)},onPublishMsg(e,t,r,n,i){const o=this.toTopic(e);this.msgPublishCount.inc({topic:o},1),this.msgPublishBytes.inc({topic:o},r*n),this.msgPublishPeersByTopic.inc({topic:o},r),this.directPeersPublishedTotal.inc({topic:o},t.direct),this.floodsubPeersPublishedTotal.inc({topic:o},t.floodsub),this.meshPeersPublishedTotal.inc({topic:o},t.mesh),this.fanoutPeersPublishedTotal.inc({topic:o},t.fanout),this.msgPublishTime.observe({topic:o},i/1e3)},onMsgRecvPreValidation(e){const t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvError(e){const t=this.toTopic(e);this.msgReceivedError.inc({topic:t},1)},onPrevalidationResult(e,t){const r=this.toTopic(e);switch(t){case Qx.duplicate:this.prevalidationDuplicateTotal.inc({topic:r});break;case Qx.invalid:this.prevalidationInvalidTotal.inc({topic:r});break;case Qx.valid:this.prevalidationValidTotal.inc({topic:r});break;default:this.prevalidationUnknownTotal.inc({topic:r})}},onMsgRecvInvalid(e,t){const r=this.toTopic(e),n=t.reason===Gx.Error?t.error:t.reason;this.msgReceivedInvalid.inc({error:n},1),this.msgReceivedInvalidByTopic.inc({topic:r},1)},onDuplicateMsgDelivery(e,t,r){if(this.duplicateMsgDeliveryDelay.observe(t/1e3),r){const t=this.toTopic(e);this.duplicateMsgLateDelivery.inc({topic:t},1)}},onPublishDuplicateMsg(e){const t=this.toTopic(e);this.duplicateMsgIgnored.inc({topic:t},1)},onPeerReadStreamError(){this.peerReadStreamError.inc(1)},onRpcRecvError(){this.rpcRecvError.inc(1)},onRpcDataError(){this.rpcDataError.inc(1)},onRpcRecv(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),null!=e.subscriptions&&this.rpcRecvSubscription.inc(e.subscriptions.length),null!=e.messages&&this.rpcRecvMessage.inc(e.messages.length),null!=e.control&&(this.rpcRecvControl.inc(1),null!=e.control.ihave&&this.rpcRecvIHave.inc(e.control.ihave.length),null!=e.control.iwant&&this.rpcRecvIWant.inc(e.control.iwant.length),null!=e.control.graft&&this.rpcRecvGraft.inc(e.control.graft.length),null!=e.control.prune&&this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),null!=e.subscriptions&&this.rpcSentSubscription.inc(e.subscriptions.length),null!=e.messages&&this.rpcSentMessage.inc(e.messages.length),null!=e.control){var r,n,i,o,s,a,c,u;const t=null!==(r=null===(n=e.control.ihave)||void 0===n?void 0:n.length)&&void 0!==r?r:0,l=null!==(i=null===(o=e.control.iwant)||void 0===o?void 0:o.length)&&void 0!==i?i:0,d=null!==(s=null===(a=e.control.graft)||void 0===a?void 0:a.length)&&void 0!==s?s:0,h=null!==(c=null===(u=e.control.prune)||void 0===u?void 0:u.length)&&void 0!==c?c:0;t>0&&this.rpcSentIHave.inc(t),l>0&&this.rpcSentIWant.inc(l),d>0&&this.rpcSentGraft.inc(d),h>0&&this.rpcSentPrune.inc(h),(t>0||l>0||d>0||h>0)&&this.rpcSentControl.inc(1)}},registerScores(e,t){let r=0,n=0,i=0,o=0;for(const s of e)s>=t.graylistThreshold&&r++,s>=t.publishThreshold&&n++,s>=t.gossipThreshold&&i++,s>=0&&o++;this.peersByScoreThreshold.set({threshold:eI.graylist},r),this.peersByScoreThreshold.set({threshold:eI.publish},n),this.peersByScoreThreshold.set({threshold:eI.gossip},i),this.peersByScoreThreshold.set({threshold:eI.mesh},o),this.score.set(e)},registerScoreWeights(e){for(const[t,r]of e.byTopic)this.scoreWeights.set({topic:t,p:"p1"},r.p1w),this.scoreWeights.set({topic:t,p:"p2"},r.p2w),this.scoreWeights.set({topic:t,p:"p3"},r.p3w),this.scoreWeights.set({topic:t,p:"p3b"},r.p3bw),this.scoreWeights.set({topic:t,p:"p4"},r.p4w);this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh(e,t){const r=new Map;e.forEach(((e,t)=>{var n;const i=null!==(n=this.topicStrToLabel.get(t))&&void 0!==n?n:"unknown";let o=r.get(i);null==o&&(o=new Set,r.set(i,o)),e.forEach((e=>{var t;return null===(t=o)||void 0===t?void 0:t.add(e)}))}));for(const[n,i]of r){const e=[];i.forEach((r=>{var n;e.push(null!==(n=t.get(r))&&void 0!==n?n:0)})),this.scorePerMesh.set({topic:n},e)}}}}(s.metricsRegister,s.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:a.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:e/1e3});t.mcacheSize.addCollect((()=>{this.onScrapeMetrics(t)}));for(const r of this.multicodecs)t.protocolsEnabled.set({protocol:r},1);this.metrics=t}else this.metrics=null;this.gossipTracer=new wI(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new mI(this.opts.scoreParams,this.metrics,{scoreCacheValidityMs:a.heartbeatInterval}),this.maxInboundStreams=s.maxInboundStreams,this.maxOutboundStreams=s.maxOutboundStreams,this.allowedTopics=null!=a.allowedTopics?new Set(a.allowedTopics):null}getPeers(){return[...this.peers.keys()].map((e=>ig(e)))}isStarted(){return this.status.code===CI.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=await async function(e,t){switch(e){case Ax:{if(null==t)throw Error("Must provide PeerId");if(null==t.privateKey)throw Error("Cannot sign message, no private key present");if(null==t.publicKey)throw Error("Cannot sign message, no public key present");const e=await hw(t.privateKey);return{type:Vx.Signing,author:t,key:t.publicKey,privateKey:e}}case Sx:return{type:Vx.Anonymous};default:throw new Error('Unknown signature policy "'.concat(e,'"'))}}(this.globalSignaturePolicy,this.components.peerId),this.outboundInflightQueue=fy({objectMode:!0}),my(this.outboundInflightQueue,(async e=>{for await(const{peerId:t,connection:r}of e)await this.createOutboundStream(t,r)})).catch((e=>{this.log.error("outbound inflight queue error",e)})),await Promise.all(this.opts.directPeers.map((async e=>{await this.components.peerStore.merge(e.id,{multiaddrs:e.addrs})})));const e=this.components.registrar;await Promise.all(this.multicodecs.map((async t=>e.handle(t,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))));const t={onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this)},r=await Promise.all(this.multicodecs.map((async r=>e.register(r,t)))),n=setTimeout(this.runHeartbeat,100);this.status={code:CI.started,registrarTopologyIds:r,heartbeatTimeout:n,hearbeatStartMs:Date.now()+100},this.score.start(),this.directPeerInitial=setTimeout((()=>{Promise.resolve().then((async()=>{await Promise.all(Array.from(this.direct).map((async e=>this.connect(e))))})).catch((e=>{this.log(e)}))}),1e3),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==CI.started)return;const{registrarTopologyIds:e}=this.status;this.status={code:CI.stopped};const t=this.components.registrar;await Promise.all(this.multicodecs.map((async e=>t.unhandle(e)))),e.forEach((e=>{t.unregister(e)})),this.outboundInflightQueue.end();const r=[];for(const n of this.streamsOutbound.values())r.push(n.close());this.streamsOutbound.clear();for(const n of this.streamsInbound.values())r.push(n.close());this.streamsInbound.clear(),await Promise.all(r),this.peers.clear(),this.subscriptions.clear(),null!=this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),null!=this.fastMsgIdCache&&this.fastMsgIdCache.clear(),null!=this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream(e){let{stream:t,connection:r}=e;if(!this.isStarted())return;const n=r.remotePeer;this.addPeer(n,r.direction,r.remoteAddr),this.createInboundStream(n,t),this.outboundInflightQueue.push({peerId:n,connection:r})}onPeerConnected(e,t){var r;null===(r=this.metrics)||void 0===r||r.newConnectionCount.inc({status:t.status}),this.isStarted()&&"open"===t.status&&(this.addPeer(e,t.direction,t.remoteAddr),this.outboundInflightQueue.push({peerId:e,connection:t}))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}async createOutboundStream(e,t){if(!this.isStarted())return;const r=e.toString();if(this.peers.has(r)&&!this.streamsOutbound.has(r))try{var n;const i=new vI(await t.newStream(this.multicodecs),(e=>{this.log.error("outbound pipe error",e)}),{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",e),this.streamsOutbound.set(r,i);const o=i.protocol;o===xx&&this.floodsubPeers.add(r),null===(n=this.metrics)||void 0===n||n.peersPerProtocol.inc({protocol:o},1),this.subscriptions.size>0&&(this.log("send subscriptions to",r),this.sendSubscriptions(r,Array.from(this.subscriptions),!0))}catch(i){this.log.error("createOutboundStream error",i)}}createInboundStream(e,t){if(!this.isStarted())return;const r=e.toString();if(!this.peers.has(r))return;const n=this.streamsInbound.get(r);void 0!==n&&(this.log("replacing existing inbound steam %s",r),n.close().catch((e=>{this.log.error(e)}))),this.log("create inbound stream %s",r);const i=new bI(t,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(r,i),this.pipePeerReadStream(e,i.source).catch((e=>{this.log(e)}))}addPeer(e,t,r){const n=e.toString();if(!this.peers.has(n)){this.log("new peer %p",e),this.peers.add(n),this.score.addPeer(n);const i=function(e){for(const t of e.tuples())switch(t[0]){case PI.ip4:case PI.ip6:return Sn(t[0],t[1])}return null}(r);null!==i?this.score.addIP(n,i):this.log("Added peer has no IP in current address %s %s",n,r.toString()),this.outbound.has(n)||this.outbound.set(n,"outbound"===t)}}removePeer(e){const t=e.toString();if(!this.peers.has(t))return;this.log("delete peer %p",e),this.peers.delete(t);const r=this.streamsOutbound.get(t),n=this.streamsInbound.get(t);var i;null!=r&&(null===(i=this.metrics)||void 0===i||i.peersPerProtocol.inc({protocol:r.protocol},-1));null===r||void 0===r||r.close().catch((e=>{this.log.error(e)})),null===n||void 0===n||n.close().catch((e=>{this.log.error(e)})),this.streamsOutbound.delete(t),this.streamsInbound.delete(t);for(const s of this.topics.values())s.delete(t);for(const[s,a]of this.mesh){var o;if(a.delete(t))null===(o=this.metrics)||void 0===o||o.onRemoveFromMesh(s,Yx.Dc,1)}for(const s of this.fanout.values())s.delete(t);this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t)}get started(){return this.status.code===CI.started}getMeshPeers(e){const t=this.mesh.get(e);return null!=t?Array.from(t):[]}getSubscribers(e){const t=this.topics.get(e);return(null!=t?Array.from(t):[]).map((e=>ig(e)))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,t){try{await my(t,(async t=>{for await(const a of t)try{var r;const t=a.subarray(),i=Bx(t,this.decodeRpcLimits);if(null===(r=this.metrics)||void 0===r||r.onRpcRecv(i,t.length),this.opts.awaitRpcHandler)try{await this.handleReceivedRpc(e,i)}catch(o){var n;null===(n=this.metrics)||void 0===n||n.onRpcRecvError(),this.log(o)}else this.handleReceivedRpc(e,i).catch((e=>{var t;null===(t=this.metrics)||void 0===t||t.onRpcRecvError(),this.log(e)}))}catch(s){var i;null===(i=this.metrics)||void 0===i||i.onRpcDataError(),this.log(s)}}))}catch(n){var r;null===(r=this.metrics)||void 0===r||r.onPeerReadStreamError(),this.handlePeerReadStreamError(n,e)}}handlePeerReadStreamError(e,t){this.log.error(e),this.onPeerDisconnected(t)}async handleReceivedRpc(e,t){var r;if(!this.acceptFrom(e.toString()))return this.log("received message from unacceptable peer %p",e),void(null===(r=this.metrics)||void 0===r||r.rpcRecvNotAccepted.inc());const n=null!=t.subscriptions?t.subscriptions.length:0,i=null!=t.messages?t.messages.length:0;let o=0,s=0,a=0,c=0;if(null!=t.control&&(null!=t.control.ihave&&(o=t.control.ihave.length),null!=t.control.iwant&&(s=t.control.iwant.length),null!=t.control.graft&&(a=t.control.graft.length),null!=t.control.prune&&(c=t.control.prune.length)),this.log("rpc.from ".concat(e.toString()," subscriptions ").concat(n," messages ").concat(i," ihave ").concat(o," iwant ").concat(s," graft ").concat(a," prune ").concat(c)),null!=t.subscriptions&&t.subscriptions.length>0){const r=[];t.subscriptions.forEach((t=>{const n=t.topic,i=!0===t.subscribe;if(null!=n){if(null!=this.allowedTopics&&!this.allowedTopics.has(n))return;this.handleReceivedSubscription(e,n,i),r.push({topic:n,subscribe:i})}})),this.safeDispatchEvent("subscription-change",{detail:{peerId:e,subscriptions:r}})}if(null!=t.messages)for(const u of t.messages){if(null!=this.allowedTopics&&!this.allowedTopics.has(u.topic))continue;const t=this.handleReceivedMessage(e,u).catch((e=>{var t;null===(t=this.metrics)||void 0===t||t.onMsgRecvError(u.topic),this.log(e)}));this.opts.awaitRpcMessageHandler&&await t}null!=t.control&&await this.handleControlMessage(e.toString(),t.control)}handleReceivedSubscription(e,t,r){this.log("subscription update from %p topic %s",e,t);let n=this.topics.get(t);null==n&&(n=new Set,this.topics.set(t,n)),r?n.add(e.toString()):n.delete(e.toString())}async handleReceivedMessage(e,t){var r,n,i;null===(r=this.metrics)||void 0===r||r.onMsgRecvPreValidation(t.topic);const o=await this.validateReceivedMessage(e,t);null===(n=this.metrics)||void 0===n||n.onPrevalidationResult(t.topic,o.code);const s=o.code;switch(s){case Qx.duplicate:return this.score.duplicateMessage(e.toString(),o.msgIdStr,t.topic),this.gossipTracer.deliverMessage(o.msgIdStr,!0),void this.mcache.observeDuplicate(o.msgIdStr,e.toString());case Qx.invalid:if(null!=o.msgIdStr){const r=o.msgIdStr;this.score.rejectMessage(e.toString(),r,t.topic,o.reason),this.gossipTracer.rejectMessage(r,o.reason)}else this.score.rejectInvalidMessage(e.toString(),t.topic);return void(null===(i=this.metrics)||void 0===i||i.onMsgRecvInvalid(t.topic,o));case Qx.valid:if(this.score.validateMessage(o.messageId.msgIdStr),this.gossipTracer.deliverMessage(o.messageId.msgIdStr),this.mcache.put(o.messageId,t,!this.opts.asyncValidation),this.subscriptions.has(t.topic)){this.components.peerId.equals(e)&&!this.opts.emitSelf||(super.dispatchEvent(new QA("gossipsub:message",{detail:{propagationSource:e,msgId:o.messageId.msgIdStr,msg:o.msg}})),super.dispatchEvent(new QA("message",{detail:o.msg})))}this.opts.asyncValidation||this.forwardMessage(o.messageId.msgIdStr,t,e.toString());break;default:throw new Error("Invalid validation result: ".concat(s))}}async validateReceivedMessage(e,t){var r,n;const i=null===(r=this.fastMsgIdFn)||void 0===r?void 0:r.call(this,t),o=void 0!==i?null===(n=this.fastMsgIdCache)||void 0===n?void 0:n.get(i):void 0;if(null!=o)return{code:Qx.duplicate,msgIdStr:o};const s=await async function(e,t){var r;switch(e){case Sx:return null!=t.signature?{valid:!1,error:Wx.SignaturePresent}:null!=t.seqno?{valid:!1,error:Wx.SeqnoPresent}:null!=t.key?{valid:!1,error:Wx.FromPresent}:{valid:!0,message:{type:"unsigned",topic:t.topic,data:null!==(r=t.data)&&void 0!==r?r:new Uint8Array(0)}};case Ax:{var n,i;if(null==t.seqno)return{valid:!1,error:Wx.InvalidSeqno};if(8!==t.seqno.length)return{valid:!1,error:Wx.InvalidSeqno};if(null==t.signature)return{valid:!1,error:Wx.InvalidSignature};if(null==t.from)return{valid:!1,error:Wx.InvalidPeerId};let e,r;try{e=og(t.from)}catch(o){return{valid:!1,error:Wx.InvalidPeerId}}if(null!=t.key){if(r=lw(t.key),void 0!==e.publicKey&&!Wp(r.bytes,e.publicKey))return{valid:!1,error:Wx.InvalidPeerId}}else{if(null==e.publicKey)return{valid:!1,error:Wx.InvalidPeerId};r=lw(e.publicKey)}const s={from:t.from,data:t.data,seqno:t.seqno,topic:t.topic,signature:void 0,key:void 0},a=gb([SI,zx.Message.encode(s).finish()]);return await r.verify(a,t.signature)?{valid:!0,message:{type:"signed",from:e,data:null!==(n=t.data)&&void 0!==n?n:new Uint8Array(0),sequenceNumber:BigInt("0x".concat(xs(t.seqno,"base16"))),topic:t.topic,signature:t.signature,key:null!==(i=t.key)&&void 0!==i?i:dw(r)}}:{valid:!1,error:Wx.InvalidSignature}}default:throw new Error("Unreachable")}}(this.globalSignaturePolicy,t);if(!s.valid)return{code:Qx.invalid,reason:Gx.Error,error:s.error};const a=s.message;try{null!=this.dataTransform&&(a.data=this.dataTransform.inboundTransform(t.topic,a.data))}catch(f){return this.log("Invalid message, transform failed",f),{code:Qx.invalid,reason:Gx.Error,error:Wx.TransformFailed}}const c=await this.msgIdFn(a),u=this.msgIdToStrFn(c),l={msgId:c,msgIdStr:u};if(void 0!==i&&null!=this.fastMsgIdCache){var d;if(this.fastMsgIdCache.put(i,u))null===(d=this.metrics)||void 0===d||d.fastMsgIdCacheCollision.inc()}if(this.seenCache.has(u))return{code:Qx.duplicate,msgIdStr:u};this.seenCache.put(u);const h=this.topicValidators.get(t.topic);if(null!=h){let t;try{t=await h(e,a)}catch(f){const e=f.code;"ERR_TOPIC_VALIDATOR_IGNORE"===e&&(t=kx.Ignore),t="ERR_TOPIC_VALIDATOR_REJECT"===e?kx.Reject:kx.Ignore}if(t!==kx.Accept)return{code:Qx.invalid,reason:tI(t),msgIdStr:u}}return{code:Qx.valid,messageId:l,msg:a}}getScore(e){return this.score.score(e)}sendSubscriptions(e,t,r){this.sendRpc(e,{subscriptions:t.map((e=>({topic:e,subscribe:r})))})}async handleControlMessage(e,t){var r;if(void 0===t)return;const n=null!=t.ihave?this.handleIHave(e,t.ihave):[],i=null!=t.iwant?this.handleIWant(e,t.iwant):[],o=null!=t.graft?await this.handleGraft(e,t.graft):[];if(null!=t.prune&&await this.handlePrune(e,t.prune),0===n.length&&0===i.length&&0===o.length)return;const s=this.sendRpc(e,{messages:i,control:{iwant:n,prune:o}}),a=null===(r=n[0])||void 0===r?void 0:r.messageIDs;var c;null!=a&&(s?this.gossipTracer.addPromise(e,a):null===(c=this.metrics)||void 0===c||c.iwantPromiseUntracked.inc(1))}acceptFrom(e){if(this.direct.has(e))return!0;const t=Date.now(),r=this.acceptFromWhitelist.get(e);if(null!=r&&r.messagesAccepted<128&&r.acceptUntil>=t)return r.messagesAccepted+=1,!0;const n=this.score.score(e);return n>=0?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+1e3}):this.acceptFromWhitelist.delete(e),n>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,t){var r,n;if(0===t.length)return[];const i=this.score.score(e);var o;if(i<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,i),null===(o=this.metrics)||void 0===o||o.ihaveRcvIgnored.inc({reason:$x.LowScore}),[];const s=(null!==(r=this.peerhave.get(e))&&void 0!==r?r:0)+1;var a;if(this.peerhave.set(e,s),s>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,s),null===(a=this.metrics)||void 0===a||a.ihaveRcvIgnored.inc({reason:$x.MaxIhave}),[];const c=null!==(n=this.iasked.get(e))&&void 0!==n?n:0;var u;if(c>=Px)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,c),null===(u=this.metrics)||void 0===u||u.ihaveRcvIgnored.inc({reason:$x.MaxIasked}),[];const l=new Map;if(t.forEach((e=>{var t;let{topicID:r,messageIDs:n}=e;if(null==r||null==n||!this.mesh.has(r))return;let i=0;n.forEach((e=>{const t=this.msgIdToStrFn(e);this.seenCache.has(t)||(l.set(t,e),i++)})),null===(t=this.metrics)||void 0===t||t.onIhaveRcv(r,n.length,i)})),0===l.size)return[];let d=l.size;d+c>Px&&(d=Px-c),this.log("IHAVE: Asking for %d out of %d messages from %s",d,l.size,e);let h=Array.from(l.values());return kI(h),h=h.slice(0,d),this.iasked.set(e,c+d),[{messageIDs:h}]}handleIWant(e,t){var r;if(0===t.length)return[];const n=this.score.score(e);if(n<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,n),[];const i=new Map,o=new Map;let s=0;return t.forEach((t=>{let{messageIDs:r}=t;null===r||void 0===r||r.forEach((t=>{var r;const n=this.msgIdToStrFn(t),a=this.mcache.getWithIWantCount(n,e);null!=a?(o.set(a.msg.topic,1+(null!==(r=o.get(a.msg.topic))&&void 0!==r?r:0)),a.count>3?this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t):i.set(n,a.msg)):s++}))})),null===(r=this.metrics)||void 0===r||r.onIwantRcv(o,s),0===i.size?(this.log("IWANT: Could not provide any wanted messages to %s",e),[]):(this.log("IWANT: Sending %d messages to %s",i.size,e),Array.from(i.values()))}async handleGraft(e,t){const r=[],n=this.score.score(e),i=Date.now();let o=this.opts.doPX;if(t.forEach((t=>{var s,a,c;let{topicID:u}=t;if(null==u)return;const l=this.mesh.get(u);if(null==l)return void(o=!1);if(l.has(e))return;if(this.direct.has(e))return this.log("GRAFT: ignoring request from direct peer %s",e),r.push(u),void(o=!1);const d=null===(s=this.backoff.get(u))||void 0===s?void 0:s.get(e);if("number"===typeof d&&i<d){this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,Xx.GraftBackoff),o=!1;const t=d+this.opts.graftFloodThreshold-this.opts.pruneBackoff;return i<t&&this.score.addPenalty(e,1,Xx.GraftBackoff),this.addBackoff(e,u),void r.push(u)}return n<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,u),r.push(u),o=!1,void this.addBackoff(e,u)):l.size>=this.opts.Dhi&&(null===(a=this.outbound.get(e))||void 0===a||!a)?(r.push(u),void this.addBackoff(e,u)):(this.log("GRAFT: Add mesh link from %s in %s",e,u),this.score.graft(e,u),l.add(e),void(null===(c=this.metrics)||void 0===c||c.onAddToMesh(u,Zx.Subscribed,1)))})),0===r.length)return[];return Promise.all(r.map((async t=>this.makePrune(e,t,o,false))))}async handlePrune(e,t){const r=this.score.score(e);for(const{topicID:i,backoff:o,peers:s}of t){if(null==i)continue;const t=this.mesh.get(i);if(null==t)return;var n;if(this.log("PRUNE: Remove mesh link to %s in %s",e,i),this.score.prune(e,i),t.has(e))t.delete(e),null===(n=this.metrics)||void 0===n||n.onRemoveFromMesh(i,Yx.Prune,1);if("number"===typeof o&&o>0?this.doAddBackoff(e,i,1e3*o):this.addBackoff(e,i),null!=s&&s.length>0){if(r<this.opts.scoreThresholds.acceptPXThreshold){this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,r,i);continue}await this.pxConnect(s)}}}addBackoff(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}doAddBackoff(e,t,r){var n;let i=this.backoff.get(t);null==i&&(i=new Map,this.backoff.set(t,i));const o=Date.now()+r;(null!==(n=i.get(e))&&void 0!==n?n:0)<o&&i.set(e,o)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach(((e,t)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",t,e),this.score.addPenalty(t,e,Xx.BrokenPromise)}))}clearBackoff(){if(this.heartbeatTicks%15!==0)return;const e=Date.now();this.backoff.forEach(((t,r)=>{t.forEach(((r,n)=>{r+1*this.opts.heartbeatInterval<e&&t.delete(n)})),0===t.size&&this.backoff.delete(r)}))}async directConnect(){const e=[];this.direct.forEach((t=>{this.streamsOutbound.has(t)||e.push(t)})),await Promise.all(e.map((async e=>this.connect(e))))}async pxConnect(e){e.length>this.opts.prunePeers&&(kI(e),e=e.slice(0,this.opts.prunePeers));const t=[];await Promise.all(e.map((async e=>{if(null==e.peerID)return;const r=og(e.peerID),n=r.toString();if(!this.peers.has(n))if(null!=e.signedPeerRecord)try{if(!await this.components.peerStore.consumePeerRecord(e.signedPeerRecord,r))return void this.log("bogus peer record obtained through px: could not add peer record to address book");t.push(n)}catch(i){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}else t.push(n)}))),0!==t.length&&await Promise.all(t.map((async e=>this.connect(e))))}async connect(e){this.log("Initiating connection with %s",e);const t=ig(e),r=await this.components.connectionManager.openConnection(t);for(const i of this.multicodecs)for(const e of this.components.registrar.getTopologies(i)){var n;null===(n=e.onConnect)||void 0===n||n.call(e,t,r)}}subscribe(e){if(this.status.code!==CI.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(e)){this.subscriptions.add(e);for(const t of this.peers.keys())this.sendSubscriptions(t,[e],!0)}this.join(e)}unsubscribe(e){if(this.status.code!==CI.started)throw new Error("Pubsub is not started");const t=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,t),t)for(const r of this.peers.keys())this.sendSubscriptions(r,[e],!1);this.leave(e)}join(e){var t;if(this.status.code!==CI.started)throw new Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),null===(t=this.metrics)||void 0===t||t.onJoin(e);const r=new Set,n=this.backoff.get(e),i=this.fanout.get(e);var o;null!=i&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),i.forEach((e=>{this.direct.has(e)||!(this.score.score(e)>=0)||null!=n&&n.has(e)||r.add(e)})),null===(o=this.metrics)||void 0===o||o.onAddToMesh(e,Zx.Fanout,r.size));if(r.size<this.opts.D){var s;const t=r.size;this.getRandomGossipPeers(e,this.opts.D,(e=>!r.has(e)&&!this.direct.has(e)&&this.score.score(e)>=0&&(null==n||!n.has(e)))).forEach((e=>{r.add(e)})),null===(s=this.metrics)||void 0===s||s.onAddToMesh(e,Zx.Random,r.size-t)}this.mesh.set(e,r),r.forEach((t=>{this.log("JOIN: Add mesh link to %s in %s",t,e),this.sendGraft(t,e)}))}leave(e){var t;if(this.status.code!==CI.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",e),null===(t=this.metrics)||void 0===t||t.onLeave(e);const r=this.mesh.get(e);null!=r&&(Promise.all(Array.from(r).map((async t=>{this.log("LEAVE: Remove mesh link to %s in %s",t,e),await this.sendPrune(t,e)}))).catch((e=>{this.log("Error sending prunes to mesh peers",e)})),this.mesh.delete(e))}selectPeersToForward(e,t,r){const n=new Set,i=this.topics.get(e);null!=i&&(this.direct.forEach((e=>{var o;!i.has(e)||t===e||null!==(o=null===r||void 0===r?void 0:r.has(e))&&void 0!==o&&o||n.add(e)})),this.floodsubPeers.forEach((e=>{var o;i.has(e)&&t!==e&&(null===(o=null===r||void 0===r?void 0:r.has(e))||void 0===o||!o)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&n.add(e)})));const o=this.mesh.get(e);return null!=o&&o.size>0&&o.forEach((e=>{var i;t===e||null!==(i=null===r||void 0===r?void 0:r.has(e))&&void 0!==i&&i||n.add(e)})),n}selectPeersToPublish(e){const t=new Set,r={direct:0,floodsub:0,mesh:0,fanout:0},n=this.topics.get(e);if(null!=n)if(this.opts.floodPublish)n.forEach((e=>{this.direct.has(e)?(t.add(e),r.direct++):this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)}));else{this.direct.forEach((e=>{n.has(e)&&(t.add(e),r.direct++)})),this.floodsubPeers.forEach((e=>{n.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)}));const i=this.mesh.get(e);if(null!=i&&i.size>0)i.forEach((e=>{t.add(e),r.mesh++}));else{const n=this.fanout.get(e);if(null!=n&&n.size>0)n.forEach((e=>{t.add(e),r.fanout++}));else{const n=this.getRandomGossipPeers(e,this.opts.D,(e=>this.score.score(e)>=this.opts.scoreThresholds.publishThreshold));n.size>0&&(this.fanout.set(e,n),n.forEach((e=>{t.add(e),r.fanout++})))}this.fanoutLastpub.set(e,Date.now())}}return{tosend:t,tosendCount:r}}forwardMessage(e,t,r,n){var i;null!=r&&this.score.deliverMessage(r,e,t.topic);const o=this.selectPeersToForward(t.topic,r,n);o.forEach((e=>{this.sendRpc(e,{messages:[t]})})),null===(i=this.metrics)||void 0===i||i.onForwardMsg(t.topic,o.size)}async publish(e,t,r){var n,i,o;const s=Date.now(),a=null!=this.dataTransform?this.dataTransform.outboundTransform(e,t):t;if(null==this.publishConfig)throw Error("PublishError.Uninitialized");const{raw:c,msg:u}=await async function(e,t,r,n){switch(e.type){case Vx.Signing:{const i={from:e.author.toBytes(),data:n,seqno:jb(8),topic:t,signature:void 0,key:void 0},o=gb([SI,zx.Message.encode(i).finish()]);return i.signature=await e.privateKey.sign(o),i.key=e.key,{raw:i,msg:{type:"signed",from:e.author,data:r,sequenceNumber:BigInt("0x".concat(xs(i.seqno,"base16"))),topic:t,signature:i.signature,key:i.key}}}case Vx.Anonymous:return{raw:{from:void 0,data:n,seqno:void 0,topic:t,signature:void 0,key:void 0},msg:{type:"unsigned",data:r,topic:t}};default:throw new Error("Unreachable")}}(this.publishConfig,e,t,a),l=await this.msgIdFn(u),d=this.msgIdToStrFn(l),h=null!==(n=null===r||void 0===r?void 0:r.ignoreDuplicatePublishError)&&void 0!==n?n:this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(d)){var f;if(h)return null===(f=this.metrics)||void 0===f||f.onPublishDuplicateMsg(e),{recipients:[]};throw Error("PublishError.Duplicate")}const{tosend:p,tosendCount:g}=this.selectPeersToPublish(e),m=this.opts.emitSelf&&this.subscriptions.has(e),y=null!==(i=null===r||void 0===r?void 0:r.allowPublishToZeroPeers)&&void 0!==i?i:this.opts.allowPublishToZeroPeers;if(0===p.size&&!y&&!m)throw Error("PublishError.InsufficientPeers");this.seenCache.put(d),this.mcache.put({msgId:l,msgIdStr:d},c,!0),this.publishedMessageIds.put(d);for(const b of p){this.sendRpc(b,{messages:[c]})||p.delete(b)}const v=Date.now()-s;return null===(o=this.metrics)||void 0===o||o.onPublishMsg(e,g,p.size,null!=c.data?c.data.length:0,v),m&&(p.add(this.components.peerId.toString()),super.dispatchEvent(new QA("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:d,msg:u}})),super.dispatchEvent(new QA("message",{detail:u}))),{recipients:Array.from(p.values()).map((e=>ig(e)))}}reportMessageValidationResult(e,t,r){var n;let i;if(r===kx.Accept){if(i=this.mcache.validate(e),null!=i){const{message:r,originatingPeers:n}=i;this.score.deliverMessage(t,e,r.topic),this.forwardMessage(e,i.message,t,n)}}else if(i=this.mcache.remove(e),null!=i){const n=tI(r),{message:o,originatingPeers:s}=i;this.score.rejectMessage(t,e,o.topic,n);for(const t of s)this.score.rejectMessage(t,e,o.topic,n)}const o=this.score.messageFirstSeenTimestampMs(e);null===(n=this.metrics)||void 0===n||n.onReportValidation(i,r,o)}sendGraft(e,t){const r=[{topicID:t}];this.sendRpc(e,{control:{graft:r}})}async sendPrune(e,t){const r=[await this.makePrune(e,t,this.opts.doPX,!0)];this.sendRpc(e,{control:{prune:r}})}sendRpc(e,t){var r;const n=this.streamsOutbound.get(e);if(null==n)return this.log("Cannot send RPC to ".concat(e," as there is no open stream to it available")),!1;const i=this.control.get(e);null!=i&&(this.piggybackControl(e,t,i),this.control.delete(e));const o=this.gossip.get(e);null!=o&&(this.piggybackGossip(e,t,o),this.gossip.delete(e));const s=zx.encode(t).finish();try{n.push(s)}catch(a){return this.log.error("Cannot send rpc to ".concat(e),a),null!=i&&this.control.set(e,i),null!=o&&this.gossip.set(e,o),!1}return null===(r=this.metrics)||void 0===r||r.onRpcSent(t,s.length),!0}piggybackControl(e,t,r){if(null!=r.graft){null==t.control&&(t.control={}),null==t.control.graft&&(t.control.graft=[]);for(const o of r.graft){var n,i;null!=o.topicID&&null!==(n=null===(i=this.mesh.get(o.topicID))||void 0===i?void 0:i.has(e))&&void 0!==n&&n&&t.control.graft.push(o)}}if(null!=r.prune){null==t.control&&(t.control={}),null==t.control.prune&&(t.control.prune=[]);for(const n of r.prune){var o,s;null==n.topicID||null!==(o=null===(s=this.mesh.get(n.topicID))||void 0===s?void 0:s.has(e))&&void 0!==o&&o||t.control.prune.push(n)}}}piggybackGossip(e,t,r){null==t.control&&(t.control={}),t.control.ihave=r}async sendGraftPrune(e,t,r){const n=this.opts.doPX;for(const[i,o]of e){const e=o.map((e=>({topicID:e})));let s=[];const a=t.get(i);null!=a&&(s=await Promise.all(a.map((async e=>{var t;return this.makePrune(i,e,n&&!(null!==(t=r.get(i))&&void 0!==t&&t),false)}))),t.delete(i)),this.sendRpc(i,{control:{graft:e,prune:s}})}for(const[i,o]of t){const e=await Promise.all(o.map((async e=>{var t;return this.makePrune(i,e,n&&!(null!==(t=r.get(i))&&void 0!==t&&t),false)})));this.sendRpc(i,{control:{prune:e}})}}emitGossip(e){const t=this.mcache.getGossipIDs(new Set(e.keys()));for(const[n,i]of e){var r;this.doEmitGossip(n,i,null!==(r=t.get(n))&&void 0!==r?r:[])}}doEmitGossip(e,t,r){if(0===r.length)return;if(kI(r),r.length>Px&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length),0===t.size)return;let n=this.opts.Dlazy;const i=.25*t.size;let o=t;i>n&&(n=i),n>o.size?n=o.size:o=kI(Array.from(o)).slice(0,n),o.forEach((t=>{let n=r;r.length>Px&&(n=kI(n.slice()).slice(0,Px)),this.pushGossip(t,{topicID:e,messageIDs:n})}))}flush(){for(const[e,t]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,{control:{ihave:t}});for(const[e,t]of this.control.entries())this.control.delete(e),this.sendRpc(e,{control:{graft:t.graft,prune:t.prune}})}pushGossip(e,t){var r;this.log("Add gossip to %s",e);const n=null!==(r=this.gossip.get(e))&&void 0!==r?r:[];this.gossip.set(e,n.concat(t))}async makePrune(e,t,r,n){var i;if(this.score.prune(e,t),(null===(i=this.streamsOutbound.get(e))||void 0===i?void 0:i.protocol)===Ix)return{topicID:t,peers:[]};const o=n?this.opts.unsubcribeBackoff:this.opts.pruneBackoff,s=o/1e3;if(this.doAddBackoff(e,t,o),!r)return{topicID:t,peers:[],backoff:s};const a=this.getRandomGossipPeers(t,this.opts.prunePeers,(t=>t!==e&&this.score.score(t)>=0)),c=await Promise.all(Array.from(a).map((async e=>{var t;const r=ig(e);let n;try{n=await this.components.peerStore.get(r)}catch(i){if("ERR_NOT_FOUND"!==i.code)throw i}return{peerID:r.toBytes(),signedPeerRecord:null===(t=n)||void 0===t?void 0:t.peerRecordEnvelope}})));return{topicID:t,peers:c,backoff:s}}async heartbeat(){var e,t;const{D:r,Dlo:n,Dhi:i,Dscore:o,Dout:s,fanoutTTL:a}=this.opts;this.heartbeatTicks++;const c=new Map,u=e=>{let t=c.get(e);return void 0===t&&(t=this.score.score(e),c.set(e,t)),t},l=new Map,d=new Map,h=new Map;this.clearBackoff(),this.peerhave.clear(),null===(e=this.metrics)||void 0===e||e.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),null===(t=this.fastMsgIdCache)||void 0===t||t.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const f=new Map;this.mesh.forEach(((e,t)=>{const a=this.topics.get(t),c=new Set,p=new Set;if(f.set(t,p),null!=a){const r=kI(Array.from(a)),n=this.backoff.get(t);for(const t of r){const r=this.streamsOutbound.get(t);if(null!=r&&this.multicodecs.includes(r.protocol)&&!e.has(t)&&!this.direct.has(t)){const e=u(t);(null==n||!n.has(t))&&e>=0&&c.add(t),e>=this.opts.scoreThresholds.gossipThreshold&&p.add(t)}}}const g=(r,n)=>{var i;this.log("HEARTBEAT: Remove mesh link to %s in %s",r,t),this.addBackoff(r,t),e.delete(r),u(r)>=this.opts.scoreThresholds.gossipThreshold&&p.add(r),null===(i=this.metrics)||void 0===i||i.onRemoveFromMesh(t,n,1);const o=d.get(r);null==o?d.set(r,[t]):o.push(t)},m=(r,n)=>{var i;this.log("HEARTBEAT: Add mesh link to %s in %s",r,t),this.score.graft(r,t),e.add(r),p.delete(r),null===(i=this.metrics)||void 0===i||i.onAddToMesh(t,n,1);const o=l.get(r);null==o?l.set(r,[t]):o.push(t)};if(e.forEach((e=>{const r=u(e);r<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,r,t),g(e,Yx.BadScore),h.set(e,!0))})),e.size<n){const t=function(e,t){return uI(e,t,(()=>!0))}(c,r-e.size);t.forEach((e=>{m(e,Zx.NotEnough)}))}if(e.size>i){let t=Array.from(e);t.sort(((e,t)=>u(t)-u(e))),t=t.slice(0,o).concat(kI(t.slice(o)));let n=0;if(t.slice(0,r).forEach((e=>{var t;null!==(t=this.outbound.get(e))&&void 0!==t&&t&&n++})),n<s){const e=e=>{const r=t[e];for(let n=e;n>0;n--)t[n]=t[n-1];t[0]=r};if(n>0){let i=n;for(let n=1;n<r&&i>0;n++){var y;null!==(y=this.outbound.get(t[n]))&&void 0!==y&&y&&(e(n),i--)}}let i=r-n;for(let n=r;n<t.length&&i>0;n++){var v;null!==(v=this.outbound.get(t[n]))&&void 0!==v&&v&&(e(n),i--)}}t.slice(r).forEach((e=>{g(e,Yx.Excess)}))}if(e.size>=n){let t=0;if(e.forEach((e=>{var r;null!==(r=this.outbound.get(e))&&void 0!==r&&r&&t++})),t<s){uI(c,s-t,(e=>!0===this.outbound.get(e))).forEach((e=>{m(e,Zx.Outbound)}))}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&e.size>1){const r=Array.from(e).sort(((e,t)=>u(e)-u(t))),n=Math.floor(e.size/2),i=u(r[n]);if(i<this.opts.scoreThresholds.opportunisticGraftThreshold){const e=uI(c,this.opts.opportunisticGraftPeers,(e=>u(e)>i));for(const r of e)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",r,t),m(r,Zx.Opportunistic)}}}));const p=Date.now();this.fanoutLastpub.forEach(((e,t)=>{e+a<p&&(this.fanout.delete(t),this.fanoutLastpub.delete(t))})),this.fanout.forEach(((e,t)=>{const n=this.topics.get(t);e.forEach((t=>{var r;(null===(r=null===n||void 0===n?void 0:n.has(t))||void 0===r||!r||u(t)<this.opts.scoreThresholds.publishThreshold)&&e.delete(t)}));const i=this.topics.get(t),o=[],s=new Set;if(f.set(t,s),null!=i){const t=kI(Array.from(i));for(const r of t){const t=this.streamsOutbound.get(r);if(null!=t&&this.multicodecs.includes(t.protocol)&&!e.has(r)&&!this.direct.has(r)){const e=u(r);e>=this.opts.scoreThresholds.publishThreshold&&o.push(r),e>=this.opts.scoreThresholds.gossipThreshold&&s.add(r)}}}if(e.size<r){const t=r-e.size;o.slice(0,t).forEach((t=>{e.add(t),null===s||void 0===s||s.delete(t)}))}})),this.emitGossip(f),await this.sendGraftPrune(l,d,h),this.flush(),this.mcache.shift(),this.dispatchEvent(new QA("gossipsub:heartbeat"))}getRandomGossipPeers(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;const n=this.topics.get(e);if(null==n)return new Set;let i=[];return n.forEach((e=>{const t=this.streamsOutbound.get(e);null!=t&&this.multicodecs.includes(t.protocol)&&r(e)&&i.push(e)})),i=kI(i),t>0&&i.length>t&&(i=i.slice(0,t)),new Set(i)}onScrapeMetrics(e){var t,r;e.mcacheSize.set(this.mcache.size),e.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},null!==(t=null===(r=this.fastMsgIdCache)||void 0===r?void 0:r.size)&&void 0!==t?t:0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let n=0;const i=Date.now();e.connectedPeersBackoffSec.reset();for(const l of this.backoff.values()){n+=l.size;for(const[t,r]of l.entries())this.peers.has(t)&&e.connectedPeersBackoffSec.observe(Math.max(0,r-i)/1e3)}e.cacheSize.set({cache:"backoff"},n);for(const[l,d]of this.topics)e.topicPeersCount.set({topicStr:l},d.size);for(const[l,d]of this.mesh)e.meshPeerCounts.set({topicStr:l},d.size);const o=[],s=new Map;e.behaviourPenalty.reset();for(const l of this.peers.keys()){var a,c;const t=this.score.score(l);o.push(t),s.set(l,t),e.behaviourPenalty.observe(null!==(a=null===(c=this.score.peerStats.get(l))||void 0===c?void 0:c.behaviourPenalty)&&void 0!==a?a:0)}e.registerScores(o,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,s);const u=function(e,t,r,n,i){const o={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const s of e){const e=t.get(s);if(null!=e){const t=yI(s,e,r,n,i);for(const[e,r]of t.byTopic){let t=o.byTopic.get(e);null==t&&(t={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},o.byTopic.set(e,t)),t.p1w.push(r.p1w),t.p2w.push(r.p2w),t.p3w.push(r.p3w),t.p3bw.push(r.p3bw),t.p4w.push(r.p4w)}o.p5w.push(t.p5w),o.p6w.push(t.p6w),o.p7w.push(t.p7w),o.score.push(t.score)}else o.p5w.push(0),o.p6w.push(0),o.p7w.push(0),o.score.push(0)}return o}(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(u)}}We(BI,"multicodec",Tx);const MI=["/vac/waku/relay/2.0.0"],NI=new qs("relay");function OI(e,t){const r=performance.now();NI.info("validating message from ".concat(e," received on ").concat(t.topic));let n=kx.Accept;try{const e=Xg.decode(t.data);e.contentTopic&&e.contentTopic.length&&e.payload&&e.payload.length||(n=kx.Reject)}catch(o){n=kx.Reject}const i=performance.now()-r;return i>100?NI.warn("message validation took ".concat(i,"ms for peer ").concat(e," on topic ").concat(t.topic,". This should be less than 100ms.")):NI.info("message validation took ".concat(i,"ms for peer ").concat(e," on topic ").concat(t.topic)),n}class DI{constructor(e,t){We(this,"pubsubTopic",void 0),We(this,"proto",void 0),We(this,"payload",new Uint8Array),We(this,"rateLimitProof",void 0),We(this,"timestamp",void 0),We(this,"meta",void 0),We(this,"ephemeral",void 0),this.pubsubTopic=e,this.proto=t}get contentTopic(){return this.proto.contentTopic}}class LI{constructor(){We(this,"pubsubTopic",ni),We(this,"contentTopic","")}fromWireToProtoObj(e){const t=im.decode(e);return Promise.resolve({contentTopic:t.contentTopic,payload:new Uint8Array,rateLimitProof:void 0,timestamp:void 0,meta:void 0,version:void 0,ephemeral:void 0})}async fromProtoObj(e,t){return new DI(e,t)}}const UI=new qs("relay");class FI{constructor(e,t){var r;if(We(this,"pubsubTopics",void 0),We(this,"defaultDecoder",void 0),We(this,"gossipSub",void 0),We(this,"observers",void 0),!this.isRelayPubsub(e.services.pubsub))throw Error("Failed to initialize Relay. libp2p.pubsub does not support ".concat(FI.multicodec));this.gossipSub=e.services.pubsub,this.pubsubTopics=new Set(null!==t&&void 0!==t&&t.shardInfo?Bs(t.shardInfo):null!==(r=null===t||void 0===t?void 0:t.pubsubTopics)&&void 0!==r?r:[ni]),this.gossipSub.isStarted()&&this.subscribeToAllTopics(),this.observers=new Map,this.defaultDecoder=new LI}async start(){if(this.gossipSub.isStarted())throw Error("GossipSub already started.");await this.gossipSub.start(),this.subscribeToAllTopics()}async send(e,t){const r=[],{pubsubTopic:n}=e;if(!this.pubsubTopics.has(n))return UI.error("Failed to send waku relay: topic not configured"),{recipients:r,errors:[Xn.TOPIC_NOT_CONFIGURED]};const i=await e.toWire(t);return i?ci(i)?this.gossipSub.publish(n,i):(UI.error("Failed to send waku relay: message is bigger that 1MB"),{recipients:r,errors:[Xn.SIZE_TOO_BIG]}):(UI.error("Failed to encode message, aborting publish"),{recipients:r,errors:[Xn.ENCODE_FAILED]})}subscribe(e,t){const r=[];for(const i of Array.isArray(e)?e:[e]){var n;const{pubsubTopic:e}=i,o=null!==(n=this.observers.get(e))&&void 0!==n?n:new Map,s={pubsubTopic:e,decoder:i,callback:t};Us(o,i.contentTopic,s),this.observers.set(e,o),r.push([e,s])}return()=>{this.removeObservers(r)}}removeObservers(e){for(const[t,r]of e){const e=this.observers.get(t);if(!e)continue;const n=r.decoder.contentTopic,i=e.get(n);i&&(i.delete(r),e.set(n,i),this.observers.set(t,e))}}toSubscriptionIterator(e){return si(this,e)}getActiveSubscriptions(){const e=new Map;for(const t of this.pubsubTopics)e.set(t,Array.from(this.observers.keys()));return e}getMeshPeers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni;return this.gossipSub.getMeshPeers(e)}subscribeToAllTopics(){for(const e of this.pubsubTopics)this.gossipSubSubscribe(e)}async processIncomingMessage(e,t){const r=await this.defaultDecoder.fromWireToProtoObj(t);if(!r||!r.contentTopic)return void UI.warn("Message does not have a content topic, skipping");const n=this.observers.get(e);if(!n)return;const i=n.get(r.contentTopic);i&&await Promise.all(Array.from(i).map((n=>{let{decoder:i,callback:o}=n;return(async()=>{try{const n=await i.fromWireToProtoObj(t);if(!n)return void UI.error("Internal error: message previously decoded failed on 2nd pass.");const s=await i.fromProtoObj(e,n);s?await o(s):UI.error("Failed to decode messages on",r.contentTopic)}catch(n){UI.error("Error while decoding message:",n)}})()})))}gossipSubSubscribe(e){this.gossipSub.addEventListener("gossipsub:message",(t=>{t.detail.msg.topic===e&&this.processIncomingMessage(t.detail.msg.topic,t.detail.msg.data).catch((e=>UI.error("Failed to process incoming message",e)))})),this.gossipSub.topicValidators.set(e,OI),this.gossipSub.subscribe(e)}isRelayPubsub(e){var t,r;return null!==(t=null===e||void 0===e||null===(r=e.multicodecs)||void 0===r?void 0:r.includes(FI.multicodec))&&void 0!==t&&t}}function jI(e,t){Ze(e,t),t.add(e)}function qI(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}We(FI,"multicodec",MI[0]);const zI=Symbol.for("@libp2p/content-routing"),HI=Symbol.for("@libp2p/peer-routing");function KI(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}new Uint8Array(0);function VI(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}var GI=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var d=0,h=o-1;(0!==l||d<i)&&-1!==h;h--,d++)l+=a*s[h]>>>0,s[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=o-i;f!==o&&0===s[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var d=t[i],h=0,f=s-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}};const WI=GI;class QI{constructor(e,t,r){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}class JI{constructor(e,t,r){if(We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseDecode",void 0),We(this,"prefixCodePoint",void 0),this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return YI(this,e)}}class ZI{constructor(e){We(this,"decoders",void 0),this.decoders=e}or(e){return YI(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}function YI(e,t){var r,n;return new ZI({...null!==(r=e.decoders)&&void 0!==r?r:{[e.prefix]:e},...null!==(n=t.decoders)&&void 0!==n?n:{[t.prefix]:t}})}class XI{constructor(e,t,r,n){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),We(this,"baseDecode",void 0),We(this,"encoder",void 0),We(this,"decoder",void 0),this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new QI(e,t,r),this.decoder=new JI(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function $I(e){let{name:t,prefix:r,encode:n,decode:i}=e;return new XI(t,r,n,i)}function eT(e){let{name:t,prefix:r,alphabet:n}=e;const{encode:i,decode:o}=WI(n,t);return $I({prefix:r,name:t,encode:i,decode:e=>VI(o(e))})}function tT(e){let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return $I({prefix:r,name:t,encode:e=>function(e,t,r){const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(0!==s&&(o+=t[i&a<<r-s]),n)for(;0!==(o.length*r&7);)o+="=";return o}(e,i,n),decode:e=>function(e,t,r,n){const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let l=0;l<o;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|t,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||0!==(255&c<<8-a))throw new SyntaxError("Unexpected end of data");return s}(e,i,n,t)})}const rT=eT({prefix:"9",name:"base10",alphabet:"0123456789"}),nT=tT({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),iT=tT({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),oT=tT({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),sT=Array.from("\ud83d\ude80\ud83e\ude90\u2604\ud83d\udef0\ud83c\udf0c\ud83c\udf11\ud83c\udf12\ud83c\udf13\ud83c\udf14\ud83c\udf15\ud83c\udf16\ud83c\udf17\ud83c\udf18\ud83c\udf0d\ud83c\udf0f\ud83c\udf0e\ud83d\udc09\u2600\ud83d\udcbb\ud83d\udda5\ud83d\udcbe\ud83d\udcbf\ud83d\ude02\u2764\ud83d\ude0d\ud83e\udd23\ud83d\ude0a\ud83d\ude4f\ud83d\udc95\ud83d\ude2d\ud83d\ude18\ud83d\udc4d\ud83d\ude05\ud83d\udc4f\ud83d\ude01\ud83d\udd25\ud83e\udd70\ud83d\udc94\ud83d\udc96\ud83d\udc99\ud83d\ude22\ud83e\udd14\ud83d\ude06\ud83d\ude44\ud83d\udcaa\ud83d\ude09\u263a\ud83d\udc4c\ud83e\udd17\ud83d\udc9c\ud83d\ude14\ud83d\ude0e\ud83d\ude07\ud83c\udf39\ud83e\udd26\ud83c\udf89\ud83d\udc9e\u270c\u2728\ud83e\udd37\ud83d\ude31\ud83d\ude0c\ud83c\udf38\ud83d\ude4c\ud83d\ude0b\ud83d\udc97\ud83d\udc9a\ud83d\ude0f\ud83d\udc9b\ud83d\ude42\ud83d\udc93\ud83e\udd29\ud83d\ude04\ud83d\ude00\ud83d\udda4\ud83d\ude03\ud83d\udcaf\ud83d\ude48\ud83d\udc47\ud83c\udfb6\ud83d\ude12\ud83e\udd2d\u2763\ud83d\ude1c\ud83d\udc8b\ud83d\udc40\ud83d\ude2a\ud83d\ude11\ud83d\udca5\ud83d\ude4b\ud83d\ude1e\ud83d\ude29\ud83d\ude21\ud83e\udd2a\ud83d\udc4a\ud83e\udd73\ud83d\ude25\ud83e\udd24\ud83d\udc49\ud83d\udc83\ud83d\ude33\u270b\ud83d\ude1a\ud83d\ude1d\ud83d\ude34\ud83c\udf1f\ud83d\ude2c\ud83d\ude43\ud83c\udf40\ud83c\udf37\ud83d\ude3b\ud83d\ude13\u2b50\u2705\ud83e\udd7a\ud83c\udf08\ud83d\ude08\ud83e\udd18\ud83d\udca6\u2714\ud83d\ude23\ud83c\udfc3\ud83d\udc90\u2639\ud83c\udf8a\ud83d\udc98\ud83d\ude20\u261d\ud83d\ude15\ud83c\udf3a\ud83c\udf82\ud83c\udf3b\ud83d\ude10\ud83d\udd95\ud83d\udc9d\ud83d\ude4a\ud83d\ude39\ud83d\udde3\ud83d\udcab\ud83d\udc80\ud83d\udc51\ud83c\udfb5\ud83e\udd1e\ud83d\ude1b\ud83d\udd34\ud83d\ude24\ud83c\udf3c\ud83d\ude2b\u26bd\ud83e\udd19\u2615\ud83c\udfc6\ud83e\udd2b\ud83d\udc48\ud83d\ude2e\ud83d\ude46\ud83c\udf7b\ud83c\udf43\ud83d\udc36\ud83d\udc81\ud83d\ude32\ud83c\udf3f\ud83e\udde1\ud83c\udf81\u26a1\ud83c\udf1e\ud83c\udf88\u274c\u270a\ud83d\udc4b\ud83d\ude30\ud83e\udd28\ud83d\ude36\ud83e\udd1d\ud83d\udeb6\ud83d\udcb0\ud83c\udf53\ud83d\udca2\ud83e\udd1f\ud83d\ude41\ud83d\udea8\ud83d\udca8\ud83e\udd2c\u2708\ud83c\udf80\ud83c\udf7a\ud83e\udd13\ud83d\ude19\ud83d\udc9f\ud83c\udf31\ud83d\ude16\ud83d\udc76\ud83e\udd74\u25b6\u27a1\u2753\ud83d\udc8e\ud83d\udcb8\u2b07\ud83d\ude28\ud83c\udf1a\ud83e\udd8b\ud83d\ude37\ud83d\udd7a\u26a0\ud83d\ude45\ud83d\ude1f\ud83d\ude35\ud83d\udc4e\ud83e\udd32\ud83e\udd20\ud83e\udd27\ud83d\udccc\ud83d\udd35\ud83d\udc85\ud83e\uddd0\ud83d\udc3e\ud83c\udf52\ud83d\ude17\ud83e\udd11\ud83c\udf0a\ud83e\udd2f\ud83d\udc37\u260e\ud83d\udca7\ud83d\ude2f\ud83d\udc86\ud83d\udc46\ud83c\udfa4\ud83d\ude47\ud83c\udf51\u2744\ud83c\udf34\ud83d\udca3\ud83d\udc38\ud83d\udc8c\ud83d\udccd\ud83e\udd40\ud83e\udd22\ud83d\udc45\ud83d\udca1\ud83d\udca9\ud83d\udc50\ud83d\udcf8\ud83d\udc7b\ud83e\udd10\ud83e\udd2e\ud83c\udfbc\ud83e\udd75\ud83d\udea9\ud83c\udf4e\ud83c\udf4a\ud83d\udc7c\ud83d\udc8d\ud83d\udce3\ud83e\udd42"),aT=sT.reduce(((e,t,r)=>(e[r]=t,e)),[]),cT=sT.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]);const uT=$I({prefix:"\ud83d\ude80",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+=aT[t]),"")},decode:function(e){const t=[];for(const r of e){const e=cT[r.codePointAt(0)];if(void 0===e)throw new Error("Non-base256emoji character: ".concat(r));t.push(e)}return new Uint8Array(t)}}),lT=tT({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),dT=tT({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hT=tT({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fT=tT({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),pT=tT({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),gT=tT({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),mT=tT({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),yT=tT({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vT=tT({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),bT=eT({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),wT=eT({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),_T=eT({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ET=eT({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),AT=tT({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ST=tT({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),kT=tT({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),xT=tT({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),IT=tT({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),TT=$I({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>function(e){return(new TextEncoder).encode(e)}(e)}),PT=new TextEncoder,RT=new TextDecoder,CT="json",BT=512;function MT(e){return PT.encode(JSON.stringify(e))}function NT(e){return JSON.parse(RT.decode(e))}const OT="raw",DT=85;function LT(e){return VI(e)}function UT(e){return VI(e)}var FT=function e(t,r,n){r=r||[];var i=n=n||0;for(;t>=zT;)r[n++]=255&t|jT,t/=128;for(;t&qT;)r[n++]=255&t|jT,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},jT=128,qT=-128,zT=Math.pow(2,31);var HT=function e(t,r){var n,i=0,o=0,s=r=r||0,a=t.length;do{if(s>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[s++],i+=o<28?(n&VT)<<o:(n&VT)*Math.pow(2,o),o+=7}while(n>=KT);return e.bytes=s-r,i},KT=128,VT=127;var GT=Math.pow(2,7),WT=Math.pow(2,14),QT=Math.pow(2,21),JT=Math.pow(2,28),ZT=Math.pow(2,35),YT=Math.pow(2,42),XT=Math.pow(2,49),$T=Math.pow(2,56),eP=Math.pow(2,63);const tP={encode:FT,decode:HT,encodingLength:function(e){return e<GT?1:e<WT?2:e<QT?3:e<JT?4:e<ZT?5:e<YT?6:e<XT?7:e<$T?8:e<eP?9:10}};function rP(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return tP.encode(e,t,r),t}function nP(e){return tP.encodingLength(e)}function iP(e,t){const r=t.byteLength,n=nP(e),i=n+nP(r),o=new Uint8Array(i+r);return rP(e,o,0),rP(r,o,n),o.set(t,i),new oP(e,r,t,o)}class oP{constructor(e,t,r,n){We(this,"code",void 0),We(this,"size",void 0),We(this,"digest",void 0),We(this,"bytes",void 0),this.code=e,this.size=t,this.digest=r,this.bytes=n}}const sP=VI;const aP={code:0,name:"identity",encode:sP,digest:function(e){return iP(0,sP(e))}};function cP(e){let{name:t,code:r,encode:n}=e;return new uP(t,r,n)}class uP{constructor(e,t,r){We(this,"name",void 0),We(this,"code",void 0),We(this,"encode",void 0),this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?iP(this.code,t):t.then((e=>iP(this.code,e)))}throw Error("Unknown type, must be binary type")}}function lP(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const dP=cP({name:"sha2-256",code:18,encode:lP("SHA-256")}),hP=cP({name:"sha2-512",code:19,encode:lP("SHA-512")});let fP,pP;new WeakMap;fP=Symbol.toStringTag,pP=Symbol.for("nodejs.util.inspect.custom");Symbol.for("@ipld/js-cid/CID");const gP={...Be,...ke,...Ce,...Ae,...Se,...Ie,...Te,...Pe,...Re,...xe};function mP(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const yP=mP("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),vP=mP("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=(null===(e=globalThis.Buffer)||void 0===e?void 0:e.allocUnsafe)?KI(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),bP={utf8:yP,"utf-8":yP,hex:gP.base16,latin1:vP,ascii:vP,binary:vP,...gP};let wP;const _P="/",EP=(new TextEncoder).encode(_P),AP=EP[0];wP=Symbol.toStringTag;class SP{constructor(e,t){if(We(this,"_buf",void 0),"string"===typeof e)this._buf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=bP[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(e)):KI(globalThis.Buffer.from(e,"utf-8"))}(e);else{if(!(e instanceof Uint8Array))throw new Error("Invalid key, should be String of Uint8Array");this._buf=e}if(null==t&&(t=!0),t&&this.clean(),0===this._buf.byteLength||this._buf[0]!==AP)throw new Error("Invalid key")}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const r=bP[t];if(null==r)throw new Error('Unsupported encoding "'.concat(t,'"'));return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}(this._buf,e)}uint8Array(){return this._buf}get[wP](){return"Key(".concat(this.toString(),")")}static withNamespaces(e){return new SP(e.join(_P))}static random(){return new SP(Math.random().toString().substring(2))}static asKey(e){return e instanceof Uint8Array||"string"===typeof e?new SP(e):"function"===typeof e.uint8Array?new SP(e.uint8Array()):null}clean(){if(null!=this._buf&&0!==this._buf.byteLength||(this._buf=EP),this._buf[0]!==AP){const e=new Uint8Array(this._buf.byteLength+1);e.fill(AP,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===AP;)this._buf=this._buf.subarray(0,-1)}less(e){const t=this.list(),r=e.list();for(let n=0;n<t.length;n++){if(r.length<n+1)return!1;const e=t[n],i=r[n];if(e<i)return!0;if(e>i)return!1}return t.length<r.length}reverse(){return SP.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(_P).slice(1)}type(){return function(e){const t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(e){const t=e.split(":");return t[t.length-1]}(this.baseNamespace())}instance(e){return new SP(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(_P)||(e+=_P),e+=this.type(),new SP(e)}parent(){const e=this.list();return 1===e.length?new SP(_P):new SP(e.slice(0,-1).join(_P))}child(e){return this.toString()===_P?e:e.toString()===_P?this:new SP(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return SP.withNamespaces([...this.namespaces(),...(n=t.map((e=>e.namespaces())),[].concat(...n))]);var n}}const kP=__webpack_require__(9842);var xP,IP=__webpack_require__(6327);!function(e){e.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",e.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",e.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",e.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",e.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",e.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",e.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",e.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",e.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",e.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",e.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",e.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",e.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",e.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",e.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH"}(xP||(xP={}));const TP=Aw("libp2p:keychain"),PP="/info/",RP=new WeakMap,CP=14,BP=16,MP=1e3,NP={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function OP(e){return null!=e&&("string"===typeof e&&(e===IP(e.trim())&&e.length>0))}async function DP(){const e=800*Math.random()+200;await new Promise((t=>setTimeout(t,e)))}function LP(e){return new SP("/pkcs8/"+e)}function UP(e){return new SP(PP+e)}class FP{constructor(e,t){var r,n,i,o,s,a,c,u,l;if(We(this,"components",void 0),We(this,"init",void 0),this.components=e,this.init=kP(NP,t),null!=this.init.pass&&(null===(r=this.init.pass)||void 0===r?void 0:r.length)<20)throw new Error("pass must be least 20 characters");if(null!=(null===(n=this.init.dek)||void 0===n?void 0:n.keyLength)&&this.init.dek.keyLength<CP)throw new Error("dek.keyLength must be least ".concat(CP," bytes"));if(null!=(null===(i=this.init.dek)||void 0===i||null===(i=i.salt)||void 0===i?void 0:i.length)&&this.init.dek.salt.length<BP)throw new Error("dek.saltLength must be least ".concat(BP," bytes"));if(null!=(null===(o=this.init.dek)||void 0===o?void 0:o.iterationCount)&&this.init.dek.iterationCount<MP)throw new Error("dek.iterationCount must be least ".concat(MP));const d=null!=this.init.pass&&null!=(null===(s=this.init.dek)||void 0===s?void 0:s.salt)?AI(this.init.pass,null===(a=this.init.dek)||void 0===a?void 0:a.salt,null===(c=this.init.dek)||void 0===c?void 0:c.iterationCount,null===(u=this.init.dek)||void 0===u?void 0:u.keyLength,null===(l=this.init.dek)||void 0===l?void 0:l.hash):"";RP.set(this,{dek:d})}static generateOptions(){const e=Object.assign({},NP),t=3*Math.ceil(BP/3);return e.dek.salt=xs(jb(t),"base64"),e}static get options(){return NP}async createKey(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2048;if(!OP(e)||"self"===e)throw await DP(),new Hp("Invalid key name",xP.ERR_INVALID_KEY_NAME);if("string"!==typeof t)throw await DP(),new Hp("Invalid key type",xP.ERR_INVALID_KEY_TYPE);const n=LP(e);if(await this.components.datastore.has(n))throw await DP(),new Hp("Key name already exists",xP.ERR_KEY_ALREADY_EXISTS);if("rsa"===t.toLowerCase())if(!Number.isSafeInteger(r)||r<2048)throw await DP(),new Hp("Invalid RSA key size",xP.ERR_INVALID_KEY_SIZE);let i;try{const o=await uw(t,r),s=await o.id(),a=RP.get(this);if(null==a)throw new Hp("dek missing",xP.ERR_INVALID_PARAMETERS);const c=a.dek,u=await o.export(c);i={name:e,id:s};const l=this.components.datastore.batch();l.put(n,ks(u)),l.put(UP(e),ks(JSON.stringify(i))),await l.commit()}catch(o){throw await DP(),o}return i}async listKeys(){const e={prefix:PP},t=[];for await(const r of this.components.datastore.query(e))t.push(JSON.parse(xs(r.value)));return t}async findKeyById(e){try{const t=(await this.listKeys()).find((t=>t.id===e));if(null==t)throw new Hp("Key with id '".concat(e,"' does not exist."),xP.ERR_KEY_NOT_FOUND);return t}catch(t){throw await DP(),t}}async findKeyByName(e){if(!OP(e))throw await DP(),new Hp("Invalid key name '".concat(e,"'"),xP.ERR_INVALID_KEY_NAME);const t=UP(e);try{const e=await this.components.datastore.get(t);return JSON.parse(xs(e))}catch(r){throw await DP(),TP.error(r),new Hp("Key '".concat(e,"' does not exist."),xP.ERR_KEY_NOT_FOUND)}}async removeKey(e){if(!OP(e)||"self"===e)throw await DP(),new Hp("Invalid key name '".concat(e,"'"),xP.ERR_INVALID_KEY_NAME);const t=LP(e),r=await this.findKeyByName(e),n=this.components.datastore.batch();return n.delete(t),n.delete(UP(e)),await n.commit(),r}async renameKey(e,t){if(!OP(e)||"self"===e)throw await DP(),new Hp("Invalid old key name '".concat(e,"'"),xP.ERR_OLD_KEY_NAME_INVALID);if(!OP(t)||"self"===t)throw await DP(),new Hp("Invalid new key name '".concat(t,"'"),xP.ERR_NEW_KEY_NAME_INVALID);const r=LP(e),n=LP(t),i=UP(e),o=UP(t);if(await this.components.datastore.has(n))throw await DP(),new Hp("Key '".concat(t,"' already exists"),xP.ERR_KEY_ALREADY_EXISTS);try{const e=await this.components.datastore.get(r),s=await this.components.datastore.get(i),a=JSON.parse(xs(s));a.name=t;const c=this.components.datastore.batch();return c.put(n,e),c.put(o,ks(JSON.stringify(a))),c.delete(r),c.delete(i),await c.commit(),a}catch(s){throw await DP(),s}}async exportKey(e,t){if(!OP(e))throw await DP(),new Hp("Invalid key name '".concat(e,"'"),xP.ERR_INVALID_KEY_NAME);if(null==t)throw await DP(),new Hp("Password is required",xP.ERR_PASSWORD_REQUIRED);const r=LP(e);try{const e=xs(await this.components.datastore.get(r)),n=RP.get(this);if(null==n)throw new Hp("dek missing",xP.ERR_INVALID_PARAMETERS);const i=n.dek,o=await fw(e,i);return await o.export(t)}catch(n){throw await DP(),n}}async exportPeerId(e){const t="temporary-password",r=await this.exportKey(e,t),n=await fw(r,t);return sg(n.public.bytes,n.bytes)}async importKey(e,t,r){if(!OP(e)||"self"===e)throw await DP(),new Hp("Invalid key name '".concat(e,"'"),xP.ERR_INVALID_KEY_NAME);if(null==t)throw await DP(),new Hp("PEM encoded key is required",xP.ERR_PEM_REQUIRED);const n=LP(e);if(await this.components.datastore.has(n))throw await DP(),new Hp("Key '".concat(e,"' already exists"),xP.ERR_KEY_ALREADY_EXISTS);let i,o;try{i=await fw(t,r)}catch(c){throw await DP(),new Hp("Cannot read the key, most likely the password is wrong",xP.ERR_CANNOT_READ_KEY)}try{o=await i.id();const e=RP.get(this);if(null==e)throw new Hp("dek missing",xP.ERR_INVALID_PARAMETERS);const r=e.dek;t=await i.export(r)}catch(c){throw await DP(),c}const s={name:e,id:o},a=this.components.datastore.batch();return a.put(n,ks(t)),a.put(UP(e),ks(JSON.stringify(s))),await a.commit(),s}async importPeer(e,t){try{if(!OP(e))throw new Hp("Invalid key name '".concat(e,"'"),xP.ERR_INVALID_KEY_NAME);if(null==t)throw new Hp("PeerId is required",xP.ERR_MISSING_PRIVATE_KEY);if(null==t.privateKey)throw new Hp("PeerId.privKey is required",xP.ERR_MISSING_PRIVATE_KEY);const r=await hw(t.privateKey),n=LP(e);if(await this.components.datastore.has(n))throw await DP(),new Hp("Key '".concat(e,"' already exists"),xP.ERR_KEY_ALREADY_EXISTS);const i=RP.get(this);if(null==i)throw new Hp("dek missing",xP.ERR_INVALID_PARAMETERS);const o=i.dek,s=await r.export(o),a={name:e,id:t.toString()},c=this.components.datastore.batch();return c.put(n,ks(s)),c.put(UP(e),ks(JSON.stringify(a))),await c.commit(),a}catch(r){throw await DP(),r}}async getPrivateKey(e){if(!OP(e))throw await DP(),new Hp("Invalid key name '".concat(e,"'"),xP.ERR_INVALID_KEY_NAME);try{const t=LP(e);return xs(await this.components.datastore.get(t))}catch(t){throw await DP(),TP.error(t),new Hp("Key '".concat(e,"' does not exist."),xP.ERR_KEY_NOT_FOUND)}}async rotateKeychainPass(e,t){var r,n,i,o;if("string"!==typeof e)throw await DP(),new Hp("Invalid old pass type '".concat(typeof e,"'"),xP.ERR_INVALID_OLD_PASS_TYPE);if("string"!==typeof t)throw await DP(),new Hp("Invalid new pass type '".concat(typeof t,"'"),xP.ERR_INVALID_NEW_PASS_TYPE);if(t.length<20)throw await DP(),new Hp("Invalid pass length ".concat(t.length),xP.ERR_INVALID_PASS_LENGTH);TP("recreating keychain");const s=RP.get(this);if(null==s)throw new Hp("dek missing",xP.ERR_INVALID_PARAMETERS);const a=s.dek;this.init.pass=t;const c=null!=t&&null!=(null===(r=this.init.dek)||void 0===r?void 0:r.salt)?AI(t,this.init.dek.salt,null===(n=this.init.dek)||void 0===n?void 0:n.iterationCount,null===(i=this.init.dek)||void 0===i?void 0:i.keyLength,null===(o=this.init.dek)||void 0===o?void 0:o.hash):"";RP.set(this,{dek:c});const u=await this.listKeys();for(const l of u){const e=xs(await this.components.datastore.get(LP(l.name))),t=await fw(e,a),r=c.toString(),n=await t.export(r),i=this.components.datastore.batch(),o={name:l.name,id:l.id};i.put(LP(l.name),ks(n)),i.put(UP(l.name),ks(JSON.stringify(o))),await i.commit()}TP("keychain reconstructed")}}function jP(e,t){const r={[Symbol.iterator]:()=>r,next:()=>{const r=e.next(),n=r.value;if(!0===r.done||null==n){return{done:!0,value:void 0}}return{done:!1,value:t(n)}}};return r}let qP,zP,HP;qP=Symbol.iterator;class KP{constructor(e){if(We(this,"map",void 0),this.map=new Map,null!=e)for(const[t,r]of e.entries())this.map.set(t.toString(),r)}[qP](){return this.entries()}clear(){this.map.clear()}delete(e){this.map.delete(e.toString())}entries(){return jP(this.map.entries(),(e=>[ig(e[0]),e[1]]))}forEach(e){this.map.forEach(((t,r)=>{e(t,ig(r),this)}))}get(e){return this.map.get(e.toString())}has(e){return this.map.has(e.toString())}set(e,t){this.map.set(e.toString(),t)}keys(){return jP(this.map.keys(),(e=>ig(e)))}values(){return this.map.values()}get size(){return this.map.size}}zP=Symbol.iterator;class VP{constructor(e){if(We(this,"set",void 0),this.set=new Set,null!=e)for(const t of e)this.set.add(t.toString())}get size(){return this.set.size}[zP](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return jP(this.set.entries(),(e=>{const t=ig(e[0]);return[t,t]}))}forEach(e){this.set.forEach((t=>{const r=ig(t);e(r,r,this)}))}has(e){return this.set.has(e.toString())}values(){return jP(this.set.values(),(e=>ig(e)))}intersection(e){const t=new VP;for(const r of e)this.has(r)&&t.add(r);return t}difference(e){const t=new VP;for(const r of this)e.has(r)||t.add(r);return t}union(e){const t=new VP;for(const r of e)t.add(r);for(const r of this)t.add(r);return t}}HP=Symbol.iterator;var GP;!function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.id&&(t.uint32(10),t.bytes(e.id)),null!=e.pubKey&&(t.uint32(18),t.bytes(e.pubKey)),null!=e.privKey&&(t.uint32(26),t.bytes(e.privKey)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.id=e.bytes();break;case 2:r.pubKey=e.bytes();break;case 3:r.privKey=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(GP||(GP={}));const WP=async()=>{const e=await uw("Ed25519"),t=await QP(e);if("Ed25519"===t.type)return t;throw new Error('Generated unexpected PeerId type "'.concat(t.type,'"'))};async function QP(e){return sg(dw(e.public),function(e,t){var r;return cw(t=(null!==(r=t)&&void 0!==r?r:"rsa").toLowerCase()),e.bytes}(e))}const JP="ERR_SIGNATURE_NOT_VALID";var ZP,YP;!function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.publicKey&&e.publicKey.byteLength>0&&(t.uint32(10),t.bytes(e.publicKey)),null!=e.payloadType&&e.payloadType.byteLength>0&&(t.uint32(18),t.bytes(e.payloadType)),null!=e.payload&&e.payload.byteLength>0&&(t.uint32(26),t.bytes(e.payload)),null!=e.signature&&e.signature.byteLength>0&&(t.uint32(42),t.bytes(e.signature)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.publicKey=e.bytes();break;case 2:r.payloadType=e.bytes();break;case 3:r.payload=e.bytes();break;case 5:r.signature=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(ZP||(ZP={}));class XP{constructor(e){We(this,"peerId",void 0),We(this,"payloadType",void 0),We(this,"payload",void 0),We(this,"signature",void 0),We(this,"marshaled",void 0);const{peerId:t,payloadType:r,payload:n,signature:i}=e;this.peerId=t,this.payloadType=r,this.payload=n,this.signature=i}marshal(){if(null==this.peerId.publicKey)throw new Error("Missing public key");return null==this.marshaled&&(this.marshaled=ZP.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(e){return Wp(this.marshal(),e.marshal())}async validate(e){const t=$P(e,this.payloadType,this.payload);if(null==this.peerId.publicKey)throw new Error("Missing public key");return lw(this.peerId.publicKey).verify(t.subarray(),this.signature)}}YP=XP,We(XP,"createFromProtobuf",(async e=>{const t=ZP.decode(e),r=await sg(t.publicKey);return new YP({peerId:r,payloadType:t.payloadType,payload:t.payload,signature:t.signature})})),We(XP,"seal",(async(e,t)=>{if(null==t.privateKey)throw new Error("Missing private key");const r=e.domain,n=e.codec,i=e.marshal(),o=$P(r,n,i),s=await hw(t.privateKey),a=await s.sign(o.subarray());return new YP({peerId:t,payloadType:n,payload:i,signature:a})})),We(XP,"openAndCertify",(async(e,t)=>{const r=await YP.createFromProtobuf(e);if(!await r.validate(t))throw new Hp("envelope signature is not valid for the given domain",JP);return r}));const $P=(e,t,r)=>{const n=ks(e),i=sn(n.byteLength),o=sn(t.length),s=sn(r.length);return new Xm(i,n,o,t,s,r)};const eR=Uint8Array.from([3,1]);var tR,rR;!function(e){let t,r;!function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.multiaddr&&e.multiaddr.byteLength>0&&(t.uint32(10),t.bytes(e.multiaddr)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={multiaddr:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();if(t>>>3===1)r.multiaddr=e.bytes();else e.skipType(7&t)}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(t=e.AddressInfo||(e.AddressInfo={})),e.codec=()=>(null==r&&(r=Qf((function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),null!=t.peerId&&t.peerId.byteLength>0&&(r.uint32(10),r.bytes(t.peerId)),null!=t.seq&&0n!==t.seq&&(r.uint32(16),r.uint64(t.seq)),null!=t.addresses)for(const i of t.addresses)r.uint32(26),e.AddressInfo.codec().encode(i,r);!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={peerId:new Uint8Array(0),seq:0n,addresses:[]},i=null==r?t.len:t.pos+r;for(;t.pos<i;){const r=t.uint32();switch(r>>>3){case 1:n.peerId=t.bytes();break;case 2:n.seq=t.uint64();break;case 3:n.addresses.push(e.AddressInfo.codec().decode(t,t.uint32()));break;default:t.skipType(7&r)}}return n}))),r),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(tR||(tR={}));class nR{constructor(e){We(this,"peerId",void 0),We(this,"multiaddrs",void 0),We(this,"seqNumber",void 0),We(this,"domain",nR.DOMAIN),We(this,"codec",nR.CODEC),We(this,"marshaled",void 0);const{peerId:t,multiaddrs:r,seqNumber:n}=e;this.peerId=t,this.multiaddrs=null!==r&&void 0!==r?r:[],this.seqNumber=null!==n&&void 0!==n?n:BigInt(Date.now())}marshal(){return null==this.marshaled&&(this.marshaled=tR.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map((e=>({multiaddr:e.bytes})))})),this.marshaled}equals(e){return e instanceof nR&&(!!this.peerId.equals(e.peerId)&&(this.seqNumber===e.seqNumber&&!!function(e,t){const r=(e,t)=>e.toString().localeCompare(t.toString());return e.length===t.length&&(t.sort(r),e.sort(r).every(((e,r)=>t[r].equals(e))))}(this.multiaddrs,e.multiaddrs)))}}rR=nR,We(nR,"createFromProtobuf",(e=>{var t;const r=tR.decode(e),n=og(r.peerId),i=(null!==(t=r.addresses)&&void 0!==t?t:[]).map((e=>Zn(e.multiaddr))),o=r.seq;return new rR({peerId:n,multiaddrs:i,seqNumber:o})})),We(nR,"DOMAIN","libp2p-peer-record"),We(nR,"CODEC",eR);var iR=__webpack_require__(2832);var oR=new WeakMap;class sR{constructor(){Ye(this,oR,{writable:!0,value:[]})}enqueue(e,t){const r={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&$e(this,oR)[this.size-1].priority>=t.priority)return void $e(this,oR).push(r);const n=function(e,t,r){let n=0,i=e.length;for(;i>0;){const o=Math.trunc(i/2);let s=n+o;r(e[s],t)<=0?(n=++s,i-=o+1):i=o}return n}($e(this,oR),r,((e,t)=>t.priority-e.priority));$e(this,oR).splice(n,0,r)}dequeue(){const e=$e(this,oR).shift();return null===e||void 0===e?void 0:e.run}filter(e){return $e(this,oR).filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return $e(this,oR).length}}var aR=new WeakMap,cR=new WeakMap,uR=new WeakMap,lR=new WeakMap,dR=new WeakMap,hR=new WeakMap,fR=new WeakMap,pR=new WeakMap,gR=new WeakMap,mR=new WeakMap,yR=new WeakMap,vR=new WeakMap,bR=new WeakMap,wR=new WeakMap,_R=new WeakMap,ER=new WeakMap,AR=new WeakSet,SR=new WeakSet,kR=new WeakMap,xR=new WeakSet,IR=new WeakSet,TR=new WeakSet,PR=new WeakSet,RR=new WeakSet,CR=new WeakSet;class BR extends iR{constructor(e){var t,r,n,i;if(super(),jI(this,CR),jI(this,RR),jI(this,PR),jI(this,TR),jI(this,IR),jI(this,xR),Ye(this,kR,{get:LR,set:void 0}),jI(this,SR),jI(this,AR),Ye(this,ER,{get:NR,set:void 0}),Ye(this,_R,{get:MR,set:void 0}),Ye(this,aR,{writable:!0,value:void 0}),Ye(this,cR,{writable:!0,value:void 0}),Ye(this,uR,{writable:!0,value:0}),Ye(this,lR,{writable:!0,value:void 0}),Ye(this,dR,{writable:!0,value:void 0}),Ye(this,hR,{writable:!0,value:0}),Ye(this,fR,{writable:!0,value:void 0}),Ye(this,pR,{writable:!0,value:void 0}),Ye(this,gR,{writable:!0,value:void 0}),Ye(this,mR,{writable:!0,value:void 0}),Ye(this,yR,{writable:!0,value:0}),Ye(this,vR,{writable:!0,value:void 0}),Ye(this,bR,{writable:!0,value:void 0}),Ye(this,wR,{writable:!0,value:void 0}),We(this,"timeout",void 0),!("number"===typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:sR,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null!==(t=null===(r=e.intervalCap)||void 0===r?void 0:r.toString())&&void 0!==t?t:"","` (").concat(typeof e.intervalCap,")"));if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null!==(n=null===(i=e.interval)||void 0===i?void 0:i.toString())&&void 0!==n?n:"","` (").concat(typeof e.interval,")"));et(this,aR,e.carryoverConcurrencyCount),et(this,cR,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval),et(this,lR,e.intervalCap),et(this,dR,e.interval),et(this,gR,new e.queueClass),et(this,mR,e.queueClass),this.concurrency=e.concurrency,this.timeout=e.timeout,et(this,wR,!0===e.throwOnTimeout),et(this,bR,!1===e.autoStart)}get concurrency(){return $e(this,vR)}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e,"` (").concat(typeof e,")"));et(this,vR,e),qI(this,PR,qR).call(this)}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t={timeout:this.timeout,throwOnTimeout:$e(this,wR),...t},new Promise(((r,n)=>{$e(this,gR).enqueue((async()=>{var i,o;et(this,yR,(i=$e(this,yR),i++,i)),et(this,uR,(o=$e(this,uR),o++,o));try{var s;null===(s=t.signal)||void 0===s||s.throwIfAborted();let n=e({signal:t.signal});t.timeout&&(n=rv(Promise.resolve(n),{milliseconds:t.timeout})),t.signal&&(n=Promise.race([n,qI(this,RR,zR).call(this,t.signal)]));const i=await n;r(i),this.emit("completed",i)}catch(a){if(a instanceof Xy&&!t.throwOnTimeout)return void r();n(a),this.emit("error",a)}finally{qI(this,AR,OR).call(this)}}),t),this.emit("add"),qI(this,xR,UR).call(this)}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return $e(this,bR)?(et(this,bR,!1),qI(this,PR,qR).call(this),this):this}pause(){et(this,bR,!0)}clear(){et(this,gR,new($e(this,mR)))}async onEmpty(){0!==$e(this,gR).size&&await qI(this,CR,HR).call(this,"empty")}async onSizeLessThan(e){$e(this,gR).size<e||await qI(this,CR,HR).call(this,"next",(()=>$e(this,gR).size<e))}async onIdle(){0===$e(this,yR)&&0===$e(this,gR).size||await qI(this,CR,HR).call(this,"idle")}get size(){return $e(this,gR).size}sizeBy(e){return $e(this,gR).filter(e).length}get pending(){return $e(this,yR)}get isPaused(){return $e(this,bR)}}function MR(){return $e(this,cR)||$e(this,uR)<$e(this,lR)}function NR(){return $e(this,yR)<$e(this,vR)}function OR(){var e;et(this,yR,(e=$e(this,yR),e--,e)),qI(this,xR,UR).call(this),this.emit("next")}function DR(){qI(this,TR,jR).call(this),qI(this,IR,FR).call(this),et(this,pR,void 0)}function LR(){const e=Date.now();if(void 0===$e(this,fR)){const t=$e(this,hR)-e;if(!(t<0))return void 0===$e(this,pR)&&et(this,pR,setTimeout((()=>{qI(this,SR,DR).call(this)}),t)),!0;et(this,uR,$e(this,aR)?$e(this,yR):0)}return!1}function UR(){if(0===$e(this,gR).size)return $e(this,fR)&&clearInterval($e(this,fR)),et(this,fR,void 0),this.emit("empty"),0===$e(this,yR)&&this.emit("idle"),!1;if(!$e(this,bR)){const e=!$e(this,kR);if($e(this,_R)&&$e(this,ER)){const t=$e(this,gR).dequeue();return!!t&&(this.emit("active"),t(),e&&qI(this,IR,FR).call(this),!0)}}return!1}function FR(){$e(this,cR)||void 0!==$e(this,fR)||(et(this,fR,setInterval((()=>{qI(this,TR,jR).call(this)}),$e(this,dR))),et(this,hR,Date.now()+$e(this,dR)))}function jR(){0===$e(this,uR)&&0===$e(this,yR)&&$e(this,fR)&&(clearInterval($e(this,fR)),et(this,fR,void 0)),et(this,uR,$e(this,aR)?$e(this,yR):0),qI(this,PR,qR).call(this)}function qR(){for(;qI(this,xR,UR).call(this););}async function zR(e){return new Promise(((t,r)=>{e.addEventListener("abort",(()=>{r(e.reason)}),{once:!0})}))}async function HR(e,t){return new Promise((r=>{const n=()=>{t&&!t()||(this.off(e,n),r())};this.on(e,n)}))}const KR={},VR=e=>{e.addEventListener("message",(t=>{VR.dispatchEvent("message",e,t)})),null!=e.port&&e.port.addEventListener("message",(t=>{VR.dispatchEvent("message",e,t)}))};VR.addEventListener=(e,t)=>{null==KR[e]&&(KR[e]=[]),KR[e].push(t)},VR.removeEventListener=(e,t)=>{null!=KR[e]&&(KR[e]=KR[e].filter((e=>e===t)))},VR.dispatchEvent=function(e,t,r){null!=KR[e]&&KR[e].forEach((e=>e(t,r)))};const GR=VR,WR="lock:worker:request-read",QR="lock:worker:release-read",JR="lock:master:grant-read",ZR="lock:worker:request-write",YR="lock:worker:release-write",XR="lock:master:grant-write",$R=(e,t,r,n,i)=>(o,s)=>{if(s.data.type!==r)return;const a={type:s.data.type,name:s.data.name,identifier:s.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:a.name,handler:async()=>{o.postMessage({type:i,name:a.name,identifier:a.identifier}),await new Promise((e=>{const t=r=>{if(null==r||null==r.data)return;const i=r.data.type,s=(r.data.name,r.data.identifier);i===n&&s===a.identifier&&(o.removeEventListener("message",t),e())};o.addEventListener("message",t)}))}}}))},eC=(e,t,r,n)=>async()=>{const i=Math.random().toString().substring(2);return globalThis.postMessage({type:t,identifier:i,name:e}),new Promise((t=>{const o=s=>{if(null==s||null==s.data)return;const a=s.data.type,c=s.data.identifier;a===r&&c===i&&(globalThis.removeEventListener("message",o),t((()=>{globalThis.postMessage({type:n,identifier:i,name:e})})))};globalThis.addEventListener("message",o)}))},tC={singleProcess:!1},rC={};let nC;async function iC(e,t){let r;const n=new Promise((e=>{r=e}));return e.add((async()=>rv((async()=>{await new Promise((e=>{r((()=>{e()}))}))})(),{milliseconds:t.timeout}))),n}const oC={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function sC(e){const t=Object.assign({},oC,e);return null==nC&&(nC=(e=>{if(e=Object.assign({},tC,e),Boolean(globalThis.document)||e.singleProcess){const e=new EventTarget;return GR.addEventListener("message",$R(e,"requestReadLock",WR,QR,JR)),GR.addEventListener("message",$R(e,"requestWriteLock",ZR,YR,XR)),e}return{isWorker:!0,readLock:e=>eC(e,WR,JR,QR),writeLock:e=>eC(e,ZR,XR,YR)}})(t),!0!==nC.isWorker&&(nC.addEventListener("requestReadLock",(e=>{null!=rC[e.data.name]&&rC[e.data.name].readLock().then((async t=>e.data.handler().finally((()=>{t()}))))})),nC.addEventListener("requestWriteLock",(async e=>{null!=rC[e.data.name]&&rC[e.data.name].writeLock().then((async t=>e.data.handler().finally((()=>{t()}))))})))),null==rC[t.name]&&(rC[t.name]=((e,t)=>{if(!0===nC.isWorker)return{readLock:nC.readLock(e,t),writeLock:nC.writeLock(e,t)};const r=new BR({concurrency:1});let n;return{async readLock(){if(null!=n)return iC(n,t);n=new BR({concurrency:t.concurrency,autoStart:!1});const e=n,i=iC(n,t);return r.add((async()=>{e.start(),await e.onIdle().then((()=>{n===e&&(n=null)}))})),i},writeLock:async()=>(n=null,iC(r,t))}})(t.name,t)),rC[t.name]}const aC={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS"};var cC,uC,lC;function dC(e,t){var r;const n=cC.decode(t);null!=n.publicKey&&null==e.publicKey&&(e=function(e){if("RSA"===e.type)return new tg(e);if("Ed25519"===e.type)return new rg(e);if("secp256k1"===e.type)return new ng(e);throw new Hp("Not a PeerId","ERR_INVALID_PARAMETERS")}({...e,publicKey:e.publicKey}));const i=new Map,o=BigInt(Date.now());for(const[s,a]of n.tags.entries())null!=a.expiry&&a.expiry<o||i.set(s,a);return{...n,id:e,addresses:n.addresses.map((e=>{let{multiaddr:t,isCertified:r}=e;return{multiaddr:Zn(t),isCertified:null!==r&&void 0!==r&&r}})),metadata:n.metadata,peerRecordEnvelope:null!==(r=n.peerRecordEnvelope)&&void 0!==r?r:void 0,tags:i}}!function(e){let t,r,n;!function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.key&&""!==e.key&&(t.uint32(10),t.string(e.key)),null!=e.value&&e.value.byteLength>0&&(t.uint32(18),t.bytes(e.value)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={key:"",value:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.key=e.string();break;case 2:r.value=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(t=e.Peer$metadataEntry||(e.Peer$metadataEntry={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.key&&""!==e.key&&(t.uint32(10),t.string(e.key)),null!=e.value&&(t.uint32(18),lC.codec().encode(e.value,t)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={key:""},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.key=e.string();break;case 2:r.value=lC.codec().decode(e,e.uint32());break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(r=e.Peer$tagsEntry||(e.Peer$tagsEntry={})),e.codec=()=>(null==n&&(n=Qf((function(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==n.lengthDelimited&&r.fork(),null!=t.addresses)for(const e of t.addresses)r.uint32(10),uC.codec().encode(e,r);if(null!=t.protocols)for(const e of t.protocols)r.uint32(18),r.string(e);if(null!=t.publicKey&&(r.uint32(34),r.bytes(t.publicKey)),null!=t.peerRecordEnvelope&&(r.uint32(42),r.bytes(t.peerRecordEnvelope)),null!=t.metadata&&0!==t.metadata.size)for(const[i,o]of t.metadata.entries())r.uint32(50),e.Peer$metadataEntry.codec().encode({key:i,value:o},r);if(null!=t.tags&&0!==t.tags.size)for(const[i,o]of t.tags.entries())r.uint32(58),e.Peer$tagsEntry.codec().encode({key:i,value:o},r);!1!==n.lengthDelimited&&r.ldelim()}),((t,r)=>{const n={addresses:[],protocols:[],metadata:new Map,tags:new Map},i=null==r?t.len:t.pos+r;for(;t.pos<i;){const r=t.uint32();switch(r>>>3){case 1:n.addresses.push(uC.codec().decode(t,t.uint32()));break;case 2:n.protocols.push(t.string());break;case 4:n.publicKey=t.bytes();break;case 5:n.peerRecordEnvelope=t.bytes();break;case 6:{const r=e.Peer$metadataEntry.codec().decode(t,t.uint32());n.metadata.set(r.key,r.value);break}case 7:{const r=e.Peer$tagsEntry.codec().decode(t,t.uint32());n.tags.set(r.key,r.value);break}default:t.skipType(7&r)}}return n}))),n),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(cC||(cC={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.multiaddr&&e.multiaddr.byteLength>0&&(t.uint32(10),t.bytes(e.multiaddr)),null!=e.isCertified&&(t.uint32(16),t.bool(e.isCertified)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={multiaddr:new Uint8Array(0)},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.multiaddr=e.bytes();break;case 2:r.isCertified=e.bool();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(uC||(uC={})),function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!1!==r.lengthDelimited&&t.fork(),null!=e.value&&0!==e.value&&(t.uint32(8),t.uint32(e.value)),null!=e.expiry&&(t.uint32(16),t.uint64(e.expiry)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={value:0},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 1:r.value=e.uint32();break;case 2:r.expiry=e.uint64();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(lC||(lC={}));const hC="/peers/";function fC(e){if(!Je(e)||null==e.type)throw new Hp("Invalid PeerId",aC.ERR_INVALID_PARAMETERS);const t=e.toCID().toString();return new SP("".concat(hC).concat(t))}async function pC(e,t,r){const n=new Map;for(const o of r){var i;if(null==o)continue;if(o.multiaddr instanceof Uint8Array&&(o.multiaddr=Zn(o.multiaddr)),!Jn(o.multiaddr))throw new Hp("Multiaddr was invalid",aC.ERR_INVALID_PARAMETERS);if(!await t(e,o.multiaddr))continue;const r=null!==(i=o.isCertified)&&void 0!==i&&i,s=o.multiaddr.toString(),a=n.get(s);null!=a?o.isCertified=a.isCertified||r:n.set(s,{multiaddr:o.multiaddr,isCertified:r})}return[...n.values()].sort(((e,t)=>e.multiaddr.toString().localeCompare(t.multiaddr.toString()))).map((e=>{let{isCertified:t,multiaddr:r}=e;return{isCertified:t,multiaddr:r.bytes}}))}async function gC(e,t,r,n){var i,o,s,a,c,u,l;if(null==t)throw new Hp("Invalid PeerData",aC.ERR_INVALID_PARAMETERS);if(null!=t.publicKey&&null!=e.publicKey&&!Wp(t.publicKey,e.publicKey))throw new Hp("publicKey bytes do not match peer id publicKey bytes",aC.ERR_INVALID_PARAMETERS);const d=n.existingPeer;if(null!=d&&!e.equals(d.id))throw new Hp("peer id did not match existing peer id",aC.ERR_INVALID_PARAMETERS);let h=null!==(i=null===d||void 0===d?void 0:d.addresses)&&void 0!==i?i:[],f=new Set(null!==(o=null===d||void 0===d?void 0:d.protocols)&&void 0!==o?o:[]),p=null!==(s=null===d||void 0===d?void 0:d.metadata)&&void 0!==s?s:new Map,g=null!==(a=null===d||void 0===d?void 0:d.tags)&&void 0!==a?a:new Map,m=null===d||void 0===d?void 0:d.peerRecordEnvelope;if("patch"===r){if(null==t.multiaddrs&&null==t.addresses||(h=[],null!=t.multiaddrs&&h.push(...t.multiaddrs.map((e=>({isCertified:!1,multiaddr:e})))),null!=t.addresses&&h.push(...t.addresses)),null!=t.protocols&&(f=new Set(t.protocols)),null!=t.metadata){p=mC(t.metadata instanceof Map?[...t.metadata.entries()]:Object.entries(t.metadata),{validate:yC})}if(null!=t.tags){g=mC(t.tags instanceof Map?[...t.tags.entries()]:Object.entries(t.tags),{validate:vC,map:bC})}null!=t.peerRecordEnvelope&&(m=t.peerRecordEnvelope)}if("merge"===r){if(null!=t.multiaddrs&&h.push(...t.multiaddrs.map((e=>({isCertified:!1,multiaddr:e})))),null!=t.addresses&&h.push(...t.addresses),null!=t.protocols&&(f=new Set([...f,...t.protocols])),null!=t.metadata){const e=t.metadata instanceof Map?[...t.metadata.entries()]:Object.entries(t.metadata);for(const[t,r]of e)null==r?p.delete(t):p.set(t,r);p=mC([...p.entries()],{validate:yC})}if(null!=t.tags){const e=t.tags instanceof Map?[...t.tags.entries()]:Object.entries(t.tags),r=new Map(g);for(const[t,n]of e)null==n?r.delete(t):r.set(t,n);g=mC([...r.entries()],{validate:vC,map:bC})}null!=t.peerRecordEnvelope&&(m=t.peerRecordEnvelope)}const y={addresses:await pC(e,null!==(c=n.addressFilter)&&void 0!==c?c:async()=>!0,h),protocols:[...f.values()].sort(((e,t)=>e.localeCompare(t))),metadata:p,tags:g,publicKey:null!==(u=null!==(l=null===d||void 0===d?void 0:d.id.publicKey)&&void 0!==l?l:t.publicKey)&&void 0!==u?u:e.publicKey,peerRecordEnvelope:m};return"RSA"!==e.type&&delete y.publicKey,y}function mC(e,t){const r=new Map;for(const[o,s]of e)null!=s&&t.validate(o,s);for(const[o,s]of e.sort(((e,t)=>{let[r]=e,[n]=t;return r.localeCompare(n)}))){var n,i;if(null!=s)r.set(o,null!==(n=null===(i=t.map)||void 0===i?void 0:i.call(t,o,s))&&void 0!==n?n:s)}return r}function yC(e,t){if("string"!==typeof e)throw new Hp("Metadata key must be a string",aC.ERR_INVALID_PARAMETERS);if(!(t instanceof Uint8Array))throw new Hp("Metadata value must be a Uint8Array",aC.ERR_INVALID_PARAMETERS)}function vC(e,t){if("string"!==typeof e)throw new Hp("Tag name must be a string",aC.ERR_INVALID_PARAMETERS);if(null!=t.value){if(parseInt("".concat(t.value),10)!==t.value)throw new Hp("Tag value must be an integer",aC.ERR_INVALID_PARAMETERS);if(t.value<0||t.value>100)throw new Hp("Tag value must be between 0-100",aC.ERR_INVALID_PARAMETERS)}if(null!=t.ttl){if(parseInt("".concat(t.ttl),10)!==t.ttl)throw new Hp("Tag ttl must be an integer",aC.ERR_INVALID_PARAMETERS);if(t.ttl<0)throw new Hp("Tag ttl must be between greater than 0",aC.ERR_INVALID_PARAMETERS)}}function bC(e,t){var r;let n;return null!=t.expiry&&(n=t.expiry),null!=t.ttl&&(n=BigInt(Date.now()+Number(t.ttl))),{value:null!==(r=t.value)&&void 0!==r?r:0,expiry:n}}function wC(e,t,r){const n=e.toString().split("/")[2],i=og(to.decode(n)),o=r.get(i);if(null!=o)return o;const s=dC(i,t);return r.set(i,s),s}var _C=new WeakSet,EC=new WeakSet;class AC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jI(this,EC),jI(this,_C),We(this,"peerId",void 0),We(this,"datastore",void 0),We(this,"lock",void 0),We(this,"addressFilter",void 0),this.peerId=e.peerId,this.datastore=e.datastore,this.addressFilter=t.addressFilter,this.lock=sC({name:"peer-store",singleProcess:!0})}async has(e){return this.datastore.has(fC(e))}async delete(e){if(this.peerId.equals(e))throw new Hp("Cannot delete self peer",aC.ERR_INVALID_PARAMETERS);await this.datastore.delete(fC(e))}async load(e){return dC(e,await this.datastore.get(fC(e)))}async save(e,t){const{existingBuf:r,existingPeer:n}=await qI(this,_C,SC).call(this,e),i=await gC(e,t,"patch",{addressFilter:this.addressFilter});return qI(this,EC,kC).call(this,e,i,r,n)}async patch(e,t){const{existingBuf:r,existingPeer:n}=await qI(this,_C,SC).call(this,e),i=await gC(e,t,"patch",{addressFilter:this.addressFilter,existingPeer:n});return qI(this,EC,kC).call(this,e,i,r,n)}async merge(e,t){const{existingBuf:r,existingPeer:n}=await qI(this,_C,SC).call(this,e),i=await gC(e,t,"merge",{addressFilter:this.addressFilter,existingPeer:n});return qI(this,EC,kC).call(this,e,i,r,n)}async*all(e){const t=new KP;for await(const{key:r,value:n}of this.datastore.query(function(e,t){var r,n;return null==e?{}:{prefix:hC,filters:(null!==(r=e.filters)&&void 0!==r?r:[]).map((e=>r=>{let{key:n,value:i}=r;return e(wC(n,i,t))})),orders:(null!==(n=e.orders)&&void 0!==n?n:[]).map((e=>(r,n)=>e(wC(r.key,r.value,t),wC(n.key,n.value,t))))}}(null!==e&&void 0!==e?e:{},t))){const e=wC(r,n,t);e.id.equals(this.peerId)||(yield e)}}}async function SC(e){try{const t=await this.datastore.get(fC(e));return{existingBuf:t,existingPeer:dC(e,t)}}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}return{}}async function kC(e,t,r,n){const i=cC.encode(t);return null!=r&&Wp(i,r)?{peer:dC(e,i),previous:n,updated:!1}:(await this.datastore.put(fC(e),i),{peer:dC(e,i),previous:n,updated:!0})}const xC=Aw("libp2p:peer-store");var IC=new WeakSet;class TC{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};jI(this,IC),We(this,"store",void 0),We(this,"events",void 0),We(this,"peerId",void 0),this.events=e.events,this.peerId=e.peerId,this.store=new AC(e,t)}async forEach(e,t){xC.trace("forEach await read lock");const r=await this.store.lock.readLock();xC.trace("forEach got read lock");try{for await(const r of this.store.all(t))e(r)}finally{xC.trace("forEach release read lock"),r()}}async all(e){xC.trace("all await read lock");const t=await this.store.lock.readLock();xC.trace("all got read lock");try{return await zm(this.store.all(e))}finally{xC.trace("all release read lock"),t()}}async delete(e){xC.trace("delete await write lock");const t=await this.store.lock.writeLock();xC.trace("delete got write lock");try{await this.store.delete(e)}finally{xC.trace("delete release write lock"),t()}}async has(e){xC.trace("has await read lock");const t=await this.store.lock.readLock();xC.trace("has got read lock");try{return await this.store.has(e)}finally{xC.trace("has release read lock"),t()}}async get(e){xC.trace("get await read lock");const t=await this.store.lock.readLock();xC.trace("get got read lock");try{return await this.store.load(e)}finally{xC.trace("get release read lock"),t()}}async save(e,t){xC.trace("save await write lock");const r=await this.store.lock.writeLock();xC.trace("save got write lock");try{const r=await this.store.save(e,t);return qI(this,IC,PC).call(this,e,r),r.peer}finally{xC.trace("save release write lock"),r()}}async patch(e,t){xC.trace("patch await write lock");const r=await this.store.lock.writeLock();xC.trace("patch got write lock");try{const r=await this.store.patch(e,t);return qI(this,IC,PC).call(this,e,r),r.peer}finally{xC.trace("patch release write lock"),r()}}async merge(e,t){xC.trace("merge await write lock");const r=await this.store.lock.writeLock();xC.trace("merge got write lock");try{const r=await this.store.merge(e,t);return qI(this,IC,PC).call(this,e,r),r.peer}finally{xC.trace("merge release write lock"),r()}}async consumePeerRecord(e,t){var r;const n=await XP.openAndCertify(e,nR.DOMAIN);if(!1===(null===t||void 0===t?void 0:t.equals(n.peerId)))return xC("envelope peer id was not the expected peer id - expected: %p received: %p",t,n.peerId),!1;const i=nR.createFromProtobuf(n.payload);let o;try{o=await this.get(n.peerId)}catch(s){if("ERR_NOT_FOUND"!==s.code)throw s}if(null!=(null===(r=o)||void 0===r?void 0:r.peerRecordEnvelope)){const e=await XP.createFromProtobuf(o.peerRecordEnvelope),t=nR.createFromProtobuf(e.payload);if(t.seqNumber>=i.seqNumber)return xC("sequence number was lower or equal to existing sequence number - stored: %d received: %d",t.seqNumber,i.seqNumber),!1}return await this.patch(i.peerId,{peerRecordEnvelope:e,addresses:i.multiaddrs.map((e=>({isCertified:!0,multiaddr:e})))}),!0}}function PC(e,t){t.updated&&(this.peerId.equals(e)?this.events.safeDispatchEvent("self:peer:update",{detail:t}):this.events.safeDispatchEvent("peer:update",{detail:t}))}const RC=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{for await(const t of e);})();for(const t of e);};const CC=function(e){const[t,r]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:e=>{n.push(e)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[r](){return this}}};const BC=function(e,t){if(null!=e[Symbol.asyncIterator])return async function*(){for await(const r of e)await t(r)&&(yield r)}();const r=CC(e),{value:n,done:i}=r.next();if(!0===i)return function*(){}();const o=t(n);if("function"===typeof o.then)return async function*(){await o&&(yield n);for await(const e of r)await t(e)&&(yield e)}();const s=t;return function*(){!0===o&&(yield n);for(const e of r)s(e)&&(yield e)}()};const MC=function(e,t){return null!=e[Symbol.asyncIterator]?async function*(){const r=await zm(e);yield*r.sort(t)}():function*(){const r=zm(e);yield*r.sort(t)}()};const NC=function(e,t){return null!=e[Symbol.asyncIterator]?async function*(){let r=0;if(!(t<1))for await(const n of e)if(yield n,r++,r===t)return}():function*(){let r=0;if(!(t<1))for(const n of e)if(yield n,r++,r===t)return}()};class OC{put(e,t,r){return Promise.reject(new Error(".put is not implemented"))}get(e,t){return Promise.reject(new Error(".get is not implemented"))}has(e,t){return Promise.reject(new Error(".has is not implemented"))}delete(e,t){return Promise.reject(new Error(".delete is not implemented"))}putMany(e){try{var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const{key:n,value:i}of e)await t.put(n,i,r),yield n}()}catch(r){return Promise.reject(r)}}getMany(e){try{var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const n of e)yield{key:n,value:await t.get(n,r)}}()}catch(r){return Promise.reject(r)}}deleteMany(e){try{var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){for await(const n of e)await t.delete(n,r),yield n}()}catch(r){return Promise.reject(r)}}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await RC(this.putMany(e,r)),e=[],await RC(this.deleteMany(t,r)),t=[]}}}async*_all(e,t){throw new Error("._all is not implemented")}async*_allKeys(e,t){throw new Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix){const t=e.prefix;r=BC(r,(e=>e.key.toString().startsWith(t)))}if(Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>BC(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>MC(e,t)),r)),null!=e.offset){let t=0;const n=e.offset;r=BC(r,(()=>t++>=n))}return null!=e.limit&&(r=NC(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix){const t=e.prefix;r=BC(r,(e=>e.toString().startsWith(t)))}if(Array.isArray(e.filters)&&(r=e.filters.reduce(((e,t)=>BC(e,t)),r)),Array.isArray(e.orders)&&(r=e.orders.reduce(((e,t)=>MC(e,t)),r)),null!=e.offset){const t=e.offset;let n=0;r=BC(r,(()=>n++>=t))}return null!=e.limit&&(r=NC(r,e.limit)),r}}class DC extends OC{constructor(){super(),We(this,"data",void 0),this.data=new Map}put(e,t){return this.data.set(e.toString(),t),e}get(e){const t=this.data.get(e.toString());if(null==t)throw function(e){var t;return e=null!==(t=e)&&void 0!==t?t:new Error("Not Found"),ny(e,"ERR_NOT_FOUND")}();return t}has(e){return this.data.has(e.toString())}delete(e){this.data.delete(e.toString())}*_all(){for(const[e,t]of this.data.entries())yield{key:new SP(e),value:t}}*_allKeys(){for(const e of this.data.keys())yield new SP(e)}}const LC=Aw("libp2p:address-manager"),UC=e=>e;function FC(e,t){const r=e.getPeerId();if(null!=r){ig(r).equals(t)&&(e=e.decapsulate(Zn("/p2p/".concat(t.toString()))))}return e}class jC{constructor(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};We(this,"components",void 0),We(this,"listen",void 0),We(this,"announce",void 0),We(this,"observed",void 0),We(this,"announceFilter",void 0);const{listen:n=[],announce:i=[]}=r;this.components=e,this.listen=n.map((e=>e.toString())),this.announce=new Set(i.map((e=>e.toString()))),this.observed=new Map,this.announceFilter=null!==(t=r.announceFilter)&&void 0!==t?t:UC,this._updatePeerStoreAddresses=function(e,t){let r;return function(){clearTimeout(r),r=setTimeout((function(){r=void 0,e()}),t)}}(this._updatePeerStoreAddresses.bind(this),1e3),e.events.addEventListener("transport:listening",(()=>{this._updatePeerStoreAddresses()})),e.events.addEventListener("transport:close",(()=>{this._updatePeerStoreAddresses()}))}_updatePeerStoreAddresses(){const e=this.getAnnounceAddrs().concat(this.components.transportManager.getAddrs()).concat([...this.observed.entries()].filter((e=>{let[t,r]=e;return r.confident})).map((e=>{let[t]=e;return Zn(t)}))).map((e=>e.getPeerId()===this.components.peerId.toString()?e.decapsulate("/p2p/".concat(this.components.peerId.toString())):e));this.components.peerStore.patch(this.components.peerId,{multiaddrs:e}).catch((e=>{LC.error("error updating addresses",e)}))}getListenAddrs(){return Array.from(this.listen).map((e=>Zn(e)))}getAnnounceAddrs(){return Array.from(this.announce).map((e=>Zn(e)))}getObservedAddrs(){return Array.from(this.observed).map((e=>{let[t]=e;return Zn(t)}))}addObservedAddr(e){const t=(e=FC(e,this.components.peerId)).toString();this.observed.has(t)||this.observed.set(t,{confident:!1})}confirmObservedAddr(e){var t;const r=(e=FC(e,this.components.peerId)).toString(),n=(null!==(t=this.observed.get(r))&&void 0!==t?t:{confident:!1}).confident;this.observed.set(r,{confident:!0}),n||this._updatePeerStoreAddresses()}removeObservedAddr(e){const t=(e=FC(e,this.components.peerId)).toString();this.observed.delete(t)}getAddresses(){let e=this.getAnnounceAddrs().map((e=>e.toString()));0===e.length&&(e=this.components.transportManager.getAddrs().map((e=>e.toString()))),e=e.concat(Array.from(this.observed).filter((e=>{let[t,r]=e;return r.confident})).map((e=>{let[t]=e;return t})));const t=new Set(e);return this.announceFilter(Array.from(t).map((e=>Zn(e)))).map((e=>{var t;return!0===(null===(t=e.protos().pop())||void 0===t?void 0:t.path)||e.getPeerId()===this.components.peerId.toString()?e:e.encapsulate("/p2p/".concat(this.components.peerId.toString()))}))}}function qC(e){return null!=e&&"function"===typeof e.start&&"function"===typeof e.stop}class zC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};We(this,"components",{}),We(this,"_started",!1),this.components={};for(const[t,r]of Object.entries(e))this.components[t]=r;null==this.components.logger&&(this.components.logger=Ew())}isStarted(){return this._started}async _invokeStartableMethod(e){await Promise.all(Object.values(this.components).filter((e=>qC(e))).map((async t=>{var r;await(null===(r=t[e])||void 0===r?void 0:r.call(t))})))}async beforeStart(){await this._invokeStartableMethod("beforeStart")}async start(){await this._invokeStartableMethod("start"),this._started=!0}async afterStart(){await this._invokeStartableMethod("afterStart")}async beforeStop(){await this._invokeStartableMethod("beforeStop")}async stop(){await this._invokeStartableMethod("stop"),this._started=!1}async afterStop(){await this._invokeStartableMethod("afterStop")}}const HC=["metrics","connectionProtector"],KC=["components","isStarted","beforeStart","start","afterStart","beforeStop","stop","afterStop","then","_invokeStartableMethod"];var VC=__webpack_require__(7922);const GC="[a-fA-F\\d:]",WC=e=>e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(GC,")|(?<=").concat(GC,")(?=\\s|$))"):"",QC="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",JC="[a-fA-F\\d]{1,4}",ZC="\n(?:\n(?:".concat(JC,":){7}(?:").concat(JC,"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:").concat(JC,":){6}(?:").concat(QC,"|:").concat(JC,"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:").concat(JC,":){5}(?::").concat(QC,"|(?::").concat(JC,"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:").concat(JC,":){4}(?:(?::").concat(JC,"){0,1}:").concat(QC,"|(?::").concat(JC,"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:").concat(JC,":){3}(?:(?::").concat(JC,"){0,2}:").concat(QC,"|(?::").concat(JC,"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:").concat(JC,":){2}(?:(?::").concat(JC,"){0,3}:").concat(QC,"|(?::").concat(JC,"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:").concat(JC,":){1}(?:(?::").concat(JC,"){0,4}:").concat(QC,"|(?::").concat(JC,"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::").concat(JC,"){0,5}:").concat(QC,"|(?::").concat(JC,"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),YC=new RegExp("(?:^".concat(QC,"$)|(?:^").concat(ZC,"$)")),XC=new RegExp("^".concat(QC,"$")),$C=new RegExp("^".concat(ZC,"$")),eB=e=>e&&e.exact?YC:new RegExp("(?:".concat(WC(e)).concat(QC).concat(WC(e),")|(?:").concat(WC(e)).concat(ZC).concat(WC(e),")"),"g");eB.v4=e=>e&&e.exact?XC:new RegExp("".concat(WC(e)).concat(QC).concat(WC(e)),"g"),eB.v6=e=>e&&e.exact?$C:new RegExp("".concat(WC(e)).concat(ZC).concat(WC(e)),"g");const tB=eB;var rB=__webpack_require__(7201);const{isValid:nB,parse:iB}=rB,oB=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map((e=>new VC.Netmask(e)));function sB(e){return/^::$/.test(e)||/^::1$/.test(e)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e)}const aB=e=>{if(nB(e)){const t=iB(e);if("ipv4"===t.kind())return function(e){for(let t of oB)if(t.contains(e))return!0;return!1}(t.toNormalizedString());if("ipv6"===t.kind())return sB(e)}else if(gn(e)&&tB.v6().test(e))return sB(e)};function cB(){return{denyDialPeer:async()=>!1,denyDialMultiaddr:async e=>{const t=e.stringTuples();return(4===t[0][0]||41===t[0][0])&&Boolean(aB("".concat(t[0][1])))},denyInboundConnection:async()=>!1,denyOutboundConnection:async()=>!1,denyInboundEncryptedConnection:async()=>!1,denyOutboundEncryptedConnection:async()=>!1,denyInboundUpgradedConnection:async()=>!1,denyOutboundUpgradedConnection:async()=>!1,filterMultiaddrForPeer:async()=>!0,...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}new Uint8Array(0);var uB=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(255!==r[s])throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),u=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function d(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var o=(e.length-t)*u+1>>>0,s=new Uint8Array(o);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var d=0,h=o-1;(0!==l||d<i)&&-1!==h;h--,d++)l+=a*s[h]>>>0,s[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=o-i;f!==o&&0===s[f];)f++;for(var p=new Uint8Array(n+(o-f)),g=n;f!==o;)p[g++]=s[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var s=(o-i)*l+1>>>0,u=new Uint8Array(s);i!==o;){for(var d=t[i],h=0,f=s-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*u[f]>>>0,u[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");n=h,i++}for(var p=s-n;p!==s&&0===u[p];)p++;for(var g=c.repeat(r);p<s;++p)g+=e.charAt(u[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw new Error("Non-".concat(t," character"))}}};const lB=uB;class dB{constructor(e,t,r){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(e));throw Error("Unknown type, must be binary type")}}class hB{constructor(e,t,r){if(We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseDecode",void 0),We(this,"prefixCodePoint",void 0),this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"===typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(e),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return pB(this,e)}}class fB{constructor(e){We(this,"decoders",void 0),this.decoders=e}or(e){return pB(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(e),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}function pB(e,t){var r,n;return new fB({...null!==(r=e.decoders)&&void 0!==r?r:{[e.prefix]:e},...null!==(n=t.decoders)&&void 0!==n?n:{[t.prefix]:t}})}class gB{constructor(e,t,r,n){We(this,"name",void 0),We(this,"prefix",void 0),We(this,"baseEncode",void 0),We(this,"baseDecode",void 0),We(this,"encoder",void 0),We(this,"decoder",void 0),this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new dB(e,t,r),this.decoder=new hB(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function mB(e){let{name:t,prefix:r,encode:n,decode:i}=e;return new gB(t,r,n,i)}function yB(e){let{name:t,prefix:r,alphabet:n}=e;const{encode:i,decode:o}=lB(n,t);return mB({prefix:r,name:t,encode:i,decode:e=>function(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}(o(e))})}function vB(e){let{name:t,prefix:r,bitsPerChar:n,alphabet:i}=e;return mB({prefix:r,name:t,encode:e=>function(e,t,r){const n="="===t[t.length-1],i=(1<<r)-1;let o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(0!==s&&(o+=t[i&a<<r-s]),n)for(;0!==(o.length*r&7);)o+="=";return o}(e,i,n),decode:e=>function(e,t,r,n){const i={};for(let l=0;l<t.length;++l)i[t[l]]=l;let o=e.length;for(;"="===e[o-1];)--o;const s=new Uint8Array(o*r/8|0);let a=0,c=0,u=0;for(let l=0;l<o;++l){const t=i[e[l]];if(void 0===t)throw new SyntaxError("Non-".concat(n," character"));c=c<<r|t,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||0!==(255&c<<8-a))throw new SyntaxError("Unexpected end of data");return s}(e,i,n,t)})}const bB=yB({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),wB=(yB({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),vB({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vB({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vB({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6})),_B=(vB({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),e=>({match:t=>!(t.length<1)&&(!!e(t[0])&&t.slice(1)),pattern:"fn"})),EB=e=>({match:t=>_B((t=>t===e)).match(t),pattern:e}),AB=()=>({match:e=>_B((e=>"string"===typeof e)).match(e),pattern:"{string}"}),SB=()=>({match:e=>_B((e=>!isNaN(parseInt(e)))).match(e),pattern:"{number}"}),kB=()=>({match:e=>{if(e.length<2)return!1;if("p2p"!==e[0]&&"ipfs"!==e[0])return!1;if(!e[1].startsWith("Q")&&!e[1].startsWith("1"))return!1;try{bB.decode("z".concat(e[1]))}catch(t){return!1}return e.slice(2)},pattern:"/p2p/{peerid}"}),xB=()=>({match:e=>{if(e.length<2)return!1;if("certhash"!==e[0])return!1;try{wB.decode(e[1])}catch{return!1}return e.slice(2)},pattern:"/certhash/{certhash}"}),IB=e=>({match:t=>{const r=e.match(t);return!1===r?t:r},pattern:"optional(".concat(e.pattern,")")}),TB=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{match:e=>{let r;for(const n of t){const t=n.match(e);!1!==t&&((null==r||t.length<r.length)&&(r=t))}return null!=r&&r},pattern:"or(".concat(t.map((e=>e.pattern)).join(", "),")")}},PB=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{match:e=>{for(const r of t){const t=r.match(e);if(!1===t)return!1;e=t}return e},pattern:"and(".concat(t.map((e=>e.pattern)).join(", "),")")}};function RB(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(e){let r=(e=>e.toString().split("/").slice(1))(e);for(const n of t){const e=n.match(r);if(!1===e)return!1;r=e}return r}return{matches:function(e){return!1!==n(e)},exactMatch:function(e){const t=n(e);return!1!==t&&0===t.length}}}const CB=PB(EB("dns4"),AB()),BB=PB(EB("dns6"),AB()),MB=PB(EB("dnsaddr"),AB()),NB=PB(EB("dns"),AB()),OB=(RB(CB),RB(BB),RB(MB),RB(TB(NB,MB,CB,BB)),PB(EB("ip4"),_B(fn))),DB=PB(EB("ip6"),_B(pn)),LB=TB(OB,DB),UB=TB(LB,NB,CB,BB,MB),FB=RB(UB),jB=(RB(OB),RB(DB),RB(LB),PB(UB,EB("tcp"),SB())),qB=PB(UB,EB("udp"),SB()),zB=TB(jB,qB),HB=(RB(jB),RB(qB),PB(qB,EB("quic"))),KB=PB(qB,EB("quic-v1")),VB=TB(HB,KB),GB=(RB(HB),RB(KB),TB(UB,jB,qB,HB,KB)),WB=TB(PB(GB,EB("ws"),IB(kB()))),QB=(RB(WB),TB(PB(GB,EB("wss"),IB(kB())),PB(GB,EB("tls"),EB("ws"),IB(kB())))),JB=(RB(QB),PB(zB,EB("webrtc-direct"),xB(),IB(xB()),IB(kB()))),ZB=(RB(JB),PB(KB,EB("webtransport"),xB(),xB(),IB(kB()))),YB=(RB(ZB),TB(WB,QB,PB(jB,IB(kB())),PB(VB,IB(kB())),PB(UB,IB(kB())),JB,ZB,kB())),XB=(RB(YB),RB(PB(YB,EB("p2p-circuit"),kB())));RB(TB(PB(YB,EB("p2p-circuit"),EB("webrtc"),kB()),PB(YB,EB("webrtc"),IB(kB())),EB("webrtc")));function $B(e){try{const{address:t}=e.nodeAddress();return Boolean(aB(t))}catch{return!0}}function eM(e,t){const r=function(e,t){const r=$B(e.multiaddr),n=$B(t.multiaddr);return r&&!n?1:!r&&n?-1:0}(e,t);if(0!==r)return r;const n=function(e,t){const r=XB.exactMatch(e.multiaddr),n=XB.exactMatch(t.multiaddr);return r&&!n?1:!r&&n?-1:0}(e,t);if(0!==n)return n;const i=function(e,t){return e.isCertified&&!t.isCertified?-1:!e.isCertified&&t.isCertified?1:0}(e,t);return i}var tM=__webpack_require__(449);function rM(e,t,r){return"".concat(e,"?name=").concat(t,"&type=").concat(r)}async function nM(e,t){const r=await fetch(e,{headers:new Headers({accept:"application/dns-json"}),signal:t});return await r.json()}function iM(e,t){return"".concat(t,"_").concat(e)}const oM=Object.assign(Fs("dns-over-http-resolver"),{error:Fs("dns-over-http-resolver:error")});const sM=class{constructor(){var e,t,r;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};We(this,"_cache",void 0),We(this,"_TXTcache",void 0),We(this,"_servers",void 0),We(this,"_request",void 0),We(this,"_abortControllers",void 0),this._cache=new tM({max:null!==(e=null===n||void 0===n?void 0:n.maxCache)&&void 0!==e?e:100}),this._TXTcache=new tM({max:null!==(t=null===n||void 0===n?void 0:n.maxCache)&&void 0!==t?t:100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=null!==(r=n.request)&&void 0!==r?r:nM,this._abortControllers=[]}cancel(){this._abortControllers.forEach((e=>{e.abort()}))}getServers(){return this._servers}_getShuffledServers(){const e=[...this._servers];for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*t),n=e[t];e[t]=e[r],e[r]=n}return e}setServers(e){this._servers=e}async resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"A";switch(t){case"A":return this.resolve4(e);case"AAAA":return this.resolve6(e);case"TXT":return this.resolveTxt(e);default:throw new Error("".concat(t," is not supported"))}}async resolve4(e){const t="A",r=this._cache.get(iM(e,t));if(null!=r)return r;let n=!1;for(const o of this._getShuffledServers()){const r=new AbortController;this._abortControllers.push(r);try{const n=await this._request(rM(o,e,t),r.signal),i=n.Answer.map((e=>e.data)),s=Math.min(...n.Answer.map((e=>e.TTL)));return this._cache.set(iM(e,t),i,{ttl:s}),i}catch(i){r.signal.aborted&&(n=!0),oM.error("".concat(o," could not resolve ").concat(e," record ").concat(t))}finally{this._abortControllers=this._abortControllers.filter((e=>e!==r))}}if(n)throw Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"});throw new Error("Could not resolve ".concat(e," record ").concat(t))}async resolve6(e){const t="AAAA",r=this._cache.get(iM(e,t));if(null!=r)return r;let n=!1;for(const o of this._getShuffledServers()){const r=new AbortController;this._abortControllers.push(r);try{const n=await this._request(rM(o,e,t),r.signal),i=n.Answer.map((e=>e.data)),s=Math.min(...n.Answer.map((e=>e.TTL)));return this._cache.set(iM(e,t),i,{ttl:s}),i}catch(i){r.signal.aborted&&(n=!0),oM.error("".concat(o," could not resolve ").concat(e," record ").concat(t))}finally{this._abortControllers=this._abortControllers.filter((e=>e!==r))}}if(n)throw Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"});throw new Error("Could not resolve ".concat(e," record ").concat(t))}async resolveTxt(e){const t="TXT",r=this._TXTcache.get(iM(e,t));if(null!=r)return r;let n=!1;for(const o of this._getShuffledServers()){const r=new AbortController;this._abortControllers.push(r);try{const n=await this._request(rM(o,e,t),r.signal),i=n.Answer.map((e=>[e.data.replace(/['"]+/g,"")])),s=Math.min(...n.Answer.map((e=>e.TTL)));return this._TXTcache.set(iM(e,t),i,{ttl:s}),i}catch(i){r.signal.aborted&&(n=!0),oM.error("".concat(o," could not resolve ").concat(e," record ").concat(t))}finally{this._abortControllers=this._abortControllers.filter((e=>e!==r))}}if(n)throw Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"});throw new Error("Could not resolve ".concat(e," record ").concat(t))}clearCache(){this._cache.clear(),this._TXTcache.clear()}},aM=sM,{code:cM}=An("dnsaddr");async function uM(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new aM;null!=r.signal&&r.signal.addEventListener("abort",(()=>{n.cancel()}));const i=e.getPeerId(),[,o]=null!==(t=e.stringTuples().find((e=>{let[t]=e;return t===cM})))&&void 0!==t?t:[];if(null==o)throw new Error("No hostname found in multiaddr");let s=(await n.resolveTxt("_dnsaddr.".concat(o))).flat().map((e=>e.split("=")[1])).filter(Boolean);return null!=i&&(s=s.filter((e=>e.includes(i)))),s}var lM,dM;!function(e){e.NOT_STARTED_YET="The libp2p node is not started yet",e.DHT_DISABLED="DHT is not available",e.PUBSUB_DISABLED="PubSub is not available",e.CONN_ENCRYPTION_REQUIRED="At least one connection encryption module is required",e.ERR_TRANSPORTS_REQUIRED="At least one transport module is required",e.ERR_PROTECTOR_REQUIRED="Private network is enforced, but no protector was provided",e.NOT_FOUND="Not found"}(lM||(lM={})),function(e){e.DHT_DISABLED="ERR_DHT_DISABLED",e.ERR_PUBSUB_DISABLED="ERR_PUBSUB_DISABLED",e.PUBSUB_NOT_STARTED="ERR_PUBSUB_NOT_STARTED",e.DHT_NOT_STARTED="ERR_DHT_NOT_STARTED",e.CONN_ENCRYPTION_REQUIRED="ERR_CONN_ENCRYPTION_REQUIRED",e.ERR_TRANSPORTS_REQUIRED="ERR_TRANSPORTS_REQUIRED",e.ERR_PROTECTOR_REQUIRED="ERR_PROTECTOR_REQUIRED",e.ERR_PEER_DIAL_INTERCEPTED="ERR_PEER_DIAL_INTERCEPTED",e.ERR_CONNECTION_INTERCEPTED="ERR_CONNECTION_INTERCEPTED",e.ERR_INVALID_PROTOCOLS_FOR_STREAM="ERR_INVALID_PROTOCOLS_FOR_STREAM",e.ERR_CONNECTION_ENDED="ERR_CONNECTION_ENDED",e.ERR_CONNECTION_FAILED="ERR_CONNECTION_FAILED",e.ERR_NODE_NOT_STARTED="ERR_NODE_NOT_STARTED",e.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",e.ERR_TOO_MANY_ADDRESSES="ERR_TOO_MANY_ADDRESSES",e.ERR_NO_VALID_ADDRESSES="ERR_NO_VALID_ADDRESSES",e.ERR_RELAYED_DIAL="ERR_RELAYED_DIAL",e.ERR_DIALED_SELF="ERR_DIALED_SELF",e.ERR_DISCOVERED_SELF="ERR_DISCOVERED_SELF",e.ERR_DUPLICATE_TRANSPORT="ERR_DUPLICATE_TRANSPORT",e.ERR_ENCRYPTION_FAILED="ERR_ENCRYPTION_FAILED",e.ERR_HOP_REQUEST_FAILED="ERR_HOP_REQUEST_FAILED",e.ERR_INVALID_KEY="ERR_INVALID_KEY",e.ERR_INVALID_MESSAGE="ERR_INVALID_MESSAGE",e.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",e.ERR_INVALID_PEER="ERR_INVALID_PEER",e.ERR_MUXER_UNAVAILABLE="ERR_MUXER_UNAVAILABLE",e.ERR_NOT_FOUND="ERR_NOT_FOUND",e.ERR_TIMEOUT="ERR_TIMEOUT",e.ERR_TRANSPORT_UNAVAILABLE="ERR_TRANSPORT_UNAVAILABLE",e.ERR_TRANSPORT_DIAL_FAILED="ERR_TRANSPORT_DIAL_FAILED",e.ERR_UNSUPPORTED_PROTOCOL="ERR_UNSUPPORTED_PROTOCOL",e.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED="ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED",e.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",e.ERR_SIGNATURE_NOT_VALID="ERR_SIGNATURE_NOT_VALID",e.ERR_FIND_SELF="ERR_FIND_SELF",e.ERR_NO_ROUTERS_AVAILABLE="ERR_NO_ROUTERS_AVAILABLE",e.ERR_CONNECTION_NOT_MULTIPLEXED="ERR_CONNECTION_NOT_MULTIPLEXED",e.ERR_NO_DIAL_TOKENS="ERR_NO_DIAL_TOKENS",e.ERR_KEYCHAIN_REQUIRED="ERR_KEYCHAIN_REQUIRED",e.ERR_INVALID_CMS="ERR_INVALID_CMS",e.ERR_MISSING_KEYS="ERR_MISSING_KEYS",e.ERR_NO_KEY="ERR_NO_KEY",e.ERR_INVALID_KEY_NAME="ERR_INVALID_KEY_NAME",e.ERR_INVALID_KEY_TYPE="ERR_INVALID_KEY_TYPE",e.ERR_KEY_ALREADY_EXISTS="ERR_KEY_ALREADY_EXISTS",e.ERR_INVALID_KEY_SIZE="ERR_INVALID_KEY_SIZE",e.ERR_KEY_NOT_FOUND="ERR_KEY_NOT_FOUND",e.ERR_OLD_KEY_NAME_INVALID="ERR_OLD_KEY_NAME_INVALID",e.ERR_NEW_KEY_NAME_INVALID="ERR_NEW_KEY_NAME_INVALID",e.ERR_PASSWORD_REQUIRED="ERR_PASSWORD_REQUIRED",e.ERR_PEM_REQUIRED="ERR_PEM_REQUIRED",e.ERR_CANNOT_READ_KEY="ERR_CANNOT_READ_KEY",e.ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY",e.ERR_MISSING_PUBLIC_KEY="ERR_MISSING_PUBLIC_KEY",e.ERR_INVALID_OLD_PASS_TYPE="ERR_INVALID_OLD_PASS_TYPE",e.ERR_INVALID_NEW_PASS_TYPE="ERR_INVALID_NEW_PASS_TYPE",e.ERR_INVALID_PASS_LENGTH="ERR_INVALID_PASS_LENGTH",e.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",e.ERR_WRONG_PING_ACK="ERR_WRONG_PING_ACK",e.ERR_INVALID_RECORD="ERR_INVALID_RECORD",e.ERR_ALREADY_SUCCEEDED="ERR_ALREADY_SUCCEEDED",e.ERR_NO_HANDLER_FOR_PROTOCOL="ERR_NO_HANDLER_FOR_PROTOCOL",e.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS",e.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",e.ERR_CONNECTION_DENIED="ERR_CONNECTION_DENIED",e.ERR_TRANSFER_LIMIT_EXCEEDED="ERR_TRANSFER_LIMIT_EXCEEDED"}(dM||(dM={}));const hM={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:e=>e},connectionManager:{resolvers:{dnsaddr:uM},addressSorter:eM},transportManager:{faultTolerance:a_.FATAL_ALL}};const fM=Aw("libp2p:get-peer");function pM(e){if(Je(e))return{peerId:e,multiaddrs:[]};let t;if(Array.isArray(e)||(e=[e]),e.length>0){const r=e[0].getPeerId();t=null==r?void 0:ig(r),e.forEach((e=>{if(!Jn(e))throw fM.error("multiaddr %s was invalid",e),new Hp("Invalid Multiaddr",dM.ERR_INVALID_MULTIADDR);const r=e.getPeerId();if(null==r){if(null!=t)throw new Hp("Multiaddrs must all have the same peer id or have no peer id",dM.ERR_INVALID_PARAMETERS)}else{const e=ig(r);if(null==t||!t.equals(e))throw new Hp("Multiaddrs must all have the same peer id or have no peer id",dM.ERR_INVALID_PARAMETERS)}}))}return{peerId:t,multiaddrs:e}}var gM=__webpack_require__(9174);class mM extends Error{constructor(e){super(e),this.name="TimeoutError"}}class yM extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const vM=e=>void 0===globalThis.DOMException?new yM(e):new DOMException(e),bM=e=>{const t=void 0===e.reason?vM("This operation was aborted."):e.reason;return t instanceof Error?t:vM(t)};var wM,_M=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};wM=new WeakMap;const EM=class{constructor(){wM.set(this,[])}enqueue(e,t){const r={priority:(t={priority:0,...t}).priority,run:e};if(this.size&&_M(this,wM,"f")[this.size-1].priority>=t.priority)return void _M(this,wM,"f").push(r);const n=function(e,t,r){let n=0,i=e.length;for(;i>0;){const o=Math.trunc(i/2);let s=n+o;r(e[s],t)<=0?(n=++s,i-=o+1):i=o}return n}(_M(this,wM,"f"),r,((e,t)=>t.priority-e.priority));_M(this,wM,"f").splice(n,0,r)}dequeue(){const e=_M(this,wM,"f").shift();return null===e||void 0===e?void 0:e.run}filter(e){return _M(this,wM,"f").filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return _M(this,wM,"f").length}};var AM,SM,kM,xM,IM,TM,PM,RM,CM,BM,MM,NM,OM,DM,LM,UM,FM,jM,qM,zM,HM,KM,VM,GM,WM,QM,JM=function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},ZM=function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class YM extends Error{}SM=new WeakMap,kM=new WeakMap,xM=new WeakMap,IM=new WeakMap,TM=new WeakMap,PM=new WeakMap,RM=new WeakMap,CM=new WeakMap,BM=new WeakMap,MM=new WeakMap,NM=new WeakMap,OM=new WeakMap,DM=new WeakMap,LM=new WeakMap,AM=new WeakSet,UM=function(){return ZM(this,kM,"f")||ZM(this,xM,"f")<ZM(this,IM,"f")},FM=function(){return ZM(this,NM,"f")<ZM(this,OM,"f")},jM=function(){var e;JM(this,NM,(e=ZM(this,NM,"f"),--e),"f"),ZM(this,AM,"m",HM).call(this),this.emit("next")},qM=function(){ZM(this,AM,"m",VM).call(this),ZM(this,AM,"m",KM).call(this),JM(this,CM,void 0,"f")},zM=function(){const e=Date.now();if(void 0===ZM(this,RM,"f")){const t=ZM(this,PM,"f")-e;if(!(t<0))return void 0===ZM(this,CM,"f")&&JM(this,CM,setTimeout((()=>{ZM(this,AM,"m",qM).call(this)}),t),"f"),!0;JM(this,xM,ZM(this,SM,"f")?ZM(this,NM,"f"):0,"f")}return!1},HM=function(){if(0===ZM(this,BM,"f").size)return ZM(this,RM,"f")&&clearInterval(ZM(this,RM,"f")),JM(this,RM,void 0,"f"),this.emit("empty"),0===ZM(this,NM,"f")&&this.emit("idle"),!1;if(!ZM(this,DM,"f")){const e=!ZM(this,AM,"a",zM);if(ZM(this,AM,"a",UM)&&ZM(this,AM,"a",FM)){const t=ZM(this,BM,"f").dequeue();return!!t&&(this.emit("active"),t(),e&&ZM(this,AM,"m",KM).call(this),!0)}}return!1},KM=function(){ZM(this,kM,"f")||void 0!==ZM(this,RM,"f")||(JM(this,RM,setInterval((()=>{ZM(this,AM,"m",VM).call(this)}),ZM(this,TM,"f")),"f"),JM(this,PM,Date.now()+ZM(this,TM,"f"),"f"))},VM=function(){0===ZM(this,xM,"f")&&0===ZM(this,NM,"f")&&ZM(this,RM,"f")&&(clearInterval(ZM(this,RM,"f")),JM(this,RM,void 0,"f")),JM(this,xM,ZM(this,SM,"f")?ZM(this,NM,"f"):0,"f"),ZM(this,AM,"m",GM).call(this)},GM=function(){for(;ZM(this,AM,"m",HM).call(this););},WM=async function(e){return new Promise(((t,r)=>{e.addEventListener("abort",(()=>{r(new YM("The task was aborted."))}),{once:!0})}))},QM=async function(e,t){return new Promise((r=>{const n=()=>{t&&!t()||(this.off(e,n),r())};this.on(e,n)}))};const XM=class extends gM{constructor(e){var t,r,n,i;if(super(),AM.add(this),SM.set(this,void 0),kM.set(this,void 0),xM.set(this,0),IM.set(this,void 0),TM.set(this,void 0),PM.set(this,0),RM.set(this,void 0),CM.set(this,void 0),BM.set(this,void 0),MM.set(this,void 0),NM.set(this,0),OM.set(this,void 0),DM.set(this,void 0),LM.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!("number"===typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:EM,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError("Expected `intervalCap` to be a number from 1 and up, got `".concat(null!==(r=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==r?r:"","` (").concat(typeof e.intervalCap,")"));if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError("Expected `interval` to be a finite number >= 0, got `".concat(null!==(i=null===(n=e.interval)||void 0===n?void 0:n.toString())&&void 0!==i?i:"","` (").concat(typeof e.interval,")"));JM(this,SM,e.carryoverConcurrencyCount,"f"),JM(this,kM,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,"f"),JM(this,IM,e.intervalCap,"f"),JM(this,TM,e.interval,"f"),JM(this,BM,new e.queueClass,"f"),JM(this,MM,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,JM(this,LM,!0===e.throwOnTimeout,"f"),JM(this,DM,!1===e.autoStart,"f")}get concurrency(){return ZM(this,OM,"f")}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError("Expected `concurrency` to be a number from 1 and up, got `".concat(e,"` (").concat(typeof e,")"));JM(this,OM,e,"f"),ZM(this,AM,"m",GM).call(this)}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t={timeout:this.timeout,throwOnTimeout:ZM(this,LM,"f"),...t},new Promise(((r,n)=>{ZM(this,BM,"f").enqueue((async()=>{var i,o,s;JM(this,NM,(o=ZM(this,NM,"f"),++o),"f"),JM(this,xM,(s=ZM(this,xM,"f"),++s),"f");try{if(null===(i=t.signal)||void 0===i?void 0:i.aborted)throw new YM("The task was aborted.");let n=e({signal:t.signal});t.timeout&&(n=function(e,t,r,n){let i;const o=new Promise(((o,s)=>{if("number"!==typeof t||1!==Math.sign(t))throw new TypeError("Expected `milliseconds` to be a positive number, got `".concat(t,"`"));if(t!==Number.POSITIVE_INFINITY){if((n={customTimers:{setTimeout:setTimeout,clearTimeout:clearTimeout},...n}).signal){const{signal:e}=n;e.aborted&&s(bM(e)),e.addEventListener("abort",(()=>{s(bM(e))}))}i=n.customTimers.setTimeout.call(void 0,(()=>{if("function"===typeof r){try{o(r())}catch(a){s(a)}return}const n="string"===typeof r?r:"Promise timed out after ".concat(t," milliseconds"),i=r instanceof Error?r:new mM(n);"function"===typeof e.cancel&&e.cancel(),s(i)}),t),(async()=>{try{o(await e)}catch(t){s(t)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()}else o(e)}));return o.clear=()=>{clearTimeout(i),i=void 0},o}(Promise.resolve(n),t.timeout)),t.signal&&(n=Promise.race([n,ZM(this,AM,"m",WM).call(this,t.signal)]));const o=await n;r(o),this.emit("completed",o)}catch(a){if(a instanceof mM&&!t.throwOnTimeout)return void r();n(a),this.emit("error",a)}finally{ZM(this,AM,"m",jM).call(this)}}),t),this.emit("add"),ZM(this,AM,"m",HM).call(this)}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return ZM(this,DM,"f")?(JM(this,DM,!1,"f"),ZM(this,AM,"m",GM).call(this),this):this}pause(){JM(this,DM,!0,"f")}clear(){JM(this,BM,new(ZM(this,MM,"f")),"f")}async onEmpty(){0!==ZM(this,BM,"f").size&&await ZM(this,AM,"m",QM).call(this,"empty")}async onSizeLessThan(e){ZM(this,BM,"f").size<e||await ZM(this,AM,"m",QM).call(this,"next",(()=>ZM(this,BM,"f").size<e))}async onIdle(){0===ZM(this,NM,"f")&&0===ZM(this,BM,"f").size||await ZM(this,AM,"m",QM).call(this,"idle")}get size(){return ZM(this,BM,"f").size}sizeBy(e){return ZM(this,BM,"f").filter(e).length}get pending(){return ZM(this,NM,"f")}get isPaused(){return ZM(this,DM,"f")}};var $M=new WeakMap;class eN{constructor(){Ye(this,$M,{writable:!0,value:[]})}enqueue(e,t){var r;const n=null===t||void 0===t?void 0:t.peerId,i=null!==(r=null===t||void 0===t?void 0:t.priority)&&void 0!==r?r:0;if(null==n)throw new Hp("missing peer id",dM.ERR_INVALID_PARAMETERS);const o={priority:i,peerId:n,run:e};if(this.size>0&&$e(this,$M)[this.size-1].priority>=i)return void $e(this,$M).push(o);const s=function(e,t,r){let n=0,i=e.length;for(;i>0;){const o=Math.trunc(i/2);let s=n+o;r(e[s],t)<=0?(n=++s,i-=o+1):i=o}return n}($e(this,$M),o,((e,t)=>t.priority-e.priority));$e(this,$M).splice(s,0,o)}dequeue(){const e=$e(this,$M).shift();return null===e||void 0===e?void 0:e.run}filter(e){if(null!=e.peerId){const t=e.peerId;return $e(this,$M).filter((e=>t.equals(e.peerId))).map((e=>e.run))}return $e(this,$M).filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return $e(this,$M).length}}class tN extends XM{constructor(){super({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},queueClass:eN})}hasJob(e){return this.sizeBy({peerId:e})>0}}const rN="last-dial-failure",nN={minConnections:5,maxQueueLength:100,autoDialConcurrency:25,autoDialPriority:0,autoDialInterval:5e3,autoDialPeerRetryThreshold:42e4,autoDialDiscoveredPeersDebounce:10};var iN=new WeakMap;class oN{constructor(e,t){var r,n,i,o,s,a,c;let u;We(this,"connectionManager",void 0),We(this,"peerStore",void 0),We(this,"queue",void 0),We(this,"minConnections",void 0),We(this,"autoDialPriority",void 0),We(this,"autoDialIntervalMs",void 0),We(this,"autoDialMaxQueueLength",void 0),We(this,"autoDialPeerRetryThresholdMs",void 0),We(this,"autoDialDiscoveredPeersDebounce",void 0),We(this,"autoDialInterval",void 0),We(this,"started",void 0),We(this,"running",void 0),Ye(this,iN,{writable:!0,value:void 0}),this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.minConnections=null!==(r=t.minConnections)&&void 0!==r?r:nN.minConnections,this.autoDialPriority=null!==(n=t.autoDialPriority)&&void 0!==n?n:nN.autoDialPriority,this.autoDialIntervalMs=null!==(i=t.autoDialInterval)&&void 0!==i?i:nN.autoDialInterval,this.autoDialMaxQueueLength=null!==(o=t.maxQueueLength)&&void 0!==o?o:nN.maxQueueLength,this.autoDialPeerRetryThresholdMs=null!==(s=t.autoDialPeerRetryThreshold)&&void 0!==s?s:nN.autoDialPeerRetryThreshold,this.autoDialDiscoveredPeersDebounce=null!==(a=t.autoDialDiscoveredPeersDebounce)&&void 0!==a?a:nN.autoDialDiscoveredPeersDebounce,et(this,iN,e.logger.forComponent("libp2p:connection-manager:auto-dial")),this.started=!1,this.running=!1,this.queue=new tN({concurrency:null!==(c=t.autoDialConcurrency)&&void 0!==c?c:nN.autoDialConcurrency}),this.queue.addListener("error",(e=>{$e(this,iN).error("error during auto-dial",e)})),e.events.addEventListener("connection:close",(()=>{this.autoDial().catch((e=>{$e(this,iN).error(e)}))})),e.events.addEventListener("peer:discovery",(()=>{clearTimeout(u),u=setTimeout((()=>{this.autoDial().catch((e=>{$e(this,iN).error(e)}))}),this.autoDialDiscoveredPeersDebounce)}))}isStarted(){return this.started}start(){this.autoDialInterval=setTimeout((()=>{this.autoDial().catch((e=>{$e(this,iN).error("error while autodialing",e)}))}),this.autoDialIntervalMs),this.started=!0}afterStart(){this.autoDial().catch((e=>{$e(this,iN).error("error while autodialing",e)}))}stop(){this.queue.clear(),clearTimeout(this.autoDialInterval),this.started=!1,this.running=!1}async autoDial(){if(!this.started)return;const e=this.connectionManager.getConnectionsMap(),t=e.size;if(t>=this.minConnections)return void(this.minConnections>0&&$e(this,iN).trace("have enough connections %d/%d",t,this.minConnections));if(this.queue.size>this.autoDialMaxQueueLength)return void $e(this,iN).call(this,"not enough connections %d/%d but auto dial queue is full",t,this.minConnections);if(this.running)return void $e(this,iN).call(this,"not enough connections %d/%d - but skipping autodial as it is already running",t,this.minConnections);this.running=!0,$e(this,iN).call(this,"not enough connections %d/%d - will dial peers to increase the number of connections",t,this.minConnections);const r=new VP(this.connectionManager.getDialQueue().map((e=>e.peerId)).filter(Boolean)),n=await this.peerStore.all({filters:[t=>0===t.addresses.length?($e(this,iN).trace("not autodialing %p because they have no addresses",t.id),!1):e.has(t.id)?($e(this,iN).trace("not autodialing %p because they are already connected",t.id),!1):r.has(t.id)?($e(this,iN).trace("not autodialing %p because they are already being dialed",t.id),!1):!this.queue.hasJob(t.id)||($e(this,iN).trace("not autodialing %p because they are already being autodialed",t.id),!1)]}),i=n.sort((()=>Math.random()>.5?1:-1)),o=new KP;for(const a of i)o.has(a.id)||o.set(a.id,[...a.tags.values()].reduce(((e,t)=>e+t.value),0));const s=i.sort(((e,t)=>{var r,n;const i=null!==(r=o.get(e.id))&&void 0!==r?r:0,s=null!==(n=o.get(t.id))&&void 0!==n?n:0;return i>s?-1:i<s?1:0})).filter((e=>{const t=e.metadata.get(rN);if(null==t)return!0;const r=parseInt(xs(t));return!!isNaN(r)||Date.now()-r>this.autoDialPeerRetryThresholdMs}));$e(this,iN).call(this,"selected %d/%d peers to dial",s.length,n.length);for(const a of s)this.queue.add((async()=>{const e=this.connectionManager.getConnectionsMap().size;if(e>=this.minConnections)return $e(this,iN).call(this,"got enough connections now %d/%d",e,this.minConnections),void this.queue.clear();$e(this,iN).call(this,"connecting to a peerStore stored peer %p",a.id),await this.connectionManager.openConnection(a.id,{priority:this.autoDialPriority})}),{peerId:a.id}).catch((e=>{$e(this,iN).error("could not connect to peerStore stored peer",e)}));this.running=!1,this.started&&(this.autoDialInterval=setTimeout((()=>{this.autoDial().catch((e=>{$e(this,iN).error("error while autodialing",e)}))}),this.autoDialIntervalMs))}}const sN={maxConnections:100,allow:[]};var aN=new WeakMap;class cN{constructor(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};We(this,"maxConnections",void 0),We(this,"connectionManager",void 0),We(this,"peerStore",void 0),We(this,"allow",void 0),We(this,"events",void 0),Ye(this,aN,{writable:!0,value:void 0}),this.maxConnections=null!==(t=n.maxConnections)&&void 0!==t?t:sN.maxConnections,this.allow=null!==(r=n.allow)&&void 0!==r?r:sN.allow,this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.events=e.events,et(this,aN,e.logger.forComponent("libp2p:connection-manager:connection-pruner")),e.events.addEventListener("connection:open",(()=>{this.maybePruneConnections().catch((e=>{$e(this,aN).error(e)}))}))}async maybePruneConnections(){const e=this.connectionManager.getConnections(),t=e.length,r=Math.max(t-this.maxConnections,0);if($e(this,aN).call(this,"checking max connections limit %d/%d",t,this.maxConnections),t<=this.maxConnections)return;$e(this,aN).call(this,"max connections limit exceeded %d/%d, pruning %d connection(s)",t,this.maxConnections,r);const n=new KP;for(const a of e){const e=a.remotePeer;if(!n.has(e)){n.set(e,0);try{const t=await this.peerStore.get(e);n.set(e,[...t.tags.values()].reduce(((e,t)=>e+t.value),0))}catch(s){"ERR_NOT_FOUND"!==s.code&&$e(this,aN).error("error loading peer tags",s)}}}const i=e.sort(((e,t)=>{var r,i;const o=null!==(r=n.get(e.remotePeer))&&void 0!==r?r:0,s=null!==(i=n.get(t.remotePeer))&&void 0!==i?i:0;if(o>s)return 1;if(o<s)return-1;const a=e.timeline.open,c=t.timeline.open;return a<c?1:a>c?-1:0})),o=[];for(const a of i){$e(this,aN).call(this,"too many connections open - closing a connection to %p",a.remotePeer);if(this.allow.some((e=>a.remoteAddr.toString().startsWith(e.toString())))||o.push(a),o.length===r)break}await Promise.all(o.map((async e=>{try{await e.close()}catch(s){$e(this,aN).error(s)}}))),this.events.safeDispatchEvent("connection:prune",{detail:o})}}function uN(e){const t=new globalThis.AbortController;function r(){t.abort();for(const t of e)null!=(null===t||void 0===t?void 0:t.removeEventListener)&&t.removeEventListener("abort",r)}for(const i of e){if(!0===(null===i||void 0===i?void 0:i.aborted)){r();break}null!=(null===i||void 0===i?void 0:i.addEventListener)&&i.addEventListener("abort",r)}const n=t.signal;return n.clear=function(){for(const t of e)null!=(null===t||void 0===t?void 0:t.removeEventListener)&&t.removeEventListener("abort",r)},n}async function lN(e,t){if(!e.protoNames().includes("dnsaddr"))return[e];const r=await async function(e,t){try{e=Zn(e.toString());return await e.resolve(t)}catch(r){return t.log.error("multiaddr ".concat(e.toString()," could not be resolved"),r),[]}}(e,t),n=(await Promise.all(r.map((async e=>lN(e,t))))).flat().reduce(((e,t)=>(null==e.find((e=>e.equals(t)))&&e.push(t),e)),[]);return t.log("resolved %s to",e,n.map((e=>e.toString()))),n}const dN={addressSorter:eM,maxParallelDials:50,maxPeerAddrsToDial:25,maxParallelDialsPerPeer:1,dialTimeout:3e4,resolvers:{dnsaddr:uM}};var hN=new WeakMap;class fN{constructor(e){var t,r,n,i,o,s,a,c;let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};We(this,"pendingDials",void 0),We(this,"queue",void 0),We(this,"peerId",void 0),We(this,"peerStore",void 0),We(this,"connectionGater",void 0),We(this,"transportManager",void 0),We(this,"addressSorter",void 0),We(this,"maxPeerAddrsToDial",void 0),We(this,"maxParallelDialsPerPeer",void 0),We(this,"dialTimeout",void 0),We(this,"inProgressDialCount",void 0),We(this,"pendingDialCount",void 0),We(this,"shutDownController",void 0),We(this,"connections",void 0),Ye(this,hN,{writable:!0,value:void 0}),this.addressSorter=null!==(t=u.addressSorter)&&void 0!==t?t:dN.addressSorter,this.maxPeerAddrsToDial=null!==(r=u.maxPeerAddrsToDial)&&void 0!==r?r:dN.maxPeerAddrsToDial,this.maxParallelDialsPerPeer=null!==(n=u.maxParallelDialsPerPeer)&&void 0!==n?n:dN.maxParallelDialsPerPeer,this.dialTimeout=null!==(i=u.dialTimeout)&&void 0!==i?i:dN.dialTimeout,this.connections=null!==(o=u.connections)&&void 0!==o?o:new KP,et(this,hN,e.logger.forComponent("libp2p:connection-manager:dial-queue")),this.peerId=e.peerId,this.peerStore=e.peerStore,this.connectionGater=e.connectionGater,this.transportManager=e.transportManager,this.shutDownController=new AbortController,JA(1/0,this.shutDownController.signal),this.pendingDialCount=null===(s=e.metrics)||void 0===s?void 0:s.registerMetric("libp2p_dialler_pending_dials"),this.inProgressDialCount=null===(a=e.metrics)||void 0===a?void 0:a.registerMetric("libp2p_dialler_in_progress_dials"),this.pendingDials=[];for(const[d,h]of Object.entries(null!==(l=u.resolvers)&&void 0!==l?l:{})){var l;Qn.set(d,h)}this.queue=new XM({concurrency:null!==(c=u.maxParallelDials)&&void 0!==c?c:dN.maxParallelDials}),this.queue.on("add",(()=>{var e,t;null===(e=this.pendingDialCount)||void 0===e||e.update(this.queue.size),null===(t=this.inProgressDialCount)||void 0===t||t.update(this.queue.pending)})),this.queue.on("active",(()=>{var e,t;null===(e=this.pendingDialCount)||void 0===e||e.update(this.queue.size),null===(t=this.inProgressDialCount)||void 0===t||t.update(this.queue.pending)})),this.queue.on("completed",(()=>{var e,t;null===(e=this.pendingDialCount)||void 0===e||e.update(this.queue.size),null===(t=this.inProgressDialCount)||void 0===t||t.update(this.queue.pending)})),this.queue.on("error",(e=>{var t,r;$e(this,hN).error("error in dial queue",e),null===(t=this.pendingDialCount)||void 0===t||t.update(this.queue.size),null===(r=this.inProgressDialCount)||void 0===r||r.update(this.queue.pending)})),this.queue.on("empty",(()=>{var e,t;null===(e=this.pendingDialCount)||void 0===e||e.update(this.queue.size),null===(t=this.inProgressDialCount)||void 0===t||t.update(this.queue.pending)})),this.queue.on("idle",(()=>{var e,t;null===(e=this.pendingDialCount)||void 0===e||e.update(this.queue.size),null===(t=this.inProgressDialCount)||void 0===t||t.update(this.queue.pending)}))}stop(){this.shutDownController.abort()}async dial(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{peerId:r,multiaddrs:n}=pM(e),i=n.map((e=>({multiaddr:e,isCertified:!1}))),o=this.createDialAbortControllers(t.signal);let s;try{s=await this.calculateMultiaddrs(r,i,{...t,signal:o})}catch(d){throw o.clear(),d}let a=Array.from(this.connections.values()).flat().find((e=>!0!==t.force&&s.find((t=>t.multiaddr.equals(e.remoteAddr)))));if(null!=a)return $e(this,hN).call(this,"already connected to %a",a.remoteAddr),a;const c=this.pendingDials.find((e=>!(null==e.peerId||null==r||!e.peerId.equals(r))||s.map((e=>{let{multiaddr:t}=e;return t.toString()})).join()===e.multiaddrs.map((e=>e.toString())).join()));if(null!=c)return $e(this,hN).call(this,"joining existing dial target for %p",r),o.clear(),c.promise;$e(this,hN).call(this,"creating dial target for",s.map((e=>{let{multiaddr:t}=e;return t.toString()})));const u={id:"".concat(parseInt(String(1e9*Math.random()),10).toString()).concat(Date.now()),status:"queued",peerId:r,multiaddrs:s.map((e=>{let{multiaddr:t}=e;return t}))};u.promise=this.performDial(u,{...t,signal:o}).finally((()=>{this.pendingDials=this.pendingDials.filter((e=>e.id!==u.id)),o.clear()})).catch((async e=>{if($e(this,hN).error("dial failed to %s",u.multiaddrs.map((e=>e.toString())).join(", "),e),null!=r)try{await this.peerStore.patch(r,{metadata:{[rN]:ks(Date.now().toString())}})}catch(e){$e(this,hN).error("could not update last dial failure key for %p",r,e)}if(o.aborted){throw new Hp(e.message,dM.ERR_TIMEOUT)}throw e})),this.pendingDials.push(u);const l=await u.promise;return a=Array.from(this.connections.values()).flat().find((e=>!0!==t.force&&(e.id!==l.id&&e.remoteAddr.equals(l.remoteAddr)))),null!=a?($e(this,hN).call(this,"already connected to %a",a.remoteAddr),await l.close(),a):($e(this,hN).call(this,"connection opened to %a",l.remoteAddr),l)}createDialAbortControllers(e){const t=uN([AbortSignal.timeout(this.dialTimeout),this.shutDownController.signal,e]);try{null===JA||void 0===JA||JA(1/0,t)}catch{}return t}async calculateMultiaddrs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=e){var n,i;if(this.peerId.equals(e))throw new Hp("Tried to dial self",dM.ERR_DIALED_SELF);if(!0===await(null===(n=(i=this.connectionGater).denyDialPeer)||void 0===n?void 0:n.call(i,e)))throw new Hp("The dial request is blocked by gater.allowDialPeer",dM.ERR_PEER_DIAL_INTERCEPTED);if(0===t.length){$e(this,hN).call(this,"loading multiaddrs for %p",e);try{const r=await this.peerStore.get(e);t.push(...r.addresses),$e(this,hN).call(this,"loaded multiaddrs for %p",e,t.map((e=>{let{multiaddr:t}=e;return t.toString()})))}catch(d){if(d.code!==dM.ERR_NOT_FOUND)throw d}}}let o=(await Promise.all(t.map((async e=>{const t=await lN(e.multiaddr,{...r,log:$e(this,hN)});return 1===t.length&&t[0].equals(e.multiaddr)?e:t.map((e=>({multiaddr:e,isCertified:!1})))})))).flat();if(null!=e){const t="/p2p/".concat(e.toString());o=o.map((e=>{const r=e.multiaddr.protos().pop();return!0===(null===r||void 0===r?void 0:r.path)?e:null==e.multiaddr.getPeerId()?{multiaddr:e.multiaddr.encapsulate(t),isCertified:e.isCertified}:e}))}const s=o.filter((t=>{if(null==this.transportManager.transportForMultiaddr(t.multiaddr))return!1;const r=t.multiaddr.getPeerId();return null==e||null==r||e.equals(r)})),a=new Map;for(const h of s){const e=h.multiaddr.toString(),t=a.get(e);null==t?a.set(e,h):t.isCertified=t.isCertified||h.isCertified||!1}const c=[...a.values()];if((0===c.length||c.length>this.maxPeerAddrsToDial)&&($e(this,hN).call(this,"addresses for %p before filtering",null!==e&&void 0!==e?e:"unknown peer",o.map((e=>{let{multiaddr:t}=e;return t.toString()}))),$e(this,hN).call(this,"addresses for %p after filtering",null!==e&&void 0!==e?e:"unknown peer",c.map((e=>{let{multiaddr:t}=e;return t.toString()})))),0===c.length)throw new Hp("The dial request has no valid addresses",dM.ERR_NO_VALID_ADDRESSES);if(c.length>this.maxPeerAddrsToDial)throw new Hp("dial with more addresses than allowed",dM.ERR_TOO_MANY_ADDRESSES);const u=[];for(const h of c)null!=this.connectionGater.denyDialMultiaddr&&await this.connectionGater.denyDialMultiaddr(h.multiaddr)||u.push(h);const l=u.sort(this.addressSorter);if(0===l.length)throw new Hp("The connection gater denied all addresses in the dial request",dM.ERR_NO_VALID_ADDRESSES);return l}async performDial(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e.multiaddrs.map((()=>new AbortController));try{const n=new XM({concurrency:this.maxParallelDialsPerPeer});n.on("error",(e=>{$e(this,hN).error("error dialling",e)}));const i=await Promise.any(e.multiaddrs.map((async(i,o)=>{const s=r[o];if(null==s)throw new Hp("dialAction did not come with an AbortController",dM.ERR_INVALID_PARAMETERS);const a=function(){const e=[];for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(const o of r)null!=o&&(JA(1/0,o),e.push(o));const i=uN(e);return JA(1/0,i),i}(s.signal,t.signal);a.addEventListener("abort",(()=>{$e(this,hN).call(this,"dial to %a aborted",i)}));const c=uy();return await n.add((async()=>{if(a.aborted)return $e(this,hN).call(this,"dial to %a was aborted before reaching the head of the peer dial queue",i),void c.reject(new zp);await this.queue.add((async()=>{try{if(a.aborted)return $e(this,hN).call(this,"dial to %a was aborted before reaching the head of the dial queue",i),void c.reject(new zp);e.status="active";const n=await this.transportManager.dial(i,{...t,signal:a});if(s.signal.aborted)return $e(this,hN).call(this,"multiple dials succeeded, closing superfluous connection"),n.close().catch((e=>{$e(this,hN).error("error closing superfluous connection",e)})),void c.reject(new zp);r[o]=void 0,r.forEach((e=>{void 0!==e&&e.abort()})),$e(this,hN).call(this,"dial to %a succeeded",i),c.resolve(n)}catch(n){$e(this,hN).error("error during dial of %a",i,n),c.reject(n)}}),{...t,signal:a}).catch((e=>{c.reject(e)}))}),{signal:a}).catch((e=>{c.reject(e)})).finally((()=>{a.clear()})),c.promise})));if(null==i)throw new Hp("successful dial led to empty object returned from peer dial queue",dM.ERR_TRANSPORT_DIAL_FAILED);return e.status="success",i}catch(n){if(e.status="error",1===e.multiaddrs.length&&"AggregateError"===n.name)throw n.errors[0];throw n}}}const pN=5,gN=100,mN=5,yN=10,vN=25,bN=0,wN=100;var _N=new WeakMap;class EN{constructor(e){var t,r,n,i,o,s,a,c,u,l,d,h,f,p,g;let m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};We(this,"started",void 0),We(this,"connections",void 0),We(this,"allow",void 0),We(this,"deny",void 0),We(this,"maxIncomingPendingConnections",void 0),We(this,"incomingPendingConnections",void 0),We(this,"maxConnections",void 0),We(this,"dialQueue",void 0),We(this,"autoDial",void 0),We(this,"connectionPruner",void 0),We(this,"inboundConnectionRateLimiter",void 0),We(this,"peerStore",void 0),We(this,"metrics",void 0),We(this,"events",void 0),Ye(this,_N,{writable:!0,value:void 0}),this.maxConnections=null!==(t=m.maxConnections)&&void 0!==t?t:gN;const y=null!==(r=m.minConnections)&&void 0!==r?r:pN;if(this.maxConnections<y)throw new Hp("Connection Manager maxConnections must be greater than minConnections",dM.ERR_INVALID_PARAMETERS);this.connections=new KP,this.started=!1,this.peerStore=e.peerStore,this.metrics=e.metrics,this.events=e.events,et(this,_N,e.logger.forComponent("libp2p:connection-manager")),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.events.addEventListener("connection:open",this.onConnect),this.events.addEventListener("connection:close",this.onDisconnect),this.allow=(null!==(n=m.allow)&&void 0!==n?n:[]).map((e=>Zn(e))),this.deny=(null!==(i=m.deny)&&void 0!==i?i:[]).map((e=>Zn(e))),this.incomingPendingConnections=0,this.maxIncomingPendingConnections=null!==(o=m.maxIncomingPendingConnections)&&void 0!==o?o:yN,this.inboundConnectionRateLimiter=new Lw.RateLimiterMemory({points:null!==(s=m.inboundConnectionThreshold)&&void 0!==s?s:mN,duration:1}),this.autoDial=new oN({connectionManager:this,peerStore:e.peerStore,events:e.events,logger:e.logger},{minConnections:y,autoDialConcurrency:null!==(a=m.autoDialConcurrency)&&void 0!==a?a:vN,autoDialPriority:null!==(c=m.autoDialPriority)&&void 0!==c?c:bN,maxQueueLength:null!==(u=m.autoDialMaxQueueLength)&&void 0!==u?u:wN}),this.connectionPruner=new cN({connectionManager:this,peerStore:e.peerStore,events:e.events,logger:e.logger},{maxConnections:this.maxConnections,allow:this.allow}),this.dialQueue=new fN({peerId:e.peerId,metrics:e.metrics,peerStore:e.peerStore,transportManager:e.transportManager,connectionGater:e.connectionGater,logger:e.logger},{addressSorter:null!==(l=m.addressSorter)&&void 0!==l?l:eM,maxParallelDials:null!==(d=m.maxParallelDials)&&void 0!==d?d:50,maxPeerAddrsToDial:null!==(h=m.maxPeerAddrsToDial)&&void 0!==h?h:25,maxParallelDialsPerPeer:null!==(f=m.maxParallelDialsPerPeer)&&void 0!==f?f:1,dialTimeout:null!==(p=m.dialTimeout)&&void 0!==p?p:3e4,resolvers:null!==(g=m.resolvers)&&void 0!==g?g:{dnsaddr:uM},connections:this.connections})}isStarted(){return this.started}async start(){var e,t,r;null===(e=this.metrics)||void 0===e||e.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{const e={inbound:0,outbound:0};for(const t of this.connections.values())for(const r of t)"inbound"===r.direction?e.inbound++:e.outbound++;return e}}),null===(t=this.metrics)||void 0===t||t.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{const e={};for(const n of this.connections.values())for(const i of n)for(const n of i.streams){var t,r;const i="".concat(n.direction," ").concat(null!==(t=n.protocol)&&void 0!==t?t:"unnegotiated");e[i]=(null!==(r=e[i])&&void 0!==r?r:0)+1}return e}}),null===(r=this.metrics)||void 0===r||r.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{const e={};for(const o of this.connections.values())for(const i of o){const o={};for(const e of i.streams){var t,r;const n="".concat(e.direction," ").concat(null!==(t=e.protocol)&&void 0!==t?t:"unnegotiated");o[n]=(null!==(r=o[n])&&void 0!==r?r:0)+1}for(const[t,r]of Object.entries(o)){var n;e[t]=null!==(n=e[t])&&void 0!==n?n:[],e[t].push(r)}}const i={};for(let[o,s]of Object.entries(e)){s=s.sort(((e,t)=>e-t));const e=Math.floor(.9*s.length);i[o]=s[e]}return i}}),this.autoDial.start(),this.started=!0,$e(this,_N).call(this,"started")}async afterStart(){Promise.resolve().then((async()=>{const e=await this.peerStore.all({filters:[e=>e.tags.has("keep-alive")]});await Promise.all(e.map((async e=>{await this.openConnection(e.id).catch((e=>{$e(this,_N).error(e)}))})))})).catch((e=>{$e(this,_N).error(e)})),this.autoDial.afterStart()}async stop(){this.dialQueue.stop(),this.autoDial.stop();const e=[];for(const t of this.connections.values())for(const r of t)e.push((async()=>{try{await r.close()}catch(e){$e(this,_N).error(e)}})());$e(this,_N).call(this,"closing %d connections",e.length),await Promise.all(e),this.connections.clear(),$e(this,_N).call(this,"stopped")}onConnect(e){this._onConnect(e).catch((e=>{$e(this,_N).error(e)}))}async _onConnect(e){const{detail:t}=e;if(!this.started)return void await t.close();const r=t.remotePeer,n=this.connections.get(r);let i=!1;null!=n?n.push(t):(i=!0,this.connections.set(r,[t])),null!=r.publicKey&&"RSA"===r.type&&await this.peerStore.patch(r,{publicKey:r.publicKey}),i&&this.events.safeDispatchEvent("peer:connect",{detail:t.remotePeer})}onDisconnect(e){const{detail:t}=e;if(!this.started)return;const r=t.remotePeer;let n=this.connections.get(r);null!=n&&n.length>1?(n=n.filter((e=>e.id!==t.id)),this.connections.set(r,n)):null!=n&&(this.connections.delete(r),this.events.safeDispatchEvent("peer:disconnect",{detail:t.remotePeer}))}getConnections(e){var t;if(null!=e)return null!==(t=this.connections.get(e))&&void 0!==t?t:[];let r=[];for(const n of this.connections.values())r=r.concat(n);return r}getConnectionsMap(){return this.connections}async openConnection(e){var t,r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isStarted())throw new Hp("Not started",dM.ERR_NODE_NOT_STARTED);null===(t=n.signal)||void 0===t||t.throwIfAborted();const{peerId:i}=pM(e);if(null!=i&&!0!==n.force){$e(this,_N).call(this,"dial %p",i);const e=this.getConnections(i).find((e=>!e.transient));if(null!=e)return $e(this,_N).call(this,"had an existing non-transient connection to %p",i),e}const o=await this.dialQueue.dial(e,{...n,priority:null!==(r=n.priority)&&void 0!==r?r:50});let s=this.connections.get(o.remotePeer);null==s&&(s=[],this.connections.set(o.remotePeer,s));let a=!1;for(const c of s)c.id===o.id&&(a=!0);return a||s.push(o),o}async closeConnections(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=null!==(t=this.connections.get(e))&&void 0!==t?t:[];await Promise.all(n.map((async e=>{try{await e.close(r)}catch(t){e.abort(t)}})))}async acceptIncomingConnection(e){if(this.deny.some((t=>e.remoteAddr.toString().startsWith(t.toString()))))return $e(this,_N).call(this,"connection from %a refused - connection remote address was in deny list",e.remoteAddr),!1;if(this.allow.some((t=>e.remoteAddr.toString().startsWith(t.toString()))))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.maxIncomingPendingConnections)return $e(this,_N).call(this,"connection from %a refused - incomingPendingConnections exceeded by host",e.remoteAddr),!1;if(e.remoteAddr.isThinWaistAddress()){const t=e.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(t,1)}catch{return $e(this,_N).call(this,"connection from %a refused - inboundConnectionThreshold exceeded by host %s",e.remoteAddr,t),!1}}return this.getConnections().length<this.maxConnections?(this.incomingPendingConnections++,!0):($e(this,_N).call(this,"connection from %a refused - maxConnections exceeded",e.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}getDialQueue(){return this.dialQueue.pendingDials}}const AN=function(e,t){if(null!=e[Symbol.asyncIterator])return async function*(){for await(const r of e)yield t(r)}();const r=CC(e),{value:n,done:i}=r.next();if(!0===i)return function*(){}();const o=t(n);if("function"===typeof o.then)return async function*(){yield await o;for await(const e of r)yield t(e)}();const s=t;return function*(){yield o;for(const e of r)yield s(e)}()};async function*SN(e,t){yield*AN(e,(async e=>(await t.merge(e.id,{multiaddrs:e.multiaddrs}),e)))}function kN(e){const t=new Set;return BC(e,(e=>!t.has(e.id.toString())&&(t.add(e.id.toString()),!0)))}function xN(e){try{let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return async function*(){let r=0;for await(const t of e)r++,yield t;if(r<t)throw new Hp("more peers required, seen: ".concat(r,"  min: ").concat(t),"NOT_FOUND")}()}catch(t){return Promise.reject(t)}}class IN{constructor(e,t){var r;We(this,"routers",void 0),We(this,"started",void 0),We(this,"components",void 0),this.routers=null!==(r=t.routers)&&void 0!==r?r:[],this.started=!1,this.components=e}isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}findProviders(e){try{var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return async function*(){if(0===t.routers.length)throw new Hp("No content routers available",dM.ERR_NO_ROUTERS_AVAILABLE);yield*my(gy(...t.routers.map((t=>t.findProviders(e,r)))),(e=>SN(e,t.components.peerStore)),(e=>kN(e)),(e=>xN(e)))}()}catch(r){return Promise.reject(r)}}async provide(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0===this.routers.length)throw new Hp("No content routers available",dM.ERR_NO_ROUTERS_AVAILABLE);await Promise.all(this.routers.map((async r=>{await r.provide(e,t)})))}async put(e,t,r){if(!this.isStarted())throw new Hp(lM.NOT_STARTED_YET,dM.DHT_NOT_STARTED);await Promise.all(this.routers.map((async n=>{await n.put(e,t,r)})))}async get(e,t){if(!this.isStarted())throw new Hp(lM.NOT_STARTED_YET,dM.DHT_NOT_STARTED);return Promise.any(this.routers.map((async r=>r.get(e,t))))}}const TN=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{for await(const t of e)return t})();for(const t of e)return t},PN=Aw("libp2p:peer-routing");class RN{constructor(e,t){var r;We(this,"components",void 0),We(this,"routers",void 0),this.components=e,this.routers=null!==(r=t.routers)&&void 0!==r?r:[]}async findPeer(e,t){if(0===this.routers.length)throw new Hp("No peer routers available",dM.ERR_NO_ROUTERS_AVAILABLE);if(e.toString()===this.components.peerId.toString())throw new Hp("Should not try to find self",dM.ERR_FIND_SELF);const r=await my(gy(...this.routers.map((r=>async function*(){try{yield await r.findPeer(e,t)}catch(n){PN.error(n)}}()))),(e=>BC(e,Boolean)),(e=>SN(e,this.components.peerStore)),(async e=>TN(e)));if(null!=r)return r;throw new Hp(lM.NOT_FOUND,dM.ERR_NOT_FOUND)}async*getClosestPeers(e,t){if(0===this.routers.length)throw new Hp("No peer routers available",dM.ERR_NO_ROUTERS_AVAILABLE);yield*my(gy(...this.routers.map((r=>r.getClosestPeers(e,t)))),(e=>SN(e,this.components.peerStore)),(e=>kN(e)),(e=>xN(e)))}}const CN=Aw("libp2p:registrar");class BN{constructor(e){We(this,"topologies",void 0),We(this,"handlers",void 0),We(this,"components",void 0),this.topologies=new Map,this.handlers=new Map,this.components=e,this._onDisconnect=this._onDisconnect.bind(this),this._onPeerUpdate=this._onPeerUpdate.bind(this),this._onPeerIdentify=this._onPeerIdentify.bind(this),this.components.events.addEventListener("peer:disconnect",this._onDisconnect),this.components.events.addEventListener("peer:update",this._onPeerUpdate),this.components.events.addEventListener("peer:identify",this._onPeerIdentify)}getProtocols(){return Array.from(new Set([...this.handlers.keys()])).sort()}getHandler(e){const t=this.handlers.get(e);if(null==t)throw new Hp("No handler registered for protocol ".concat(e),dM.ERR_NO_HANDLER_FOR_PROTOCOL);return t}getTopologies(e){const t=this.topologies.get(e);return null==t?[]:[...t.values()]}async handle(e,t,r){if(this.handlers.has(e))throw new Hp("Handler already registered for protocol ".concat(e),dM.ERR_PROTOCOL_HANDLER_ALREADY_REGISTERED);const n=kP.bind({ignoreUndefined:!0})({maxInboundStreams:32,maxOutboundStreams:64},r);this.handlers.set(e,{handler:t,options:n}),await this.components.peerStore.merge(this.components.peerId,{protocols:[e]})}async unhandle(e){(Array.isArray(e)?e:[e]).forEach((e=>{this.handlers.delete(e)})),await this.components.peerStore.patch(this.components.peerId,{protocols:this.getProtocols()})}async register(e,t){if(null==t)throw new Hp("invalid topology",dM.ERR_INVALID_PARAMETERS);const r="".concat((1e9*Math.random()).toString(36)).concat(Date.now());let n=this.topologies.get(e);return null==n&&(n=new Map,this.topologies.set(e,n)),n.set(r,t),r}unregister(e){for(const[t,r]of this.topologies.entries())r.has(e)&&(r.delete(e),0===r.size&&this.topologies.delete(t))}_onDisconnect(e){const t=e.detail;this.components.peerStore.get(t).then((e=>{for(const n of e.protocols){const e=this.topologies.get(n);if(null!=e)for(const n of e.values()){var r;null===(r=n.onDisconnect)||void 0===r||r.call(n,t)}}})).catch((e=>{e.code!==dM.ERR_NOT_FOUND&&CN.error("could not inform topologies of disconnecting peer %p",t,e)}))}_onPeerUpdate(e){var t;const{peer:r,previous:n}=e.detail,i=(null!==(t=null===n||void 0===n?void 0:n.protocols)&&void 0!==t?t:[]).filter((e=>!r.protocols.includes(e)));for(const s of i){const e=this.topologies.get(s);if(null!=e)for(const t of e.values()){var o;null===(o=t.onDisconnect)||void 0===o||o.call(t,r.id)}}}_onPeerIdentify(e){const t=e.detail.protocols,r=e.detail.connection,n=e.detail.peerId;for(const o of t){const e=this.topologies.get(o);if(null!=e)for(const t of e.values()){var i;r.transient&&!0!==t.notifyOnTransient||(null===(i=t.onConnect)||void 0===i||i.call(t,n,r))}}}}class MN extends Map{constructor(e){super(),We(this,"metric",void 0);const{name:t,metrics:r}=e;this.metric=r.registerMetric(t),this.updateComponentMetric()}set(e,t){return super.set(e,t),this.updateComponentMetric(),this}delete(e){const t=super.delete(e);return this.updateComponentMetric(),t}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}const NN=Aw("libp2p:transports");class ON{constructor(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};We(this,"components",void 0),We(this,"transports",void 0),We(this,"listeners",void 0),We(this,"faultTolerance",void 0),We(this,"started",void 0),this.components=e,this.started=!1,this.transports=new Map,this.listeners=function(e){const{name:t,metrics:r}=e;let n;return n=null!=r?new MN({name:t,metrics:r}):new Map,n}({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=null!==(t=r.faultTolerance)&&void 0!==t?t:a_.FATAL_ALL}add(e){const t=e[Symbol.toStringTag];if(null==t)throw new Hp("Transport must have a valid tag",dM.ERR_INVALID_KEY);if(this.transports.has(t))throw new Hp("There is already a transport with the tag ".concat(t),dM.ERR_DUPLICATE_TRANSPORT);NN("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}isStarted(){return this.started}start(){this.started=!0}async afterStart(){const e=this.components.addressManager.getListenAddrs();await this.listen(e)}async stop(){const e=[];for(const[t,r]of this.listeners)for(NN("closing listeners for %s",t);r.length>0;){const t=r.pop();null!=t&&e.push(t.close())}await Promise.all(e),NN("all listeners closed");for(const t of this.listeners.keys())this.listeners.set(t,[]);this.started=!1}async dial(e,t){const r=this.transportForMultiaddr(e);if(null==r)throw new Hp("No transport available for address ".concat(String(e)),dM.ERR_TRANSPORT_UNAVAILABLE);try{return await r.dial(e,{...t,upgrader:this.components.upgrader})}catch(n){throw null==n.code&&(n.code=dM.ERR_TRANSPORT_DIAL_FAILED),n}}getAddrs(){let e=[];for(const t of this.listeners.values())for(const r of t)e=[...e,...r.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}getListeners(){return Array.of(...this.listeners.values()).flat()}transportForMultiaddr(e){for(const t of this.transports.values()){if(t.filter([e]).length>0)return t}}async listen(e){if(!this.isStarted())throw new Hp("Not started",dM.ERR_NODE_NOT_STARTED);if(null==e||0===e.length)return void NN("no addresses were provided for listening, this node is dial only");const t=[];for(const[n,i]of this.transports.entries()){const o=i.filter(e),s=[];for(const e of o){var r;NN("creating listener for %s on %a",n,e);const t=i.createListener({upgrader:this.components.upgrader});let o=null!==(r=this.listeners.get(n))&&void 0!==r?r:[];null==o&&(o=[],this.listeners.set(n,o)),o.push(t),t.addEventListener("listening",(()=>{this.components.events.safeDispatchEvent("transport:listening",{detail:t})})),t.addEventListener("close",(()=>{const e=o.findIndex((e=>e===t));o.splice(e,1),this.components.events.safeDispatchEvent("transport:close",{detail:t})})),s.push(t.listen(e))}if(0===s.length){t.push(n);continue}if(null==(await Promise.allSettled(s)).find((e=>"fulfilled"===e.status))&&this.faultTolerance!==a_.NO_FATAL)throw new Hp("Transport (".concat(n,") could not listen on any available address"),dM.ERR_NO_VALID_ADDRESSES)}if(t.length===this.transports.size){const e="no valid addresses were provided for transports [".concat(t.join(", "),"]");if(this.faultTolerance===a_.FATAL_ALL)throw new Hp(e,dM.ERR_NO_VALID_ADDRESSES);NN("libp2p in dial mode only: ".concat(e))}}async remove(e){var t;const r=null!==(t=this.listeners.get(e))&&void 0!==t?t:[];NN.trace("removing transport %s",e);const n=[];for(NN.trace("closing listeners for %s",e);r.length>0;){const e=r.pop();null!=e&&n.push(e.close())}await Promise.all(n),this.transports.delete(e),this.listeners.delete(e)}async removeAll(){const e=[];for(const t of this.transports.keys())e.push(this.remove(t));await Promise.all(e)}}const DN="/multistream/1.0.0",LN=1024;function UN(e){const t=fy(),r=function(e){const t=async function*(){let t=yield,r=new Xm;for await(const n of e)if(null!=t)for(r.append(n);r.length>=t;){const e=r.sublist(0,t);if(r.consume(t),t=yield e,null==t){r.length>0&&(t=yield r,r=new Xm);break}}else r.append(n),t=yield r,r=new Xm;if(null!=t)throw Object.assign(new Error("stream ended before ".concat(t," bytes became available")),{code:"ERR_UNDER_READ",buffer:r})}();return t.next(),t}(e.source),n=uy();let i;const o=e.sink(async function*(){yield*t;const e=await n.promise;yield*e}());o.catch((e=>{i=e}));return{reader:r,writer:t,stream:{sink:async e=>{null==i?(n.resolve(e),await o):await Promise.reject(i)},source:r},rest:()=>t.end(),write:t.push,read:async()=>{const e=await r.next();if(null!=e.value)return e.value}}}const FN=Aw("libp2p:mss"),jN=ks("\n");function qN(e){const t=new Xm(e,jN);return ry.single(t)}function zN(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=qN(t);!0===r.writeBytes?e.push(n.subarray()):e.push(n)}async function HN(e,t){const r=await async function(e,t){let r=1;const n={[Symbol.asyncIterator]:()=>n,next:async()=>e.next(r)};let i=n;null!=(null===t||void 0===t?void 0:t.signal)&&(i=Ow(n,t.signal));const o=e=>{r=e},s=await my(i,(e=>cy(e,{onLength:o,maxDataLength:LN})),(async e=>TN(e)));if(null==s||0===s.length)throw new Hp("no buffer returned","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");if(s.get(s.byteLength-1)!==jN[0])throw FN.error("Invalid mss message - missing newline - %s",s.subarray()),new Hp("missing newline","ERR_INVALID_MULTISTREAM_SELECT_MESSAGE");return s.sublist(0,-1)}(e,t);return xs(r.subarray())}const KN=Aw("libp2p:mss:select");async function VN(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=Array.isArray(t)?[...t]:[t];const{reader:n,writer:i,rest:o,stream:s}=UN(e),a=t.shift();if(null==a)throw new Error("At least one protocol must be specified");KN.trace('select: write ["%s", "%s"]',DN,a);!function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=new Xm;for(const i of t)n.append(qN(i));!0===r.writeBytes?e.push(n.subarray()):e.push(n)}(i,[ks(DN),ks(a)],r);let c=await HN(n,r);if(KN.trace('select: read "%s"',c),c===DN&&(c=await HN(n,r),KN.trace('select: read "%s"',c)),c===a)return o(),{stream:s,protocol:a};for(const u of t){KN.trace('select: write "%s"',u),zN(i,ks(u),r);const e=await HN(n,r);if(KN.trace('select: read "%s" for "%s"',e,u),e===u)return o(),{stream:s,protocol:u}}throw o(),new Hp("protocol selection failed","ERR_UNSUPPORTED_PROTOCOL")}const GN=Aw("libp2p:mss:handle");async function WN(e,t,r){t=Array.isArray(t)?t:[t];const{writer:n,reader:i,rest:o,stream:s}=UN(e);for(;;){const e=await HN(i,r);if(GN.trace('read "%s"',e),e!==DN){if(t.includes(e))return zN(n,ks(e),r),GN.trace('respond with "%s" for "%s"',e,e),o(),{stream:s,protocol:e};"ls"!==e?(zN(n,ks("na"),r),GN('respond with "na" for "%s"',e)):(zN(n,new Xm(...t.map((e=>qN(ks(e))))),r),GN.trace('respond with "%s" for %s',t,e))}else GN.trace('respond with "%s" for "%s"',DN,e),zN(n,ks(DN),r)}}const QN=Symbol.for("@libp2p/connection");let JN;var ZN=new WeakMap;JN=Symbol.toStringTag;class YN{constructor(e){var t;We(this,"id",void 0),We(this,"remoteAddr",void 0),We(this,"remotePeer",void 0),We(this,"direction",void 0),We(this,"timeline",void 0),We(this,"multiplexer",void 0),We(this,"encryption",void 0),We(this,"status",void 0),We(this,"transient",void 0),We(this,"tags",void 0),We(this,"_newStream",void 0),We(this,"_close",void 0),We(this,"_abort",void 0),We(this,"_getStreams",void 0),Ye(this,ZN,{writable:!0,value:void 0}),We(this,JN,"Connection"),We(this,QN,!0);const{remoteAddr:r,remotePeer:n,newStream:i,close:o,abort:s,getStreams:a}=e;this.id="".concat(parseInt(String(1e9*Math.random())).toString(36)).concat(Date.now()),this.remoteAddr=r,this.remotePeer=n,this.direction=e.direction,this.status="open",this.timeline=e.timeline,this.multiplexer=e.multiplexer,this.encryption=e.encryption,this.transient=null!==(t=e.transient)&&void 0!==t&&t,et(this,ZN,e.logger.forComponent("libp2p:connection")),null==this.remoteAddr.getPeerId()&&(this.remoteAddr=this.remoteAddr.encapsulate("/p2p/".concat(this.remotePeer))),this._newStream=i,this._close=o,this._abort=s,this._getStreams=a,this.tags=[]}get streams(){return this._getStreams()}async newStream(e,t){if("closing"===this.status)throw new Hp("the connection is being closed","ERR_CONNECTION_BEING_CLOSED");if("closed"===this.status)throw new Hp("the connection is closed","ERR_CONNECTION_CLOSED");if(Array.isArray(e)||(e=[e]),this.transient&&!0!==(null===t||void 0===t?void 0:t.runOnTransientConnection))throw new Hp("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");const r=await this._newStream(e,t);return r.direction="outbound",r}async close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("closed"!==this.status&&"closing"!==this.status){if($e(this,ZN).call(this,"closing connection to %a",this.remoteAddr),this.status="closing",null==e.signal){const t=AbortSignal.timeout(500);JA(1/0,t),e={...e,signal:t}}try{$e(this,ZN).trace("closing all streams"),await Promise.all(this.streams.map((async t=>t.close(e)))),$e(this,ZN).trace("closing underlying transport"),await this._close(e),$e(this,ZN).trace("updating timeline with close time"),this.status="closed",this.timeline.close=Date.now()}catch(t){$e(this,ZN).error("error encountered during graceful close of connection to %a",this.remoteAddr,t),this.abort(t)}}}abort(e){$e(this,ZN).error("aborting connection to %a due to error",this.remoteAddr,e),this.status="closing",this.streams.forEach((t=>{t.abort(e)})),$e(this,ZN).error("all streams aborted",this.streams.length),this._abort(e),this.timeline.close=Date.now(),this.status="closed"}}function XN(e,t,r){let n=0;return r.streams.forEach((r=>{r.direction===t&&r.protocol===e&&n++})),n}var $N=new WeakMap;class eO{constructor(e,t){var r;We(this,"components",void 0),We(this,"connectionEncryption",void 0),We(this,"muxers",void 0),We(this,"inboundUpgradeTimeout",void 0),We(this,"events",void 0),Ye(this,$N,{writable:!0,value:void 0}),this.components=e,this.connectionEncryption=new Map,et(this,$N,e.logger.forComponent("libp2p:upgrader")),t.connectionEncryption.forEach((e=>{this.connectionEncryption.set(e.protocol,e)})),this.muxers=new Map,t.muxers.forEach((e=>{this.muxers.set(e.protocol,e)})),this.inboundUpgradeTimeout=null!==(r=t.inboundUpgradeTimeout)&&void 0!==r?r:3e4,this.events=e.events}async shouldBlockConnection(e,t,r){const n=this.components.connectionGater[r];if(void 0!==n&&await n(e,t))throw new Hp("The multiaddr connection is blocked by gater.".concat(r),dM.ERR_CONNECTION_INTERCEPTED)}async upgradeInbound(e,t){if(!await this.components.connectionManager.acceptIncomingConnection(e))throw new Hp("connection denied",dM.ERR_CONNECTION_DENIED);let r,n,i,o,s;const a=AbortSignal.timeout(this.inboundUpgradeTimeout),c=()=>{e.abort(new Hp("inbound upgrade timeout",dM.ERR_TIMEOUT))};a.addEventListener("abort",c,{once:!0}),JA(1/0,a);try{var u,l,d;if(!0===await(null===(u=(l=this.components.connectionGater).denyInboundConnection)||void 0===u?void 0:u.call(l,e)))throw new Hp("The multiaddr connection is blocked by gater.acceptConnection",dM.ERR_CONNECTION_INTERCEPTED);null===(d=this.components.metrics)||void 0===d||d.trackMultiaddrConnection(e),$e(this,$N).call(this,"starting the inbound connection upgrade");let a=e;if(!0!==(null===t||void 0===t?void 0:t.skipProtection)){const t=this.components.connectionProtector;null!=t&&($e(this,$N).call(this,"protecting the inbound connection"),a=await t.protect(e))}try{if(r=a,!0!==(null===t||void 0===t?void 0:t.skipEncryption)){({conn:r,remotePeer:n,protocol:s}=await this._encryptInbound(a));const e={...a,...r};await this.shouldBlockConnection(n,e,"denyInboundEncryptedConnection")}else{const t=e.remoteAddr.getPeerId();if(null==t)throw new Hp("inbound connection that skipped encryption must have a peer id",dM.ERR_INVALID_MULTIADDR);const r=ig(t);s="native",n=r}if(i=r,null!=(null===t||void 0===t?void 0:t.muxerFactory))o=t.muxerFactory;else if(this.muxers.size>0){const e=await this._multiplexInbound({...a,...r},this.muxers);o=e.muxerFactory,i=e.stream}}catch(h){throw $e(this,$N).error("Failed to upgrade inbound connection",h),h}return await this.shouldBlockConnection(n,e,"denyInboundUpgradedConnection"),$e(this,$N).call(this,"Successfully upgraded inbound connection"),this._createConnection({cryptoProtocol:s,direction:"inbound",maConn:e,upgradedConn:i,muxerFactory:o,remotePeer:n,transient:null===t||void 0===t?void 0:t.transient})}finally{a.removeEventListener("abort",c),this.components.connectionManager.afterUpgradeInbound()}}async upgradeOutbound(e,t){var r;const n=e.remoteAddr.getPeerId();let i,o,s,a,c,u;null!=n&&(i=ig(n),await this.shouldBlockConnection(i,e,"denyOutboundConnection")),null===(r=this.components.metrics)||void 0===r||r.trackMultiaddrConnection(e),$e(this,$N).call(this,"Starting the outbound connection upgrade");let l=e;if(!0!==(null===t||void 0===t?void 0:t.skipProtection)){const t=this.components.connectionProtector;null!=t&&(l=await t.protect(e))}try{if(o=l,!0!==(null===t||void 0===t?void 0:t.skipEncryption)){({conn:o,remotePeer:s,protocol:c}=await this._encryptOutbound(l,i));const e={...l,...o};await this.shouldBlockConnection(s,e,"denyOutboundEncryptedConnection")}else{if(null==i)throw new Hp("Encryption was skipped but no peer id was passed",dM.ERR_INVALID_PEER);c="native",s=i}if(a=o,null!=(null===t||void 0===t?void 0:t.muxerFactory))u=t.muxerFactory;else if(this.muxers.size>0){const e=await this._multiplexOutbound({...l,...o},this.muxers);u=e.muxerFactory,a=e.stream}}catch(d){throw $e(this,$N).error("Failed to upgrade outbound connection",d),await e.close(d),d}return await this.shouldBlockConnection(s,e,"denyOutboundUpgradedConnection"),$e(this,$N).call(this,"Successfully upgraded outbound connection"),this._createConnection({cryptoProtocol:c,direction:"outbound",maConn:e,upgradedConn:a,muxerFactory:u,remotePeer:s,transient:null===t||void 0===t?void 0:t.transient})}_createConnection(e){var t,r,n=this;const{cryptoProtocol:i,direction:o,maConn:s,upgradedConn:a,remotePeer:c,muxerFactory:u,transient:l}=e;let d,h,f;null!=u&&(d=u.createStreamMuxer({direction:o,onIncomingStream:e=>{null!=f&&Promise.resolve().then((async()=>{var t;const r=this.components.registrar.getProtocols(),{stream:n,protocol:i}=await WN(e,r);if($e(this,$N).call(this,"%s: incoming stream opened on %s",o,i),null==f)return;const s=function(e,t){try{const{options:r}=t.getHandler(e);return r.maxInboundStreams}catch(r){if(r.code!==dM.ERR_NO_HANDLER_FOR_PROTOCOL)throw r}return 32}(i,this.components.registrar);if(XN(i,"inbound",f)===s){const t=new Hp('Too many inbound protocol streams for protocol "'.concat(i,'" - limit ').concat(s),dM.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS);throw e.abort(t),t}e.source=n.source,e.sink=n.sink,e.protocol=i,await this.components.peerStore.merge(c,{protocols:[i]}),null===(t=this.components.metrics)||void 0===t||t.trackProtocolStream(e,f),this._onStream({connection:f,stream:e,protocol:i})})).catch((async t=>{$e(this,$N).error(t),null==e.timeline.close&&await e.close()}))}}),h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==d)throw new Hp("Stream is not multiplexed",dM.ERR_MUXER_UNAVAILABLE);$e(n,$N).call(n,"%s-%s: starting new stream on %s",f.id,o,e);const r=await d.newStream();try{var i;if(null==t.signal){$e(n,$N).call(n,"No abort signal was passed while trying to negotiate protocols %s falling back to default timeout",e);const r=AbortSignal.timeout(3e4);JA(1/0,r),t={...t,signal:r}}const{stream:o,protocol:s}=await VN(r,e,t),a=function(e,t){var r;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{const{options:r}=t.getHandler(e);if(null!=r.maxOutboundStreams)return r.maxOutboundStreams}catch(i){if(i.code!==dM.ERR_NO_HANDLER_FOR_PROTOCOL)throw i}return null!==(r=n.maxOutboundStreams)&&void 0!==r?r:64}(s,n.components.registrar,t);if(XN(s,"outbound",f)>=a){const e=new Hp('Too many outbound protocol streams for protocol "'.concat(s,'" - limit ').concat(a),dM.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS);throw r.abort(e),e}return await n.components.peerStore.merge(c,{protocols:[s]}),r.source=o.source,r.sink=o.sink,r.protocol=s,null===(i=n.components.metrics)||void 0===i||i.trackProtocolStream(r,f),r}catch(s){if($e(n,$N).error("could not create new stream for protocols %s on connection with address %a",e,f.remoteAddr,s),null==r.timeline.close&&r.abort(s),null!=s.code)throw s;throw new Hp(String(s),dM.ERR_UNSUPPORTED_PROTOCOL)}},Promise.all([d.sink(a.source),a.sink(d.source)]).catch((e=>{$e(this,$N).error(e)})));const p=s.timeline;s.timeline=new Proxy(p,{set:function(){return null!=f&&"close"===(arguments.length<=1?void 0:arguments[1])&&null!=(arguments.length<=2?void 0:arguments[2])&&null==p.close&&(async()=>{try{"open"===f.status&&await f.close()}catch(e){$e(n,$N).error(e)}finally{n.events.safeDispatchEvent("connection:close",{detail:f})}})().catch((e=>{$e(n,$N).error(e)})),Reflect.set(...arguments)}}),s.timeline.upgraded=Date.now();return f=function(e){return new YN(e)}({remoteAddr:s.remoteAddr,remotePeer:c,status:"open",direction:o,timeline:s.timeline,multiplexer:null===(t=d)||void 0===t?void 0:t.protocol,encryption:i,transient:l,logger:this.components.logger,newStream:null!==(r=h)&&void 0!==r?r:()=>{throw new Hp("connection is not multiplexed",dM.ERR_CONNECTION_NOT_MULTIPLEXED)},getStreams:()=>null!=d?d.streams:[],close:async e=>{null!=d&&($e(this,$N).trace("close muxer"),await d.close(e)),$e(this,$N).trace("close maconn"),await s.close(e),$e(this,$N).trace("closed maconn")},abort:e=>{s.abort(e),null!=d&&d.abort(e)}}),this.events.safeDispatchEvent("connection:open",{detail:f}),f}_onStream(e){const{connection:t,stream:r,protocol:n}=e,{handler:i,options:o}=this.components.registrar.getHandler(n);if(t.transient&&!0!==o.runOnTransientConnection)throw new Hp("Cannot open protocol stream on transient connection","ERR_TRANSIENT_CONNECTION");i({connection:t,stream:r})}async _encryptInbound(e){const t=Array.from(this.connectionEncryption.keys());$e(this,$N).call(this,"handling inbound crypto protocol selection",t);try{const{stream:r,protocol:n}=await WN(e,t,{writeBytes:!0}),i=this.connectionEncryption.get(n);if(null==i)throw new Error("no crypto module found for ".concat(n));return $e(this,$N).call(this,"encrypting inbound connection..."),{...await i.secureInbound(this.components.peerId,r),protocol:n}}catch(r){throw new Hp(String(r),dM.ERR_ENCRYPTION_FAILED)}}async _encryptOutbound(e,t){const r=Array.from(this.connectionEncryption.keys());$e(this,$N).call(this,"selecting outbound crypto protocol",r);try{const{stream:n,protocol:i}=await VN(e,r,{writeBytes:!0}),o=this.connectionEncryption.get(i);if(null==o)throw new Error("no crypto module found for ".concat(i));return $e(this,$N).call(this,"encrypting outbound connection to %p",t),{...await o.secureOutbound(this.components.peerId,n,t),protocol:i}}catch(n){throw new Hp(String(n),dM.ERR_ENCRYPTION_FAILED)}}async _multiplexOutbound(e,t){const r=Array.from(t.keys());$e(this,$N).call(this,"outbound selecting muxer %s",r);try{const{stream:n,protocol:i}=await VN(e,r,{writeBytes:!0});$e(this,$N).call(this,"%s selected as muxer protocol",i);return{stream:n,muxerFactory:t.get(i)}}catch(n){throw $e(this,$N).error("error multiplexing outbound stream",n),new Hp(String(n),dM.ERR_MUXER_UNAVAILABLE)}}async _multiplexInbound(e,t){const r=Array.from(t.keys());$e(this,$N).call(this,"inbound handling muxers %s",r);try{const{stream:n,protocol:i}=await WN(e,r,{writeBytes:!0});return{stream:n,muxerFactory:t.get(i)}}catch(n){throw $e(this,$N).error("error multiplexing inbound stream",n),new Hp(String(n),dM.ERR_MUXER_UNAVAILABLE)}}}var tO=new WeakMap,rO=new WeakMap,nO=new WeakSet;class iO extends GA{constructor(e){var t,r,n,i,o,s,a;super(),jI(this,nO),We(this,"peerId",void 0),We(this,"peerStore",void 0),We(this,"contentRouting",void 0),We(this,"peerRouting",void 0),We(this,"keychain",void 0),We(this,"metrics",void 0),We(this,"services",void 0),We(this,"logger",void 0),We(this,"components",void 0),Ye(this,tO,{writable:!0,value:void 0}),Ye(this,rO,{writable:!0,value:void 0});const c=new GA,u=c.dispatchEvent.bind(c);c.dispatchEvent=e=>{const t=u(e),r=this.dispatchEvent(new QA(e.type,{detail:e.detail}));return t||r},JA(1/0,c),et(this,tO,!1),this.peerId=e.peerId,this.logger=null!==(t=e.logger)&&void 0!==t?t:Ew(),et(this,rO,this.logger.forComponent("libp2p")),this.services={};const l=this.components=function(){const e=new zC(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return new Proxy(e,{get(t,r,n){if("string"===typeof r&&!KC.includes(r)){const t=e.components[r];if(null==t&&!HC.includes(r))throw new Hp("".concat(r," not set"),"ERR_SERVICE_MISSING");return t}return Reflect.get(t,r,n)},set:(t,r,n)=>("string"===typeof r?e.components[r]=n:Reflect.set(t,r,n),!0)})}({peerId:e.peerId,logger:this.logger,events:c,datastore:null!==(r=e.datastore)&&void 0!==r?r:new DC,connectionGater:cB(e.connectionGater)});this.peerStore=this.configureComponent("peerStore",new TC(l,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...e.peerStore})),null!=e.metrics&&(this.metrics=this.configureComponent("metrics",e.metrics(this.components))),l.events.addEventListener("peer:update",(e=>{if(null==e.detail.previous){const t={id:e.detail.peer.id,multiaddrs:e.detail.peer.addresses.map((e=>e.multiaddr)),protocols:e.detail.peer.protocols};l.events.safeDispatchEvent("peer:discovery",{detail:t})}})),null!=e.connectionProtector&&this.configureComponent("connectionProtector",e.connectionProtector(l)),this.components.upgrader=new eO(this.components,{connectionEncryption:(null!==(n=e.connectionEncryption)&&void 0!==n?n:[]).map(((e,t)=>this.configureComponent("connection-encryption-".concat(t),e(this.components)))),muxers:(null!==(i=e.streamMuxers)&&void 0!==i?i:[]).map(((e,t)=>this.configureComponent("stream-muxers-".concat(t),e(this.components)))),inboundUpgradeTimeout:e.connectionManager.inboundUpgradeTimeout}),this.configureComponent("transportManager",new ON(this.components,e.transportManager)),this.configureComponent("connectionManager",new EN(this.components,e.connectionManager)),this.configureComponent("registrar",new BN(this.components)),this.configureComponent("addressManager",new jC(this.components,e.addresses));const d=FP.generateOptions();this.keychain=this.configureComponent("keyChain",new FP(this.components,{...d,...e.keychain}));const h=(null!==(o=e.peerRouters)&&void 0!==o?o:[]).map(((e,t)=>this.configureComponent("peer-router-".concat(t),e(this.components))));this.peerRouting=this.components.peerRouting=this.configureComponent("peerRouting",new RN(this.components,{routers:h}));const f=(null!==(s=e.contentRouters)&&void 0!==s?s:[]).map(((e,t)=>this.configureComponent("content-router-".concat(t),e(this.components))));if(this.contentRouting=this.components.contentRouting=this.configureComponent("contentRouting",new IN(this.components,{routers:f})),(null!==(a=e.peerDiscovery)&&void 0!==a?a:[]).forEach(((e,t)=>{this.configureComponent("peer-discovery-".concat(t),e(this.components)).addEventListener("peer",(e=>{qI(this,nO,oO).call(this,e)}))})),e.transports.forEach(((e,t)=>{this.components.transportManager.add(this.configureComponent("transport-".concat(t),e(this.components)))})),null!=e.services)for(const p of Object.keys(e.services)){const t=(0,e.services[p])(this.components);null!=t?(this.services[p]=t,this.configureComponent(p,t),null!=t[zI]&&($e(this,rO).call(this,"registering service %s for content routing",p),f.push(t[zI])),null!=t[HI]&&($e(this,rO).call(this,"registering service %s for peer routing",p),h.push(t[HI])),null!=t[ZA]&&($e(this,rO).call(this,"registering service %s for peer discovery",p),t[ZA].addEventListener("peer",(e=>{qI(this,nO,oO).call(this,e)})))):$e(this,rO).error("service factory %s returned null or undefined instance",p)}}configureComponent(e,t){return null==t&&$e(this,rO).error("component %s was null or undefined",e),this.components[e]=t,t}async start(){if($e(this,tO))return;et(this,tO,!0),$e(this,rO).call(this,"libp2p is starting");null==(await this.keychain.listKeys()).find((e=>"self"===e.name))&&($e(this,rO).call(this,"importing self key into keychain"),await this.keychain.importPeer("self",this.components.peerId));try{var e,t,r,n;await(null===(e=(t=this.components).beforeStart)||void 0===e?void 0:e.call(t)),await this.components.start(),await(null===(r=(n=this.components).afterStart)||void 0===r?void 0:r.call(n)),this.safeDispatchEvent("start",{detail:this}),$e(this,rO).call(this,"libp2p has started")}catch(i){throw $e(this,rO).error("An error occurred starting libp2p",i),await this.stop(),i}}async stop(){var e,t,r,n;$e(this,tO)&&($e(this,rO).call(this,"libp2p is stopping"),et(this,tO,!1),await(null===(e=(t=this.components).beforeStop)||void 0===e?void 0:e.call(t)),await this.components.stop(),await(null===(r=(n=this.components).afterStop)||void 0===r?void 0:r.call(n)),this.safeDispatchEvent("stop",{detail:this}),$e(this,rO).call(this,"libp2p has stopped"))}isStarted(){return $e(this,tO)}getConnections(e){return this.components.connectionManager.getConnections(e)}getDialQueue(){return this.components.connectionManager.getDialQueue()}getPeers(){const e=new VP;for(const t of this.components.connectionManager.getConnections())e.add(t.remotePeer);return Array.from(e)}async dial(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.components.connectionManager.openConnection(e,t)}async dialProtocol(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t)throw new Hp("no protocols were provided to open a stream",dM.ERR_INVALID_PROTOCOLS_FOR_STREAM);if(0===(t=Array.isArray(t)?t:[t]).length)throw new Hp("no protocols were provided to open a stream",dM.ERR_INVALID_PROTOCOLS_FOR_STREAM);return(await this.dial(e,r)).newStream(t,r)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;Jn(e)&&(e=ig(null!==(r=e.getPeerId())&&void 0!==r?r:""));await this.components.connectionManager.closeConnections(e,t)}async getPublicKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if($e(this,rO).call(this,"getPublicKey %p",e),null!=e.publicKey)return e.publicKey;const r=await this.peerStore.get(e);if(null!=r.id.publicKey)return r.id.publicKey;const n=gb([ks("/pk/"),e.multihash.digest]),i=await this.contentRouting.get(n,t);return lw(i),await this.peerStore.patch(e,{publicKey:i}),i}async handle(e,t,r){Array.isArray(e)||(e=[e]),await Promise.all(e.map((async e=>{await this.components.registrar.handle(e,t,r)})))}async unhandle(e){Array.isArray(e)||(e=[e]),await Promise.all(e.map((async e=>{await this.components.registrar.unhandle(e)})))}async register(e,t){return this.components.registrar.register(e,t)}unregister(e){this.components.registrar.unregister(e)}}function oO(e){const{detail:t}=e;t.id.toString()!==this.peerId.toString()?this.components.peerStore.merge(t.id,{multiaddrs:t.multiaddrs,protocols:t.protocols}).catch((e=>{$e(this,rO).error(e)})):$e(this,rO).error(new Error(dM.ERR_DISCOVERED_SELF))}async function sO(e){if(null==e.peerId){const r=e.datastore;if(null!=r)try{const t=new FP({datastore:r},kP(FP.generateOptions(),e.keychain));e.peerId=await t.exportPeerId("self")}catch(t){if("ERR_NOT_FOUND"!==t.code)throw t}}return null==e.peerId&&(e.peerId=await WP()),new iO(function(e){var t;const r=kP(hM,e);if(null==r.transports||r.transports.length<1)throw new Hp(lM.ERR_TRANSPORTS_REQUIRED,dM.ERR_TRANSPORTS_REQUIRED);if(null===r.connectionProtector&&null!=(null===(t=globalThis.process)||void 0===t||null===(t=t.env)||void 0===t?void 0:t.LIBP2P_FORCE_PNET))throw new Hp(lM.ERR_PROTECTOR_REQUIRED,dM.ERR_PROTECTOR_REQUIRED);return r}(e))}const aO="js-libp2p/".concat("0.46.21");function cO(e,t){const r=Ev(e,t),n={read:async(e,t)=>{const n=await r.read(t);return e.decode(n)},write:async(e,t,n)=>{await r.write(t.encode(e),n)},writeV:async(e,t,n)=>{await r.writeV(e.map((e=>t.encode(e))),n)},pb:e=>({read:async t=>n.read(e,t),write:async(t,r)=>n.write(t,e,r),writeV:async(t,r)=>n.writeV(t,e,r),unwrap:()=>n}),unwrap:()=>r.unwrap()};return n}var uO;!function(e){let t;e.codec=()=>(null==t&&(t=Qf((function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!1!==r.lengthDelimited&&t.fork(),null!=e.protocolVersion&&(t.uint32(42),t.string(e.protocolVersion)),null!=e.agentVersion&&(t.uint32(50),t.string(e.agentVersion)),null!=e.publicKey&&(t.uint32(10),t.bytes(e.publicKey)),null!=e.listenAddrs)for(const n of e.listenAddrs)t.uint32(18),t.bytes(n);if(null!=e.observedAddr&&(t.uint32(34),t.bytes(e.observedAddr)),null!=e.protocols)for(const n of e.protocols)t.uint32(26),t.string(n);null!=e.signedPeerRecord&&(t.uint32(66),t.bytes(e.signedPeerRecord)),!1!==r.lengthDelimited&&t.ldelim()}),((e,t)=>{const r={listenAddrs:[],protocols:[]},n=null==t?e.len:e.pos+t;for(;e.pos<n;){const t=e.uint32();switch(t>>>3){case 5:r.protocolVersion=e.string();break;case 6:r.agentVersion=e.string();break;case 1:r.publicKey=e.bytes();break;case 2:r.listenAddrs.push(e.bytes());break;case 4:r.observedAddr=e.bytes();break;case 3:r.protocols.push(e.string());break;case 8:r.signedPeerRecord=e.bytes();break;default:e.skipType(7&t)}}return r}))),t),e.encode=t=>jf(t,e.codec()),e.decode=t=>Qd(t,e.codec())}(uO||(uO={}));const lO=8192,dO={protocolPrefix:"ipfs",agentVersion:aO,timeout:6e4,maxInboundStreams:1,maxOutboundStreams:1,maxPushIncomingStreams:1,maxPushOutgoingStreams:1,maxObservedAddresses:10,maxIdentifyMessageSize:8192,runOnConnectionOpen:!0,runOnTransientConnection:!0};var hO=new WeakMap,fO=new WeakSet;class pO{constructor(e,t){var r,n,i,o,s,a,c,u,l,d,h,f,p;jI(this,fO),We(this,"identifyProtocolStr",void 0),We(this,"identifyPushProtocolStr",void 0),We(this,"host",void 0),We(this,"started",void 0),We(this,"timeout",void 0),We(this,"peerId",void 0),We(this,"peerStore",void 0),We(this,"registrar",void 0),We(this,"connectionManager",void 0),We(this,"addressManager",void 0),We(this,"maxInboundStreams",void 0),We(this,"maxOutboundStreams",void 0),We(this,"maxPushIncomingStreams",void 0),We(this,"maxPushOutgoingStreams",void 0),We(this,"maxIdentifyMessageSize",void 0),We(this,"maxObservedAddresses",void 0),We(this,"events",void 0),We(this,"runOnTransientConnection",void 0),Ye(this,hO,{writable:!0,value:void 0}),this.started=!1,this.peerId=e.peerId,this.peerStore=e.peerStore,this.registrar=e.registrar,this.addressManager=e.addressManager,this.connectionManager=e.connectionManager,this.events=e.events,et(this,hO,e.logger.forComponent("libp2p:identify")),this.identifyProtocolStr="/".concat(null!==(r=t.protocolPrefix)&&void 0!==r?r:dO.protocolPrefix,"/").concat("id","/").concat("1.0.0"),this.identifyPushProtocolStr="/".concat(null!==(n=t.protocolPrefix)&&void 0!==n?n:dO.protocolPrefix,"/").concat("id/push","/").concat("1.0.0"),this.timeout=null!==(i=t.timeout)&&void 0!==i?i:dO.timeout,this.maxInboundStreams=null!==(o=t.maxInboundStreams)&&void 0!==o?o:dO.maxInboundStreams,this.maxOutboundStreams=null!==(s=t.maxOutboundStreams)&&void 0!==s?s:dO.maxOutboundStreams,this.maxPushIncomingStreams=null!==(a=t.maxPushIncomingStreams)&&void 0!==a?a:dO.maxPushIncomingStreams,this.maxPushOutgoingStreams=null!==(c=t.maxPushOutgoingStreams)&&void 0!==c?c:dO.maxPushOutgoingStreams,this.maxIdentifyMessageSize=null!==(u=t.maxIdentifyMessageSize)&&void 0!==u?u:dO.maxIdentifyMessageSize,this.maxObservedAddresses=null!==(l=t.maxObservedAddresses)&&void 0!==l?l:dO.maxObservedAddresses,this.runOnTransientConnection=null!==(d=t.runOnTransientConnection)&&void 0!==d?d:dO.runOnTransientConnection,this.host={protocolVersion:"".concat(null!==(h=t.protocolPrefix)&&void 0!==h?h:dO.protocolPrefix,"/").concat("0.1.0"),agentVersion:null!==(f=t.agentVersion)&&void 0!==f?f:dO.agentVersion},(null!==(p=t.runOnConnectionOpen)&&void 0!==p?p:dO.runOnConnectionOpen)&&e.events.addEventListener("connection:open",(e=>{const t=e.detail;this.identify(t).catch((e=>{$e(this,hO).error("error during identify trigged by connection:open",e)}))})),e.events.addEventListener("self:peer:update",(e=>{this.push().catch((e=>{$e(this,hO).error(e)}))})),this.host.agentVersion===aO&&(rA||eA?this.host.agentVersion+=" UserAgent=".concat(globalThis.process.version):($E||nA||tA||iA)&&(this.host.agentVersion+=" UserAgent=".concat(globalThis.navigator.userAgent)))}isStarted(){return this.started}async start(){this.started||(await this.peerStore.merge(this.peerId,{metadata:{AgentVersion:ks(this.host.agentVersion),ProtocolVersion:ks(this.host.protocolVersion)}}),await this.registrar.handle(this.identifyProtocolStr,(e=>{this._handleIdentify(e).catch((e=>{$e(this,hO).error(e)}))}),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:this.runOnTransientConnection}),await this.registrar.handle(this.identifyPushProtocolStr,(e=>{this._handlePush(e).catch((e=>{$e(this,hO).error(e)}))}),{maxInboundStreams:this.maxPushIncomingStreams,maxOutboundStreams:this.maxPushOutgoingStreams,runOnTransientConnection:this.runOnTransientConnection}),this.started=!0)}async stop(){await this.registrar.unhandle(this.identifyProtocolStr),await this.registrar.unhandle(this.identifyPushProtocolStr),this.started=!1}async pushToConnections(e){var t,r;const n=this.addressManager.getAddresses().map((e=>e.decapsulateCode(An("p2p").code))),i=new nR({peerId:this.peerId,multiaddrs:n}),o=await XP.seal(i,this.peerId),s=this.registrar.getProtocols(),a=await this.peerStore.get(this.peerId),c=xs(null!==(t=a.metadata.get("AgentVersion"))&&void 0!==t?t:ks(this.host.agentVersion)),u=xs(null!==(r=a.metadata.get("ProtocolVersion"))&&void 0!==r?r:ks(this.host.protocolVersion)),l=e.map((async e=>{let t;const r=AbortSignal.timeout(this.timeout);JA(1/0,r);try{var i;t=await e.newStream([this.identifyPushProtocolStr],{signal:r,runOnTransientConnection:this.runOnTransientConnection});const a=cO(t,{maxDataLength:null!==(i=this.maxIdentifyMessageSize)&&void 0!==i?i:lO}).pb(uO);await a.write({listenAddrs:n.map((e=>e.bytes)),signedPeerRecord:o.marshal(),protocols:s,agentVersion:c,protocolVersion:u},{signal:r}),await t.close({signal:r})}catch(l){var a;$e(this,hO).error("could not push identify update to peer",l),null===(a=t)||void 0===a||a.abort(l)}}));await Promise.all(l)}async push(){if(!this.isStarted())return;const e=[];await Promise.all(this.connectionManager.getConnections().map((async t=>{try{if(!(await this.peerStore.get(t.remotePeer)).protocols.includes(this.identifyPushProtocolStr))return;e.push(t)}catch(r){if(r.code!==dM.ERR_NOT_FOUND)throw r}}))),await this.pushToConnections(e)}async _identify(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==r.signal){const e=AbortSignal.timeout(this.timeout);JA(1/0,e),r={...r,signal:e}}try{var n;t=await e.newStream([this.identifyProtocolStr],{...r,runOnTransientConnection:this.runOnTransientConnection});const i=cO(t,{maxDataLength:null!==(n=this.maxIdentifyMessageSize)&&void 0!==n?n:lO}).pb(uO),o=await i.read(r);return await t.close(r),o}catch(o){var i;throw $e(this,hO).error("error while reading identify message",o),null===(i=t)||void 0===i||i.abort(o),o}}async identify(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=await this._identify(e,r),{publicKey:i,protocols:o,observedAddr:s}=n;if(null==i)throw new Hp("public key was missing from identify message",dM.ERR_MISSING_PUBLIC_KEY);const a=await sg(i);if(!e.remotePeer.equals(a))throw new Hp("identified peer does not match the expected peer",dM.ERR_INVALID_PEER);if(this.peerId.equals(a))throw new Hp("identified peer is our own peer id?",dM.ERR_INVALID_PEER);const c=function(e){if(null!=e&&e.length>0)try{return Zn(e)}catch{}}(s);return $e(this,hO).call(this,"identify completed for peer %p and protocols %o",a,o),$e(this,hO).call(this,"our observed address is %a",c),null!=c&&this.addressManager.getObservedAddrs().length<(null!==(t=this.maxObservedAddresses)&&void 0!==t?t:1/0)&&($e(this,hO).call(this,"storing our observed address %a",c),this.addressManager.addObservedAddr(c)),qI(this,fO,gO).call(this,e,n)}async _handleIdentify(e){const{connection:t,stream:r}=e,n=AbortSignal.timeout(this.timeout);JA(1/0,n);try{var i;const e=null!==(i=this.peerId.publicKey)&&void 0!==i?i:new Uint8Array(0),o=await this.peerStore.get(this.peerId),s=this.addressManager.getAddresses().map((e=>e.decapsulateCode(An("p2p").code)));let a=o.peerRecordEnvelope;if(s.length>0&&null==a){const e=new nR({peerId:this.peerId,multiaddrs:s});a=(await XP.seal(e,this.peerId)).marshal().subarray()}let c=t.remoteAddr.bytes;FB.matches(t.remoteAddr)||(c=void 0);const u=cO(r).pb(uO);await u.write({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:e,listenAddrs:s.map((e=>e.bytes)),signedPeerRecord:a,observedAddr:c,protocols:o.protocols},{signal:n}),await r.close({signal:n})}catch(o){$e(this,hO).error("could not respond to identify request",o),r.abort(o)}}async _handlePush(e){const{connection:t,stream:r}=e;try{var n;if(this.peerId.equals(t.remotePeer))throw new Error("received push from ourselves?");const e={signal:AbortSignal.timeout(this.timeout)},i=cO(r,{maxDataLength:null!==(n=this.maxIdentifyMessageSize)&&void 0!==n?n:lO}).pb(uO),o=await i.read(e);await r.close(e),await qI(this,fO,gO).call(this,t,o)}catch(i){return $e(this,hO).error("received invalid message",i),void r.abort(i)}$e(this,hO).call(this,"handled push from %p",t.remotePeer)}}async function gO(e,t){if($e(this,hO).call(this,"received identify from %p",e.remotePeer),null==t)throw new Hp("message was null or undefined","ERR_INVALID_MESSAGE");const r={};if(t.listenAddrs.length>0&&(r.addresses=t.listenAddrs.map((e=>({isCertified:!1,multiaddr:Zn(e)})))),t.protocols.length>0&&(r.protocols=t.protocols),null!=t.publicKey){r.publicKey=t.publicKey;if(!(await sg(t.publicKey)).equals(e.remotePeer))throw new Hp("public key did not match remote PeerId","ERR_INVALID_PUBLIC_KEY")}let n;if(null!=t.signedPeerRecord){$e(this,hO).call(this,"received signedPeerRecord in push from %p",e.remotePeer);let i=t.signedPeerRecord;const s=await XP.openAndCertify(i,nR.DOMAIN);let a,c=nR.createFromProtobuf(s.payload);if(!c.peerId.equals(s.peerId))throw new Hp("signing key does not match PeerId in the PeerRecord","ERR_INVALID_SIGNING_KEY");if(!e.remotePeer.equals(c.peerId))throw new Hp("signing key does not match remote PeerId","ERR_INVALID_PEER_RECORD_KEY");try{a=await this.peerStore.get(c.peerId)}catch(o){if("ERR_NOT_FOUND"!==o.code)throw o}if(null!=a&&(r.metadata=a.metadata,null!=a.peerRecordEnvelope)){const e=await XP.createFromProtobuf(a.peerRecordEnvelope),t=nR.createFromProtobuf(e.payload);t.seqNumber>=c.seqNumber&&($e(this,hO).call(this,"sequence number was lower or equal to existing sequence number - stored: %d received: %d",t.seqNumber,c.seqNumber),c=t,i=a.peerRecordEnvelope)}r.peerRecordEnvelope=i,r.addresses=c.multiaddrs.map((e=>({isCertified:!0,multiaddr:e}))),n={seq:c.seqNumber,addresses:c.multiaddrs}}else $e(this,hO).call(this,"%p did not send a signed peer record",e.remotePeer);if($e(this,hO).call(this,"patching %p with",e.remotePeer,r),await this.peerStore.patch(e.remotePeer,r),null!=t.agentVersion||null!=t.protocolVersion){const r={};null!=t.agentVersion&&(r.AgentVersion=ks(t.agentVersion)),null!=t.protocolVersion&&(r.ProtocolVersion=ks(t.protocolVersion)),$e(this,hO).call(this,"merging %p metadata",e.remotePeer,r),await this.peerStore.merge(e.remotePeer,{metadata:r})}const i={peerId:e.remotePeer,protocolVersion:t.protocolVersion,agentVersion:t.agentVersion,publicKey:t.publicKey,listenAddrs:t.listenAddrs.map((e=>Zn(e))),observedAddr:null==t.observedAddr?void 0:Zn(t.observedAddr),protocols:t.protocols,signedPeerRecord:n,connection:e};return this.events.safeDispatchEvent("peer:identify",{detail:i}),i}function mO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>new pO(t,e)}const yO=Aw("libp2p:ping");class vO{constructor(e,t){var r,n,i,o,s;We(this,"protocol",void 0),We(this,"components",void 0),We(this,"started",void 0),We(this,"timeout",void 0),We(this,"maxInboundStreams",void 0),We(this,"maxOutboundStreams",void 0),We(this,"runOnTransientConnection",void 0),this.components=e,this.started=!1,this.protocol="/".concat(null!==(r=t.protocolPrefix)&&void 0!==r?r:"ipfs","/").concat("ping","/").concat("1.0.0"),this.timeout=null!==(n=t.timeout)&&void 0!==n?n:1e4,this.maxInboundStreams=null!==(i=t.maxInboundStreams)&&void 0!==i?i:2,this.maxOutboundStreams=null!==(o=t.maxOutboundStreams)&&void 0!==o?o:1,this.runOnTransientConnection=null===(s=t.runOnTransientConnection)||void 0===s||s}async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnTransientConnection:this.runOnTransientConnection}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(e){yO("incoming ping from %p",e.connection.remotePeer);const{stream:t}=e,r=Date.now();my(t,t).catch((t=>{yO.error("incoming ping from %p failed with error",e.connection.remotePeer,t)})).finally((()=>{const t=Date.now()-r;yO("incoming ping from %p complete in %dms",e.connection.remotePeer,t)}))}async ping(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};yO("pinging %p",e);const r=Date.now(),n=jb(32),i=await this.components.connectionManager.openConnection(e,t);let o,s=()=>{};if(null==t.signal){const e=AbortSignal.timeout(this.timeout);t={...t,signal:e}}try{var a;o=await i.newStream(this.protocol,{...t,runOnTransientConnection:this.runOnTransientConnection}),s=()=>{var e;null===(e=o)||void 0===e||e.abort(new Hp("ping timeout",dM.ERR_TIMEOUT))},null===(a=t.signal)||void 0===a||a.addEventListener("abort",s,{once:!0});const e=await my([n],o,(async e=>TN(e))),c=Date.now()-r;if(null==e)throw new Hp("Did not receive a ping ack after ".concat(c,"ms"),dM.ERR_WRONG_PING_ACK);if(!Wp(n,e.subarray()))throw new Hp("Received wrong ping ack after ".concat(c,"ms"),dM.ERR_WRONG_PING_ACK);return yO("ping %p complete in %dms",i.remotePeer,c),c}catch(l){var c;throw yO.error("error while pinging %p",i.remotePeer,l),null===(c=o)||void 0===c||c.abort(l),l}finally{var u;null===(u=t.signal)||void 0===u||u.removeEventListener("abort",s),null!=o&&await o.close()}}}function bO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>new vO(t,e)}const wO={lightPush:1,filter:1,store:1},_O=e=>{if("shards"in e&&e.shards.length<1||"contentTopics"in e&&e.contentTopics.length<1)throw new Error("Missing required configuration options for static sharding or autosharding.")};async function EO(e){var t,r,n,i,o,s,a;(e=null!==(t=e)&&void 0!==t?t:{}).shardInfo&&_O(e.shardInfo);const c=null!==(r=null===(n=e)||void 0===n?void 0:n.libp2p)&&void 0!==r?r:{},u=null!==(i=c.peerDiscovery)&&void 0!==i?i:[];null!==(o=e)&&void 0!==o&&o.defaultBootstrap&&(u.push(...AO()),Object.assign(c,{peerDiscovery:u}));const l=await SO(e.shardInfo,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{e={...e,msgIdFn:e=>{let{data:t}=e;return Ni(t)},globalSignaturePolicy:Kx.StrictNoSign,fallbackToFloodsub:!1};const r=new BI(t,e);return r.multicodecs=MI,r}}(e),c,null===(s=e)||void 0===s?void 0:s.userAgent),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>new Yy(t,e)}(e),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>new Hy(t,e)}(e),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>new jy(t,e)}(e);return new qm(null!==(a=e)&&void 0!==a?a:{},e.pubsubTopics,l,e.shardInfo,d,h,f)}function AO(){return[hx([YA.PROD],wO),e=>new Ex(e)]}async function SO(e,t,r,n){null===r||void 0===r||r.hideWebSocketInfo,console.info("%cIgnore WebSocket connection failures","background: gray; color: white; font-size: x-large"),console.info("%cWaku tries to discover peers and some of them are expected to fail","background: gray; color: white; font-size: x-large");const i=t?{pubsub:t}:{},o=e?{metadata:hv(e)}:{};return async function(e){const t=await sO(e);return!1!==e.start&&await t.start(),t}({connectionManager:{minConnections:1},transports:[HA({filter:UA})],streamMuxers:[o_()],connectionEncryption:[Mw()],...r,services:{identify:mO({agentVersion:null!==n&&void 0!==n?n:Fm}),ping:bO(),...o,...i,...null===r||void 0===r?void 0:r.services}})}const kO="test2-whis-up-3/user/",xO=new(Ke().Type)("SimpleMessage").add(new(Ke().Field)("text",2,"string"));async function IO(e,t){const r=new Nm(Ls(n=kO+t,i),n);var n,i;const o=e.store.queryGenerator([r]),s=[];for await(const a of o){await Promise.all(a.map((async e=>{const t=await e,r=null===t||void 0===t?void 0:t.timestamp,n=TO(t),i={};r&&n&&(i.timestamp=r,i.message=n,s.push(i))})))}return s}function TO(e){return e&&e.payload?xO.decode(e.payload).toJSON().text:null}var PO=e=>"checkbox"===e.type,RO=e=>e instanceof Date,CO=e=>null==e;const BO=e=>"object"===typeof e;var MO=e=>!CO(e)&&!Array.isArray(e)&&BO(e)&&!RO(e),NO=e=>MO(e)&&e.target?PO(e.target)?e.target.checked:e.target.value:e,OO=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),DO=e=>{const t=e.constructor&&e.constructor.prototype;return MO(t)&&t.hasOwnProperty("isPrototypeOf")},LO="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function UO(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(LO&&(e instanceof Blob||e instanceof FileList)||!r&&!MO(e))return e;if(t=r?[]:{},r||DO(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=UO(e[r]));else t=e}return t}var FO=e=>Array.isArray(e)?e.filter(Boolean):[],jO=e=>void 0===e,qO=(e,t,r)=>{if(!t||!MO(e))return r;const n=FO(t.split(/[,[\].]+?/)).reduce(((e,t)=>CO(e)?e:e[t]),e);return jO(n)||n===e?jO(e[t])?r:e[t]:n},zO=e=>"boolean"===typeof e;const HO={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},KO={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},VO="max",GO="min",WO="maxLength",QO="minLength",JO="pattern",ZO="required",YO="validate";qe.createContext(null);var XO=function(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const i=o;return t._proxyFormState[i]!==KO.all&&(t._proxyFormState[i]=!n||KO.all),r&&(r[i]=!0),e[i]}});return i},$O=e=>MO(e)&&!Object.keys(e).length,eD=(e,t,r,n)=>{r(e);const{name:i,...o}=e;return $O(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find((e=>t[e]===(!n||KO.all)))},tD=e=>Array.isArray(e)?e:[e];function rD(e){const t=qe.useRef(e);t.current=e,qe.useEffect((()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}}),[e.disabled])}var nD=e=>"string"===typeof e,iD=(e,t,r,n,i)=>nD(e)?(n&&t.watch.add(e),qO(r,e,i)):Array.isArray(e)?e.map((e=>(n&&t.watch.add(e),qO(r,e)))):(n&&(t.watchAll=!0),r);var oD=e=>/^\w*$/.test(e),sD=e=>FO(e.replace(/["|']|\]/g,"").split(/\.|\[/)),aD=(e,t,r)=>{let n=-1;const i=oD(t)?[t]:sD(t),o=i.length,s=o-1;for(;++n<o;){const t=i[n];let o=r;if(n!==s){const r=e[t];o=MO(r)||Array.isArray(r)?r:isNaN(+i[n+1])?{}:[]}e[t]=o,e=e[t]}return e};var cD=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},uD=e=>({isOnSubmit:!e||e===KO.onSubmit,isOnBlur:e===KO.onBlur,isOnChange:e===KO.onChange,isOnAll:e===KO.all,isOnTouch:e===KO.onTouched}),lD=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length)))));const dD=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const r=qO(e,i);if(r){const{_f:e,...o}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!n)break;if(e.ref&&t(e.ref,e.name)&&!n)break;dD(o,t)}else MO(o)&&dD(o,t)}}};var hD=(e,t,r)=>{const n=FO(qO(e,r));return aD(n,"root",t[r]),aD(e,r,n),e},fD=e=>"file"===e.type,pD=e=>"function"===typeof e,gD=e=>{if(!LO)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},mD=e=>nD(e),yD=e=>"radio"===e.type,vD=e=>e instanceof RegExp;const bD={value:!1,isValid:!1},wD={value:!0,isValid:!0};var _D=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!jO(e[0].attributes.value)?jO(e[0].value)||""===e[0].value?wD:{value:e[0].value,isValid:!0}:wD:bD}return bD};const ED={isValid:!1,value:null};var AD=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),ED):ED;function SD(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(mD(e)||Array.isArray(e)&&e.every(mD)||zO(e)&&!e)return{type:r,message:mD(e)?e:"",ref:t}}var kD=e=>MO(e)&&!vD(e)?e:{value:e,message:""},xD=async(e,t,r,n,i)=>{const{ref:o,refs:s,required:a,maxLength:c,minLength:u,min:l,max:d,pattern:h,validate:f,name:p,valueAsNumber:g,mount:m,disabled:y}=e._f,v=qO(t,p);if(!m||y)return{};const b=s?s[0]:o,w=e=>{n&&b.reportValidity&&(b.setCustomValidity(zO(e)?"":e||""),b.reportValidity())},_={},E=yD(o),A=PO(o),S=E||A,k=(g||fD(o))&&jO(o.value)&&jO(v)||gD(o)&&""===o.value||""===v||Array.isArray(v)&&!v.length,x=cD.bind(null,p,r,_),I=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:WO,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:QO;const s=e?t:r;_[p]={type:e?n:i,message:s,ref:o,...x(e?n:i,s)}};if(i?!Array.isArray(v)||!v.length:a&&(!S&&(k||CO(v))||zO(v)&&!v||A&&!_D(s).isValid||E&&!AD(s).isValid)){const{value:e,message:t}=mD(a)?{value:!!a,message:a}:kD(a);if(e&&(_[p]={type:ZO,message:t,ref:b,...x(ZO,t)},!r))return w(t),_}if(!k&&(!CO(l)||!CO(d))){let e,t;const n=kD(d),i=kD(l);if(CO(v)||isNaN(v)){const r=o.valueAsDate||new Date(v),s=e=>new Date((new Date).toDateString()+" "+e),a="time"==o.type,c="week"==o.type;nD(n.value)&&v&&(e=a?s(v)>s(n.value):c?v>n.value:r>new Date(n.value)),nD(i.value)&&v&&(t=a?s(v)<s(i.value):c?v<i.value:r<new Date(i.value))}else{const r=o.valueAsNumber||(v?+v:v);CO(n.value)||(e=r>n.value),CO(i.value)||(t=r<i.value)}if((e||t)&&(I(!!e,n.message,i.message,VO,GO),!r))return w(_[p].message),_}if((c||u)&&!k&&(nD(v)||i&&Array.isArray(v))){const e=kD(c),t=kD(u),n=!CO(e.value)&&v.length>+e.value,i=!CO(t.value)&&v.length<+t.value;if((n||i)&&(I(n,e.message,t.message),!r))return w(_[p].message),_}if(h&&!k&&nD(v)){const{value:e,message:t}=kD(h);if(vD(e)&&!v.match(e)&&(_[p]={type:JO,message:t,ref:o,...x(JO,t)},!r))return w(t),_}if(f)if(pD(f)){const e=SD(await f(v,t),b);if(e&&(_[p]={...e,...x(YO,e.message)},!r))return w(e.message),_}else if(MO(f)){let e={};for(const n in f){if(!$O(e)&&!r)break;const i=SD(await f[n](v,t),b,n);i&&(e={...i,...x(n,i.message)},w(i.message),r&&(_[p]=e))}if(!$O(e)&&(_[p]={ref:b,...e},!r))return _}return w(!0),_};function ID(e,t){const r=Array.isArray(t)?t:oD(t)?[t]:sD(t),n=1===r.length?e:function(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=jO(e)?n++:e[t[n++]];return e}(e,r),i=r.length-1,o=r[i];return n&&delete n[o],0!==i&&(MO(n)&&$O(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!jO(e[t]))return!1;return!0}(n))&&ID(e,r.slice(0,-1)),e}var TD=()=>{let e=[];return{get observers(){return e},next:t=>{for(const r of e)r.next&&r.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}},PD=e=>CO(e)||!BO(e);function RD(e,t){if(PD(e)||PD(t))return e===t;if(RO(e)&&RO(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const i of r){const r=e[i];if(!n.includes(i))return!1;if("ref"!==i){const e=t[i];if(RO(r)&&RO(e)||MO(r)&&MO(e)||Array.isArray(r)&&Array.isArray(e)?!RD(r,e):r!==e)return!1}}return!0}var CD=e=>"select-multiple"===e.type,BD=e=>yD(e)||PO(e),MD=e=>gD(e)&&e.isConnected,ND=e=>{for(const t in e)if(pD(e[t]))return!0;return!1};function OD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=Array.isArray(e);if(MO(e)||r)for(const n in e)Array.isArray(e[n])||MO(e[n])&&!ND(e[n])?(t[n]=Array.isArray(e[n])?[]:{},OD(e[n],t[n])):CO(e[n])||(t[n]=!0);return t}function DD(e,t,r){const n=Array.isArray(e);if(MO(e)||n)for(const i in e)Array.isArray(e[i])||MO(e[i])&&!ND(e[i])?jO(t)||PD(r[i])?r[i]=Array.isArray(e[i])?OD(e[i],[]):{...OD(e[i])}:DD(e[i],CO(t)?{}:t[i],r[i]):r[i]=!RD(e[i],t[i]);return r}var LD=(e,t)=>DD(e,t,OD(t)),UD=(e,t)=>{let{valueAsNumber:r,valueAsDate:n,setValueAs:i}=t;return jO(e)?e:r?""===e?NaN:e?+e:e:n&&nD(e)?new Date(e):i?i(e):e};function FD(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return fD(t)?t.files:yD(t)?AD(e.refs).value:CD(t)?[...t.selectedOptions].map((e=>{let{value:t}=e;return t})):PO(t)?_D(e.refs).value:UD(jO(t.value)?e.ref.value:t.value,e)}var jD=(e,t,r,n)=>{const i={};for(const o of e){const e=qO(t,o);e&&aD(i,o,e._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},qD=e=>jO(e)?e:vD(e)?e.source:MO(e)?vD(e.value)?e.value.source:e.value:e,zD=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function HD(e,t,r){const n=qO(e,r);if(n||oD(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const n=i.join("."),o=qO(t,n),s=qO(e,n);if(o&&!Array.isArray(o)&&r!==n)return{name:r};if(s&&s.type)return{name:n,error:s};i.pop()}return{name:r}}var KD=(e,t,r,n,i)=>!i.isOnAll&&(!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:!(r?n.isOnChange:i.isOnChange)||e),VD=(e,t)=>!FO(qO(e,t)).length&&ID(e,t);const GD={mode:KO.onSubmit,reValidateMode:KO.onChange,shouldFocusError:!0};function WD(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n={...GD,...t},i={submitCount:0,isDirty:!1,isLoading:pD(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:n.errors||{},disabled:n.disabled||!1},o={},s=(MO(n.defaultValues)||MO(n.values))&&UO(n.defaultValues||n.values)||{},a=n.shouldUnregister?{}:UO(s),c={action:!1,mount:!1,watch:!1},u={mount:new Set,unMount:new Set,array:new Set,watch:new Set},l=0;const d={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},h={values:TD(),array:TD(),state:TD()},f=uD(n.mode),p=uD(n.reValidateMode),g=n.criteriaMode===KO.all,m=async e=>{if(d.isValid||e){const e=n.resolver?$O((await _()).errors):await E(o,!0);e!==i.isValid&&h.state.next({isValid:e})}},y=e=>d.isValidating&&h.state.next({isValidating:e}),v=(e,t,r,n)=>{const i=qO(o,e);if(i){const o=qO(a,e,jO(r)?qO(s,e):r);jO(o)||n&&n.defaultChecked||t?aD(a,e,t?o:FD(i._f)):k(e,o),c.mount&&m()}},b=(e,t,r,n,a)=>{let c=!1,u=!1;const l={name:e},f=!(!qO(o,e)||!qO(o,e)._f.disabled);if(!r||n){d.isDirty&&(u=i.isDirty,i.isDirty=l.isDirty=A(),c=u!==l.isDirty);const r=f||RD(qO(s,e),t);u=!(f||!qO(i.dirtyFields,e)),r||f?ID(i.dirtyFields,e):aD(i.dirtyFields,e,!0),l.dirtyFields=i.dirtyFields,c=c||d.dirtyFields&&u!==!r}if(r){const t=qO(i.touchedFields,e);t||(aD(i.touchedFields,e,r),l.touchedFields=i.touchedFields,c=c||d.touchedFields&&t!==r)}return c&&a&&h.state.next(l),c?l:{}},w=(r,n,o,s)=>{const a=qO(i.errors,r),c=d.isValid&&zO(n)&&i.isValid!==n;var u;if(t.delayError&&o?(u=()=>((e,t)=>{aD(i.errors,e,t),h.state.next({errors:i.errors})})(r,o),e=e=>{clearTimeout(l),l=setTimeout(u,e)},e(t.delayError)):(clearTimeout(l),e=null,o?aD(i.errors,r,o):ID(i.errors,r)),(o?!RD(a,o):a)||!$O(s)||c){const e={...s,...c&&zO(n)?{isValid:n}:{},errors:i.errors,name:r};i={...i,...e},h.state.next(e)}y(!1)},_=async e=>n.resolver(a,n.context,jD(e||u.mount,o,n.criteriaMode,n.shouldUseNativeValidation)),E=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const o in e){const s=e[o];if(s){const{_f:e,...o}=s;if(e){const o=u.array.has(e.name),c=await xD(s,a,g,n.shouldUseNativeValidation&&!t,o);if(c[e.name]&&(r.valid=!1,t))break;!t&&(qO(c,e.name)?o?hD(i.errors,c,e.name):aD(i.errors,e.name,c[e.name]):ID(i.errors,e.name))}o&&await E(o,t,r)}}return r.valid},A=(e,t)=>(e&&t&&aD(a,e,t),!RD(C(),s)),S=(e,t,r)=>iD(e,u,{...c.mount?a:jO(t)?s:nD(e)?{[e]:t}:t},r,t),k=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=qO(o,e);let i=t;if(n){const r=n._f;r&&(!r.disabled&&aD(a,e,UD(t,r)),i=gD(r.ref)&&CO(t)?"":t,CD(r.ref)?[...r.ref.options].forEach((e=>e.selected=i.includes(e.value))):r.refs?PO(r.ref)?r.refs.length>1?r.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find((t=>t===e.value)):i===e.value))):r.refs[0]&&(r.refs[0].checked=!!i):r.refs.forEach((e=>e.checked=e.value===i)):fD(r.ref)?r.ref.value="":(r.ref.value=i,r.ref.type||h.values.next({name:e,values:{...a}})))}(r.shouldDirty||r.shouldTouch)&&b(e,i,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&R(e)},x=(e,t,r)=>{for(const n in t){const i=t[n],s="".concat(e,".").concat(n),a=qO(o,s);!u.array.has(e)&&PD(i)&&(!a||a._f)||RO(i)?k(s,i,r):x(s,i,r)}},I=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=qO(o,e),f=u.array.has(e),p=UO(t);aD(a,e,p),f?(h.array.next({name:e,values:{...a}}),(d.isDirty||d.dirtyFields)&&n.shouldDirty&&h.state.next({name:e,dirtyFields:LD(s,a),isDirty:A(e,p)})):!l||l._f||CO(p)?k(e,p,n):x(e,p,n),lD(e,u)&&h.state.next({...i}),h.values.next({name:e,values:{...a}}),!c.mount&&r()},T=async t=>{const r=t.target;let s=r.name,c=!0;const l=qO(o,s),v=e=>{c=Number.isNaN(e)||e===qO(a,s,e)};if(l){let A,S;const k=r.type?FD(l._f):NO(t),x=t.type===HO.BLUR||t.type===HO.FOCUS_OUT,I=!zD(l._f)&&!n.resolver&&!qO(i.errors,s)&&!l._f.deps||KD(x,qO(i.touchedFields,s),i.isSubmitted,p,f),T=lD(s,u,x);aD(a,s,k),x?(l._f.onBlur&&l._f.onBlur(t),e&&e(0)):l._f.onChange&&l._f.onChange(t);const P=b(s,k,x,!1),C=!$O(P)||T;if(!x&&h.values.next({name:s,type:t.type,values:{...a}}),I)return d.isValid&&m(),C&&h.state.next({name:s,...T?{}:P});if(!x&&T&&h.state.next({...i}),y(!0),n.resolver){const{errors:e}=await _([s]);if(v(k),c){const t=HD(i.errors,o,s),r=HD(e,o,t.name||s);A=r.error,s=r.name,S=$O(e)}}else A=(await xD(l,a,g,n.shouldUseNativeValidation))[s],v(k),c&&(A?S=!1:d.isValid&&(S=await E(o,!0)));c&&(l._f.deps&&R(l._f.deps),w(s,S,A,P))}},P=(e,t)=>{if(qO(i.errors,t)&&e.focus)return e.focus(),1},R=async function(e){let t,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=tD(e);if(y(!0),n.resolver){const n=await(async e=>{const{errors:t}=await _(e);if(e)for(const r of e){const e=qO(t,r);e?aD(i.errors,r,e):ID(i.errors,r)}else i.errors=t;return t})(jO(e)?e:a);t=$O(n),r=e?!a.some((e=>qO(n,e))):t}else e?(r=(await Promise.all(a.map((async e=>{const t=qO(o,e);return await E(t&&t._f?{[e]:t}:t)})))).every(Boolean),(r||i.isValid)&&m()):r=t=await E(o);return h.state.next({...!nD(e)||d.isValid&&t!==i.isValid?{}:{name:e},...n.resolver||!e?{isValid:t}:{},errors:i.errors,isValidating:!1}),s.shouldFocus&&!r&&dD(o,P,e?a:u.mount),r},C=e=>{const t={...s,...c.mount?a:{}};return jO(e)?t:nD(e)?qO(t,e):e.map((e=>qO(t,e)))},B=(e,t)=>({invalid:!!qO((t||i).errors,e),isDirty:!!qO((t||i).dirtyFields,e),isTouched:!!qO((t||i).touchedFields,e),error:qO((t||i).errors,e)}),M=(e,t,r)=>{const n=(qO(o,e,{_f:{}})._f||{}).ref;aD(i.errors,e,{...t,ref:n}),h.state.next({name:e,errors:i.errors,isValid:!1}),r&&r.shouldFocus&&n&&n.focus&&n.focus()},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const r of e?tD(e):u.mount)u.mount.delete(r),u.array.delete(r),t.keepValue||(ID(o,r),ID(a,r)),!t.keepError&&ID(i.errors,r),!t.keepDirty&&ID(i.dirtyFields,r),!t.keepTouched&&ID(i.touchedFields,r),!n.shouldUnregister&&!t.keepDefaultValue&&ID(s,r);h.values.next({values:{...a}}),h.state.next({...i,...t.keepDirty?{isDirty:A()}:{}}),!t.keepIsValid&&m()},O=e=>{let{disabled:t,name:r,field:n,fields:i,value:o}=e;if(zO(t)){const e=t?void 0:jO(o)?FD(n?n._f:qO(i,r)._f):o;aD(a,r,e),b(r,e,!1,!1,!0)}},D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=qO(o,e);const i=zO(t.disabled);return aD(o,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),u.mount.add(e),r?O({field:r,disabled:t.disabled,name:e,value:t.value}):v(e,!0,t.value),{...i?{disabled:t.disabled}:{},...n.progressive?{required:!!t.required,min:qD(t.min),max:qD(t.max),minLength:qD(t.minLength),maxLength:qD(t.maxLength),pattern:qD(t.pattern)}:{},name:e,onChange:T,onBlur:T,ref:i=>{if(i){D(e,t),r=qO(o,e);const n=jO(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,a=BD(n),c=r._f.refs||[];if(a?c.find((e=>e===n)):n===r._f.ref)return;aD(o,e,{_f:{...r._f,...a?{refs:[...c.filter(MD),n,...Array.isArray(qO(s,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),v(e,!1,void 0,n)}else r=qO(o,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!OO(u.array,e)||!c.action)&&u.unMount.add(e)}}},L=()=>n.shouldFocusError&&dD(o,P,u.mount),U=(e,t)=>async r=>{r&&(r.preventDefault&&r.preventDefault(),r.persist&&r.persist());let s=UO(a);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await _();i.errors=e,s=t}else await E(o);ID(i.errors,"root"),$O(i.errors)?(h.state.next({errors:{}}),await e(s,r)):(t&&await t({...i.errors},r),L(),setTimeout(L)),h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:$O(i.errors),submitCount:i.submitCount+1,errors:i.errors})},F=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=e?UO(e):s,f=UO(l),p=e&&!$O(e)?f:s;if(n.keepDefaultValues||(s=l),!n.keepValues){if(n.keepDirtyValues)for(const e of u.mount)qO(i.dirtyFields,e)?aD(p,e,qO(a,e)):I(e,qO(p,e));else{if(LO&&jO(e))for(const e of u.mount){const t=qO(o,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(gD(e)){const t=e.closest("form");if(t){t.reset();break}}}}o={}}a=t.shouldUnregister?n.keepDefaultValues?UO(s):{}:UO(p),h.array.next({values:{...p}}),h.values.next({values:{...p}})}u={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!c.mount&&r(),c.mount=!d.isValid||!!n.keepIsValid,c.watch=!!t.shouldUnregister,h.state.next({submitCount:n.keepSubmitCount?i.submitCount:0,isDirty:n.keepDirty?i.isDirty:!(!n.keepDefaultValues||RD(e,s)),isSubmitted:!!n.keepIsSubmitted&&i.isSubmitted,dirtyFields:n.keepDirtyValues?i.dirtyFields:n.keepDefaultValues&&e?LD(s,e):{},touchedFields:n.keepTouched?i.touchedFields:{},errors:n.keepErrors?i.errors:{},isSubmitSuccessful:!!n.keepIsSubmitSuccessful&&i.isSubmitSuccessful,isSubmitting:!1})},j=(e,t)=>F(pD(e)?e(a):e,t);return{control:{register:D,unregister:N,getFieldState:B,handleSubmit:U,setError:M,_executeSchema:_,_getWatch:S,_getDirty:A,_updateValid:m,_removeUnmounted:()=>{for(const e of u.unMount){const t=qO(o,e);t&&(t._f.refs?t._f.refs.every((e=>!MD(e))):!MD(t._f.ref))&&N(e)}u.unMount=new Set},_updateFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(n&&r){if(c.action=!0,l&&Array.isArray(qO(o,e))){const t=r(qO(o,e),n.argA,n.argB);u&&aD(o,e,t)}if(l&&Array.isArray(qO(i.errors,e))){const t=r(qO(i.errors,e),n.argA,n.argB);u&&aD(i.errors,e,t),VD(i.errors,e)}if(d.touchedFields&&l&&Array.isArray(qO(i.touchedFields,e))){const t=r(qO(i.touchedFields,e),n.argA,n.argB);u&&aD(i.touchedFields,e,t)}d.dirtyFields&&(i.dirtyFields=LD(s,a)),h.state.next({name:e,isDirty:A(e,t),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else aD(a,e,t)},_updateDisabledField:O,_getFieldArray:e=>FO(qO(c.mount?a:s,e,t.shouldUnregister?qO(s,e,[]):[])),_reset:F,_resetDefaultValues:()=>pD(n.defaultValues)&&n.defaultValues().then((e=>{j(e,n.resetOptions),h.state.next({isLoading:!1})})),_updateFormState:e=>{i={...i,...e}},_disableForm:e=>{zO(e)&&(h.state.next({disabled:e}),dD(o,((t,r)=>{let n=e;const i=qO(o,r);i&&zO(i._f.disabled)&&(n||(n=i._f.disabled)),t.disabled=n}),0,!1))},_subjects:h,_proxyFormState:d,_setErrors:e=>{i.errors=e,h.state.next({errors:i.errors,isValid:!1})},get _fields(){return o},get _formValues(){return a},get _state(){return c},set _state(e){c=e},get _defaultValues(){return s},get _names(){return u},set _names(e){u=e},get _formState(){return i},set _formState(e){i=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:R,register:D,handleSubmit:U,watch:(e,t)=>pD(e)?h.values.subscribe({next:r=>e(S(void 0,t),r)}):S(e,t,!0),setValue:I,getValues:C,reset:j,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qO(o,e)&&(jO(t.defaultValue)?I(e,UO(qO(s,e))):(I(e,t.defaultValue),aD(s,e,UO(t.defaultValue))),t.keepTouched||ID(i.touchedFields,e),t.keepDirty||(ID(i.dirtyFields,e),i.isDirty=t.defaultValue?A(e,UO(qO(s,e))):A()),t.keepError||(ID(i.errors,e),d.isValid&&m()),h.state.next({...i}))},clearErrors:e=>{e&&tD(e).forEach((e=>ID(i.errors,e))),h.state.next({errors:e?i.errors:{}})},unregister:N,setError:M,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=qO(o,e),n=r&&r._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:B}}var QD=__webpack_require__(184);function JD(e){let{to:t,waku:r,onClickSend:n}=e;const{register:i,handleSubmit:o,watch:s,formState:{errors:a}}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=qe.useRef(),r=qe.useRef(),[n,i]=qe.useState({isDirty:!1,isValidating:!1,isLoading:pD(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:pD(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...WD(e,(()=>i((e=>({...e}))))),formState:n});const o=t.current.control;return o._options=e,rD({subject:o._subjects.state,next:e=>{eD(e,o._proxyFormState,o._updateFormState,!0)&&i({...o._formState})}}),qe.useEffect((()=>o._disableForm(e.disabled)),[o,e.disabled]),qe.useEffect((()=>{if(o._proxyFormState.isDirty){const e=o._getDirty();e!==n.isDirty&&o._subjects.state.next({isDirty:e})}}),[o,n.isDirty]),qe.useEffect((()=>{e.values&&!RD(e.values,r.current)?(o._reset(e.values,o._options.resetOptions),r.current=e.values,i((e=>({...e})))):o._resetDefaultValues()}),[e.values,o]),qe.useEffect((()=>{e.errors&&o._setErrors(e.errors)}),[e.errors,o]),qe.useEffect((()=>{o._state.mount||(o._updateValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()})),t.current.formState=XO(n,o),t.current}();return(0,QD.jsxs)("form",{onSubmit:o((e=>{const t=e.to.toLowerCase(),i=e.message;r&&n(r,t,i)})),children:[(0,QD.jsx)("input",{defaultValue:t,...i("to")}),(0,QD.jsx)("input",{...i("message",{required:!0})}),a.message&&(0,QD.jsx)("span",{children:"This field is required"}),(0,QD.jsx)("input",{type:"submit",value:"Send"})]})}async function ZD(){const e=window.ethereum;return e||null}async function YD(e){if(e){return(await e.request({method:"eth_requestAccounts"}))[0]}return null}var XD=__webpack_require__(1766),$D=__webpack_require__(927),eL=__webpack_require__(9778);const tL=-32700,rL=-32600,nL=-32601,iL=-32602,oL=-32603,sL=-32e3,aL=-32001,cL=-32002,uL=-32003,lL=-32004,dL=-32005,hL=-32006;class fL extends Error{constructor(e,t){super(e),this.innerError=t,this.name=this.constructor.name,"function"===typeof Error.captureStackTrace?Error.captureStackTrace(new.target.constructor):this.stack=(new Error).stack}static convertToString(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e||void 0===e)return"undefined";const r=JSON.stringify(e,((e,t)=>"bigint"===typeof t?t.toString():t));return t&&["bigint","string"].includes(typeof e)?r.replace(/['\\"]+/g,""):r}toJSON(){return{name:this.name,code:this.code,message:this.message,innerError:this.innerError}}}class pL extends fL{constructor(e,t){super('Invalid value given "'.concat(fL.convertToString(e,!0),'". Error: ').concat(t,".")),this.name=this.constructor.name}}class gL extends fL{constructor(){super("Private key must be 32 bytes."),this.code=701}}class mL extends fL{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=702}}class yL extends fL{constructor(e){super('"'.concat(e,'"')),this.code=802}}class vL extends fL{constructor(){super("Invalid key derivation function"),this.code=703}}class bL extends fL{constructor(){super("Key derivation failed - possibly wrong password"),this.code=704}}class wL extends fL{constructor(){super("Unsupported key store version"),this.code=705}}class _L extends fL{constructor(){super("Password cannot be empty"),this.code=706}}class EL extends fL{constructor(){super("Initialization vector must be 16 bytes"),this.code=707}}class AL extends fL{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=709}}class SL extends fL{constructor(e,t){super(e),this.code=500,t&&(this.errorCode=t.code,this.errorReason=t.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}class kL extends SL{constructor(e){super("Connection not open",e),this.code=503}}class xL extends SL{constructor(e){super("Maximum number of reconnect attempts reached! (".concat(e,")")),this.code=505}}class IL extends SL{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=506}}class TL extends SL{constructor(e){super("Request already sent with following id: ".concat(e)),this.code=507}}class PL extends fL{constructor(e,t){super(e),this.code=300,this.receipt=t}}class RL extends fL{constructor(e,t){super("The resolver at ".concat(e,' does not implement requested method: "').concat(t,'".')),this.address=e,this.name=t,this.code=301}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}class CL extends PL{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,"object"===typeof e.data){let t;t="originalError"in e.data?e.data.originalError:e.data,this.data=t.data,this.innerError=new CL(t)}else this.data=e.data}setDecodedProperties(e,t,r){this.errorName=e,this.errorSignature=t,this.errorArgs=r}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}class BL extends PL{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=310,this.innerError=new CL(e)}}class ML extends pL{constructor(e){var t,r;super("data: ".concat(null!==(t=e.data)&&void 0!==t?t:"undefined",", input: ").concat(null!==(r=e.input)&&void 0!==r?r:"undefined"),'You can\'t have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.'),this.code=311}}class NL extends fL{constructor(e){super("ENS is not supported on network ".concat(e)),this.code=902}}class OL extends fL{constructor(){super("Network not synced"),this.code=903}}class DL extends fL{constructor(e){super('Invalid parameters passed. "'.concat("undefined"!==typeof e?e:"",'"')),this.hint=e,this.code=207}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}class LL extends fL{constructor(){super(...arguments),this.code=201}}class UL extends fL{constructor(){super("The method you're trying to call is not implemented."),this.code=202}}class FL extends fL{constructor(){super(...arguments),this.code=203}}class jL extends fL{constructor(){super(...arguments),this.code=204}}class qL extends fL{constructor(e,t){super(e),this.code=205,this.props=null!==t&&void 0!==t?t:{}}}class zL extends fL{constructor(e){super("A plugin with the namespace: ".concat(e," has already been registered.")),this.code=206}}class HL extends fL{constructor(){super(...arguments),this.code=600}}class KL extends fL{constructor(e){super('Client URL "'.concat(e,'" is invalid.')),this.code=602}}class VL extends fL{constructor(){super(...arguments),this.code=603}}class GL extends fL{constructor(){super(...arguments),this.code=604}}class WL extends pL{constructor(){super(...arguments),this.code=801}}class QL extends fL{constructor(e,t){super(e),this.receipt=t,this.code=400}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}class JL extends fL{constructor(e,t,r,n){super("Transaction has been reverted by the EVM".concat(void 0===r?"":":\n ".concat(fL.convertToString(r)))),this.reason=e,this.signature=t,this.receipt=r,this.data=n,this.code=402}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}class ZL extends JL{constructor(e,t,r,n,i,o,s){super(e),this.reason=e,this.customErrorName=t,this.customErrorDecodedSignature=r,this.customErrorArguments=n,this.signature=i,this.receipt=o,this.data=s,this.code=438}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}}class YL extends QL{constructor(e){super("Transaction has been reverted by the EVM".concat(void 0===e?"":":\n ".concat(fL.convertToString(e))),e),this.code=405}}class XL extends QL{constructor(){super("Raw transaction undefined"),this.code=407}}class $L extends QL{constructor(){super("Transaction not found"),this.code=430}}class eU extends pL{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=408}}class tU extends pL{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=437}}class rU extends pL{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=410}}class nU extends pL{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=411}}class iU extends pL{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=412}}class oU extends pL{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=435}}class sU extends pL{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=436}}class aU extends pL{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=413}}class cU extends pL{constructor(e){var t,r;super("MissingChainOrHardforkError",'When specifying chain and hardfork, both values must be defined. Received "chain": '.concat(null!==(t=e.chain)&&void 0!==t?t:"undefined",', "hardfork": ').concat(null!==(r=e.hardfork)&&void 0!==r?r:"undefined")),this.code=414}}class uU extends fL{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=440}}class lU extends pL{constructor(e){var t,r,n,i;super("gas: ".concat(null!==(t=e.gas)&&void 0!==t?t:"undefined",", gasPrice: ").concat(null!==(r=e.gasPrice)&&void 0!==r?r:"undefined",", maxPriorityFeePerGas: ").concat(null!==(n=e.maxPriorityFeePerGas)&&void 0!==n?n:"undefined",", maxFeePerGas: ").concat(null!==(i=e.maxFeePerGas)&&void 0!==i?i:"undefined"),'"gas" is missing'),this.code=415,this.innerError=new uU}}class dU extends fL{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=441}}class hU extends pL{constructor(e){var t,r,n,i;super("gas: ".concat(null!==(t=e.gas)&&void 0!==t?t:"undefined",", gasPrice: ").concat(null!==(r=e.gasPrice)&&void 0!==r?r:"undefined",", maxPriorityFeePerGas: ").concat(null!==(n=e.maxPriorityFeePerGas)&&void 0!==n?n:"undefined",", maxFeePerGas: ").concat(null!==(i=e.maxFeePerGas)&&void 0!==i?i:"undefined"),"transaction must specify legacy or fee market gas properties, not both"),this.code=434,this.innerError=new dU}}class fU extends pL{constructor(e){var t,r;super("gas: ".concat(null!==(t=e.gas)&&void 0!==t?t:"undefined",", gasPrice: ").concat(null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"),"Gas or gasPrice is lower than 0"),this.code=416}}class pU extends pL{constructor(e){var t,r;super("maxPriorityFeePerGas: ".concat(null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined",", maxFeePerGas: ").concat(null!==(r=e.maxFeePerGas)&&void 0!==r?r:"undefined"),"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=417}}class gU extends pL{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=418}}class mU extends pL{constructor(e){var t,r;super("maxPriorityFeePerGas: ".concat(null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined",", maxFeePerGas: ").concat(null!==(r=e.maxFeePerGas)&&void 0!==r?r:"undefined"),"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=419}}class yU extends pL{constructor(e){super(e,"invalid transaction object"),this.code=420}}class vU extends pL{constructor(e){var t,r;super("nonce: ".concat(null!==(t=e.nonce)&&void 0!==t?t:"undefined",", chainId: ").concat(null!==(r=e.chainId)&&void 0!==r?r:"undefined"),"Nonce or chainId is lower than 0"),this.code=421}}class bU extends pL{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=422}}class wU extends pL{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=423}}class _U extends pL{constructor(e){super(e,"unsupported transaction type"),this.code=424}}class EU extends pL{constructor(e){var t,r;super("data: ".concat(null!==(t=e.data)&&void 0!==t?t:"undefined",", input: ").concat(null!==(r=e.input)&&void 0!==r?r:"undefined"),'You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.'),this.code=425}}class AU extends fL{constructor(e){super("The connected Ethereum Node did not respond within ".concat(e.numberOfSeconds," seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!\n\tTransaction Hash: ").concat(e.transactionHash?e.transactionHash.toString():"not available")),this.code=431}}function SU(e){return"Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!\n\tTransaction Hash: ".concat(e?e.toString():"not available")}class kU extends fL{constructor(e){super("Transaction was not mined within ".concat(e.numberOfSeconds," seconds. ").concat(SU(e.transactionHash))),this.code=426}}class xU extends fL{constructor(e){super("Transaction started at ".concat(e.starterBlockNumber," but was not mined within ").concat(e.numberOfBlocks," blocks. ").concat(SU(e.transactionHash))),this.code=432}}class IU extends pL{constructor(e){var t,r;super("receipt: ".concat(JSON.stringify(e.receipt),", blockHash: ").concat(null===(t=e.blockHash)||void 0===t?void 0:t.toString(),", transactionHash: ").concat(null===(r=e.transactionHash)||void 0===r?void 0:r.toString()),"Receipt missing or blockHash null"),this.code=427}}class TU extends pL{constructor(e){super("receipt: ".concat(JSON.stringify(e.receipt)),"Receipt missing block number"),this.code=428}}class PU extends fL{constructor(e){super('Invalid signature. "'.concat(e,'"')),this.code=433}}class RU extends pL{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=429}}class CU extends fL{constructor(e,t){const r=[];e.forEach((e=>r.push(e.keyword))),super("The following properties are invalid for the transaction type ".concat(t,": ").concat(r.join(", "))),this.code=439}}class BU extends pL{constructor(e){super(e,"can not parse as byte data"),this.code=1002}}class MU extends pL{constructor(e){super(e,"can not parse as number data"),this.code=1003}}class NU extends pL{constructor(e){super(e,"invalid ethereum address"),this.code=1005}}class OU extends pL{constructor(e){super(e,"not a valid string"),this.code=1001}}class DU extends pL{constructor(e){super(e,"invalid unit"),this.code=1004}}class LU extends pL{constructor(e){super(e,"can not be converted to hex"),this.code=1006}}class UU extends pL{constructor(e){super(e,"value greater than the nibble width"),this.code=1014}}class FU extends pL{constructor(e){super(e,"not a valid boolean."),this.code=1008}}class jU extends pL{constructor(e){super(e,"not a valid unsigned integer."),this.code=1009}}class qU extends pL{constructor(e){super(e,"invalid size given."),this.code=1010}}class zU extends pL{constructor(e){super(e,"value is larger than size."),this.code=1011}}class HU extends pL{constructor(e){super(e,"invalid string given"),this.code=1012}}const KU=e=>(e=>!Array.isArray(e)&&"2.0"===e.jsonrpc&&!!e&&(void 0===e.result||null===e.result)&&"error"in e&&("number"===typeof e.id||"string"===typeof e.id))(e)?e.error.message:"";class VU extends fL{constructor(e,t,r){var n;let i;super(null!==t&&void 0!==t?t:"Returned error: ".concat(Array.isArray(e)?e.map((e=>KU(e))).join(","):KU(e))),this.code=100,t||(this.data=Array.isArray(e)?e.map((e=>{var t;return null===(t=e.error)||void 0===t?void 0:t.data})):null===(n=null===e||void 0===e?void 0:e.error)||void 0===n?void 0:n.data),this.request=r,"error"in e?i=e.error:e instanceof Array&&(i=e.map((e=>e.error))),this.innerError=i}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request})}}class GU extends VU{constructor(e,t){let r;super(e,void 0,t),this.code=101,"error"in e?r=e.error:e instanceof Array&&(r=e.map((e=>e.error))),this.innerError=r}}class WU extends fL{constructor(e,t){super("Web3Config hardfork doesnt match in defaultHardfork ".concat(e," and common.hardfork ").concat(t)),this.code=1101}}class QU extends fL{constructor(e,t){super("Web3Config chain doesnt match in defaultHardfork ".concat(e," and common.hardfork ").concat(t)),this.code=1101}}const JU="An Rpc error has occured with a code of *code*",ZU={[tL]:{message:"Parse error",description:"Invalid JSON"},[rL]:{message:"Invalid request",description:"JSON is not a valid request object\t"},[nL]:{message:"Method not found",description:"Method does not exist\t"},[iL]:{message:"Invalid params",description:"Invalid method parameters"},[oL]:{message:"Internal error",description:"Internal JSON-RPC error"},[sL]:{message:"Invalid input",description:"Missing or invalid parameters"},[aL]:{message:"Resource not found",description:"Requested resource not found"},[cL]:{message:"Resource unavailable",description:"Requested resource not available"},[uL]:{message:"Transaction rejected",description:"Transaction creation failed"},[lL]:{message:"Method not supported",description:"Method is not implemented"},[dL]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[hL]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},4001:{name:"User Rejected Request",message:"The user rejected the request."},4100:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},4200:{name:"Unsupported Method",message:"The Provider does not support the requested method."},4900:{name:"Disconnected",message:"The Provider is disconnected from all chains."},4901:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class YU extends fL{constructor(e,t){super(null!==t&&void 0!==t?t:JU.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}class XU extends fL{constructor(e,t){var r,n,i,o;if(e)if(null===(r=ZU[e])||void 0===r?void 0:r.message)super(ZU[e].message);else{const t=Object.keys(ZU).find((t=>"string"===typeof t&&e>=parseInt(t.split("-")[0],10)&&e<=parseInt(t.split("-")[1],10)));super(null!==(i=null===(n=ZU[null!==t&&void 0!==t?t:""])||void 0===n?void 0:n.message)&&void 0!==i?i:JU.replace("*code*",null!==(o=null===e||void 0===e?void 0:e.toString())&&void 0!==o?o:'""'))}else super();this.code=e,this.data=t}}const $U=new Map;$U.set(tL,{error:class extends YU{constructor(e){super(e,ZU[-32700].message),this.code=tL}}}),$U.set(rL,{error:class extends YU{constructor(e){super(e,ZU[-32600].message),this.code=rL}}}),$U.set(nL,{error:class extends YU{constructor(e){super(e,ZU[-32601].message),this.code=nL}}}),$U.set(iL,{error:class extends YU{constructor(e){super(e,ZU[-32602].message),this.code=iL}}}),$U.set(oL,{error:class extends YU{constructor(e){super(e,ZU[-32603].message),this.code=oL}}}),$U.set(sL,{error:class extends YU{constructor(e){super(e,ZU[-32e3].message),this.code=sL}}}),$U.set(lL,{error:class extends YU{constructor(e){super(e,ZU[-32004].message),this.code=lL}}}),$U.set(cL,{error:class extends YU{constructor(e){super(e,ZU[-32002].message),this.code=cL}}}),$U.set(uL,{error:class extends YU{constructor(e){super(e,ZU[-32003].message),this.code=uL}}}),$U.set(aL,{error:class extends YU{constructor(e){super(e,ZU[-32001].message),this.code=aL}}}),$U.set(hL,{error:class extends YU{constructor(e){super(e,ZU[-32006].message),this.code=hL}}}),$U.set(dL,{error:class extends YU{constructor(e){super(e,ZU[-32005].message),this.code=dL}}});class eF extends fL{constructor(e){super("Format for the type ".concat(e," is unsupported")),this.type=e,this.code=1200}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}const[tF,rF,nF]=[[],[],[]],iF=BigInt(0),oF=BigInt(1),sF=BigInt(2),aF=BigInt(7),cF=BigInt(256),uF=BigInt(113);for(let tX=0,rX=oF,nX=1,iX=0;tX<24;tX++){[nX,iX]=[iX,(2*nX+3*iX)%5],tF.push(2*(5*iX+nX)),rF.push((tX+1)*(tX+2)/2%64);let e=iF;for(let t=0;t<7;t++)rX=(rX<<oF^(rX>>aF)*uF)%cF,rX&sF&&(e^=oF<<(oF<<BigInt(t))-oF);nF.push(e)}const[lF,dF]=Xu(nF,!0),hF=(e,t,r)=>r>32?tl(e,t,r):$u(e,t,r),fF=(e,t,r)=>r>32?rl(e,t,r):el(e,t,r);class pF extends Ai{constructor(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ui(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=mi(this.state)}keccak(){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let n=0;n<10;n++)r[n]=e[n]^e[n+10]^e[n+20]^e[n+30]^e[n+40];for(let n=0;n<10;n+=2){const t=(n+8)%10,i=(n+2)%10,o=r[i],s=r[i+1],a=hF(o,s,1)^r[t],c=fF(o,s,1)^r[t+1];for(let r=0;r<50;r+=10)e[n+r]^=a,e[n+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=rF[r],o=hF(t,i,n),s=fF(t,i,n),a=tF[r];t=e[a],i=e[a+1],e[a]=o,e[a+1]=s}for(let n=0;n<50;n+=10){for(let t=0;t<10;t++)r[t]=e[n+t];for(let t=0;t<10;t++)e[n+t]^=~r[(t+2)%10]&r[(t+4)%10]}e[0]^=lF[n],e[1]^=dF[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){hi(this);const{blockLen:t,state:r}=this,n=(e=_i(e)).length;for(let i=0;i<n;){const o=Math.min(t-this.pos,n-i);for(let t=0;t<o;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,0!==(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){hi(this,!1),li(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return ui(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(fi(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:o}=this;return e||(e=new pF(t,r,n,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=o,e.destroyed=this.destroyed,e}}const gF=(e,t,r)=>xi((()=>new pF(t,e,r))),mF=gF(1,144,28),yF=gF(1,136,32),vF=gF(1,104,48),bF=gF(1,72,64),wF=(pi.bool,pi.bytes);function _F(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got ".concat(typeof e));return(new TextDecoder).decode(e)}function EF(e){return t=>(pi.bytes(t),e(t))}(()=>{const e="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,t="undefined"!==typeof module&&"function"===typeof module.require&&module.require.bind(module);t&&!e&&t("crypto")})(),EF(mF);const AF=(()=>{const e=EF(yF);return e.create=yF.create,e})();EF(vF),EF(bF);var SF,kF;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!==typeof t[t[e]])),n={};for(const e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map((e=>"string"===typeof e?"'".concat(e,"'"):e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t}(SF||(SF={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(kF||(kF={}));const xF=SF.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),IF=e=>{switch(typeof e){case"undefined":return xF.undefined;case"string":return xF.string;case"number":return isNaN(e)?xF.nan:xF.number;case"boolean":return xF.boolean;case"function":return xF.function;case"bigint":return xF.bigint;case"symbol":return xF.symbol;case"object":return Array.isArray(e)?xF.array:null===e?xF.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?xF.promise:"undefined"!==typeof Map&&e instanceof Map?xF.map:"undefined"!==typeof Set&&e instanceof Set?xF.set:"undefined"!==typeof Date&&e instanceof Date?xF.date:xF.object;default:return xF.unknown}},TF=SF.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class PF extends Error{constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,SF.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message;const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}PF.create=e=>new PF(e);const RF=(e,t)=>{let r;switch(e.code){case TF.invalid_type:r=e.received===xF.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case TF.invalid_literal:r="Invalid literal value, expected ".concat(JSON.stringify(e.expected,SF.jsonStringifyReplacer));break;case TF.unrecognized_keys:r="Unrecognized key(s) in object: ".concat(SF.joinValues(e.keys,", "));break;case TF.invalid_union:r="Invalid input";break;case TF.invalid_union_discriminator:r="Invalid discriminator value. Expected ".concat(SF.joinValues(e.options));break;case TF.invalid_enum_value:r="Invalid enum value. Expected ".concat(SF.joinValues(e.options),", received '").concat(e.received,"'");break;case TF.invalid_arguments:r="Invalid function arguments";break;case TF.invalid_return_type:r="Invalid function return type";break;case TF.invalid_date:r="Invalid date";break;case TF.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(r='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"===typeof e.validation.position&&(r="".concat(r," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?r='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?r='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):SF.assertNever(e.validation):r="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case TF.too_small:r="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case TF.too_big:r="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case TF.custom:r="Invalid input";break;case TF.invalid_intersection_types:r="Intersection results could not be merged";break;case TF.not_multiple_of:r="Number must be a multiple of ".concat(e.multipleOf);break;case TF.not_finite:r="Number must be finite";break;default:r=t.defaultError,SF.assertNever(e)}return{message:r}};let CF=RF;function BF(){return CF}const MF=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,o=[...r,...i.path||[]],s={...i,path:o};let a="";const c=n.filter((e=>!!e)).slice().reverse();for(const u of c)a=u(s,{data:t,defaultError:a}).message;return{...i,path:o,message:i.message||a}};function NF(e,t){const r=MF({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,BF(),RF].filter((e=>!!e))});e.common.issues.push(r)}class OF{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return DF;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const n of t)r.push({key:await n.key,value:await n.value});return OF.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return DF;if("aborted"===i.status)return DF;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||"undefined"===typeof i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const DF=Object.freeze({status:"aborted"}),LF=e=>({status:"dirty",value:e}),UF=e=>({status:"valid",value:e}),FF=e=>"aborted"===e.status,jF=e=>"dirty"===e.status,qF=e=>"valid"===e.status,zF=e=>"undefined"!==typeof Promise&&e instanceof Promise;var HF;!function(e){e.errToObj=e=>"string"===typeof e?{message:e}:e||{},e.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message}(HF||(HF={}));class KF{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const VF=(e,t)=>{if(qF(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new PF(e.common.issues);return this._error=t,this._error}}};function GF(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:"undefined"===typeof t.data?{message:null!==n&&void 0!==n?n:t.defaultError}:{message:null!==r&&void 0!==r?r:t.defaultError},description:i}}class WF{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return IF(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:IF(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new OF,ctx:{common:e.parent.common,data:e.data,parsedType:IF(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(zF(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null===t||void 0===t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:IF(e)},i=this._parseSync({data:e,path:n.path,parent:n});return VF(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:IF(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(zF(n)?n:Promise.resolve(n));return VF(r,i)}refine(e,t){const r=e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),o=()=>n.addIssue({code:TF.custom,...r(t)});return"undefined"!==typeof Promise&&i instanceof Promise?i.then((e=>!!e||(o(),!1))):!!i||(o(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"===typeof t?t(r,n):t),!1)))}_refinement(e){return new Oj({schema:this,typeName:Wj.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Dj.create(this,this._def)}nullable(){return Lj.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mj.create(this,this._def)}promise(){return Nj.create(this,this._def)}or(e){return bj.create([this,e],this._def)}and(e){return Aj.create(this,e,this._def)}transform(e){return new Oj({...GF(this._def),schema:this,typeName:Wj.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"===typeof e?e:()=>e;return new Uj({...GF(this._def),innerType:this,defaultValue:t,typeName:Wj.ZodDefault})}brand(){return new zj({typeName:Wj.ZodBranded,type:this,...GF(this._def)})}catch(e){const t="function"===typeof e?e:()=>e;return new Fj({...GF(this._def),innerType:this,catchValue:t,typeName:Wj.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Hj.create(this,e)}readonly(){return Kj.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const QF=/^c[^\s-]{8,}$/i,JF=/^[a-z][a-z0-9]*$/,ZF=/^[0-9A-HJKMNP-TV-Z]{26}$/,YF=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,XF=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let $F;const ej=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,tj=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;function rj(e,t){return!("v4"!==t&&t||!ej.test(e))||!("v6"!==t&&t||!tj.test(e))}class nj extends WF{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==xF.string){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.string,received:t.parsedType}),DF}const t=new OF;let r;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(r=this._getOrReturnCtx(e,r),NF(r,{code:TF.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(r=this._getOrReturnCtx(e,r),NF(r,{code:TF.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const n=e.data.length>i.value,o=e.data.length<i.value;(n||o)&&(r=this._getOrReturnCtx(e,r),n?NF(r,{code:TF.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&NF(r,{code:TF.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)XF.test(e.data)||(r=this._getOrReturnCtx(e,r),NF(r,{validation:"email",code:TF.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)$F||($F=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),$F.test(e.data)||(r=this._getOrReturnCtx(e,r),NF(r,{validation:"emoji",code:TF.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)YF.test(e.data)||(r=this._getOrReturnCtx(e,r),NF(r,{validation:"uuid",code:TF.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)QF.test(e.data)||(r=this._getOrReturnCtx(e,r),NF(r,{validation:"cuid",code:TF.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)JF.test(e.data)||(r=this._getOrReturnCtx(e,r),NF(r,{validation:"cuid2",code:TF.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)ZF.test(e.data)||(r=this._getOrReturnCtx(e,r),NF(r,{validation:"ulid",code:TF.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(kK){r=this._getOrReturnCtx(e,r),NF(r,{validation:"url",code:TF.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),NF(r,{validation:"regex",code:TF.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(r=this._getOrReturnCtx(e,r),NF(r,{code:TF.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(r=this._getOrReturnCtx(e,r),NF(r,{code:TF.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(r=this._getOrReturnCtx(e,r),NF(r,{code:TF.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){((n=i).precision?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(n.precision,"}(([+-]\\d{2}(:?\\d{2})?)|Z)$")):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(n.precision,"}Z$")):0===n.precision?n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):n.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),NF(r,{code:TF.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else"ip"===i.kind?rj(e.data,i.version)||(r=this._getOrReturnCtx(e,r),NF(r,{validation:"ip",code:TF.invalid_string,message:i.message}),t.dirty()):SF.assertNever(i);var n;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:TF.invalid_string,...HF.errToObj(r)})}_addCheck(e){return new nj({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...HF.errToObj(e)})}url(e){return this._addCheck({kind:"url",...HF.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...HF.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...HF.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...HF.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...HF.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...HF.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...HF.errToObj(e)})}datetime(e){var t;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,...HF.errToObj(null===e||void 0===e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...HF.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position,...HF.errToObj(null===t||void 0===t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...HF.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...HF.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...HF.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...HF.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...HF.errToObj(t)})}nonempty(e){return this.min(1,HF.errToObj(e))}trim(){return new nj({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new nj({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new nj({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ij(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}nj.create=e=>{var t;return new nj({checks:[],typeName:Wj.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...GF(e)})};class oj extends WF{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==xF.number){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.number,received:t.parsedType}),DF}let t;const r=new OF;for(const n of this._def.checks)if("int"===n.kind)SF.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),NF(t,{code:TF.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),NF(t,{code:TF.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),NF(t,{code:TF.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==ij(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),NF(t,{code:TF.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),NF(t,{code:TF.not_finite,message:n.message}),r.dirty()):SF.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,HF.toString(t))}gt(e,t){return this.setLimit("min",e,!1,HF.toString(t))}lte(e,t){return this.setLimit("max",e,!0,HF.toString(t))}lt(e,t){return this.setLimit("max",e,!1,HF.toString(t))}setLimit(e,t,r,n){return new oj({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:HF.toString(n)}]})}_addCheck(e){return new oj({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:HF.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:HF.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:HF.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:HF.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:HF.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:HF.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:HF.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:HF.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:HF.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&SF.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}oj.create=e=>new oj({checks:[],typeName:Wj.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...GF(e)});class sj extends WF{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==xF.bigint){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.bigint,received:t.parsedType}),DF}let t;const r=new OF;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),NF(t,{code:TF.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),NF(t,{code:TF.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),NF(t,{code:TF.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):SF.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,HF.toString(t))}gt(e,t){return this.setLimit("min",e,!1,HF.toString(t))}lte(e,t){return this.setLimit("max",e,!0,HF.toString(t))}lt(e,t){return this.setLimit("max",e,!1,HF.toString(t))}setLimit(e,t,r,n){return new sj({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:HF.toString(n)}]})}_addCheck(e){return new sj({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:HF.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:HF.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:HF.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:HF.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:HF.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}sj.create=e=>{var t;return new sj({checks:[],typeName:Wj.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...GF(e)})};class aj extends WF{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==xF.boolean){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.boolean,received:t.parsedType}),DF}return UF(e.data)}}aj.create=e=>new aj({typeName:Wj.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...GF(e)});class cj extends WF{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==xF.date){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.date,received:t.parsedType}),DF}if(isNaN(e.data.getTime())){return NF(this._getOrReturnCtx(e),{code:TF.invalid_date}),DF}const t=new OF;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),NF(r,{code:TF.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),NF(r,{code:TF.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):SF.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new cj({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:HF.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:HF.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}cj.create=e=>new cj({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:Wj.ZodDate,...GF(e)});class uj extends WF{_parse(e){if(this._getType(e)!==xF.symbol){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.symbol,received:t.parsedType}),DF}return UF(e.data)}}uj.create=e=>new uj({typeName:Wj.ZodSymbol,...GF(e)});class lj extends WF{_parse(e){if(this._getType(e)!==xF.undefined){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.undefined,received:t.parsedType}),DF}return UF(e.data)}}lj.create=e=>new lj({typeName:Wj.ZodUndefined,...GF(e)});class dj extends WF{_parse(e){if(this._getType(e)!==xF.null){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.null,received:t.parsedType}),DF}return UF(e.data)}}dj.create=e=>new dj({typeName:Wj.ZodNull,...GF(e)});class hj extends WF{constructor(){super(...arguments),this._any=!0}_parse(e){return UF(e.data)}}hj.create=e=>new hj({typeName:Wj.ZodAny,...GF(e)});class fj extends WF{constructor(){super(...arguments),this._unknown=!0}_parse(e){return UF(e.data)}}fj.create=e=>new fj({typeName:Wj.ZodUnknown,...GF(e)});class pj extends WF{_parse(e){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.never,received:t.parsedType}),DF}}pj.create=e=>new pj({typeName:Wj.ZodNever,...GF(e)});class gj extends WF{_parse(e){if(this._getType(e)!==xF.undefined){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.void,received:t.parsedType}),DF}return UF(e.data)}}gj.create=e=>new gj({typeName:Wj.ZodVoid,...GF(e)});class mj extends WF{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==xF.array)return NF(t,{code:TF.invalid_type,expected:xF.array,received:t.parsedType}),DF;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(NF(t,{code:e?TF.too_big:TF.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(NF(t,{code:TF.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(NF(t,{code:TF.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new KF(t,e,t.path,r))))).then((e=>OF.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new KF(t,e,t.path,r))));return OF.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new mj({...this._def,minLength:{value:e,message:HF.toString(t)}})}max(e,t){return new mj({...this._def,maxLength:{value:e,message:HF.toString(t)}})}length(e,t){return new mj({...this._def,exactLength:{value:e,message:HF.toString(t)}})}nonempty(e){return this.min(1,e)}}function yj(e){if(e instanceof vj){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Dj.create(yj(n))}return new vj({...e._def,shape:()=>t})}return e instanceof mj?new mj({...e._def,type:yj(e.element)}):e instanceof Dj?Dj.create(yj(e.unwrap())):e instanceof Lj?Lj.create(yj(e.unwrap())):e instanceof Sj?Sj.create(e.items.map((e=>yj(e)))):e}mj.create=(e,t)=>new mj({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Wj.ZodArray,...GF(t)});class vj extends WF{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=SF.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==xF.object){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.object,received:t.parsedType}),DF}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof pj&&"strip"===this._def.unknownKeys))for(const a in r.data)i.includes(a)||o.push(a);const s=[];for(const a of i){const e=n[a],t=r.data[a];s.push({key:{status:"valid",value:a},value:e._parse(new KF(r,t,r.path,a)),alwaysSet:a in r.data})}if(this._def.catchall instanceof pj){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of o)s.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===e)o.length>0&&(NF(r,{code:TF.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const n=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new KF(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>OF.mergeObjectSync(t,e))):OF.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return HF.errToObj,new vj({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,o,s;const a=null!==(o=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==o?o:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=HF.errToObj(e).message)&&void 0!==s?s:a}:{message:a}}}:{}})}strip(){return new vj({...this._def,unknownKeys:"strip"})}passthrough(){return new vj({...this._def,unknownKeys:"passthrough"})}extend(e){return new vj({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new vj({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Wj.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new vj({...this._def,catchall:e})}pick(e){const t={};return SF.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new vj({...this._def,shape:()=>t})}omit(e){const t={};return SF.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new vj({...this._def,shape:()=>t})}deepPartial(){return yj(this)}partial(e){const t={};return SF.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new vj({...this._def,shape:()=>t})}required(e){const t={};return SF.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof Dj;)e=e._def.innerType;t[r]=e}})),new vj({...this._def,shape:()=>t})}keyof(){return Cj(SF.objectKeys(this.shape))}}vj.create=(e,t)=>new vj({shape:()=>e,unknownKeys:"strip",catchall:pj.create(),typeName:Wj.ZodObject,...GF(t)}),vj.strictCreate=(e,t)=>new vj({shape:()=>e,unknownKeys:"strict",catchall:pj.create(),typeName:Wj.ZodObject,...GF(t)}),vj.lazycreate=(e,t)=>new vj({shape:e,unknownKeys:"strip",catchall:pj.create(),typeName:Wj.ZodObject,...GF(t)});class bj extends WF{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const r=e.map((e=>new PF(e.ctx.common.issues)));return NF(t,{code:TF.invalid_union,unionErrors:r}),DF}));{let e;const n=[];for(const o of r){const r={...t,common:{...t.common,issues:[]},parent:null},i=o._parseSync({data:t.data,path:t.path,parent:r});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new PF(e)));return NF(t,{code:TF.invalid_union,unionErrors:i}),DF}}get options(){return this._def.options}}bj.create=(e,t)=>new bj({options:e,typeName:Wj.ZodUnion,...GF(t)});const wj=e=>e instanceof Pj?wj(e.schema):e instanceof Oj?wj(e.innerType()):e instanceof Rj?[e.value]:e instanceof Bj?e.options:e instanceof Mj?Object.keys(e.enum):e instanceof Uj?wj(e._def.innerType):e instanceof lj?[void 0]:e instanceof dj?[null]:null;class _j extends WF{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==xF.object)return NF(t,{code:TF.invalid_type,expected:xF.object,received:t.parsedType}),DF;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(NF(t,{code:TF.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),DF)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const i of t){const t=wj(i.shape[e]);if(!t)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(const r of t){if(n.has(r))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(r)));n.set(r,i)}}return new _j({typeName:Wj.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...GF(r)})}}function Ej(e,t){const r=IF(e),n=IF(t);if(e===t)return{valid:!0,data:e};if(r===xF.object&&n===xF.object){const r=SF.objectKeys(t),n=SF.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const o of n){const r=Ej(e[o],t[o]);if(!r.valid)return{valid:!1};i[o]=r.data}return{valid:!0,data:i}}if(r===xF.array&&n===xF.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=Ej(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===xF.date&&n===xF.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class Aj extends WF{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(FF(e)||FF(n))return DF;const i=Ej(e.value,n.value);return i.valid?((jF(e)||jF(n))&&t.dirty(),{status:t.value,value:i.data}):(NF(r,{code:TF.invalid_intersection_types}),DF)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((e=>{let[t,r]=e;return n(t,r)})):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Aj.create=(e,t,r)=>new Aj({left:e,right:t,typeName:Wj.ZodIntersection,...GF(r)});class Sj extends WF{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==xF.array)return NF(r,{code:TF.invalid_type,expected:xF.array,received:r.parsedType}),DF;if(r.data.length<this._def.items.length)return NF(r,{code:TF.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),DF;!this._def.rest&&r.data.length>this._def.items.length&&(NF(r,{code:TF.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new KF(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>OF.mergeArray(t,e))):OF.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new Sj({...this._def,rest:e})}}Sj.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Sj({items:e,typeName:Wj.ZodTuple,rest:null,...GF(t)})};class kj extends WF{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==xF.object)return NF(r,{code:TF.invalid_type,expected:xF.object,received:r.parsedType}),DF;const n=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)n.push({key:i._parse(new KF(r,s,r.path,s)),value:o._parse(new KF(r,r.data[s],r.path,s))});return r.common.async?OF.mergeObjectAsync(t,n):OF.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new kj(t instanceof WF?{keyType:e,valueType:t,typeName:Wj.ZodRecord,...GF(r)}:{keyType:nj.create(),valueType:e,typeName:Wj.ZodRecord,...GF(t)})}}class xj extends WF{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==xF.map)return NF(r,{code:TF.invalid_type,expected:xF.map,received:r.parsedType}),DF;const n=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(((e,t)=>{let[o,s]=e;return{key:n._parse(new KF(r,o,r.path,[t,"key"])),value:i._parse(new KF(r,s,r.path,[t,"value"]))}}));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of o){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return DF;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of o){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return DF;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}xj.create=(e,t,r)=>new xj({valueType:t,keyType:e,typeName:Wj.ZodMap,...GF(r)});class Ij extends WF{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==xF.set)return NF(r,{code:TF.invalid_type,expected:xF.set,received:r.parsedType}),DF;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(NF(r,{code:TF.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(NF(r,{code:TF.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function o(e){const r=new Set;for(const n of e){if("aborted"===n.status)return DF;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const s=[...r.data.values()].map(((e,t)=>i._parse(new KF(r,e,r.path,t))));return r.common.async?Promise.all(s).then((e=>o(e))):o(s)}min(e,t){return new Ij({...this._def,minSize:{value:e,message:HF.toString(t)}})}max(e,t){return new Ij({...this._def,maxSize:{value:e,message:HF.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ij.create=(e,t)=>new Ij({valueType:e,minSize:null,maxSize:null,typeName:Wj.ZodSet,...GF(t)});class Tj extends WF{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==xF.function)return NF(t,{code:TF.invalid_type,expected:xF.function,received:t.parsedType}),DF;function r(e,r){return MF({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,BF(),RF].filter((e=>!!e)),issueData:{code:TF.invalid_arguments,argumentsError:r}})}function n(e,r){return MF({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,BF(),RF].filter((e=>!!e)),issueData:{code:TF.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof Nj){const e=this;return UF((async function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];const c=new PF([]),u=await e._def.args.parseAsync(s,i).catch((e=>{throw c.addIssue(r(s,e)),c})),l=await Reflect.apply(o,this,u);return await e._def.returns._def.type.parseAsync(l,i).catch((e=>{throw c.addIssue(n(l,e)),c}))}))}{const e=this;return UF((function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];const c=e._def.args.safeParse(s,i);if(!c.success)throw new PF([r(s,c.error)]);const u=Reflect.apply(o,this,c.data),l=e._def.returns.safeParse(u,i);if(!l.success)throw new PF([n(u,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new Tj({...this._def,args:Sj.create(t).rest(fj.create())})}returns(e){return new Tj({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Tj({args:e||Sj.create([]).rest(fj.create()),returns:t||fj.create(),typeName:Wj.ZodFunction,...GF(r)})}}class Pj extends WF{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Pj.create=(e,t)=>new Pj({getter:e,typeName:Wj.ZodLazy,...GF(t)});class Rj extends WF{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return NF(t,{received:t.data,code:TF.invalid_literal,expected:this._def.value}),DF}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Cj(e,t){return new Bj({values:e,typeName:Wj.ZodEnum,...GF(t)})}Rj.create=(e,t)=>new Rj({value:e,typeName:Wj.ZodLiteral,...GF(t)});class Bj extends WF{_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return NF(t,{expected:SF.joinValues(r),received:t.parsedType,code:TF.invalid_type}),DF}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return NF(t,{received:t.data,code:TF.invalid_enum_value,options:r}),DF}return UF(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return Bj.create(e)}exclude(e){return Bj.create(this.options.filter((t=>!e.includes(t))))}}Bj.create=Cj;class Mj extends WF{_parse(e){const t=SF.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==xF.string&&r.parsedType!==xF.number){const e=SF.objectValues(t);return NF(r,{expected:SF.joinValues(e),received:r.parsedType,code:TF.invalid_type}),DF}if(-1===t.indexOf(e.data)){const e=SF.objectValues(t);return NF(r,{received:r.data,code:TF.invalid_enum_value,options:e}),DF}return UF(e.data)}get enum(){return this._def.values}}Mj.create=(e,t)=>new Mj({values:e,typeName:Wj.ZodNativeEnum,...GF(t)});class Nj extends WF{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==xF.promise&&!1===t.common.async)return NF(t,{code:TF.invalid_type,expected:xF.promise,received:t.parsedType}),DF;const r=t.parsedType===xF.promise?t.data:Promise.resolve(t.data);return UF(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}Nj.create=(e,t)=>new Nj({type:e,typeName:Wj.ZodPromise,...GF(t)});class Oj extends WF{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Wj.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{NF(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?DF:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?DF:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!qF(e))return e;const o=n.transform(e.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>qF(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}SF.assertNever(n)}}Oj.create=(e,t,r)=>new Oj({schema:e,typeName:Wj.ZodEffects,effect:t,...GF(r)}),Oj.createWithPreprocess=(e,t,r)=>new Oj({schema:t,effect:{type:"preprocess",transform:e},typeName:Wj.ZodEffects,...GF(r)});class Dj extends WF{_parse(e){return this._getType(e)===xF.undefined?UF(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Dj.create=(e,t)=>new Dj({innerType:e,typeName:Wj.ZodOptional,...GF(t)});class Lj extends WF{_parse(e){return this._getType(e)===xF.null?UF(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Lj.create=(e,t)=>new Lj({innerType:e,typeName:Wj.ZodNullable,...GF(t)});class Uj extends WF{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===xF.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Uj.create=(e,t)=>new Uj({innerType:e,typeName:Wj.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default,...GF(t)});class Fj extends WF{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return zF(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new PF(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new PF(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Fj.create=(e,t)=>new Fj({innerType:e,typeName:Wj.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch,...GF(t)});class jj extends WF{_parse(e){if(this._getType(e)!==xF.nan){const t=this._getOrReturnCtx(e);return NF(t,{code:TF.invalid_type,expected:xF.nan,received:t.parsedType}),DF}return{status:"valid",value:e.data}}}jj.create=e=>new jj({typeName:Wj.ZodNaN,...GF(e)});const qj=Symbol("zod_brand");class zj extends WF{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Hj extends WF{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?DF:"dirty"===e.status?(t.dirty(),LF(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?DF:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Hj({in:e,out:t,typeName:Wj.ZodPipeline})}}class Kj extends WF{_parse(e){const t=this._def.innerType._parse(e);return qF(t)&&(t.value=Object.freeze(t.value)),t}}Kj.create=(e,t)=>new Kj({innerType:e,typeName:Wj.ZodReadonly,...GF(t)});const Vj=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return e?hj.create().superRefine(((n,i)=>{var o,s;if(!e(n)){const e="function"===typeof t?t(n):"string"===typeof t?{message:t}:t,a=null===(s=null!==(o=e.fatal)&&void 0!==o?o:r)||void 0===s||s,c="string"===typeof e?{message:e}:e;i.addIssue({code:"custom",...c,fatal:a})}})):hj.create()},Gj={object:vj.lazycreate};var Wj;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Wj||(Wj={}));const Qj=nj.create,Jj=oj.create,Zj=jj.create,Yj=sj.create,Xj=aj.create,$j=cj.create,eq=uj.create,tq=lj.create,rq=dj.create,nq=hj.create,iq=fj.create,oq=pj.create,sq=gj.create,aq=mj.create,cq=vj.create,uq=vj.strictCreate,lq=bj.create,dq=_j.create,hq=Aj.create,fq=Sj.create,pq=kj.create,gq=xj.create,mq=Ij.create,yq=Tj.create,vq=Pj.create,bq=Rj.create,wq=Bj.create,_q=Mj.create,Eq=Nj.create,Aq=Oj.create,Sq=Dj.create,kq=Lj.create,xq=Oj.createWithPreprocess,Iq=Hj.create,Tq={string:e=>nj.create({...e,coerce:!0}),number:e=>oj.create({...e,coerce:!0}),boolean:e=>aj.create({...e,coerce:!0}),bigint:e=>sj.create({...e,coerce:!0}),date:e=>cj.create({...e,coerce:!0})},Pq=DF;var Rq=Object.freeze({__proto__:null,defaultErrorMap:RF,setErrorMap:function(e){CF=e},getErrorMap:BF,makeIssue:MF,EMPTY_PATH:[],addIssueToContext:NF,ParseStatus:OF,INVALID:DF,DIRTY:LF,OK:UF,isAborted:FF,isDirty:jF,isValid:qF,isAsync:zF,get util(){return SF},get objectUtil(){return kF},ZodParsedType:xF,getParsedType:IF,ZodType:WF,ZodString:nj,ZodNumber:oj,ZodBigInt:sj,ZodBoolean:aj,ZodDate:cj,ZodSymbol:uj,ZodUndefined:lj,ZodNull:dj,ZodAny:hj,ZodUnknown:fj,ZodNever:pj,ZodVoid:gj,ZodArray:mj,ZodObject:vj,ZodUnion:bj,ZodDiscriminatedUnion:_j,ZodIntersection:Aj,ZodTuple:Sj,ZodRecord:kj,ZodMap:xj,ZodSet:Ij,ZodFunction:Tj,ZodLazy:Pj,ZodLiteral:Rj,ZodEnum:Bj,ZodNativeEnum:Mj,ZodPromise:Nj,ZodEffects:Oj,ZodTransformer:Oj,ZodOptional:Dj,ZodNullable:Lj,ZodDefault:Uj,ZodCatch:Fj,ZodNaN:jj,BRAND:qj,ZodBranded:zj,ZodPipeline:Hj,ZodReadonly:Kj,custom:Vj,Schema:WF,ZodSchema:WF,late:Gj,get ZodFirstPartyTypeKind(){return Wj},coerce:Tq,any:nq,array:aq,bigint:Yj,boolean:Xj,date:$j,discriminatedUnion:dq,effect:Aq,enum:wq,function:yq,instanceof:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)};return Vj((t=>t instanceof e),t)},intersection:hq,lazy:vq,literal:bq,map:gq,nan:Zj,nativeEnum:_q,never:oq,null:rq,nullable:kq,number:Jj,object:cq,oboolean:()=>Xj().optional(),onumber:()=>Jj().optional(),optional:Sq,ostring:()=>Qj().optional(),pipeline:Iq,preprocess:xq,promise:Eq,record:pq,set:mq,strictObject:uq,string:Qj,symbol:eq,transformer:Aq,tuple:fq,undefined:tq,union:lq,unknown:iq,void:sq,NEVER:Pq,ZodIssueCode:TF,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:PF});const Cq=e=>e.message?e.message:"unspecified error";class Bq extends fL{constructor(e){super(),this.code=1100,this.errors=e,super.message="Web3 validator found ".concat(e.length," error[s]:\n").concat(this._compileErrors().join("\n"))}_compileErrors(){return this.errors.map(Cq)}}const Mq=["bool","int","uint","bytes","string","address","tuple"],Nq=e=>"object"===typeof e&&"type"in e&&"name"in e,Oq=e=>"string"===typeof e,Dq=e=>"string"===typeof e&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(e);function Lq(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!("undefined"!==typeof t&&t>0&&e.length!==2+2*t)}const Uq=e=>"number"===typeof e||"bigint"===typeof e||"string"===typeof e&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(e);function Fq(e){if("string"!==typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type ".concat(typeof e));return e.startsWith("0x")}const jq=function(e){for(const[t,r]of Object.entries(e))if(void 0!==r&&r.length>0&&0===r[0])throw new Error("".concat(t," cannot have leading zeroes, received: ").concat(r.toString()))},qq=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],zq=e=>{let t,r=e.replace(/ /,""),n=!1,i=[];if(e.includes("[")&&(r=r.slice(0,r.indexOf("[")),i=[...e.matchAll(/(?:\[(\d*)\])/g)].map((e=>parseInt(e[1],10))).map((e=>Number.isNaN(e)?-1:e)),n=i.length>0),Mq.includes(r))return{baseType:r,isArray:n,baseTypeSize:t,arraySizes:i};if(r.startsWith("int"))t=parseInt(r.substring(3),10),r="int";else if(r.startsWith("uint"))t=parseInt(e.substring(4),10),r="uint";else{if(!r.startsWith("bytes"))return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:i};t=parseInt(r.substring(5),10),r="bytes"}return{baseType:r,isArray:n,baseTypeSize:t,arraySizes:i}},Hq=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object.keys(t).includes("type"))throw new Bq([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:e},instancePath:"",schemaPath:""}]);const{baseType:r,baseTypeSize:n}=zq(e);if(!r&&!qq.includes(e))throw new Bq([{keyword:"eth",message:'Eth data type "'.concat(e,'" is not valid'),params:{eth:e},instancePath:"",schemaPath:""}]);if(r){if("tuple"===r)throw new Error('"tuple" type is not implemented directly.');return{format:"".concat(r).concat(null!==n&&void 0!==n?n:""),required:!0}}return e?{format:e,required:!0}:{}},Kq=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/0";const r={type:"array",items:[],maxItems:e.length,minItems:e.length};for(const[n,i]of e.entries()){let e,o,s=[];Nq(i)?(e=i.type,o=i.name,s=i.components):"string"===typeof i?(e=i,o="".concat(t,"/").concat(n)):Array.isArray(i)&&(i[0]&&"string"===typeof i[0]&&i[0].startsWith("tuple")&&!Array.isArray(i[0])&&i[1]&&Array.isArray(i[1])?(e=i[0],o="".concat(t,"/").concat(n),s=i[1]):(e="tuple",o="".concat(t,"/").concat(n),s=i));const{baseType:a,isArray:c,arraySizes:u}=zq(e);let l,d=r;for(let t=u.length-1;t>0;t-=1)l={type:"array",items:[],maxItems:u[t],minItems:u[t]},u[t]<0&&(delete l.maxItems,delete l.minItems),Array.isArray(d.items)?0===d.items.length?d.items=l:d.items.push(l):d.items=[d.items,l],d=l;if("tuple"!==a||c)if("tuple"===a&&c){const e=u[0],t={$id:o,type:"array",items:Kq(s,o),maxItems:e,minItems:e};e<0&&(delete t.maxItems,delete t.minItems),d.items.push(t)}else if(c){const e=u[0],t={type:"array",$id:o,items:Hq(String(a)),minItems:e,maxItems:e};e<0&&(delete t.maxItems,delete t.minItems),d.items.push(t)}else Array.isArray(d.items)?d.items.push(Object.assign({$id:o},Hq(e))):d.items.items.push(Object.assign({$id:o},Hq(e)));else{const e=Kq(s,o);e.$id=o,d.items.push(e)}d=r}return r},Vq=e=>Kq(e),Gq=(e,t)=>1===t?e:Gq(e[0],t-1),Wq=(e,t,r)=>{const n=[];for(const[i,o]of e.entries()){let e,s,a=[];Nq(o)?(e=o.type,s=o.name,a=o.components):"string"===typeof o?e=o:Array.isArray(o)&&(o[1]&&Array.isArray(o[1])?(e=o[0],a=o[1]):(e="tuple",a=o));const{baseType:c,isArray:u,arraySizes:l}=zq(e),d=Array.isArray(t)?t[i]:t[s];if("tuple"!==c||u)if("tuple"===c&&u){const e=[];for(const t of d)if(l.length>1){const n=Gq(t,l.length-1),i=[];for(const e of n)i.push(Wq(a,e,r));e.push(i)}else e.push(Wq(a,t,r));n.push(e)}else n.push(d);else n.push(Wq(a,d,r))}return(r=null!==r&&void 0!==r?r:[]).push(...n),r},Qq=e=>{if(e>=48&&e<=57)return e-48;if(e>=65&&e<=70)return e-55;if(e>=97&&e<=102)return e-87;throw new Error("Invalid code point: ".concat(e))},Jq=e=>{if(!Dq(e))throw new Error("Invalid hex string");const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e],n=BigInt(r);return n>Number.MAX_SAFE_INTEGER?t?-n:n:n<Number.MIN_SAFE_INTEGER?n:t?-1*Number(n):Number(n)},Zq=e=>{if(("number"===typeof e||"bigint"===typeof e)&&e<0)return"-0x".concat(e.toString(16).slice(1));if(("number"===typeof e||"bigint"===typeof e)&&e>=0)return"0x".concat(e.toString(16));if("string"===typeof e&&Dq(e)){const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e],n=r.split(/^(-)?0(x|X)/).slice(-1)[0];return"".concat(t?"-":"","0x").concat(n.replace(/^0+/,"").toLowerCase())}if("string"===typeof e&&!Dq(e))return Zq(BigInt(e));throw new MU(e)},Yq=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";if("string"===typeof e&&!Dq(e))return e.padStart(t,r);const n="string"===typeof e&&Dq(e)?e:Zq(e),[i,o]=n.startsWith("-")?["-0x",n.slice(3)]:["0x",n.slice(2)];return"".concat(i).concat(o.padStart(t,r))};function Xq(e){let t="0x";for(const r of e){const e=r.toString(16);t+=1===e.length?"0".concat(e):e}return t}const $q={zero:48,nine:57,A:65,F:70,a:97,f:102};function ez(e){return e>=$q.zero&&e<=$q.nine?e-$q.zero:e>=$q.A&&e<=$q.F?e-($q.A-10):e>=$q.a&&e<=$q.f?e-($q.a-10):void 0}function tz(e){let t=0;if(!e.startsWith("0")||"x"!==e[1]&&"X"!==e[1]||(t=2),e.length%2!==0)throw new BU("hex string has odd length: ".concat(e));const r=(e.length-t)/2,n=new Uint8Array(r);for(let i=0,o=t;i<r;i+=1){const t=ez(e.charCodeAt(o++)),r=ez(e.charCodeAt(o++));if(void 0===t||void 0===r)throw new BU('Invalid byte sequence ("'.concat(e[o-2]).concat(e[o-1],'" in "').concat(e,'").'));n[i]=16*t+r}return n}function rz(e){var t;return e instanceof Uint8Array||"Uint8Array"!==(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)?e:Uint8Array.from(e)}const nz=e=>{var t;return e instanceof Uint8Array||"Uint8Array"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)},iz=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{abiType:"bytes"};if("string"!==typeof e&&!Array.isArray(e)&&!nz(e))return!1;if("string"===typeof e&&Dq(e)&&e.startsWith("-"))return!1;if("string"===typeof e&&!Dq(e))return!1;if("string"===typeof e){if(e.length%2!==0)return!1;t=tz(e)}else if(Array.isArray(e)){if(e.some((e=>e<0||e>255||!Number.isInteger(e))))return!1;t=new Uint8Array(e)}else t=e;if(null===r||void 0===r?void 0:r.abiType){const{baseTypeSize:e}=zq(r.abiType);return!e||t.length===e}return!(null===r||void 0===r?void 0:r.size)||t.length===(null===r||void 0===r?void 0:r.size)},oz=e=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(e))return!1;const t=e.slice(2),r=wi(t.toLowerCase()),n=Xq(AF(rz(r))).slice(2);for(let i=0;i<40;i+=1)if(parseInt(n[i],16)>7&&t[i].toUpperCase()!==t[i]||parseInt(n[i],16)<=7&&t[i].toLowerCase()!==t[i])return!1;return!0},sz=function(e){let t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!("string"!==typeof e&&!nz(e))&&(t=nz(e)?Xq(e):"string"!==typeof e||Dq(e)||e.toLowerCase().startsWith("0x")?e:"0x".concat(e),!!/^(0x)?[0-9a-f]{40}$/i.test(t)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(t)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(t))||(!r||oz(t))))};var az,cz;!function(e){e.NUMBER="NUMBER_NUMBER",e.HEX="NUMBER_HEX",e.STR="NUMBER_STR",e.BIGINT="NUMBER_BIGINT"}(az||(az={})),function(e){e.HEX="BYTES_HEX",e.UINT8ARRAY="BYTES_UINT8ARRAY"}(cz||(cz={}));const uz={number:az.BIGINT,bytes:cz.HEX},lz={number:az.HEX,bytes:cz.HEX};var dz,hz;!function(e){e.EARLIEST="earliest",e.LATEST="latest",e.PENDING="pending",e.SAFE="safe",e.FINALIZED="finalized"}(dz||(dz={})),function(e){e.chainstart="chainstart",e.frontier="frontier",e.homestead="homestead",e.dao="dao",e.tangerineWhistle="tangerineWhistle",e.spuriousDragon="spuriousDragon",e.byzantium="byzantium",e.constantinople="constantinople",e.petersburg="petersburg",e.istanbul="istanbul",e.muirGlacier="muirGlacier",e.berlin="berlin",e.london="london",e.altair="altair",e.arrowGlacier="arrowGlacier",e.grayGlacier="grayGlacier",e.bellatrix="bellatrix",e.merge="merge",e.capella="capella",e.shanghai="shanghai"}(hz||(hz={}));const fz=Object.getPrototypeOf(Uint8Array);var pz=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const gz=Symbol.for("web3/base-provider");class mz{static isWeb3Provider(e){return e instanceof mz||Boolean(e&&e[gz])}get[gz](){return!0}send(e,t){this.request(e).then((e=>{t(null,e)})).catch((e=>{t(e)}))}sendAsync(e){return pz(this,void 0,void 0,(function*(){return this.request(e)}))}asEIP1193Provider(){const e=Object.create(this),t=e.request;return e.request=function(e){return pz(this,void 0,void 0,(function*(){return(yield t(e)).result}))},e.asEIP1193Provider=void 0,e}}class yz extends Array{constructor(e){super(),this._accountProvider=e}}const vz=(e,t)=>{let r=e;for(let n=1;n<t;n+=1)r*=e;return r},bz=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{abiType:"uint"};if(!["number","string","bigint"].includes(typeof e)||"string"===typeof e&&0===e.length)return!1;if(null===r||void 0===r?void 0:r.abiType){const{baseTypeSize:e}=zq(r.abiType);e&&(t=e)}else r.bitSize&&(t=r.bitSize);const n=vz(BigInt(2),BigInt(null!==t&&void 0!==t?t:256))-BigInt(1);try{const t="string"===typeof e&&Dq(e)?BigInt(Jq(e)):BigInt(e);return t>=0&&t<=n}catch(i){return!1}},wz=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{abiType:"int"};if(!["number","string","bigint"].includes(typeof e))return!1;if("number"===typeof e&&e>Number.MAX_SAFE_INTEGER)return!1;if(null===r||void 0===r?void 0:r.abiType){const{baseTypeSize:e,baseType:n}=zq(r.abiType);if("int"!==n)return!1;e&&(t=e)}else r.bitSize&&(t=r.bitSize);const n=vz(BigInt(2),BigInt((null!==t&&void 0!==t?t:256)-1)),i=BigInt(-1)*vz(BigInt(2),BigInt((null!==t&&void 0!==t?t:256)-1));try{const t="string"===typeof e&&Dq(e)?BigInt(Jq(e)):BigInt(e);return t>=i&&t<=n}catch(o){return!1}},_z=e=>!!wz(e)||(!("string"!==typeof e||!/[0-9.]/.test(e)||e.indexOf(".")!==e.lastIndexOf("."))||"number"===typeof e),Ez=e=>bz(e),Az=e=>Object.values(dz).includes(e),Sz=e=>Az(e)||Ez(e),kz=e=>"string"===typeof e&&(!!/^(0x)?[0-9a-f]{512}$/i.test(e)&&!(!/^(0x)?[0-9a-f]{512}$/.test(e)&&!/^(0x)?[0-9A-F]{512}$/.test(e))),xz=(e,t)=>{if("string"===typeof t&&!Dq(t))return!1;if(!kz(e))return!1;const r="string"===typeof t?tz(t):t,n=Xq(AF(r)).slice(2);for(let i=0;i<12;i+=4){const t=(parseInt(n.slice(i,i+2),16)<<8)+parseInt(n.slice(i+2,i+4),16)&2047,r=1<<t%4;if((Qq(e.charCodeAt(e.length-1-Math.floor(t/4)))&r)!==r)return!1}return!0},Iz=e=>void 0===e||null===e,Tz=e=>"object"===typeof e&&!Iz(e)&&!Array.isArray(e)&&!(e instanceof fz),Pz=e=>"string"===typeof e&&(!!/^(0x)?[0-9a-f]{64}$/i.test(e)&&!(!/^(0x)?[0-9a-f]{64}$/.test(e)&&!/^(0x)?[0-9A-F]{64}$/.test(e))),Rz={address:e=>sz(e),bloom:e=>kz(e),blockNumber:e=>Ez(e),blockTag:e=>Az(e),blockNumberOrTag:e=>Sz(e),bool:e=>{return!!["number","string","boolean"].includes(typeof(t=e))&&("boolean"===typeof t||("string"!==typeof t||Dq(t)?"string"===typeof t&&Dq(t)?"0x1"===t||"0x0"===t:1===t||0===t:"1"===t||"0"===t));var t},bytes:e=>iz(e),filter:e=>(e=>{const t=["fromBlock","toBlock","address","topics","blockHash"];if(Iz(e)||"object"!==typeof e)return!1;if(!Object.keys(e).every((e=>t.includes(e))))return!1;if(!Iz(e.fromBlock)&&!Sz(e.fromBlock)||!Iz(e.toBlock)&&!Sz(e.toBlock))return!1;if(!Iz(e.address))if(Array.isArray(e.address)){if(!e.address.every((e=>sz(e))))return!1}else if(!sz(e.address))return!1;return!(!Iz(e.topics)&&!e.topics.every((e=>!!Iz(e)||(Array.isArray(e)?e.every((e=>Pz(e))):!!Pz(e)))))})(e),hex:e=>Dq(e),uint:e=>bz(e),int:e=>wz(e),number:e=>_z(e),string:e=>Oq(e)};for(let tX=8;tX<=256;tX+=8)Rz["int".concat(tX)]=e=>wz(e,{bitSize:tX}),Rz["uint".concat(tX)]=e=>bz(e,{bitSize:tX});for(let tX=1;tX<=32;tX+=1)Rz["bytes".concat(tX)]=e=>iz(e,{size:tX});Rz.bytes256=Rz.bytes;const Cz=Rz,Bz=e=>{if((!(null===e||void 0===e?void 0:e.type)||"object"===(null===e||void 0===e?void 0:e.type))&&(null===e||void 0===e?void 0:e.properties)){const t={};for(const r of Object.keys(e.properties)){const n=Bz(e.properties[r]);n&&(t[r]=n)}return Array.isArray(e.required)?Rq.object(t).partial().required(e.required.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!0})),{})):Rq.object(t).partial()}if("array"===(null===e||void 0===e?void 0:e.type)&&(null===e||void 0===e?void 0:e.items)){if(Array.isArray(e.items)&&e.items.length>0){const t=[];for(const r of e.items){const e=Bz(r);e&&t.push(e)}return Rq.tuple(t)}return Rq.array(Bz(e.items))}if(e.oneOf&&Array.isArray(e.oneOf))return Rq.union(e.oneOf.map((e=>Bz(e))));if(null===e||void 0===e?void 0:e.format){if(!Cz[e.format])throw new eF(e.format);return Rq.any().refine(Cz[e.format],(t=>({params:{value:t,format:e.format}})))}return(null===e||void 0===e?void 0:e.type)&&"object"!==(null===e||void 0===e?void 0:e.type)&&"function"===typeof Rq[String(e.type)]?Rq[String(e.type)]():Rq.object({data:Rq.any()}).partial()};class Mz{static factory(){return Mz.validatorInstance||(Mz.validatorInstance=new Mz),Mz.validatorInstance}validate(e,t,r){var n,i;const o=Bz(e).safeParse(t);if(!o.success){const e=this.convertErrors(null!==(i=null===(n=o.error)||void 0===n?void 0:n.issues)&&void 0!==i?i:[]);if(e){if(null===r||void 0===r?void 0:r.silent)return e;throw new Bq(e)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map((e=>{var t;let r,n,i,o;o=e.path.join("/");const s=String(e.path[e.path.length-1]),a=e.path.join("/");if(e.code===TF.too_big)n="maxItems",o="".concat(a,"/maxItems"),i={limit:e.maximum},r="must NOT have more than ".concat(e.maximum," items");else if(e.code===TF.too_small)n="minItems",o="".concat(a,"/minItems"),i={limit:e.minimum},r="must NOT have fewer than ".concat(e.minimum," items");else if(e.code===TF.custom){const{value:n,format:s}=null!==(t=e.params)&&void 0!==t?t:{};r="undefined"===typeof n?'value at "/'.concat(o,'" is required'):'value "'.concat("object"===typeof n?JSON.stringify(n):n,'" at "/').concat(o,'" must pass "').concat(s,'" validation'),i={value:n}}return{keyword:null!==n&&void 0!==n?n:s,instancePath:a?"/".concat(a):"",schemaPath:o?"#".concat(o):"#",params:null!==i&&void 0!==i?i:{value:e.message},message:null!==r&&void 0!==r?r:e.message}}))}}const Nz=new class{constructor(){this._validator=Mz.factory()}validateJSONSchema(e,t,r){return this._validator.validate(e,t,r)}validate(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{silent:!1};var n,i;const o=Vq(e);if(!Array.isArray(o.items)||0!==(null===(n=o.items)||void 0===n?void 0:n.length)||0!==t.length){if(Array.isArray(o.items)&&0===(null===(i=o.items)||void 0===i?void 0:i.length)&&0!==t.length)throw new Bq([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:t}]);return this._validator.validate(o,t,r)}}};function Oz(e){var t;return e instanceof Uint8Array||"Uint8Array"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name)}function Dz(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.reduce(((e,t)=>e+t.length),0),i=new Uint8Array(n);let o=0;for(const s of t)i.set(s,o),o+=s.length;return i}function Lz(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r+=1)if(e[r]!==t[r])return!1;return!0}const Uz={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")},Fz=e=>{if(Nz.validate(["bytes"],[e]),Oz(e))return e;if(Array.isArray(e))return new Uint8Array(e);if("string"===typeof e)return tz(e);throw new BU(e)},{uint8ArrayToHexString:jz}=Le,qz=e=>jz(Fz(e)),zz=e=>"string"===typeof e&&"0x"!==e.slice(0,2).toLowerCase()?Fz("0x".concat(e)):Fz(e),Hz=e=>(Nz.validate(["hex"],[e]),Jq(e)),Kz=Hz,Vz=(e,t)=>{"bigint"!==typeof e&&Nz.validate(["int"],[e]);let r=Zq(e);return t&&(r.startsWith("-")||r.length%2!==1?r.length%2===0&&r.startsWith("-")&&(r="-0x0".concat(r.slice(3))):r="0x0".concat(r.slice(2))),r},Gz=Vz,Wz=e=>Hz(e).toString(),Qz=e=>{Nz.validate(["string"],[e]);let t=e.replace(/^(?:\u0000)/,"");return t=t.replace(/(?:\u0000)$/,""),qz((new TextEncoder).encode(t))},Jz=Qz,Zz=Qz,Yz=e=>_F(zz(e)),Xz=e=>"string"===typeof e?Yz(e):(Nz.validate(["bytes"],[e]),_F(e)),$z=wi,eH=Yz,tH=e=>{Nz.validate(["string"],[e]);let t="";for(let r=0;r<e.length;r+=1){const n=e.charCodeAt(r).toString(16);t+=n.length%2!==0?"0".concat(n):n}return"0x".concat(t)},rH=tH,nH=e=>new TextDecoder("ascii").decode(zz(e)),iH=nH,oH=(e,t)=>{if("string"===typeof e&&sz(e))return t?"address":"0x".concat(e.toLowerCase().replace(/^0x/i,""));if("boolean"===typeof e)return t?"bool":e?"0x01":"0x00";if("number"===typeof e)return t?e<0?"int256":"uint256":Vz(e);if("bigint"===typeof e)return t?"bigint":Vz(e);if("object"===typeof e&&e)return t?"string":Qz(JSON.stringify(e));if("string"===typeof e){if(e.startsWith("-0x")||e.startsWith("-0X"))return t?"int256":Vz(e);if(Dq(e))return t?"bytes":e;if(Uq(e)&&!wz(e)&&!bz(e))return t?"bytes":"0x".concat(e);if(Uq(e)&&!wz(e)&&bz(e))return t?"uint":Vz(e);if(!Number.isFinite(e))return t?"string":Qz(e)}throw new LU(e)},sH=e=>{if("number"===typeof e)return e;if("bigint"===typeof e)return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e;if("string"===typeof e&&Dq(e))return Hz(e);try{return sH(BigInt(e))}catch(kK){throw new MU(e)}},aH=e=>{if("number"===typeof e)return BigInt(e);if("bigint"===typeof e)return e;if("string"===typeof e&&Uq(e))return e.startsWith("-")?-BigInt(e.substring(1)):BigInt(e);throw new MU(e)},cH=(e,t)=>{const r=Uz[t];if(!r)throw new DU(t);const n=String(sH(e)),i=r.toString().length-1;if(i<=0)return n.toString();const o=n.padStart(i,"0"),s=o.slice(0,-i),a=o.slice(-i).replace(/\.?0+$/,"");return""===s?"0.".concat(a):""===a?s:"".concat(s,".").concat(a)},uH=(e,t)=>{Nz.validate(["number"],[e]);const r=Uz[t];if(!r)throw new DU(t);const[n,i]=String("string"!==typeof e||Dq(e)?sH(e):e).split(".").concat(""),o=BigInt("".concat(n).concat(i))*r,s=r.toString().length-1,a=Math.min(i.length,s);return 0===a?o.toString():o.toString().padStart(a,"0").slice(0,-a)},lH=e=>{if(!sz(e,!1))throw new NU(e);const t=e.toLowerCase().replace(/^0x/i,""),r=Xq(AF(rz($z(t))));if(Iz(r)||"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"===r)return"";let n="0x";const i=r.replace(/^0x/i,"");for(let o=0;o<t.length;o+=1)parseInt(i[o],16)>7?n+=t[o].toUpperCase():n+=t[o];return n},dH=e=>{if("boolean"===typeof e)return e;if("number"===typeof e&&(0===e||1===e))return Boolean(e);if("bigint"===typeof e&&(e===BigInt(0)||e===BigInt(1)))return Boolean(e);if("string"===typeof e&&!Dq(e)&&("1"===e||"0"===e||"false"===e||"true"===e))return"true"===e||"false"!==e&&Boolean(Number(e));if("string"===typeof e&&Dq(e)&&("0x1"===e||"0x0"===e))return Boolean(sH(e));throw new FU(e)};var hH=__webpack_require__(7465),fH=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class pH extends EventTarget{constructor(){super(...arguments),this._listeners={},this.maxListeners=Number.MAX_SAFE_INTEGER}on(e,t){return this.addEventListener(e,t),this}once(e,t){const r=n=>fH(this,void 0,void 0,(function*(){this.off(e,r),yield t(n)}));return this.on(e,r)}off(e,t){return this.removeEventListener(e,t),this}emit(e,t){const r=new CustomEvent(e,{detail:t});return super.dispatchEvent(r)}listenerCount(e){const t=this._listeners[e];return t?t.length:0}listeners(e){return this._listeners[e].map((e=>e[0]))||[]}eventNames(){return Object.keys(this._listeners)}removeAllListeners(){return Object.keys(this._listeners).forEach((e=>{this._listeners[e].forEach((t=>{super.removeEventListener(e,t[1])}))})),this._listeners={},this}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}addEventListener(e,t){const r=(e=>t=>e(t.detail))(t);super.addEventListener(e,r),this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push([t,r])}removeEventListener(e,t){const r=this._listeners[e];if(r){const n=r.findIndex((e=>e[0]===t));-1!==n&&(super.removeEventListener(e,r[n][1]),r.splice(n,1))}}}let gH;gH="undefined"===typeof window?hH.EventEmitter:pH;class mH extends gH{}const yH=Dq,vH=Uq,bH=oz,wH=sz,_H=kz,EH=xz,AH=(e,t)=>{if(!kz(e))return!1;if(!sz(t))return!1;const r=Yq(t,64);return xz(e,r)},SH=(e,t)=>!!kz(e)&&(!!sz(t)&&xz(e,t)),kH=Pz,xH=(e,t)=>!!kz(e)&&(!!Pz(t)&&xz(e,t)),IH=(e,t)=>{const r="string"===typeof e&&Az(e),n="string"===typeof t&&Az(t);if(e===t||("earliest"===e||0===e)&&("earliest"===t||0===t))return 0;if("earliest"===e&&t>0)return-1;if("earliest"===t&&e>0)return 1;if(r&&n){const r={[dz.EARLIEST]:1,[dz.FINALIZED]:2,[dz.SAFE]:3,[dz.LATEST]:4,[dz.PENDING]:5};return r[e]<r[t]?-1:1}if(r&&!n||!r&&n)throw new HU("Cannot compare blocktag with provided non-blocktag input.");const i=BigInt(e),o=BigInt(t);return i<o?-1:i===o?0:1},TH=e=>"object"===typeof e&&!Iz(e)&&0!==Object.keys(e).length&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some((t=>t in e)),PH=Iz,RH=e=>"object"===typeof e&&!Iz(e)&&!Array.isArray(e)&&!(e instanceof fz),CH=function(e){const t=e;if(!RH(t))return t;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(const o of n)for(const e in o)RH(o[e])?(t[e]||(t[e]={}),CH(t[e],o[e])):!Iz(o[e])&&Object.hasOwnProperty.call(o,e)&&(Array.isArray(o[e])||o[e]instanceof fz?t[e]=o[e].slice(0):t[e]=o[e]);return t},BH=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return"string"===typeof e?Dq(e)?Yq(e,t,r):e.padStart(t,r):(Nz.validate(["int"],[e]),Yq(e,t,r))},MH=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";if("string"===typeof e&&!Dq(e))return e.padEnd(t,r);Nz.validate(["int"],[e]);const n="string"===typeof e&&Dq(e)?e:Vz(e),i=n.startsWith("-")?3:2;return n.padEnd(t+i,r)},NH=MH,OH=BH,DH=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;Nz.validate(["int"],[e]);const r=sH(e);if(r>=0)return BH(oH(r),t);const n=vz(BigInt(2),BigInt(4*t));if(-r>=n)throw new UU("value: ".concat(e,", nibbleWidth: ").concat(t));const i=BigInt(r);return BH(Vz(i+n),t)},LH=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;Nz.validate(["int"],[e]);const r=sH(e);if(r<0)return r;const n=Math.ceil(Math.log(Number(r))/Math.log(2));if(n>4*t)throw new UU('value: "'.concat(e,'", nibbleWidth: "').concat(t,'"'));if(4*t!==n)return r;const i=vz(BigInt(2),BigInt(t)*BigInt(4));return sH(BigInt(r)-i)},{parseBaseType:UH}=Le,FH=e=>"object"===typeof e&&!Iz(e)&&"number"in e&&"bytes"in e,jH=function(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=Object.assign({},e);for(const o of t){if(i.oneOf&&r){const e=n.find((function(e){return this===e[0]}),null!==r&&void 0!==r?r:"");e&&e[0]===r&&(i=i.oneOf[e[1]])}if(!i.properties&&!i.items)return;if(i.properties)i=i.properties[o];else if(i.items&&i.items.properties){const e=i.items.properties;if(!e)return;i=e[o]}else i.items&&Tz(i.items)?i=i.items:i.items&&Array.isArray(i.items)&&(i=i.items[parseInt(o,10)]);i&&o&&(r=o)}return i},qH=(e,t,r)=>{try{const{baseType:n,baseTypeSize:i}=UH(t);if("int"===n||"uint"===n)switch(r.number){case az.NUMBER:return Number(aH(e));case az.HEX:return Vz(aH(e));case az.STR:return aH(e).toString();case az.BIGINT:return aH(e);default:throw new LL("Invalid format: ".concat(String(r.number)))}if("bytes"===n){let t;switch(i?"string"===typeof e?t=BH(e,2*i):Oz(e)&&(t=Dz(new Uint8Array(i-e.length),e)):t=e,r.bytes){case cz.HEX:return qz(Fz(t));case cz.UINT8ARRAY:return Fz(t);default:throw new LL("Invalid format: ".concat(String(r.bytes)))}}}catch(n){return e}return e},zH=function(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var o,s;if(!Tz(e)&&!Array.isArray(e))return qH(e,null===t||void 0===t?void 0:t.format,n);const a=e;for(const[c,u]of Object.entries(a)){r.push(c);const e=jH(t,r,i);if(Iz(e))delete a[c],r.pop();else if(Tz(u))zH(u,t,r,n),r.pop();else{if(Array.isArray(u)){let l=e;if(void 0!==(null===e||void 0===e?void 0:e.oneOf)&&e.oneOf.forEach(((t,r)=>{var n,o;!Array.isArray(null===e||void 0===e?void 0:e.items)&&("object"===typeof u[0]&&"object"===(null===(n=null===t||void 0===t?void 0:t.items)||void 0===n?void 0:n.type)||"string"===typeof u[0]&&"object"!==(null===(o=null===t||void 0===t?void 0:t.items)||void 0===o?void 0:o.type))&&(l=t,i.push([c,r]))})),Iz(null===l||void 0===l?void 0:l.items)){delete a[c],r.pop();continue}if(Tz(l.items)&&!Iz(l.items.format)){for(let e=0;e<u.length;e+=1)a[c][e]=qH(u[e],null===(o=null===l||void 0===l?void 0:l.items)||void 0===o?void 0:o.format,n);r.pop();continue}if(!Array.isArray(null===l||void 0===l?void 0:l.items)&&"object"===(null===(s=null===l||void 0===l?void 0:l.items)||void 0===s?void 0:s.type)){for(const e of u)zH(e,t,r,n,i);r.pop();continue}if(Array.isArray(null===l||void 0===l?void 0:l.items)){for(let e=0;e<u.length;e+=1)a[c][e]=qH(u[e],l.items[e].format,n);r.pop();continue}}a[c]=qH(u,e.format,n),r.pop()}}return a},HH=(e,t,r)=>{let n;n=Tz(t)?CH({},t):Array.isArray(t)?[...t]:t;const i=Tz(e)?e:Vq(e);if(!i.properties&&!i.items&&!i.format)throw new LL("Invalid json schema for formatting");return zH(n,i,[],r)},KH="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",VH=e=>{let t;t="string"===typeof e?e.startsWith("0x")&&Dq(e)?zz(e):wi(e):e;const r=qz(AF(rz(t)));return r===KH?void 0:r},GH=e=>{const t=VH(e);return Iz(t)?KH:t},WH=e=>{let t;return t="bigint"===typeof e||"number"===typeof e?wi(e.toString()):Array.isArray(e)?new Uint8Array(e):"string"!==typeof e||Dq(e)?Fz(e):wi(e),qz(AF(rz(t)))},QH=(e,t)=>{const r=/^(\d+).*$/.exec(e.slice(t));return r?parseInt(r[1],10):0},JH=e=>e.toString(2).length,ZH=(e,t)=>{const r=t.toString();if("string"===e){if("string"===typeof t)return Qz(t);throw new OU(t)}if("bool"===e||"boolean"===e){if("boolean"===typeof t)return t?"01":"00";throw new FU(t)}if("address"===e){if(!sz(r))throw new NU(r);return r}const n=(e=>e.startsWith("int[")?"int256".concat(e.slice(3)):"int"===e?"int256":e.startsWith("uint[")?"uint256'".concat(e.slice(4)):"uint"===e?"uint256":e)(e);if(e.startsWith("uint")){const e=QH(n,4);if(e%8||e<8||e>256)throw new qU(r);const t=sH(r);if(JH(t)>e)throw new zU(r);if(t<BigInt(0))throw new jU(r);return e?OH(t.toString(16),e/8*2):t.toString(16)}if(e.startsWith("int")){const t=QH(n,3);if(t%8||t<8||t>256)throw new qU(e);const i=sH(r);if(JH(i)>t)throw new zU(r);return i<BigInt(0)?DH(i.toString(),t/8*2):t?OH(i.toString(16),t/4):i.toString(16)}if("bytes"===n){if(r.replace(/^0x/i,"").length%2!==0)throw new BU(r);return r}if(e.startsWith("bytes")){if(r.replace(/^0x/i,"").length%2!==0)throw new BU(r);const t=QH(e,5);if(!t||t<1||t>64||t<r.replace(/^0x/i,"").length/2)throw new BU(r);return NH(r,2*t)}return""},YH=e=>{const[t,r]=(e=>{if(Array.isArray(e))throw new Error("Autodetection of array types is not supported.");let t,r;if("object"===typeof e&&("t"in e||"type"in e)&&("v"in e||"value"in e))t="t"in e?e.t:e.type,r="v"in e?e.v:e.value,t="bigint"===t.toLowerCase()?"int":t;else{if("bigint"===typeof e)return["int",e];t=oH(e,!0),r=oH(e),t.startsWith("int")||t.startsWith("uint")||(t="bytes")}return!t.startsWith("int")&&!t.startsWith("uint")||"string"!==typeof r||/^(-)?0x/i.test(r)||(r=aH(r)),[t,r]})(e);if(Array.isArray(r)){return r.map((e=>ZH(t,e).replace("0x",""))).join("")}return ZH(t,r).replace("0x","")},XH=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const n=t.map(YH);return"0x".concat(n.join("").toLowerCase())},$H=function(){return VH(XH(...arguments))},eK=function(){return GH(XH(...arguments))},tK=e=>VH("0x".concat(("number"===typeof e?e.toString():e).padStart(64,"0")));const rK=e=>function(e){return Ii(e)}(e),nK=e=>qz(rK(e));var iK=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function oK(e){return("object"===typeof e||"function"===typeof e)&&"function"===typeof e.then}function sK(e,t,r){return iK(this,void 0,void 0,(function*(){let n;const i=yield Promise.race([e instanceof Promise?e:e(),new Promise(((e,i)=>{n=setTimeout((()=>r?i(r):e(void 0)),t)}))]);if(n&&clearTimeout(n),i instanceof Error)throw i;return i}))}function aK(e,t){let r;return[new Promise(((n,i)=>{r=setInterval(function o(){return(()=>{iK(this,void 0,void 0,(function*(){try{const i=yield sK(e,t);Iz(i)||(clearInterval(r),n(i))}catch(o){clearInterval(r),i(o)}}))})(),o}(),t)})),r]}function cK(e,t){return iK(this,void 0,void 0,(function*(){return aK(e,t)[0]}))}function uK(e,t){let r;const n=new Promise(((n,i)=>{r=setTimeout((()=>{i(t)}),e)}));return[r,n]}function lK(e,t){let r;const n=new Promise(((n,i)=>{r=setInterval((()=>{(()=>{iK(this,void 0,void 0,(function*(){const t=yield e();t&&(clearInterval(r),i(t))}))})()}),t)}));return[r,n]}const dK=()=>{const e=rK(16);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=qz(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")},hK=e=>{const t=e.error.code;return $U.has(t)||t>=-32099&&t<=-32e3},fK=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"result"in e&&Iz(e.error)&&("number"===typeof e.id||"string"===typeof e.id),pK=e=>!Array.isArray(e)&&"2.0"===e.jsonrpc&&!!e&&Iz(e.result)&&"error"in e&&("number"===typeof e.id||"string"===typeof e.id),gK=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&!Iz(e.params)&&!Iz(e.method),mK=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"id"in e&&"result"in e,yK=e=>fK(e)||pK(e),vK=e=>Array.isArray(e)?e.every(yK):yK(e),bK=e=>Array.isArray(e)&&e.length>0&&vK(e);let wK;const _K=e=>{wK=e},EK=e=>{var t,r,n,i;return"undefined"!==typeof wK&&(wK+=1),{jsonrpc:null!==(t=e.jsonrpc)&&void 0!==t?t:"2.0",id:null!==(n=null!==(r=e.id)&&void 0!==r?r:wK)&&void 0!==n?n:dK(),method:e.method,params:null!==(i=e.params)&&void 0!==i?i:void 0}},AK=e=>e.map((e=>EK(e))),SK=e=>Array.isArray(e)&&e.length>0;var kK,xK=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class IK{constructor(){let{timeout:e,eagerStart:t,timeoutMessage:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"};this[kK]="Promise",this._state="pending",this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),this._timeoutMessage=r,this._timeoutInterval=e,t&&this.startTimer()}get state(){return this._state}then(e,t){return xK(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return xK(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return xK(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){"pending"===this._state&&this._timeoutId&&this.reject(new FL(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}kK=Symbol.toStringTag;class TK{constructor(e,t){this.eventEmitter=e,this.autoReconnect=t,this.chunkTimout=15e3}clearQueues(){"function"===typeof this._clearQueues&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const t=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((e=>{let r,n=e;this.lastChunk&&(n=this.lastChunk+n);try{r=JSON.parse(n)}catch(i){return this.lastChunk=n,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new GU({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))}),this.chunkTimout))}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,r&&t.push(r)})),t}}var PK=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class RK extends mz{constructor(){super(...arguments),this._eventEmitter=new hH.EventEmitter,this._chainId="",this._accounts=[]}_getChainId(){var e;return PK(this,void 0,void 0,(function*(){const t=yield this.request(EK({method:"eth_chainId",params:[]}));return null!==(e=null===t||void 0===t?void 0:t.result)&&void 0!==e?e:""}))}_getAccounts(){var e;return PK(this,void 0,void 0,(function*(){const t=yield this.request(EK({method:"eth_accounts",params:[]}));return null!==(e=null===t||void 0===t?void 0:t.result)&&void 0!==e?e:[]}))}_onConnect(){Promise.all([this._getChainId().then((e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))})).catch((e=>{console.error(e)})),this._getAccounts().then((e=>{this._accounts.length===e.length&&e.every((t=>e.includes(t)))||(this._accounts=e,this._onAccountsChanged())})).catch((e=>{console.error(e)}))]).then((()=>this._eventEmitter.emit("connect",{chainId:this._chainId}))).catch((e=>{console.error(e)}))}_onDisconnect(e,t){this._eventEmitter.emit("disconnect",new XU(e,t))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var CK=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const BK={autoReconnect:!0,delay:5e3,maxAttempts:5};class MK extends RK{constructor(e,t,r){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new KL(e);this._socketPath=e,this._socketOptions=t,this._reconnectOptions=Object.assign(Object.assign({},BK),null!==r&&void 0!==r?r:{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new TK(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError((()=>{this._clearQueues()})),this.isReconnecting=!1}get SocketConnection(){return this._socketConnection}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(!this.isReconnecting)throw this._connectionStatus="disconnected",e&&e.message?new SL("Error while connecting to ".concat(this._socketPath,". Reason: ").concat(e.message)):new KL(this._socketPath);setImmediate((()=>{this._reconnect()}))}}_validateProviderPath(e){return!!e}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(e,t){this._eventEmitter.on(e,t)}once(e,t){this._eventEmitter.once(e,t)}removeListener(e,t){this._eventEmitter.removeListener(e,t)}_onDisconnect(e,t){this._connectionStatus="disconnected",super._onDisconnect(e,t)}disconnect(e,t){const r=null!==e&&void 0!==e?e:1e3;this._removeSocketListeners(),"disconnected"!==this.getStatus()&&this._closeSocketConnection(r,t),this._onDisconnect(r,t)}safeDisconnect(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;return CK(this,void 0,void 0,(function*(){let i=0;yield(()=>CK(this,void 0,void 0,(function*(){return new Promise((e=>{const t=setInterval((()=>{r&&5===i&&this.clearQueues(),0===this.getPendingRequestQueueSize()&&0===this.getSentRequestsQueueSize()&&(clearInterval(t),e(!0)),i+=1}),n)}))})))(),this.disconnect(e,t)}))}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((e,t)=>{e.deferredPromise.reject(new IL),this._sentRequestsQueue.delete(t)})),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout((()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1}),this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new xL(this._reconnectOptions.maxAttempts))))}request(e){return CK(this,void 0,void 0,(function*(){if(PH(this._socketConnection))throw new Error("Connection is undefined");"disconnected"===this.getStatus()&&this.connect();const t=SK(e)?e[0].id:e.id;if(!t)throw new GL("Request Id not defined");if(this._sentRequestsQueue.has(t))throw new TL(t);const r=new IK;r.catch((e=>{this._eventEmitter.emit("error",e)}));const n={payload:e,deferredPromise:r};if("connecting"===this.getStatus())return this._pendingRequestsQueue.set(t,n),n.deferredPromise;this._sentRequestsQueue.set(t,n);try{this._sendToSocket(n.payload)}catch(i){this._sentRequestsQueue.delete(t),this._eventEmitter.emit("error",i)}return r}))}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,t]of this._pendingRequestsQueue.entries())this._sendToSocket(t.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,t)}_onMessage(e){const t=this._parseResponses(e);if(!PH(t)&&0!==t.length)for(const r of t){if(gK(r)&&r.method.endsWith("_subscription"))return void this._eventEmitter.emit("message",r);const e=bK(r)?r[0].id:r.id,t=this._sentRequestsQueue.get(e);if(!t)return;(bK(r)||fK(r)||pK(r))&&(this._eventEmitter.emit("message",r),t.deferredPromise.resolve(r)),this._sentRequestsQueue.delete(e)}}clearQueues(e){this._clearQueues(e)}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach(((t,r)=>{t.deferredPromise.reject(new kL(e)),this._pendingRequestsQueue.delete(r)})),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((t,r)=>{t.deferredPromise.reject(new kL(e)),this._sentRequestsQueue.delete(r)})),this._removeSocketListeners()}}class NK{constructor(){this._emitter=new mH}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}var OK;!function(e){e.CONFIG_CHANGE="CONFIG_CHANGE"}(OK||(OK={}));class DK extends NK{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:75e4,transactionReceiptPollingInterval:void 0,transactionSendTimeout:75e4,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:oH(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0},this.setConfig(null!==e&&void 0!==e?e:{})}setConfig(e){const t=Object.keys(e);for(const r of t)this._triggerConfigChange(r,e[r]);Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!PH(this.config.defaultCommon)&&!PH(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new QU(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!PH(this.config.defaultCommon)&&!PH(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new WU(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!PH(this.config.defaultHardfork)&&!PH(e)&&!PH(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new WU(this.config.defaultHardfork,e.hardfork);if(!PH(this.config.defaultChain)&&!PH(e)&&!PH(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new QU(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}_triggerConfigChange(e,t){this.emit(OK.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:t})}}var LK=__webpack_require__(4255),UK=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class FK extends mz{constructor(e,t){if(super(),!FK.validateClientUrl(e))throw new KL(e);this.clientUrl=e,this.httpProviderOptions=t}static validateClientUrl(e){return"string"===typeof e&&/^http(s)?:\/\//i.test(e)}getStatus(){throw new UL}supportsSubscriptions(){return!1}request(e,t){var r;return UK(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},null===(r=this.httpProviderOptions)||void 0===r?void 0:r.providerOptions),t),i=yield LK(this.clientUrl,Object.assign(Object.assign({},n),{method:"POST",headers:Object.assign(Object.assign({},n.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!i.ok)throw new VU(yield i.json());return yield i.json()}))}on(){throw new UL}removeListener(){throw new UL}once(){throw new UL}removeAllListeners(){throw new UL}connect(){throw new UL}disconnect(){throw new UL}reset(){throw new UL}reconnect(){throw new UL}}var jK=null;"undefined"!==typeof WebSocket?jK=WebSocket:"undefined"!==typeof MozWebSocket?jK=MozWebSocket:"undefined"!==typeof __webpack_require__.g?jK=__webpack_require__.g.WebSocket||__webpack_require__.g.MozWebSocket:"undefined"!==typeof window?jK=window.WebSocket||window.MozWebSocket:"undefined"!==typeof self&&(jK=self.WebSocket||self.MozWebSocket);const qK=jK;const zK=e=>mz.isWeb3Provider(e),HK=e=>"string"!==typeof e&&"request"in e&&"Function"===e.request.constructor.name,KK=e=>"string"!==typeof e&&"request"in e&&"AsyncFunction"===e.request.constructor.name,VK=e=>"string"!==typeof e&&"send"in e,GK=e=>"string"!==typeof e&&"sendAsync"in e,WK=e=>e&&(zK(e)||KK(e)||HK(e)||GK(e)||VK(e));var QK,JK=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e.PROVIDER_CHANGED="PROVIDER_CHANGED",e.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"}(QK||(QK={}));const ZK={HttpProvider:FK,WebsocketProvider:class extends MK{constructor(e,t,r){super(e,t,r)}_validateProviderPath(e){return"string"===typeof e&&/^ws(s)?:\/\//i.test(e)}getStatus(){if(this._socketConnection&&!PH(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new qK(this._socketPath,void 0,this._socketOptions&&0===Object.keys(this._socketOptions).length?void 0:this._socketOptions)}_closeSocketConnection(e,t){var r;null===(r=this._socketConnection)||void 0===r||r.close(e,t)}_sendToSocket(e){var t;if("disconnected"===this.getStatus())throw new kL;null===(t=this._socketConnection)||void 0===t||t.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,t,r,n;null===(e=this._socketConnection)||void 0===e||e.addEventListener("open",this._onOpenHandler),null===(t=this._socketConnection)||void 0===t||t.addEventListener("message",this._onMessageHandler),null===(r=this._socketConnection)||void 0===r||r.addEventListener("close",(e=>this._onCloseHandler(e))),null===(n=this._socketConnection)||void 0===n||n.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,t,r;null===(e=this._socketConnection)||void 0===e||e.removeEventListener("message",this._onMessageHandler),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("open",this._onOpenHandler),null===(r=this._socketConnection)||void 0===r||r.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var t;!this._reconnectOptions.autoReconnect||[1e3,1001].includes(e.code)&&e.wasClean?(this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("error",this._onErrorHandler)):this._reconnect()}}};class YK extends NK{constructor(e,t){super(),PH(e)||this.setProvider(e),this.useRpcCallSpecification=t}static get providers(){return ZK}get provider(){return this._provider}get providers(){return ZK}setProvider(e){let t;if(e&&"string"===typeof e&&this.providers)if(/^http(s)?:\/\//i.test(e))t=new this.providers.HttpProvider(e);else{if(!/^ws(s)?:\/\//i.test(e))throw new HL("Can't autodetect provider for \"".concat(e,'"'));t=new this.providers.WebsocketProvider(e)}else t=PH(e)?void 0:e;return this.emit(QK.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=t,this.emit(QK.PROVIDER_CHANGED,this._provider),!0}send(e){return JK(this,void 0,void 0,(function*(){const t=yield this._sendRequest(e);if(fK(t))return t.result;throw new VU(t)}))}sendBatch(e){return JK(this,void 0,void 0,(function*(){return yield this._sendRequest(e)}))}_sendRequest(e){return JK(this,void 0,void 0,(function*(){const{provider:t}=this;if(PH(t))throw new HL("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");const r=SK(e)?AK(e):EK(e);if(zK(t)){let e;try{e=yield t.request(r)}catch(n){e=n}return this._processJsonRpcResponse(r,e,{legacy:!1,error:!1})}if(KK(t))return t.request(r).then((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})));if(HK(t))return new Promise(((e,n)=>{const i=e=>n(this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})),o=t=>e(this._processJsonRpcResponse(r,t,{legacy:!0,error:!1})),s=t.request(r,((e,t)=>e?i(e):o(t)));if(oK(s)){s.then(o).catch(i)}}));if(VK(t))return new Promise(((e,n)=>{t.send(r,((t,i)=>{if(t)return n(this._processJsonRpcResponse(r,t,{legacy:!0,error:!0}));if(PH(i))throw new VU("",'Got a "nullish" response from provider.');return e(this._processJsonRpcResponse(r,i,{legacy:!0,error:!1}))}))}));if(GK(t))return t.sendAsync(r).then((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})));throw new HL("Provider does not have a request or send method to use.")}))}_processJsonRpcResponse(e,t,r){let{legacy:n,error:i}=r;if(PH(t))return this._buildResponse(e,null,i);if(pK(t)){if(this.useRpcCallSpecification&&hK(t)){const e=t;if($U.get(e.error.code)){throw new(0,$U.get(e.error.code).error)(e)}throw new YU(e)}if(!YK._isReverted(t))throw new GU(t,e)}if(fK(t))return t;if(t instanceof Error)throw YK._isReverted(t),t;if(!n&&SK(e)&&bK(t))return t;if(n&&!i&&SK(e))return t;if(n&&i&&SK(e))throw t;if(n&&!pK(t)&&!fK(t))return this._buildResponse(e,t,i);if(SK(e)&&!Array.isArray(t))throw new VU(t,"Got normal response for a batch request.");if(!SK(e)&&Array.isArray(t))throw new VU(t,"Got batch response for a normal request.");if((pK(t)||fK(t))&&!SK(e)&&t.id&&e.id!==t.id)throw new GU(t);throw new VU(t,"Invalid response")}static _isReverted(e){let t;if(pK(e)?t=e.error:e instanceof Error&&(t=e),null===t||void 0===t?void 0:t.message.includes("revert"))throw new BL(t);return!1}_buildResponse(e,t,r){const n={jsonrpc:"2.0",id:SK(e)?e[0].id:"id"in e?e.id:null};return r?Object.assign(Object.assign({},n),{error:t}):Object.assign(Object.assign({},n),{result:t})}}var XK=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class $K{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.requestManager=e,this.registeredSubscriptions=t,this.tolerateUnlinkedSubscription=r,this._subscriptions=new Map,this.requestManager.on(QK.BEFORE_PROVIDER_CHANGE,(()=>XK(this,void 0,void 0,(function*(){yield this.unsubscribe()})))),this.requestManager.on(QK.PROVIDER_CHANGED,(()=>{this.clear(),this.listenToProviderEvents()})),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;this.requestManager.provider&&("function"!==typeof(null===e||void 0===e?void 0:e.supportsSubscriptions)||(null===e||void 0===e?void 0:e.supportsSubscriptions()))&&"function"===typeof this.requestManager.provider.on&&("function"===typeof this.requestManager.provider.request?this.requestManager.provider.on("message",(e=>this.messageListener(e))):e.on("data",(e=>this.messageListener(e))))}messageListener(e){var t,r,n;if(!e)throw new VL("Should not call messageListener with no data. Type was");const i=(null===(t=e.params)||void 0===t?void 0:t.subscription)||(null===(r=e.data)||void 0===r?void 0:r.subscription)||(null===(n=e.id)||void 0===n?void 0:n.toString(16));if(i){const t=this._subscriptions.get(i);null===t||void 0===t||t.processSubscriptionData(e)}}subscribe(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return XK(this,void 0,void 0,(function*(){const n=this.registeredSubscriptions[e];if(!n)throw new VL("Invalid subscription type");const i=new n(null!==t&&void 0!==t?t:void 0,{subscriptionManager:this,returnFormat:r});return yield this.addSubscription(i),i}))}get subscriptions(){return this._subscriptions}addSubscription(e){return XK(this,void 0,void 0,(function*(){if(!this.requestManager.provider)throw new HL("Provider not available");if(!this.supportsSubscriptions())throw new VL("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new VL('Subscription with id "'.concat(e.id,'" already exists'));if(yield e.sendSubscriptionRequest(),PH(e.id))throw new VL("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id}))}removeSubscription(e){return XK(this,void 0,void 0,(function*(){const{id:t}=e;if(PH(t))throw new VL("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(t)&&!this.tolerateUnlinkedSubscription)throw new VL('Subscription with id "'.concat(t.toString(),'" does not exists'));return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(t),t}))}unsubscribe(e){return XK(this,void 0,void 0,(function*(){const t=[];for(const[r,n]of this.subscriptions.entries())(!e||"function"===typeof e&&e({id:r,sub:n}))&&t.push(this.removeSubscription(n));return Promise.all(t)}))}clear(){this._subscriptions.clear()}supportsSubscriptions(){return!PH(this.requestManager.provider)&&((e=this.requestManager.provider)&&"supportsSubscriptions"in e?e.supportsSubscriptions():!(!e||"string"===typeof e||!("on"in e)));var e}}var eV=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class tV extends NK{constructor(e,t){var r;super(),this.args=e;const{requestManager:n}=t,{subscriptionManager:i}=t;if(n&&i)throw new VL("Only requestManager or subscriptionManager should be provided at Subscription constructor");if(!n&&!i)throw new VL("Either requestManager or subscriptionManager should be provided at Subscription constructor");this._subscriptionManager=n?new $K(n,{},!0):i,this._returnFormat=null!==(r=null===t||void 0===t?void 0:t.returnFormat)&&void 0!==r?r:uz}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return eV(this,void 0,void 0,(function*(){return this._subscriptionManager.addSubscription(this)}))}processSubscriptionData(e){var t,r;(null===e||void 0===e?void 0:e.data)?this._processSubscriptionResult(null!==(r=null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.result)&&void 0!==r?r:null===e||void 0===e?void 0:e.data):e&&gK(e)&&this._processSubscriptionResult(null===e||void 0===e?void 0:e.params.result)}sendSubscriptionRequest(){return eV(this,void 0,void 0,(function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id}))}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return eV(this,void 0,void 0,(function*(){yield this.unsubscribe(),yield this.subscribe()}))}unsubscribe(){return eV(this,void 0,void 0,(function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))}))}sendUnsubscribeRequest(){return eV(this,void 0,void 0,(function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0}))}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}var rV=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class nV extends yz{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return!t||22!==t.code&&1014!==t.code&&"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||Iz(e)||0===e.length?void 0:e}}create(e){for(let t=0;t<e;t+=1)this.add(this._accountProvider.create());return this}add(e){var t;if("string"===typeof e)return this.add(this._accountProvider.privateKeyToAccount(e));let r=this.length;return this.get(e.address)&&(console.warn("Account ".concat(e.address.toLowerCase()," already exists.")),r=null!==(t=this._addressMap.get(e.address.toLowerCase()))&&void 0!==t?t:r),this._addressMap.set(e.address.toLowerCase(),r),this[r]=e,this}get(e){if("string"===typeof e){const t=this._addressMap.get(e.toLowerCase());return Iz(t)?void 0:this[t]}return this[e]}remove(e){if("string"===typeof e){const t=this._addressMap.get(e.toLowerCase());return!Iz(t)&&(this._addressMap.delete(e.toLowerCase()),this.splice(t,1),!0)}return!!this[e]&&(this.splice(e,1),!0)}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,t){return rV(this,void 0,void 0,(function*(){return Promise.all(this.map((r=>rV(this,void 0,void 0,(function*(){return r.encrypt(e,t)})))))}))}decrypt(e,t,r){return rV(this,void 0,void 0,(function*(){const n=yield Promise.all(e.map((e=>rV(this,void 0,void 0,(function*(){return this._accountProvider.decrypt(e,t,r)})))));for(const e of n)this.add(e);return this}))}save(e,t){return rV(this,void 0,void 0,(function*(){const r=nV.getStorage();if(!r)throw new Error("Local storage not available.");return r.setItem(null!==t&&void 0!==t?t:this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0}))}load(e,t){return rV(this,void 0,void 0,(function*(){const r=nV.getStorage();if(!r)throw new Error("Local storage not available.");const n=r.getItem(null!==t&&void 0!==t?t:this._defaultKeyName);return n&&(yield this.decrypt(JSON.parse(n)||[],e)),this}))}}const iV={web:gi};function oV(e,t,r){if(!r.startsWith("aes-"))throw new Error("AES submodule doesn't support mode ".concat(r));if(16!==t.length)throw new Error("AES: wrong IV length");if(r.startsWith("aes-128")&&16!==e.length||r.startsWith("aes-256")&&32!==e.length)throw new Error("AES: wrong key length")}async function sV(e,t,r){if(!iV.web)throw new Error("Browser crypto not available.");let n;if(["aes-128-cbc","aes-256-cbc"].includes(e)&&(n="cbc"),["aes-128-ctr","aes-256-ctr"].includes(e)&&(n="ctr"),!n)throw new Error("AES: unsupported mode");return[await iV.web.subtle.importKey("raw",t,{name:"AES-".concat(n.toUpperCase()),length:8*t.length},!0,["encrypt","decrypt"]),{name:"aes-".concat(n),iv:r,counter:r,length:128}]}async function aV(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"aes-128-ctr",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(oV(t,r,n),iV.web){const[o,s]=await sV(n,t,r),a=await iV.web.subtle.encrypt(s,o,e);let c=new Uint8Array(a);return i||"aes-cbc"!==s.name||e.length%16||(c=c.slice(0,-16)),c}if(iV.node){const o=iV.node.createCipheriv(n,t,r);return o.setAutoPadding(i),Ei(o.update(e),o.final())}throw new Error("The environment doesn't have AES module")}async function cV(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"aes-128-ctr",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(oV(t,r,n),iV.web){const[o,s]=await sV(n,t,r);if(!i&&"aes-cbc"===s.name){const i=await async function(e,t,r,n){const i=e.slice(-16);for(let o=0;o<16;o++)i[o]^=16^r[o];return(await aV(i,t,r,n)).slice(0,16)}(e,t,r,n);e=Ei(e,i)}const a=await iV.web.subtle.decrypt(s,o,e),c=new Uint8Array(a);if("aes-cbc"===s.name){if(!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(await aV(c,t,r,n),e))throw new Error("AES: wrong padding")}return c}if(iV.node){const o=iV.node.createDecipheriv(n,t,r);return o.setAutoPadding(i),Ei(o.update(e),o.final())}throw new Error("The environment doesn't have AES module")}function uV(e,t,r,n){di(e);const i=ki({dkLen:32,asyncTick:10},n),{c:o,dkLen:s,asyncTick:a}=i;if(ui(o),ui(s),ui(a),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=_i(t),u=_i(r),l=new Uint8Array(s),d=yp.create(e,c),h=d._cloneInto().update(u);return{c:o,dkLen:s,asyncTick:a,DK:l,PRF:d,PRFSalt:h}}function lV(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}function dV(e,t,r,n){const{c:i,dkLen:o,DK:s,PRF:a,PRFSalt:c}=uV(e,t,r,n);let u;const l=new Uint8Array(4),d=vi(l),h=new Uint8Array(a.outputLen);for(let f=1,p=0;p<o;f++,p+=a.outputLen){const e=s.subarray(p,p+a.outputLen);d.setInt32(0,f,!1),(u=c._cloneInto(u)).update(l).digestInto(h),e.set(h.subarray(0,e.length));for(let t=1;t<i;t++){a._cloneInto(u).update(h).digestInto(h);for(let t=0;t<e.length;t++)e[t]^=h[t]}}return lV(a,c,s,u,h)}function hV(e,t,r,n,i){if(!["sha256","sha512"].includes(i))throw new Error("Only sha256 and sha512 are supported");return wF(e),wF(t),dV("sha256"===i?Ni:ul,e,t,{c:r,dkLen:n})}const fV=(e,t)=>e<<t|e>>>32-t;function pV(e,t,r,n,i,o){let s=e[t++]^r[n++],a=e[t++]^r[n++],c=e[t++]^r[n++],u=e[t++]^r[n++],l=e[t++]^r[n++],d=e[t++]^r[n++],h=e[t++]^r[n++],f=e[t++]^r[n++],p=e[t++]^r[n++],g=e[t++]^r[n++],m=e[t++]^r[n++],y=e[t++]^r[n++],v=e[t++]^r[n++],b=e[t++]^r[n++],w=e[t++]^r[n++],_=e[t++]^r[n++],E=s,A=a,S=c,k=u,x=l,I=d,T=h,P=f,R=p,C=g,B=m,M=y,N=v,O=b,D=w,L=_;for(let U=0;U<8;U+=2)x^=fV(E+N|0,7),R^=fV(x+E|0,9),N^=fV(R+x|0,13),E^=fV(N+R|0,18),C^=fV(I+A|0,7),O^=fV(C+I|0,9),A^=fV(O+C|0,13),I^=fV(A+O|0,18),D^=fV(B+T|0,7),S^=fV(D+B|0,9),T^=fV(S+D|0,13),B^=fV(T+S|0,18),k^=fV(L+M|0,7),P^=fV(k+L|0,9),M^=fV(P+k|0,13),L^=fV(M+P|0,18),A^=fV(E+k|0,7),S^=fV(A+E|0,9),k^=fV(S+A|0,13),E^=fV(k+S|0,18),T^=fV(I+x|0,7),P^=fV(T+I|0,9),x^=fV(P+T|0,13),I^=fV(x+P|0,18),M^=fV(B+C|0,7),R^=fV(M+B|0,9),C^=fV(R+M|0,13),B^=fV(C+R|0,18),N^=fV(L+D|0,7),O^=fV(N+L|0,9),D^=fV(O+N|0,13),L^=fV(D+O|0,18);i[o++]=s+E|0,i[o++]=a+A|0,i[o++]=c+S|0,i[o++]=u+k|0,i[o++]=l+x|0,i[o++]=d+I|0,i[o++]=h+T|0,i[o++]=f+P|0,i[o++]=p+R|0,i[o++]=g+C|0,i[o++]=m+B|0,i[o++]=y+M|0,i[o++]=v+N|0,i[o++]=b+O|0,i[o++]=w+D|0,i[o++]=_+L|0}function gV(e,t,r,n,i){let o=n+0,s=n+16*i;for(let a=0;a<16;a++)r[s+a]=e[t+16*(2*i-1)+a];for(let a=0;a<i;a++,o+=16,t+=16)pV(r,s,e,t,r,o),a>0&&(s+=16),pV(r,o,e,t+=16,r,s)}function mV(e,t,r){const n=ki({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:i,r:o,p:s,dkLen:a,asyncTick:c,maxmem:u,onProgress:l}=n;if(ui(i),ui(o),ui(s),ui(a),ui(c),ui(u),void 0!==l&&"function"!==typeof l)throw new Error("progressCb should be function");const d=128*o,h=d/4;if(i<=1||0!==(i&i-1)||i>=2**(d/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(s<0||s>137438953440/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const f=d*(i+s);if(f>u)throw new Error("Scrypt: parameters too large, ".concat(f," (128 * r * (N + p)) > ").concat(u," (maxmem)"));const p=dV(Ni,e,t,{c:1,dkLen:d*s}),g=mi(p),m=mi(new Uint8Array(d*i)),y=mi(new Uint8Array(d));let v=()=>{};if(l){const e=2*i*s,t=Math.max(Math.floor(e/1e4),1);let r=0;v=()=>{r++,!l||r%t&&r!==e||l(r/e)}}return{N:i,r:o,p:s,dkLen:a,blockSize32:h,V:m,B32:g,B:p,tmp:y,blockMixCb:v,asyncTick:c}}function yV(e,t,r,n,i){const o=dV(Ni,e,r,{c:1,dkLen:t});return r.fill(0),n.fill(0),i.fill(0),o}function vV(e,t,r,n,i,o,s){return wF(e),wF(t),function(e,t,r){const{N:n,r:i,p:o,dkLen:s,blockSize32:a,V:c,B32:u,B:l,tmp:d,blockMixCb:h}=mV(e,t,r);for(let f=0;f<o;f++){const e=a*f;for(let t=0;t<a;t++)c[t]=u[e+t];for(let t=0,r=0;t<n-1;t++)gV(c,r,c,r+=a,i),h();gV(c,(n-1)*a,u,e,i),h();for(let t=0;t<n;t++){const t=u[e+a-16]%n;for(let r=0;r<a;r++)d[r]=u[e+r]^c[t*a+r];gV(d,0,u,e,i),h()}}return yV(e,s,l,c,d)}(e,t,{N:r,r:i,p:n,dkLen:o,onProgress:s})}var bV;const wV=null!==(bV=Np)&&void 0!==bV?bV:je,_V=BigInt("0xffffffffffffffff"),EV=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),AV=wV.CURVE.n/BigInt(2),SV={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};var kV,xV,IV,TV,PV,RV;!function(e){e[e.Mainnet=1]="Mainnet",e[e.Goerli=5]="Goerli",e[e.Sepolia=11155111]="Sepolia"}(kV||(kV={})),function(e){e.Chainstart="chainstart",e.Homestead="homestead",e.Dao="dao",e.TangerineWhistle="tangerineWhistle",e.SpuriousDragon="spuriousDragon",e.Byzantium="byzantium",e.Constantinople="constantinople",e.Petersburg="petersburg",e.Istanbul="istanbul",e.MuirGlacier="muirGlacier",e.Berlin="berlin",e.London="london",e.ArrowGlacier="arrowGlacier",e.GrayGlacier="grayGlacier",e.MergeForkIdTransition="mergeForkIdTransition",e.Merge="merge",e.Shanghai="shanghai",e.ShardingForkDev="shardingFork"}(xV||(xV={})),function(e){e.ProofOfStake="pos",e.ProofOfWork="pow",e.ProofOfAuthority="poa"}(IV||(IV={})),function(e){e.Ethash="ethash",e.Clique="clique",e.Casper="casper"}(TV||(TV={})),function(e){e.PolygonMainnet="polygon-mainnet",e.PolygonMumbai="polygon-mumbai",e.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",e.ArbitrumOne="arbitrum-one",e.xDaiChain="x-dai-chain",e.OptimisticKovan="optimistic-kovan",e.OptimisticEthereum="optimistic-ethereum"}(PV||(PV={})),function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(RV||(RV={}));const CV=e=>{if("string"!==typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received ".concat(typeof e));return Fq(e)?e.slice(2):e};const BV=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Received an invalid integer type: ".concat(e));return"0x".concat(e.toString(16))};function MV(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r,n;const{name:i,config:o,difficulty:s,mixHash:a,gasLimit:c,coinbase:u,baseFeePerGas:l}=e;let{extraData:d,timestamp:h,nonce:f}=e;const p=Number(h),{chainId:g}=o;if(""===d&&(d="0x"),Fq(h)||(h=BV(parseInt(h))),18!==f.length&&(f=function(e){return e&&"0x0"!==e?Fq(e)?"0x".concat(CV(e).padStart(16,"0")):"0x".concat(e.padStart(16,"0")):"0x0000000000000000"}(f)),o.eip155Block!==o.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const m={name:i,chainId:g,networkId:g,genesis:{timestamp:h,gasLimit:parseInt(c),difficulty:parseInt(s),nonce:f,extraData:d,mixHash:a,coinbase:u,baseFeePerGas:l},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:void 0!==o.clique?{type:"poa",algorithm:"clique",clique:{period:null!==(r=o.clique.period)&&void 0!==r?r:o.clique.blockperiodseconds,epoch:null!==(n=o.clique.epoch)&&void 0!==n?n:o.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},y={[xV.Homestead]:{name:"homesteadBlock"},[xV.Dao]:{name:"daoForkBlock"},[xV.TangerineWhistle]:{name:"eip150Block"},[xV.SpuriousDragon]:{name:"eip155Block"},[xV.Byzantium]:{name:"byzantiumBlock"},[xV.Constantinople]:{name:"constantinopleBlock"},[xV.Petersburg]:{name:"petersburgBlock"},[xV.Istanbul]:{name:"istanbulBlock"},[xV.MuirGlacier]:{name:"muirGlacierBlock"},[xV.Berlin]:{name:"berlinBlock"},[xV.London]:{name:"londonBlock"},[xV.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:t},[xV.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[xV.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},v=Object.keys(y).reduce(((e,t)=>(e[y[t].name]=t,e)),{}),b=Object.keys(o).filter((e=>void 0!==v[e]&&void 0!==o[e]&&null!==o[e]));if(m.hardforks=b.map((e=>({name:v[e],block:!0===y[v[e]].isTimestamp||"number"!==typeof o[e]?null:o[e],timestamp:!0===y[v[e]].isTimestamp&&"number"===typeof o[e]?o[e]:void 0}))).filter((e=>null!==e.block||void 0!==e.timestamp)),m.hardforks.sort(((e,t)=>{var r,n;return(null!==(r=e.block)&&void 0!==r?r:1/0)-(null!==(n=t.block)&&void 0!==n?n:1/0)})),m.hardforks.sort(((e,t)=>{var r,n;return(null!==(r=e.timestamp)&&void 0!==r?r:p)-(null!==(n=t.timestamp)&&void 0!==n?n:p)})),void 0!==o.terminalTotalDifficulty){const e={name:xV.Merge,ttd:o.terminalTotalDifficulty,block:null},t=m.hardforks.findIndex((e=>{var t;return!0===(null===(t=y[e.name])||void 0===t?void 0:t.postMerge)}));-1!==t?m.hardforks.splice(t,0,e):m.hardforks.push(e)}const w=m.hardforks.length>0?m.hardforks.slice(-1)[0]:void 0;return m.hardfork=null===w||void 0===w?void 0:w.name,m.hardforks.unshift({name:xV.Chainstart,block:0}),m}function NV(e){let t=e;if("string"!==typeof t)throw new Error("[padToEven] value must be type 'string', received ".concat(typeof t));return t.length%2&&(t="0".concat(t)),t}const OV=function(e){var t;if(null===e||void 0===e)return new Uint8Array;if(e instanceof Uint8Array)return e;if("Uint8Array"===(null===(t=null===e||void 0===e?void 0:e.constructor)||void 0===t?void 0:t.name))return Uint8Array.from(e);if(Array.isArray(e))return Uint8Array.from(e);if("string"===typeof e){if(!Lq(e))throw new Error("Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ".concat(e));return zz(NV(CV(e)))}if("number"===typeof e)return OV(Vz(e));if("bigint"===typeof e){if(e<BigInt(0))throw new Error("Cannot convert negative bigint to Uint8Array. Given: ".concat(e));let t=e.toString(16);return t.length%2&&(t="0".concat(t)),OV("0x".concat(t))}if(e.toArray)return Uint8Array.from(e.toArray());throw new Error("invalid type")};function DV(e){const t=qz(e);return"0x"===t?BigInt(0):BigInt(t)}const LV=function(e){return new Uint8Array(e).fill(0)};function UV(e){if(!Oz(e)){const t="This method only supports Uint8Array but input was: ".concat(e);throw new Error(t)}}const FV=function(e,t){return UV(e),function(e,t,r){const n=LV(t);return r?e.length<t?(n.set(e),n):e.subarray(0,t):e.length<t?(n.set(e,t-e.length),n):e.subarray(-t)}(e,t,!1)};const jV=function(e){return UV(e),function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e}(e)},qV=e=>"0x".concat(e.toString(16));function zV(e){return jV(OV("0x".concat(e.toString(16))))}const HV=function(e,t,r,n,i){const o=function(e,t){return e===BigInt(0)||e===BigInt(1)?e:void 0===t?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}(t,i);if(!function(e){return e===BigInt(0)||e===BigInt(1)}(o))throw new Error("Invalid signature v value");return new wV.Signature(DV(r),DV(n)).addRecoveryBit(Number(o)).recoverPublicKey(e).toRawBytes(!1).slice(1)};function KV(e,t){if(null===e)return null;if(void 0===e)return;if("string"===typeof e&&!Lq(e))throw new Error("A string must be provided with a 0x-prefix, given: ".concat(e));if("number"===typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=OV(e);switch(t){case RV.Uint8Array:return r;case RV.BigInt:return DV(r);case RV.Number:{const e=DV(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case RV.PrefixedHexString:return qz(r);default:throw new Error("unknown outputType")}}var VV=__webpack_require__(2956),GV=__webpack_require__(3685);const WV={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},QV={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},JV={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},ZV={1153:{name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},1559:{name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},2315:{name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},2537:{name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},2565:{name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},2718:{name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},2929:{name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},2930:{name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},3198:{name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},3529:{name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},3540:{name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},3541:{name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3554:{name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},3607:{name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3651:{name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},3670:{name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},3675:{name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3855:{name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},3860:{name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},4345:{name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},4399:{name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},5133:{name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}}},YV={chainstart:{name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},homestead:{name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},dao:{name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},tangerineWhistle:{name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},spuriousDragon:{name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},byzantium:{name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},constantinople:{name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},petersburg:{name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},istanbul:{name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},muirGlacier:{name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},berlin:{name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},london:{name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},shanghai:{name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},arrowGlacier:{name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},grayGlacier:{name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},mergeForkIdTransition:{name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},merge:{name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]}},{buf:XV}=GV;class $V extends mH{constructor(e){var t,r;super(),this._eips=[],this._customChains=null!==(t=e.customChains)&&void 0!==t?t:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=null!==(r=this._chainParams.defaultHardfork)&&void 0!==r?r:xV.Merge,this.HARDFORK_CHANGES=this.hardforks().map((e=>[e.name,YV[e.name]])),this._hardfork=this.DEFAULT_HARDFORK,void 0!==e.hardfork&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}static custom(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;const n=null!==(r=t.baseChain)&&void 0!==r?r:"mainnet",i=Object.assign({},$V._getChainParams(n));if(i.name="custom-chain","string"!==typeof e)return new $V(Object.assign({chain:Object.assign(Object.assign({},i),e)},t));if(e===PV.PolygonMainnet)return $V.custom({name:PV.PolygonMainnet,chainId:137,networkId:137},t);if(e===PV.PolygonMumbai)return $V.custom({name:PV.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===PV.ArbitrumRinkebyTestnet)return $V.custom({name:PV.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},t);if(e===PV.ArbitrumOne)return $V.custom({name:PV.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===PV.xDaiChain)return $V.custom({name:PV.xDaiChain,chainId:100,networkId:100},t);if(e===PV.OptimisticKovan)return $V.custom({name:PV.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:xV.Berlin},t));if(e===PV.OptimisticEthereum)return $V.custom({name:PV.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:xV.Berlin},t));throw new Error("Custom chain ".concat(e," not supported"))}static fromGethGenesis(e,t){let{chain:r,eips:n,genesisHash:i,hardfork:o,mergeForkIdPostMerge:s}=t;var a;const c=function(e,t,r){try{if(["config","difficulty","gasLimit","alloc"].some((t=>!(t in e))))throw new Error("Invalid format, expected geth genesis fields missing");return void 0!==t&&(e.name=t),MV(e,r)}catch(n){throw new Error("Error parsing parameters file: ".concat(n.message))}}(e,r,s),u=new $V({chain:null!==(a=c.name)&&void 0!==a?a:"custom",customChains:[c],eips:n,hardfork:null!==o&&void 0!==o?o:c.hardfork});return void 0!==i&&u.setForkHashes(i),u}static isSupportedChainId(e){const t=this._getInitializedChains();return Boolean(t.names[e.toString()])}static _getChainParams(e,t){let r=e;const n=this._getInitializedChains(t);if("number"===typeof r||"bigint"===typeof r){if(r=r.toString(),n.names[r]){return n[n.names[r]]}throw new Error("Chain with ID ".concat(r," not supported"))}if(void 0!==n[r])return n[r];throw new Error("Chain with name ".concat(r," not supported"))}setChain(e){if("number"===typeof e||"bigint"===typeof e||"string"===typeof e)this._chainParams=$V._getChainParams(e,this._customChains);else{if("object"!==typeof e)throw new Error("Wrong input format");{if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of t)if(!(r in e))throw new Error("Missing required chain parameter: ".concat(r));this._chainParams=e}}for(const t of this.hardforks())if(void 0===t.block)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error("Hardfork with name ".concat(e," not supported"))}getHardforkByBlockNumber(e,t,r){const n=KV(e,RV.BigInt),i=KV(t,RV.BigInt),o=KV(r,RV.Number),s=this.hardforks().filter((e=>null!==e.block||null!==e.ttd&&void 0!==e.ttd||void 0!==e.timestamp)),a=s.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(s.slice(a+1).findIndex((e=>null!==e.ttd&&void 0!==e.ttd))>=0)throw Error("More than one merge hardforks found with ttd specified");let c=s.findIndex((e=>null!==e.block&&e.block>n||void 0!==o&&Number(e.timestamp)>o));if(-1===c)c=s.length;else if(0===c)throw Error("Must have at least one hardfork at block 0");if(void 0===o){c-=s.slice(0,c).reverse().findIndex((e=>null!==e.block||void 0!==e.ttd))}if(c-=1,null===s[c].block&&void 0===s[c].timestamp)(void 0===i||null===i||BigInt(s[c].ttd)>i)&&(c-=1);else if(a>=0&&void 0!==i&&null!==i){if(c>=a&&BigInt(s[a].ttd)>i)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(c<a&&BigInt(s[a].ttd)<=i)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const u=c;for(;c<s.length-1&&(s[c].block===s[c+1].block&&s[c].timestamp===s[c+1].timestamp);c+=1);if(o){const e=s.slice(0,u).reduce(((e,t)=>{var r;return Math.max(Number(null!==(r=t.timestamp)&&void 0!==r?r:"0"),e)}),0);if(e>o)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");const t=s.slice(c+1).reduce(((e,t)=>{var r;return Math.min(Number(null!==(r=t.timestamp)&&void 0!==r?r:o),e)}),o);if(t<o)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return s[c].name}setHardforkByBlockNumber(e,t,r){const n=this.getHardforkByBlockNumber(e,t,r);return this.setHardfork(n),n}_getHardfork(e){const t=this.hardforks();for(const r of t)if(r.name===e)return r;return null}setEIPs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(const t of e){if(!(t in ZV))throw new Error("".concat(t," not supported"));const r=this.gteHardfork(ZV[t].minimumHardfork);if(!r)throw new Error("".concat(t," cannot be activated on hardfork ").concat(this.hardfork(),", minimumHardfork: ").concat(r));if(void 0!==ZV[t].requiredEIPs)for(const n of ZV[t].requiredEIPs)if(!e.includes(n)&&!this.isActivatedEIP(n))throw new Error("".concat(t," requires EIP ").concat(n,", but is not included in the EIP list"))}this._eips=e}param(e,t){let r;for(const n of this._eips)if(r=this.paramByEIP(e,t,n),void 0!==r)return r;return this.paramByHardfork(e,t,this._hardfork)}paramByHardfork(e,t,r){let n=null;for(const i of this.HARDFORK_CHANGES){if("eips"in i[1]){const r=i[1].eips;for(const i of r){const r=this.paramByEIP(e,t,i);n="bigint"===typeof r?r:n}}else{if(void 0===i[1][e])throw new Error("Topic ".concat(e," not defined"));void 0!==i[1][e][t]&&(n=i[1][e][t].v)}if(i[0]===r)break}return BigInt(null!==n&&void 0!==n?n:0)}paramByEIP(e,t,r){if(!(r in ZV))throw new Error("".concat(r," not supported"));const n=ZV[r];if(!(e in n))throw new Error("Topic ".concat(e," not defined"));if(void 0===n[e][t])return;const i=n[e][t].v;return BigInt(i)}paramByBlock(e,t,r,n,i){const o=this.getHardforkByBlockNumber(r,n,i);return this.paramByHardfork(e,t,o)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const t of this.HARDFORK_CHANGES){const r=t[1];if(this.gteHardfork(r.name)&&"eips"in r&&r.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,t){const r=KV(t,RV.BigInt),n=null!==e&&void 0!==e?e:this._hardfork,i=this.hardforkBlock(n);return"bigint"===typeof i&&i!==BigInt(0)&&r>=i}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){const r=null!==e&&void 0!==e?e:this._hardfork,n=this.hardforks();let i=-1,o=-1,s=0;for(const a of n)a.name===r&&(i=s),a.name===t&&(o=s),s+=1;return i>=o&&-1!==o}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var t;const r=null!==e&&void 0!==e?e:this._hardfork,n=null===(t=this._getHardfork(r))||void 0===t?void 0:t.block;return void 0===n||null===n?null:BigInt(n)}hardforkTimestamp(e){var t;const r=null!==e&&void 0!==e?e:this._hardfork,n=null===(t=this._getHardfork(r))||void 0===t?void 0:t.timestamp;return void 0===n||null===n?null:BigInt(n)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock("number"===typeof t[0]?String(t[0]):t[0])}return null}hardforkTTD(e){var t;const r=null!==e&&void 0!==e?e:this._hardfork,n=null===(t=this._getHardfork(r))||void 0===t?void 0:t.ttd;return void 0===n||null===n?null:BigInt(n)}isHardforkBlock(e,t){const r=KV(e,RV.BigInt),n=null!==t&&void 0!==t?t:this._hardfork,i=this.hardforkBlock(n);return"bigint"===typeof i&&i!==BigInt(0)&&i===r}nextHardforkBlockOrTimestamp(e){var t,r;const n=null!==e&&void 0!==e?e:this._hardfork,i=this.hardforks();let o=i.findIndex((e=>e.name===n));if(n===xV.Merge&&(o-=1),o<0)return null;let s=null!==(t=i[o].timestamp)&&void 0!==t?t:i[o].block;s=null!==s&&void 0!==s?Number(s):null;const a=i.slice(o+1).find((e=>{var t;let r=null!==(t=e.timestamp)&&void 0!==t?t:e.block;return r=null!==r&&void 0!==r?Number(r):null,e.name!==xV.Merge&&null!==r&&void 0!==r&&r!==s}));if(void 0===a)return null;const c=null!==(r=a.timestamp)&&void 0!==r?r:a.block;return null===c||void 0===c?null:BigInt(c)}nextHardforkBlock(e){const t=null!==e&&void 0!==e?e:this._hardfork;let r=this.hardforkBlock(t);if(null===r&&t===xV.Merge){const e=this.hardforks(),t=e.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(t<0)throw Error("Merge hardfork should have been found");r=this.hardforkBlock(e[t-1].name)}if(null===r)return null;return this.hardforks().reduce(((e,t)=>{const n=BigInt(null===t.block||void 0!==t.ttd&&null!==t.ttd?0:t.block);return n>r&&null===e?n:e}),null)}isNextHardforkBlock(e,t){const r=KV(e,RV.BigInt),n=null!==t&&void 0!==t?t:this._hardfork,i=this.nextHardforkBlock(n);return null!==i&&i===r}_calcForkHash(e,t){let r=new Uint8Array,n=0;for(const o of this.hardforks()){const{block:t,timestamp:i,name:s}=o;let a=null!==i&&void 0!==i?i:t;if(a=null!==a?Number(a):null,"number"===typeof a&&0!==a&&a!==n&&s!==xV.Merge){r=Dz(r,zz(a.toString(16).padStart(16,"0"))),n=a}if(o.name===e)break}const i=Dz(t,r);return qz(function(e){const t=BV(e);return zz("0x".concat(NV(t.slice(2))))}(XV(i)>>>0))}forkHash(e,t){const r=null!==e&&void 0!==e?e:this._hardfork,n=this._getHardfork(r);if(null===n||null===(null===n||void 0===n?void 0:n.block)&&void 0===(null===n||void 0===n?void 0:n.timestamp)&&void 0===(null===n||void 0===n?void 0:n.ttd)){throw new Error("No fork hash calculation possible for future hardfork")}if(null!==(null===n||void 0===n?void 0:n.forkHash)&&void 0!==(null===n||void 0===n?void 0:n.forkHash))return n.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(r,t)}hardforkForForkHash(e){const t=this.hardforks().filter((t=>t.forkHash===e));return t.length>=1?t[t.length-1]:null}setForkHashes(e){var t;for(const r of this.hardforks()){const n=null!==(t=r.timestamp)&&void 0!==t?t:r.block;null!==r.forkHash&&void 0!==r.forkHash||(null===n||void 0===n)&&"undefined"===typeof r.ttd||(r.forkHash=this.forkHash(r.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.type),r[0]===e)break;return null!==t&&void 0!==t?t:this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.algorithm),r[0]===e)break;return null!==t&&void 0!==t?t:this._chainParams.consensus.algorithm}consensusConfig(){var e;const t=this.hardfork();let r;for(const n of this.HARDFORK_CHANGES)if("consensus"in n[1]&&(r=n[1].consensus[n[1].consensus.algorithm]),n[0]===t)break;return null!==(e=null!==r&&void 0!==r?r:this._chainParams.consensus[this.consensusAlgorithm()])&&void 0!==e?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const t={};for(const[n,i]of Object.entries(kV))t[i]=n.toLowerCase();const r={mainnet:QV,goerli:WV,sepolia:JV};if(e)for(const n of e){const{name:e}=n;t[n.chainId.toString()]=e,r[e]=n}return r.names=t,r}}var eG;function tG(e){return!function(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}(e)}!function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(eG||(eG={}));class rG{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new rG(LV(20))}equals(e){return Lz(this.buf,e.buf)}isZero(){return this.equals(rG.zero())}toString(){return qz(this.buf)}toArray(){return this.buf}static publicToAddress(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e;if(UV(r),t&&64!==r.length&&(r=wV.ProjectivePoint.fromHex(r).toRawBytes(!1).slice(1)),64!==r.length)throw new Error("Expected pubKey to be of length 64");return AF(r).slice(-20)}}const nG=e=>{let t,r;if(tG(e)){t=e;const n=[];for(let t=0;t<e.length;t+=1){const r=e[t],i=OV(r.address),o=[];for(let e=0;e<r.storageKeys.length;e+=1)o.push(OV(r.storageKeys[e]));n.push([i,o])}r=n}else{r=null!==e&&void 0!==e?e:[];const n=[];for(let e=0;e<r.length;e+=1){const t=r[e],i=qz(t[0]),o=[];for(let e=0;e<t[1].length;e+=1)o.push(qz(t[1][e]));const s={address:i,storageKeys:o};n.push(s)}t=n}return{AccessListJSON:t,accessList:r}},iG=e=>{for(let t=0;t<e.length;t+=1){const r=e[t],n=r[0],i=r[1];if(void 0!==r[2])throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==n.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<i.length;e+=1)if(32!==i[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},oG=e=>{const t=[];for(let r=0;r<e.length;r+=1){const n=e[r],i={address:qz(FV(n[0],20)),storageKeys:[]},o=n&&n[1];for(let e=0;e<o.length;e+=1){const t=o[e];i.storageKeys.push(qz(FV(t,32)))}t.push(i)}return t},sG=(e,t)=>{const r=t.param("gasPrices","accessListStorageKeyCost"),n=t.param("gasPrices","accessListAddressCost");let i=0;for(let o=0;o<e.length;o+=1){i+=e[o][1].length}return e.length*Number(n)+i*Number(r)};class aG{constructor(e,t){var r,n;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=kV.Mainnet,this.DEFAULT_HARDFORK=xV.Merge;const{nonce:i,gasLimit:o,to:s,value:a,data:c,v:u,r:l,s:d,type:h}=e;this._type=Number(DV(OV(h))),this.txOptions=t;const f=OV(""===s?"0x":s),p=OV(""===u?"0x":u),g=OV(""===l?"0x":l),m=OV(""===d?"0x":d);this.nonce=DV(OV(""===i?"0x":i)),this.gasLimit=DV(OV(""===o?"0x":o)),this.to=f.length>0?new rG(f):void 0,this.value=DV(OV(""===a?"0x":a)),this.data=OV(""===c?"0x":c),this.v=p.length>0?DV(p):void 0,this.r=g.length>0?DV(g):void 0,this.s=m.length>0?DV(m):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const y=void 0===this.to||null===this.to,v=null!==(r=t.allowUnlimitedInitCodeSize)&&void 0!==r&&r,b=null!==(n=t.common)&&void 0!==n?n:this._getCommon();y&&b.isActivatedEIP(3860)&&!v&&((e,t)=>{const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error("the initcode size of this transaction is too large: it is ".concat(t," while the max is ").concat(e.param("vm","maxInitCodeSize")))})(b,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];return this.getBaseFee()>this.gasLimit&&t.push("gasLimit is too low. given ".concat(this.gasLimit,", need at least ").concat(this.getBaseFee())),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){const{v:e}=this;if(void 0!==e&&e!==BigInt(0)&&e!==BigInt(1)){const e=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(e)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&void 0!==e&&e>AV){const e=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(e)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let n=0;n<this.data.length;n+=1)0===this.data[n]?r+=e:r+=t;if((void 0===this.to||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return void 0===this.to||0===this.to.buf.length}isSigned(){const{v:e,r:t,s:r}=this;return void 0!==e&&void 0!==t&&void 0!==r}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==jV(e).length}catch(e){return!1}}getSenderAddress(){return new rG(rG.publicToAddress(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(eG.EIP155ReplayProtection)&&(this.activeCapabilities.push(eG.EIP155ReplayProtection),t=!0);const r=this.getMessageToSign(!0),{v:n,r:i,s:o}=this._ecsign(r,e),s=this._processSignature(n,i,o);if(t){const e=this.activeCapabilities.indexOf(eG.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return s}_getCommon(e,t){var r,n,i,o;if(void 0!==t){const r=DV(OV(t));if(e){if(e.chainId()!==r){const e=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(e)}return e.copy()}return $V.isSupportedChainId(r)?new $V({chain:r,hardfork:this.DEFAULT_HARDFORK}):$V.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}if((null===e||void 0===e?void 0:e.copy)&&"function"===typeof(null===e||void 0===e?void 0:e.copy))return e.copy();if(e){const t="function"===typeof e.hardfork?e.hardfork():e.hardfork;return $V.custom({name:"custom-chain",networkId:e.networkId?e.networkId():null!==(n=BigInt(null===(r=e.customChain)||void 0===r?void 0:r.networkId))&&void 0!==n?n:void 0,chainId:e.chainId?e.chainId():null!==(o=BigInt(null===(i=e.customChain)||void 0===i?void 0:i.chainId))&&void 0!==o?o:void 0},{baseChain:this.DEFAULT_CHAIN,hardfork:t||this.DEFAULT_HARDFORK})}return new $V({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(const[n,i]of Object.entries(e))switch(t){case 64:if(r){if(void 0!==i&&i>=_V){const e=this._errorMsg("".concat(n," cannot equal or exceed MAX_UINT64 (2^64-1), given ").concat(i));throw new Error(e)}}else if(void 0!==i&&i>_V){const e=this._errorMsg("".concat(n," cannot exceed MAX_UINT64 (2^64-1), given ").concat(i));throw new Error(e)}break;case 256:if(r){if(void 0!==i&&i>=EV){const e=this._errorMsg("".concat(n," cannot equal or exceed MAX_INTEGER (2^256-1), given ").concat(i));throw new Error(e)}}else if(void 0!==i&&i>EV){const e=this._errorMsg("".concat(n," cannot exceed MAX_INTEGER (2^256-1), given ").concat(i));throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,n]of Object.entries(e))if(t.includes(r)&&Array.isArray(n))throw new Error("".concat(r," cannot be an array"))}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?qz(this.hash()):"not available (unsigned)"}catch(i){e="error"}let t="";try{t=this.isSigned().toString()}catch(i){e="error"}let r="";try{r=this.common.hardfork()}catch(i){r="error"}let n="tx type=".concat(this.type," hash=").concat(e," nonce=").concat(this.nonce," value=").concat(this.value," ");return n+="signed=".concat(t," hf=").concat(r),n}_ecsign(e,t,r){const n=wV.sign(e,t),i=n.toCompactRawBytes();return{r:i.subarray(0,32),s:i.subarray(32,64),v:void 0===r?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*BigInt(2)}}static fromSerializedTx(e){}static fromTxData(e){}}const cG=zz(2..toString(16).padStart(2,"0"));class uG extends aG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;super(Object.assign(Object.assign({},e),{type:2}),t),this.DEFAULT_HARDFORK="london";const{chainId:n,accessList:i,maxFeePerGas:o,maxPriorityFeePerGas:s}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const a=nG(null!==i&&void 0!==i?i:[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,iG(this.accessList),this.maxFeePerGas=DV(OV(""===o?"0x":o)),this.maxPriorityFeePerGas=DV(OV(""===s?"0x":s)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),aG._validateNotArray(e),this.gasLimit*this.maxFeePerGas>EV){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this._validateYParity(),this._validateHighS();(null===(r=null===t||void 0===t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}static fromTxData(e){return new uG(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}static fromSerializedTx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Lz(e.subarray(0,1),cG))throw new Error("Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: ".concat(2,", received: ").concat(qz(e.subarray(0,1))));const r=VV.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return uG.fromValuesArray(r,t)}static fromValuesArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,n,i,o,s,a,c,u,l,d,h,f]=e;return this._validateNotArray({chainId:r,v:d}),jq({nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:o,gasLimit:s,value:c,v:d,r:h,s:f}),new uG({chainId:DV(r),nonce:n,maxPriorityFeePerGas:i,maxFeePerGas:o,gasLimit:s,to:a,value:c,data:u,accessList:null!==l&&void 0!==l?l:[],v:void 0!==d?DV(d):void 0,r:h,s:f},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(sG(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BigInt(0);const t=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,n=(t<r?t:r)+e;return this.gasLimit*n+this.value}raw(){return[zV(this.chainId),zV(this.nonce),zV(this.maxPriorityFeePerGas),zV(this.maxFeePerGas),zV(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),zV(this.value),this.data,this.accessList,void 0!==this.v?zV(this.v):Uint8Array.from([]),void 0!==this.r?zV(this.r):Uint8Array.from([]),void 0!==this.s?zV(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Dz(cG,VV.RLP.encode(e))}getMessageToSign(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.raw().slice(0,9),r=Dz(cG,VV.RLP.encode(t));return e?AF(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=AF(this.serialize())),this.cache.hash):AF(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:n}=this;this._validateHighS();try{return HV(e,t+BigInt(27),zV(r),zV(n))}catch(i){const e=this._errorMsg("Invalid Signature");throw new Error(e)}}_processSignature(e,t,r){const n=Object.assign(Object.assign({},this.txOptions),{common:this.common});return uG.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:DV(t),s:DV(r)},n)}toJSON(){const e=oG(this.accessList);return{chainId:qV(this.chainId),nonce:qV(this.nonce),maxPriorityFeePerGas:qV(this.maxPriorityFeePerGas),maxFeePerGas:qV(this.maxFeePerGas),gasLimit:qV(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:qV(this.value),data:qz(this.data),accessList:e,v:void 0!==this.v?qV(this.v):void 0,r:void 0!==this.r?qV(this.r):void 0,s:void 0!==this.s?qV(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=" maxFeePerGas=".concat(this.maxFeePerGas," maxPriorityFeePerGas=").concat(this.maxPriorityFeePerGas),e}_errorMsg(e){return"".concat(e," (").concat(this.errorStr(),")")}}const lG=zz(1..toString(16).padStart(2,"0"));class dG extends aG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;super(Object.assign(Object.assign({},e),{type:1}),t),this.DEFAULT_HARDFORK="berlin";const{chainId:n,accessList:i,gasPrice:o}=e;if(this.common=this._getCommon(t.common,n),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const s=nG(null!==i&&void 0!==i?i:[]);if(this.accessList=s.accessList,this.AccessListJSON=s.AccessListJSON,iG(this.accessList),this.gasPrice=DV(OV(""===o?"0x":o)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),aG._validateNotArray(e),this.gasPrice*this.gasLimit>EV){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}this._validateYParity(),this._validateHighS();(null===(r=null===t||void 0===t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}static fromTxData(e){return new dG(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}static fromSerializedTx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Lz(e.subarray(0,1),lG))throw new Error("Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: ".concat(1,", received: ").concat(qz(e.subarray(0,1))));const r=VV.RLP.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return dG.fromValuesArray(r,t)}static fromValuesArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,n,i,o,s,a,c,u,l,d,h]=e;this._validateNotArray({chainId:r,v:l}),jq({nonce:n,gasPrice:i,gasLimit:o,value:a,v:l,r:d,s:h});return new dG({chainId:DV(r),nonce:n,gasPrice:i,gasLimit:o,to:s,value:a,data:c,accessList:null!==u&&void 0!==u?u:[],v:void 0!==l?DV(l):void 0,r:d,s:h},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(sG(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[zV(this.chainId),zV(this.nonce),zV(this.gasPrice),zV(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),zV(this.value),this.data,this.accessList,void 0!==this.v?zV(this.v):Uint8Array.from([]),void 0!==this.r?zV(this.r):Uint8Array.from([]),void 0!==this.s?zV(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return Dz(lG,VV.RLP.encode(e))}getMessageToSign(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.raw().slice(0,8),r=Dz(lG,VV.RLP.encode(t));return e?AF(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=AF(this.serialize())),this.cache.hash):AF(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:n}=this;this._validateHighS();try{return HV(e,t+BigInt(27),zV(r),zV(n))}catch(i){const e=this._errorMsg("Invalid Signature");throw new Error(e)}}_processSignature(e,t,r){const n=Object.assign(Object.assign({},this.txOptions),{common:this.common});return dG.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:DV(t),s:DV(r)},n)}toJSON(){const e=oG(this.accessList);return{chainId:qV(this.chainId),nonce:qV(this.nonce),gasPrice:qV(this.gasPrice),gasLimit:qV(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:qV(this.value),data:qz(this.data),accessList:e,v:void 0!==this.v?qV(this.v):void 0,r:void 0!==this.r?qV(this.r):void 0,s:void 0!==this.s?qV(this.s):void 0}}errorStr(){var e,t;let r=this._getSharedErrorPostfix();return r+=" gasPrice=".concat(this.gasPrice," accessListCount=").concat(null!==(t=null===(e=this.accessList)||void 0===e?void 0:e.length)&&void 0!==t?t:0),r}_errorMsg(e){return"".concat(e," (").concat(this.errorStr(),")")}}function hG(e,t){const r=Number(e),n=2*Number(t);return r===n+35||r===n+36}class fG extends aG{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(super(Object.assign(Object.assign({},e),{type:0}),t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=DV(OV(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>EV){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),aG._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?hG(this.v,this.common.chainId())&&this.activeCapabilities.push(eG.EIP155ReplayProtection):this.activeCapabilities.push(eG.EIP155ReplayProtection));(null===(r=null===t||void 0===t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}static fromTxData(e){return new fG(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}static fromSerializedTx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=VV.RLP.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,n,i,o,s,a,c,u,l]=e;return jq({nonce:r,gasPrice:n,gasLimit:i,value:s,v:c,r:u,s:l}),new fG({nonce:r,gasPrice:n,gasLimit:i,to:o,value:s,data:a,v:c,r:u,s:l},t)}raw(){return[zV(this.nonce),zV(this.gasPrice),zV(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),zV(this.value),this.data,void 0!==this.v?zV(this.v):Uint8Array.from([]),void 0!==this.r?zV(this.r):Uint8Array.from([]),void 0!==this.s?zV(this.s):Uint8Array.from([])]}serialize(){return VV.RLP.encode(this.raw())}_getMessageToSign(){const e=[zV(this.nonce),zV(this.gasPrice),zV(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),zV(this.value),this.data];return this.supports(eG.EIP155ReplayProtection)&&(e.push(OV(this.common.chainId())),e.push(jV(OV(0))),e.push(jV(OV(0)))),e}getMessageToSign(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this._getMessageToSign();return e?AF(VV.RLP.encode(t)):t}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=AF(VV.RLP.encode(this.raw()))),this.cache.hash):AF(VV.RLP.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}const e=this._getMessageToSign();return AF(VV.RLP.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r:r,s:n}=this;this._validateHighS();try{return HV(e,t,zV(r),zV(n),this.supports(eG.EIP155ReplayProtection)?this.common.chainId():void 0)}catch(i){const e=this._errorMsg("Invalid Signature");throw new Error(e)}}_processSignature(e,t,r){let n=e;this.supports(eG.EIP155ReplayProtection)&&(n+=this.common.chainId()*BigInt(2)+BigInt(8));const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return fG.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:n,r:DV(t),s:DV(r)},i)}toJSON(){return{nonce:qV(this.nonce),gasPrice:qV(this.gasPrice),gasLimit:qV(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:qV(this.value),data:qz(this.data),v:void 0!==this.v?qV(this.v):void 0,r:void 0!==this.r?qV(this.r):void 0,s:void 0!==this.s?qV(this.s):void 0}}_validateTxV(e,t){let r;const n=void 0!==e?Number(e):void 0;if(void 0!==n&&n<37&&27!==n&&28!==n)throw new Error("Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ".concat(n));if(void 0!==n&&0!==n&&(!t||t.gteHardfork("spuriousDragon"))&&27!==n&&28!==n)if(t){if(!hG(BigInt(n),t.chainId()))throw new Error("Incompatible EIP155-based V ".concat(n," and chain id ").concat(t.chainId(),". See the Common parameter of the Transaction constructor to set the chain id."))}else{let e;e=(n-35)%2===0?35:36,r=BigInt(n-e)/BigInt(2)}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=" gasPrice=".concat(this.gasPrice),e}_errorMsg(e){return"".concat(e," (").concat(this.errorStr(),")")}}const pG=new Map;class gG{constructor(){}static typeToInt(e){return Number(DV(OV(e)))}static registerTransactionType(e,t){const r=gG.typeToInt(e);pG.set(r,t)}static fromTxData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!("type"in e)||void 0===e.type)return fG.fromTxData(e,t);const r=gG.typeToInt(e.type);if(0===r)return fG.fromTxData(e,t);if(1===r)return dG.fromTxData(e,t);if(2===r)return uG.fromTxData(e,t);const n=pG.get(r);if(null===n||void 0===n?void 0:n.fromTxData)return n.fromTxData(e,t);throw new Error("Tx instantiation with type ".concat(r," not supported"))}static fromSerializedData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e[0]<=127))return fG.fromSerializedTx(e,t);switch(e[0]){case 1:return dG.fromSerializedTx(e,t);case 2:return uG.fromSerializedTx(e,t);default:{const r=pG.get(Number(e[0]));if(null===r||void 0===r?void 0:r.fromSerializedTx)return r.fromSerializedTx(e,t);throw new Error("TypedTransaction with ID ".concat(e[0]," unknown"))}}}static fromBlockBodyData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Oz(e))return this.fromSerializedData(e,t);if(Array.isArray(e))return fG.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}}var mG=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const yG=(e,t)=>{let r;if(!t&&"string"===typeof e&&Dq(e)&&66!==e.length)throw new gL;try{r=Oz(e)?e:Fz(e)}catch(kK){throw new mL}if(!t&&32!==r.byteLength)throw new gL;return r},vG=e=>{const t=Dq(e)?e:Qz(e),r=zz(t),n=Dz(zz(Jz("\x19Ethereum Signed Message:\n".concat(r.byteLength))),r);return GH(n)},bG=(e,t)=>{const r=yG(t),n=vG(e),i=wV.sign(n.substring(2),r),o=i.toCompactRawBytes(),s=i.r.toString(16).padStart(64,"0"),a=i.s.toString(16).padStart(64,"0"),c=i.recovery+27;return{message:e,messageHash:n,v:Vz(c),r:"0x".concat(s),s:"0x".concat(a),signature:"".concat(qz(o)).concat(c.toString(16))}},wG=e=>{if(Iz(e))throw new XL;const t=gG.fromSerializedData(zz(e));return lH(t.getSenderAddress().toString())},_G=(e,t,r,n,i)=>{if("object"===typeof e){const t="".concat(e.r).concat(e.s.slice(2)).concat(e.v.slice(2));return _G(e.messageHash,t,r)}if("string"===typeof t&&"string"===typeof r&&!Iz(n)){const o="".concat(r).concat(n.slice(2)).concat(t.slice(2));return _G(e,o,i)}if(Iz(t))throw new yL("signature string undefined");const o=r?e:vG(e);let s=parseInt(t.substring(130),16);s>26&&(s-=27);const a=wV.Signature.fromCompact(t.slice(2,130)).addRecoveryBit(s).recoverPublicKey(o.replace("0x","")).toRawBytes(!1),c=GH(a.subarray(1));return lH("0x".concat(c.slice(-40)))},EG=e=>{const t=yG(e),r=wV.getPublicKey(t,!1),n=GH(r.slice(1)).slice(-40);return lH("0x".concat(n))},AG=(e,t)=>{const r=yG(e);return"0x".concat(qz(wV.getPublicKey(r,t)).slice(4))},SG=(e,t,r)=>mG(void 0,void 0,void 0,(function*(){var n,i,o,s,a,c,u;const l=yG(e);let d;if(d=(null===r||void 0===r?void 0:r.salt)?"string"===typeof r.salt?zz(r.salt):r.salt:rK(32),!Oq(t)&&!Oz(t))throw new _L;const h="string"===typeof t?zz(Qz(t)):t;let f;if(null===r||void 0===r?void 0:r.iv){if(f="string"===typeof r.iv?zz(r.iv):r.iv,16!==f.length)throw new EL}else f=rK(16);const p=null!==(n=null===r||void 0===r?void 0:r.kdf)&&void 0!==n?n:"scrypt";let g,m;if("pbkdf2"===p){if(m={dklen:null!==(i=null===r||void 0===r?void 0:r.dklen)&&void 0!==i?i:32,salt:qz(d).replace("0x",""),c:null!==(o=null===r||void 0===r?void 0:r.c)&&void 0!==o?o:262144,prf:"hmac-sha256"},m.c<1e3)throw new AL;g=hV(h,d,m.c,m.dklen,"sha256")}else{if("scrypt"!==p)throw new vL;m={n:null!==(s=null===r||void 0===r?void 0:r.n)&&void 0!==s?s:8192,r:null!==(a=null===r||void 0===r?void 0:r.r)&&void 0!==a?a:8,p:null!==(c=null===r||void 0===r?void 0:r.p)&&void 0!==c?c:1,dklen:null!==(u=null===r||void 0===r?void 0:r.dklen)&&void 0!==u?u:32,salt:qz(d).replace("0x","")},g=vV(h,d,m.n,m.p,m.r,m.dklen)}const y=yield aV(l,g.slice(0,16),f,"aes-128-ctr"),v=qz(y).slice(2),b=GH(Dz(g.slice(16,32),y)).replace("0x","");return{version:3,id:dK(),address:EG(l).toLowerCase().replace("0x",""),crypto:{ciphertext:v,cipherparams:{iv:qz(f).replace("0x","")},cipher:"aes-128-ctr",kdf:p,kdfparams:m,mac:b}}})),kG=(e,t)=>{const r=yG(e,t);return{address:EG(r),privateKey:qz(r),signTransaction:e=>{throw new PU("Do not have network access to sign the transaction")},sign:e=>bG("string"===typeof e?e:JSON.stringify(e),r),encrypt:(e,t)=>mG(void 0,void 0,void 0,(function*(){return SG(r,e,t)}))}};var xG=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class IG{constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map((e=>e.payload))}add(e){const t=EK(e),r=new IK;return this._requests.set(t.id,{payload:t,promise:r}),r}execute(e){var t;return xG(this,void 0,void 0,(function*(){if(0===this.requests.length)return Promise.resolve([]);const r=new IK({timeout:null!==(t=null===e||void 0===e?void 0:e.timeout)&&void 0!==t?t:1e3,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(r).catch((e=>r.reject(e))),r.catch((e=>{e instanceof FL&&this._abortAllRequests("Batch request timeout"),r.reject(e)})),r}))}_processBatchRequest(e){var t,r;return xG(this,void 0,void 0,(function*(){const n=yield this._requestManager.sendBatch([...this._requests.values()].map((e=>e.payload)));if(n.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new VU(n,"Batch request size mismatch the results size. Requests: ".concat(this._requests.size,", Responses: ").concat(n.length));const i=this.requests.map((e=>e.id)).map(Number).sort(((e,t)=>e-t)),o=n.map((e=>e.id)).map(Number).sort(((e,t)=>e-t));if(JSON.stringify(i)!==JSON.stringify(o))throw this._abortAllRequests("Invalid batch response"),new VU(n,"Batch request mismatch the results. Requests: [".concat(i.join(),"], Responses: [").concat(o.join(),"]"));for(const e of n)fK(e)?null===(t=this._requests.get(e.id))||void 0===t||t.promise.resolve(e.result):pK(e)&&(null===(r=this._requests.get(e.id))||void 0===r||r.promise.reject(e.error));e.resolve(n)}))}_abortAllRequests(e){for(const{promise:t}of this._requests.values())t.reject(new jL(e))}}var TG=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class PG extends DK{constructor(e){var t;if(super(),this.providers=YK.providers,PH(e)||"string"===typeof e&&""!==e.trim()||WK(e))return this._requestManager=new YK(e),void(this._subscriptionManager=new $K(this._requestManager,{}));const{config:r,provider:n,requestManager:i,subscriptionManager:o,registeredSubscriptions:s,accountProvider:a,wallet:c}=e;this.setConfig(null!==r&&void 0!==r?r:{}),this._requestManager=null!==i&&void 0!==i?i:new YK(n,null===(t=null===r||void 0===r?void 0:r.enableExperimentalFeatures)||void 0===t?void 0:t.useSubscriptionWhenCheckingBlockTimeout),this._subscriptionManager=o||new $K(this.requestManager,null!==s&&void 0!==s?s:{}),a&&(this._accountProvider=a),c&&(this._wallet=c)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:null===(e=this.subscriptionManager)||void 0===e?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const i=new e(...[...r,this.getContextObject()]);return this.on(OK.CONFIG_CHANGE,(e=>{i.setConfig({[e.name]:e.newValue})})),i}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(OK.CONFIG_CHANGE,(e=>{this.setConfig({[e.name]:e.newValue})}))}registerPlugin(e){if(void 0!==this[e.pluginNamespace])throw new zL(e.pluginNamespace);const t={[e.pluginNamespace]:e};t[e.pluginNamespace].link(this),Object.assign(this,t)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return PG.givenProvider}setProvider(e){return this.provider=e,!0}get BatchRequest(){return IG.bind(void 0,this._requestManager)}extend(e){var t,r=this;return e.property&&!this[e.property]&&(this[e.property]={}),null===(t=e.methods)||void 0===t||t.forEach((t=>{const n=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return TG(r,void 0,void 0,(function*(){return this.requestManager.send({method:t.call,params:n})}))};e.property?this[e.property][t.name]=n:this[t.name]=n})),this}}PG.providers=YK.providers;class RG{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const e=this._iban.slice(4),t=RG._parseInt(e,36),r=OH(t,40);return lH(r)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},!RG.isIndirect(e)&&!RG.isDirect(e))throw new Error("Invalid IBAN was provided");this._iban=e}static isDirect(e){return 34===e.length||35===e.length}isDirect(){return RG.isDirect(this._iban)}static isIndirect(e){return 20===e.length}isIndirect(){return RG.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&1===RG._mod9710(RG._iso13616Prepare(e))}isValid(){return RG.isValid(this._iban)}static fromBban(e){const t=this._mod9710(this._iso13616Prepare("".concat("XE","00").concat(e))),r="0".concat((98-t).toString()).slice(-2);return new RG("".concat("XE").concat(r).concat(e))}static createIndirect(e){return RG.fromBban("ETH".concat(e.institution).concat(e.identifier))}static fromAddress(e){if(!sz(e))throw new NU(e);const t=BigInt(Hz(e)).toString(36),r=OH(t,15);return RG.fromBban(r.toUpperCase())}static toIban(e){return RG.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}RG._iso13616Prepare=e=>{const t="A".charCodeAt(0),r="Z".charCodeAt(0),n=e.toUpperCase();return"".concat(n.slice(4)).concat(n.slice(0,4)).split("").map((e=>{const n=e.charCodeAt(0);return n>=t&&n<=r?n-t+10:e})).join("")},RG._parseInt=(e,t)=>[...e].reduce(((e,r)=>BigInt(parseInt(r,t))+BigInt(t)*e),BigInt(0)),RG._mod9710=e=>{let t,r=e;for(;r.length>2;)t=r.slice(0,9),r="".concat((parseInt(t,10)%97).toString()).concat(r.slice(t.length));return parseInt(r,10)%97},RG.toAddress=e=>new RG(e).toAddress();var CG,BG=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class MG extends NK{constructor(e){super(),this[CG]="Promise",this._promise=new Promise(e)}then(e,t){return BG(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return BG(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return BG(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}}CG=Symbol.toStringTag;__webpack_require__(1878);var NG=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function OG(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_syncing",params:[]})}))}function DG(e,t){return NG(this,void 0,void 0,(function*(){return Nz.validate(["hex"],[t]),e.send({method:"eth_sendRawTransaction",params:[t]})}))}function LG(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["blockNumberOrTag","bool"],[t,r]),e.send({method:"eth_getBlockByNumber",params:[t,r]})}))}var UG=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};var FG=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const jG={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},qG={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},zG={type:"object",properties:{gasPrice:{type:"null"}}},HG=(e,t,r)=>{try{Nz.validateJSONSchema(e,t)}catch(n){if(n instanceof Bq)throw new CU(n.errors,r);throw n}},KG=e=>{var t,r;const n=e;if(!Iz(n.type)){let e;switch(n.type){case"0x0":e=jG;break;case"0x1":e=qG;break;case"0x2":e=zG;break;default:return HH({format:"uint"},n.type,lz)}return HG(e,n,n.type),HH({format:"uint"},n.type,lz)}if(!Iz(n.maxFeePerGas)||!Iz(n.maxPriorityFeePerGas))return HG(zG,n,"0x2"),"0x2";if(!Iz(n.accessList))return HG(qG,n,"0x1"),"0x1";const i=null!==(t=n.hardfork)&&void 0!==t?t:null===(r=n.common)||void 0===r?void 0:r.hardfork;if(!Iz(i)){const e=Object.keys(hz).indexOf(i);if(e>=Object.keys(hz).indexOf("london"))return Iz(n.gasPrice)?"0x2":"0x0";if(e===Object.keys(hz).indexOf("berlin"))return"0x0"}return Iz(n.gasPrice)?void 0:(HG(jG,n,"0x0"),"0x0")},VG=(e,t)=>{var r;return(null!==(r=null===t||void 0===t?void 0:t.transactionTypeParser)&&void 0!==r?r:KG)(e)},GG=e=>e[0]>127?"0x0":oH(e[0]),WG={type:"array",items:Object.assign({},{type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}})},QG={type:"object",properties:{accessList:Object.assign({},WG),gasUsed:{type:"string"}}},JG={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},ZG={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},YG={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},WG),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},JG),hardfork:Object.assign({},ZG),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},{type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}}),baseChain:Object.assign({},JG),hardfork:Object.assign({},ZG)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},XG={type:"object",properties:Object.assign(Object.assign({},YG.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},WG),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},$G={type:"object",properties:{parentHash:{format:"bytes32"},sha3Uncles:{format:"bytes32"},miner:{format:"bytes"},stateRoot:{format:"bytes32"},transactionsRoot:{format:"bytes32"},receiptsRoot:{format:"bytes32"},logsBloom:{format:"bytes256"},difficulty:{format:"uint"},number:{format:"uint"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},timestamp:{format:"uint"},extraData:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},totalDifficulty:{format:"uint"},baseFeePerGas:{format:"uint"},size:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},XG)},{type:"array",items:{format:"bytes32"}}]},uncles:{type:"array",items:{format:"bytes32"}},hash:{format:"bytes32"}}},eW={type:"object",properties:{author:{format:"bytes32"},hash:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},miner:{format:"bytes"},stateRoot:{format:"bytes32"},transactionsRoot:{format:"bytes32"},withdrawalsRoot:{format:"bytes32"},logsBloom:{format:"bytes256"},difficulty:{format:"uint"},totalDifficulty:{format:"uint"},number:{format:"uint"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},timestamp:{format:"uint"},extraData:{format:"bytes"},nonce:{format:"uint"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},baseFeePerGas:{format:"uint"},excessDataGas:{format:"uint"},mixHash:{format:"bytes32"},transactions:{type:"array",items:{format:"bytes32"}},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},{type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}})}}},tW={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},rW={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},nW={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},tW)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},iW={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},oW={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},sW={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},{type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}})}}};function aW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{transactionSchema:XG,fillInputAndData:!1};var n,i;let o=CH({},e);if(Iz(null===e||void 0===e?void 0:e.common)||(o.common=Object.assign({},e.common),Iz(null===(n=e.common)||void 0===n?void 0:n.customChain)||(o.common.customChain=Object.assign({},e.common.customChain))),o=HH(null!==(i=r.transactionSchema)&&void 0!==i?i:XG,o,t),!Iz(o.data)&&!Iz(o.input)&&oH(o.data)!==oH(o.input))throw new EU({data:qz(o.data),input:qz(o.input)});return r.fillInputAndData&&(Iz(o.data)?Iz(o.input)||(o.data=o.input):o.input=o.data),Iz(o.gasLimit)||(o.gas=o.gasLimit,delete o.gasLimit),o}var cW=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function uW(e,t){return cW(this,void 0,void 0,(function*(){const r=yield function(e){return UG(this,void 0,void 0,(function*(){return e.send({method:"net_version",params:[]})}))}(e.requestManager);return HH({format:"uint"},r,t)}))}function lW(e,t){return cW(this,void 0,void 0,(function*(){const r=yield function(e){return UG(this,void 0,void 0,(function*(){return e.send({method:"net_peerCount",params:[]})}))}(e.requestManager);return HH({format:"uint"},r,t)}))}const dW=e=>cW(void 0,void 0,void 0,(function*(){return function(e){return UG(this,void 0,void 0,(function*(){return e.send({method:"net_listening",params:[]})}))}(e.requestManager)}));var hW=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class fW extends PG{getId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;return hW(this,void 0,void 0,(function*(){return uW(this,e)}))}getPeerCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;return hW(this,void 0,void 0,(function*(){return lW(this,e)}))}isListening(){return hW(this,void 0,void 0,(function*(){return dW(this)}))}}const pW="ALLEVENTS",gW={name:pW,signature:"",type:"event",inputs:[]},mW={bytes:cz.HEX,number:az.NUMBER};var yW=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function vW(e,t,r){return yW(this,void 0,void 0,(function*(){const n=_W(e,t);if(!Iz(n)){if(n.startsWith("-"))throw new _U(n);if(Number(n)<0||Number(n)>127)throw new _U(n);if(Iz(e.gasPrice)&&("0x0"===n||"0x1"===n))return{gasPrice:yield rJ(t,r),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if("0x2"===n)return Object.assign({gasPrice:void 0},yield function(e,t,r){var n,i,o;return yW(this,void 0,void 0,(function*(){const s=yield aJ(t,t.defaultBlock,!1,r);if(Iz(s.baseFeePerGas))throw new wU;if(!Iz(e.gasPrice)){const t=HH({format:"uint"},e.gasPrice,r);return{maxPriorityFeePerGas:t,maxFeePerGas:t}}return{maxPriorityFeePerGas:HH({format:"uint"},null!==(n=e.maxPriorityFeePerGas)&&void 0!==n?n:t.defaultMaxPriorityFeePerGas,r),maxFeePerGas:HH({format:"uint"},null!==(i=e.maxFeePerGas)&&void 0!==i?i:BigInt(s.baseFeePerGas)*BigInt(2)+BigInt(null!==(o=e.maxPriorityFeePerGas)&&void 0!==o?o:t.defaultMaxPriorityFeePerGas),r)}}))}(e,t,r))}}))}var bW=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const wW=(e,t,r,n)=>{if(void 0!==r&&e in r&&void 0!==r[e]){if("string"===typeof r[e]&&sz(r[e]))return r[e];if(!Dq(r[e])&&_z(r[e])){if(t.wallet){const n=t.wallet.get(HH({format:"uint"},r[e],mW));if(!Iz(n))return n.address;throw new RU}throw new RU}throw"from"===e?new eU(r.from):new tU(r.to)}if("from"===e){if(!Iz(n))return EG(n);if(!Iz(t.defaultAccount))return t.defaultAccount}},_W=(e,t)=>{const r=VG(e,t);return Iz(r)?Iz(t.defaultTransactionType)?void 0:HH({format:"uint"},t.defaultTransactionType,lz):r};function EW(e){var t,r;return bW(this,void 0,void 0,(function*(){let n=HH(YG,e.transaction,uz);if(Iz(n.from)&&(n.from=wW("from",e.web3Context,void 0,e.privateKey)),Iz(n.nonce)&&(n.nonce=yield function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return bW(void 0,void 0,void 0,(function*(){if(Iz(t))throw new bU;return gJ(e,t,e.defaultBlock,r)}))}(e.web3Context,n.from,lz)),Iz(n.value)&&(n.value="0x0"),Iz(n.data))Iz(n.input)?n.input="0x":n.input.startsWith("0x")||(n.input="0x".concat(n.input));else{if(!Iz(n.input)&&n.data!==n.input)throw new EU({data:qz(n.data),input:qz(n.input)});n.data.startsWith("0x")||(n.data="0x".concat(n.data))}if(Iz(n.common)){if(e.web3Context.defaultCommon){const t=e.web3Context.defaultCommon,r=t.customChain.chainId,i=t.customChain.networkId,o=t.customChain.name;n.common=Object.assign(Object.assign({},t),{customChain:{chainId:r,networkId:i,name:o}})}Iz(n.chain)&&(n.chain=e.web3Context.defaultChain),Iz(n.hardfork)&&(n.hardfork=e.web3Context.defaultHardfork)}if(Iz(n.chainId)&&Iz(null===(t=n.common)||void 0===t?void 0:t.customChain.chainId)&&(n.chainId=yield EJ(e.web3Context,lz)),Iz(n.networkId)&&(n.networkId=null!==(r=e.web3Context.defaultNetworkId)&&void 0!==r?r:yield uW(e.web3Context,lz)),Iz(n.gasLimit)&&!Iz(n.gas)&&(n.gasLimit=n.gas),n.type=_W(n,e.web3Context),!Iz(n.accessList)||"0x1"!==n.type&&"0x2"!==n.type||(n.accessList=[]),e.fillGasPrice&&(n=Object.assign(Object.assign({},n),yield vW(n,e.web3Context,lz))),Iz(n.gas)&&Iz(n.gasLimit)&&e.fillGasLimit){const t=yield wJ(e.web3Context,n,"latest",lz);n=Object.assign(Object.assign({},n),{gas:HH({format:"uint"},t,lz)})}return n}))}var AW=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function SW(e,t,r){const n=e.transactionPollingInterval,[i,o]=lK((()=>AW(this,void 0,void 0,(function*(){let n;try{n=yield nJ(e,mW)}catch(o){return void console.warn("An error happen while trying to get the block number",o)}const i=n-t;if(i>=e.transactionBlockTimeout)return new xU({starterBlockNumber:t,numberOfBlocks:i,transactionHash:r})}))),n);return[o,{clean:()=>{clearInterval(i)}}]}function kW(e,t){var r,n;return AW(this,void 0,void 0,(function*(){const{provider:i}=e.requestManager;let o;const s=yield nJ(e,mW);return o=(null===(n=(r=i).supportsSubscriptions)||void 0===n?void 0:n.call(r))&&e.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?yield function(e,t,r){var n;return AW(this,void 0,void 0,(function*(){let i,o,s=!0;function a(n,i){i&&console.warn("error happened at subscription. So revert to polling...",i),o.clean(),s=!1;const[a,c]=SW(e,t,r);o.clean=c.clean,a.catch((e=>n(e)))}try{i=yield null===(n=e.subscriptionManager)||void 0===n?void 0:n.subscribe("newHeads"),o={clean:()=>{var t;i.id&&(null===(t=e.subscriptionManager)||void 0===t||t.removeSubscription(i).then((()=>{})).catch((()=>{})))}}}catch(c){return SW(e,t,r)}return[new Promise(((n,o)=>{try{i.on("data",(n=>{if(s=!1,!(null===n||void 0===n?void 0:n.number))return;const i=Number(BigInt(n.number)-BigInt(t));i>=e.transactionBlockTimeout&&o(new xU({starterBlockNumber:t,numberOfBlocks:i,transactionHash:r}))})),i.on("error",(e=>{a(o,e)}))}catch(c){a(o,c)}setTimeout((()=>{s&&a(o)}),1e3*e.blockHeaderTimeout)})),o]}))}(e,s,t):SW(e,s,t),o}))}var xW=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function IW(e,t,r){return xW(this,void 0,void 0,(function*(){const[n,i]=uK(e.transactionSendTimeout,new AU({numberOfSeconds:e.transactionSendTimeout/1e3,transactionHash:r})),[o,s]=yield kW(e,r);try{return yield Promise.race([t(),i,o])}finally{clearTimeout(n),s.clean()}}))}var TW=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function PW(e,t,r){var n;return TW(this,void 0,void 0,(function*(){const i=null!==(n=e.transactionReceiptPollingInterval)&&void 0!==n?n:e.transactionPollingInterval,[o,s]=aK((()=>TW(this,void 0,void 0,(function*(){try{return pJ(e,t,r)}catch(n){return void console.warn("An error happen while trying to get the transaction receipt",n)}}))),i),[a,c]=uK(e.transactionPollingTimeout,new kU({numberOfSeconds:e.transactionPollingTimeout/1e3,transactionHash:t})),[u,l]=yield kW(e,t);try{return yield Promise.race([o,c,u])}finally{a&&clearTimeout(a),s&&clearInterval(s),l.clean()}}))}var RW=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const CW=e=>{let{web3Context:t,transactionReceipt:r,transactionPromiEvent:n,returnFormat:i}=e;var o;let s=1;const a=setInterval((()=>{RW(void 0,void 0,void 0,(function*(){s>=t.transactionConfirmationBlocks&&clearInterval(a);const e=yield LG(t.requestManager,Vz(BigInt(r.blockNumber)+BigInt(s)),!1);(null===e||void 0===e?void 0:e.hash)&&(s+=1,n.emit("confirmation",{confirmations:HH({format:"uint"},s,i),receipt:HH(nW,r,i),latestBlockHash:HH({format:"bytes32"},e.hash,i)}))}))}),null!==(o=t.transactionReceiptPollingInterval)&&void 0!==o?o:t.transactionPollingInterval)};var BW=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function MW(e,t,r,n,i){if(Iz(r)||Iz(r.blockHash))throw new IU({receipt:r,blockHash:HH({format:"bytes32"},null===r||void 0===r?void 0:r.blockHash,i),transactionHash:HH({format:"bytes32"},n,i)});if(!r.blockNumber)throw new TU({receipt:r});t.emit("confirmation",{confirmations:HH({format:"uint"},1,i),receipt:HH(nW,r,i),latestBlockHash:HH({format:"bytes32"},r.blockHash,i)});const o=e.requestManager.provider;o&&"supportsSubscriptions"in o&&o.supportsSubscriptions()?(e=>{let t,{web3Context:r,transactionReceipt:n,transactionPromiEvent:i,returnFormat:o}=e,s=!0;setImmediate((()=>{var e;null===(e=r.subscriptionManager)||void 0===e||e.subscribe("newHeads").then((e=>{e.on("data",(a=>BW(void 0,void 0,void 0,(function*(){var c;if(s=!1,!(null===a||void 0===a?void 0:a.number)||t===(null===a||void 0===a?void 0:a.parentHash))return;t=null===a||void 0===a?void 0:a.parentHash;const u=BigInt(a.number)-BigInt(n.blockNumber)+BigInt(1);i.emit("confirmation",{confirmations:HH({format:"uint"},u,o),receipt:HH(nW,n,o),latestBlockHash:HH({format:"bytes32"},a.parentHash,o)}),u>=r.transactionConfirmationBlocks&&(yield null===(c=r.subscriptionManager)||void 0===c?void 0:c.removeSubscription(e))})))),e.on("error",(()=>BW(void 0,void 0,void 0,(function*(){var t;yield null===(t=r.subscriptionManager)||void 0===t?void 0:t.removeSubscription(e),s=!1,CW({web3Context:r,transactionReceipt:n,transactionPromiEvent:i,returnFormat:o})}))))})).catch((()=>{s=!1,CW({web3Context:r,transactionReceipt:n,transactionPromiEvent:i,returnFormat:o})}))})),setTimeout((()=>{s&&CW({web3Context:r,transactionReceipt:n,transactionPromiEvent:i,returnFormat:o})}),1e3*r.blockHeaderTimeout)})({web3Context:e,transactionReceipt:r,transactionPromiEvent:t,returnFormat:i}):CW({web3Context:e,transactionReceipt:r,transactionPromiEvent:t,returnFormat:i})}const NW=e=>!PH(e)&&"object"===typeof e&&!PH(e.type)&&"error"===e.type,OW=e=>!PH(e)&&"object"===typeof e&&!PH(e.type)&&"event"===e.type,DW=e=>!PH(e)&&"object"===typeof e&&!PH(e.type)&&"function"===e.type,LW=e=>"object"===typeof e&&"undefined"===typeof e.components&&"undefined"===typeof e.name,UW=e=>e.includes("[]")?{type:"tuple[]",name:e.slice(0,-2)}:{type:"tuple",name:e},FW=e=>{const t=[];for(const r of Object.keys(e)){const n=e[r];"object"===typeof n?t.push(Object.assign(Object.assign({},UW(r)),{components:FW(n)})):t.push({name:r,type:e[r]})}return t},jW=(e,t)=>{const r=[];return t.forEach((t=>{if("object"===typeof t.components){if(!t.type.startsWith("tuple"))throw new qL('Invalid value given "'.concat(t.type,'". Error: components found but type is not tuple.'));const n=t.type.indexOf("["),i=n>=0?t.type.substring(n):"",o=jW(e,t.components);Array.isArray(o)&&e?r.push("tuple(".concat(o.join(","),")").concat(i)):e?r.push("(".concat(o.join(),")")):r.push("(".concat(o.join(","),")").concat(i))}else r.push(t.type)})),r},qW=e=>{var t,r,n,i;return NW(e)||OW(e)||DW(e)?(null===(t=e.name)||void 0===t?void 0:t.includes("("))?e.name:"".concat(null!==(r=e.name)&&void 0!==r?r:"","(").concat(jW(!1,null!==(n=e.inputs)&&void 0!==n?n:[]).join(","),")"):"(".concat(jW(!1,null!==(i=e.inputs)&&void 0!==i?i:[]).join(","),")")},zW=e=>{if("string"!==typeof e&&!OW(e))throw new qL("Invalid parameter value in encodeEventSignature");let t;return t=!e||"function"!==typeof e&&"object"!==typeof e?e:qW(e),GH(t)};function HW(e,t){const r=e.exec(t);return null===r||void 0===r?void 0:r.groups}var KW=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,VW=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,GW=/^\(.+?\).*?$/,WW=Object.defineProperty,QW=(e,t,r)=>(((e,t,r)=>{t in e?WW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!==typeof t?t+"":t,r),r),JW=class extends Error{constructor(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r.cause instanceof JW?r.cause.details:null!==(t=r.cause)&&void 0!==t&&t.message?r.cause.message:r.details,i=r.cause instanceof JW&&r.cause.docsPath||r.docsPath;super([e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...i?["Docs: https://abitype.dev".concat(i)]:[],...n?["Details: ".concat(n)]:[],"Version: ".concat("abitype","@").concat("0.7.1")].join("\n")),QW(this,"details"),QW(this,"docsPath"),QW(this,"metaMessages"),QW(this,"shortMessage"),QW(this,"name","AbiTypeError"),r.cause&&(this.cause=r.cause),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.shortMessage=e}};var ZW=/^struct (?<name>[a-zA-Z0-9_]+) \{(?<properties>.*?)\}$/;function YW(e){return ZW.test(e)}function XW(e){return HW(ZW,e)}var $W=new Set(["memory","indexed","storage","calldata"]),eQ=new Set(["calldata","memory","storage"]);var tQ=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);var rQ=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,nQ=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,iQ=/^u?int$/;function oQ(e,t){var r,n;const i=function(e,t){return t?"".concat(t,":").concat(e):e}(e,null===t||void 0===t?void 0:t.type);if(tQ.has(i))return tQ.get(i);const o=GW.test(e),s=HW(o?nQ:rQ,e);if(!s)throw new JW("Invalid ABI parameter.",{details:e});if(s.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||KW.test(e)||VW.test(e)||cQ.test(e)}(s.name))throw new JW("Invalid ABI parameter.",{details:e,metaMessages:['"'.concat(s.name,'" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html')]});const a=s.name?{name:s.name}:{},c="indexed"===s.modifier?{indexed:!0}:{},u=null!==(r=null===t||void 0===t?void 0:t.structs)&&void 0!==r?r:{};let l,d={};if(o){l="tuple";const e=sQ(s.type),t=[],r=e.length;for(let n=0;n<r;n++)t.push(oQ(e[n],{structs:u}));d={components:t}}else if(s.type in u)l="tuple",d={components:u[s.type]};else if(iQ.test(s.type))l="".concat(s.type,"256");else if(l=s.type,"struct"!==(null===t||void 0===t?void 0:t.type)&&!aQ(l))throw new JW("Unknown type.",{metaMessages:['Type "'.concat(l,'" is not a valid ABI type.')]});if(s.modifier){var h,f;if(null===t||void 0===t||null===(h=t.modifiers)||void 0===h||null===(f=h.has)||void 0===f||!f.call(h,s.modifier))throw new JW("Invalid ABI parameter.",{details:e,metaMessages:['Modifier "'.concat(s.modifier,'" not allowed').concat(null!==t&&void 0!==t&&t.type?' in "'.concat(t.type,'" type'):"",".")]});if(eQ.has(s.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(l,!!s.array))throw new JW("Invalid ABI parameter.",{details:e,metaMessages:['Modifier "'.concat(s.modifier,'" not allowed').concat(null!==t&&void 0!==t&&t.type?' in "'.concat(t.type,'" type'):"","."),'Data location can only be specified for array, struct, or mapping types, but "'.concat(s.modifier,'" was given.')]})}const p={type:"".concat(l).concat(null!==(n=s.array)&&void 0!==n?n:""),...a,...c,...d};return tQ.set(i,p),p}function sQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(""===e){if(""===r)return t;if(0!==n)throw new JW("Unbalanced parentheses.",{metaMessages:['"'.concat(r.trim(),'" has too many ').concat(n>0?"opening":"closing"," parentheses.")],details:'Depth "'.concat(n,'"')});return[...t,r.trim()]}const i=e.length;for(let o=0;o<i;o++){const i=e[o],s=e.slice(o+1);switch(i){case",":return 0===n?sQ(s,[...t,r.trim()]):sQ(s,t,"".concat(r).concat(i),n);case"(":return sQ(s,t,"".concat(r).concat(i),n+1);case")":return sQ(s,t,"".concat(r).concat(i),n-1);default:return sQ(s,t,"".concat(r).concat(i),n)}}return[]}function aQ(e){return"address"===e||"bool"===e||"function"===e||"string"===e||KW.test(e)||VW.test(e)}var cQ=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function uQ(e){const t={},r=e.length;for(let s=0;s<r;s++){const r=e[s];if(!YW(r))continue;const n=XW(r);if(!n)throw new JW("Invalid struct signature.",{details:r});const i=n.properties.split(";"),o=[],a=i.length;for(let e=0;e<a;e++){const t=i[e].trim();if(!t)continue;const r=oQ(t,{type:"struct"});o.push(r)}if(!o.length)throw new JW("Invalid struct signature.",{details:r,metaMessages:["No properties exist."]});t[n.name]=o}const n={},i=Object.entries(t),o=i.length;for(let s=0;s<o;s++){const[e,r]=i[s];n[e]=dQ(r,t)}return n}var lQ=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?$/;function dQ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;const n=[],i=e.length;for(let s=0;s<i;s++){const i=e[s];if(GW.test(i.type))n.push(i);else{const e=HW(lQ,i.type);if(null===e||void 0===e||!e.type)throw new JW("Invalid ABI parameter.",{details:JSON.stringify(i,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:s,type:a}=e;if(a in t){var o;if(r.has(a))throw new JW("Circular reference detected.",{metaMessages:['Struct "'.concat(a,'" is a circular reference.')]});n.push({...i,type:"tuple".concat(null!==s&&void 0!==s?s:""),components:dQ(null!==(o=t[a])&&void 0!==o?o:[],t,new Set([...r,a]))})}else{if(!aQ(a))throw new JW("Unknown type.",{metaMessages:['Type "'.concat(a,'" is not a valid ABI type. Perhaps you forgot to include a struct signature?')]});n.push(i)}}}return n}const hQ=32;function fQ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;var t;if(void 0!==(null===(t=globalThis.Buffer)||void 0===t?void 0:t.alloc)){const t=globalThis.Buffer.alloc(e);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return new Uint8Array(e)}function pQ(e){var t,r;return Object.assign(Object.assign({},e),{name:null!==(t=e.name)&&void 0!==t?t:"",components:null===(r=e.components)||void 0===r?void 0:r.map((e=>pQ(e)))})}function gQ(e){return e.map((e=>{var t,r;if(!PH(r=e)&&"object"===typeof r&&!PH(r.type)&&"string"===typeof r.type)return e;if("string"===typeof e)return pQ(function(e){let t;if("string"===typeof e)t=oQ(e,{modifiers:$W});else{const r=uQ(e),n=e.length;for(let i=0;i<n;i++){const n=e[i];if(!YW(n)){t=oQ(n,{modifiers:$W,structs:r});break}}}if(!t)throw new JW("Failed to parse ABI parameter.",{details:"parseAbiParameter(".concat(JSON.stringify(e,null,2),")"),docsPath:"/api/human.html#parseabiparameter-1"});return t}(e.replace(/tuple/,"")));if(LW(e)){const r=Object.keys(e)[0],n=UW(r);return n.name=null!==(t=n.name)&&void 0!==t?t:"",Object.assign(Object.assign({},n),{components:FW(e[r])})}throw new qL("Invalid abi")}))}function mQ(e){const t=e.type.lastIndexOf("["),r=e.type.substring(0,t),n=e.type.substring(t);let i=-1;if("[]"!==n&&(i=Number(n.slice(1,-1)),isNaN(i)))throw new qL("Invalid fixed array size",{size:n});return{param:{type:r,name:"",components:e.components},size:i}}function yQ(e){var t,r;return!("string"!==e.type&&"bytes"!==e.type&&!e.type.endsWith("[]"))||("tuple"===e.type?null!==(r=null===(t=e.components)||void 0===t?void 0:t.some(yQ))&&void 0!==r&&r:!!e.type.endsWith("]")&&yQ(mQ(e).param))}const vQ=20,bQ=hQ-vQ;const wQ=new Map;let _Q=BigInt(256);for(let tX=8;tX<=256;tX+=8)wQ.set("uint".concat(tX),{min:BigInt(0),max:_Q-BigInt(1)}),wQ.set("int".concat(tX),{min:-_Q/BigInt(2),max:_Q/BigInt(2)-BigInt(1)}),_Q*=BigInt(256);wQ.set("int",wQ.get("int256")),wQ.set("uint",wQ.get("uint256"));const EQ=BigInt(1)<<BigInt(256);function AQ(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hQ;return t=e<0?(EQ+e).toString(16):e.toString(16),t=BH(t,2*r),tz(t)}function SQ(e,t){let r;try{r=aH(t)}catch(i){throw new qL("provided input is not number value",{type:e.type,value:t,name:e.name})}const n=wQ.get(e.type);if(!n)throw new qL("provided abi contains invalid number datatype",{type:e.type});if(r<n.min)throw new qL("provided input is less then minimum for given type",{type:e.type,value:t,name:e.name,minimum:n.min.toString()});if(r>n.max)throw new qL("provided input is greater then maximum for given type",{type:e.type,value:t,name:e.name,maximum:n.max.toString()});return{dynamic:!1,encoded:AQ(r)}}function kQ(e,t){if(t.length<hQ)throw new qL("Not enough bytes left to decode",{param:e,bytesLeft:t.length});const r=t.subarray(0,hQ),n=wQ.get(e.type);if(!n)throw new qL("provided abi contains invalid number datatype",{type:e.type});const i=function(e,t){const r=Xq(e),n=BigInt(r);return n<=t?n:n-EQ}(r,n.max);if(i<n.min)throw new qL("decoded value is less then minimum for given type",{type:e.type,value:i,name:e.name,minimum:n.min.toString()});if(i>n.max)throw new qL("decoded value is greater then maximum for given type",{type:e.type,value:i,name:e.name,maximum:n.max.toString()});return{result:i,encoded:t.subarray(hQ),consumed:hQ}}const xQ=32;function IQ(e,t){if("string"===typeof t&&t.length%2!==0&&(t+="0"),!iz(t))throw new qL("provided input is not valid bytes value",{type:e.type,value:t,name:e.name});const r=Fz(t),[,n]=e.type.split("bytes");if(n){if(Number(n)>xQ||Number(n)<1)throw new qL("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:e.type});if(Number(n)<r.length)throw new qL("provided input size is different than type size",{type:e.type,value:t,name:e.name});const i=fQ(hQ);return i.set(r),{dynamic:!1,encoded:i}}const i=Math.ceil(r.length/hQ),o=fQ(hQ+i*hQ);return o.set(SQ({type:"uint32",name:""},r.length).encoded),o.set(r,hQ),{dynamic:!0,encoded:o}}function TQ(e,t){const[,r]=e.type.split("bytes");let n=Number(r),i=t,o=1,s=0;if(!n){const e=kQ({type:"uint32",name:""},i);n=Number(e.result),s+=e.consumed,i=e.encoded,o=Math.ceil(n/hQ)}if(n>t.length)throw new qL("there is not enough data to decode",{type:e.type,encoded:t,size:n});return{result:qz(i.subarray(0,n)),encoded:i.subarray(o*hQ),consumed:s+o*hQ}}function PQ(e){let t=0,r=0;const n=[],i=[];for(const o of e)o.dynamic?t+=hQ:t+=o.encoded.length;for(const o of e)o.dynamic?(n.push(SQ({type:"uint256",name:""},t+r)),i.push(o),r+=o.encoded.length):n.push(o);return Dz(...n.map((e=>e.encoded)),...i.map((e=>e.encoded)))}function RQ(e,t){if("string"===e.type)return function(e,t){if("string"!==typeof t)throw new qL("invalid input, should be string",{input:t});return IQ({type:"bytes",name:""},$z(t))}(0,t);if("bool"===e.type)return function(e,t){let r;try{r=dH(t)}catch(n){if(n instanceof FU)throw new qL("provided input is not valid boolean value",{type:e.type,value:t,name:e.name})}return SQ({type:"uint8",name:""},Number(r))}(e,t);if("address"===e.type)return function(e,t){if("string"!==typeof t)throw new qL("address type expects string as input type",{value:t,name:e.name,type:e.type});let r=t.toLowerCase();if(r.startsWith("0x")||(r="0x".concat(r)),!sz(r))throw new qL("provided input is not valid address",{value:t,name:e.name,type:e.type});const n=tz(r),i=fQ(hQ);return i.set(n,bQ),{dynamic:!1,encoded:i}}(e,t);if("tuple"===e.type)return BQ(e,t);if(e.type.endsWith("]"))return function(e,t){if(!Array.isArray(t))throw new qL("Expected value to be array",{abi:e,values:t});const{size:r,param:n}=mQ(e),i=t.map((e=>RQ(n,e))),o=-1===r,s=i.length>0&&i[0].dynamic;if(!o&&t.length!==r)throw new qL("Given arguments count doesn't match array length",{arrayLength:r,argumentsLength:t.length});if(o||s){const e=PQ(i);if(o){const t=SQ({type:"uint256",name:""},i.length).encoded;return{dynamic:!0,encoded:i.length>0?Dz(t,e):t}}return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:Dz(...i.map((e=>e.encoded)))}}(e,t);if(e.type.startsWith("bytes"))return IQ(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return SQ(e,t);throw new qL("Unsupported",{param:e,value:t})}function CQ(e,t){if("string"===e.type)return function(e,t){const r=TQ({type:"bytes",name:""},t);return{result:Yz(r.result),encoded:r.encoded,consumed:r.consumed}}(0,t);if("bool"===e.type)return function(e,t){const r=kQ({type:"uint8",name:""},t);if(r.result>1||r.result<0)throw new qL("Invalid boolean value encoded",{boolBytes:t.subarray(0,hQ),numberResult:r});return{result:r.result===BigInt(1),encoded:r.encoded,consumed:hQ}}(0,t);if("address"===e.type)return function(e,t){const r=t.subarray(bQ,hQ);if(r.length!==vQ)throw new qL("Invalid decoding input, not enough bytes to decode address",{bytes:t});const n=Xq(r);return{result:lH(n),encoded:t.subarray(hQ),consumed:hQ}}(0,t);if("tuple"===e.type)return MQ(e,t);if(e.type.endsWith("]"))return function(e,t){let{size:r,param:n}=mQ(e),i=0;const o=[];let s=t;if(-1===r){const e=kQ({type:"uint32",name:""},t);r=Number(e.result),i=e.consumed,s=e.encoded}if(yQ(n)){for(let e=0;e<r;e+=1){const t=kQ({type:"uint32",name:""},s.subarray(e*hQ));i+=t.consumed;const r=CQ(n,s.subarray(Number(t.result)));i+=r.consumed,o.push(r.result)}return{result:o,encoded:s.subarray(i),consumed:i}}for(let a=0;a<r;a+=1){const e=CQ(n,t.subarray(i));i+=e.consumed,o.push(e.result)}return{result:o,encoded:t.subarray(i),consumed:i}}(e,t);if(e.type.startsWith("bytes"))return TQ(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return kQ(e,t);throw new qL("Unsupported",{param:e,bytes:t})}function BQ(e,t){var r,n,i;let o=!1;if(!Array.isArray(t)&&"object"!==typeof t)throw new qL("param must be either Array or Object",{param:e,input:t});const s=t,a=[];for(let c=0;c<(null!==(n=null===(r=e.components)||void 0===r?void 0:r.length)&&void 0!==n?n:0);c+=1){const r=e.components[c];let n;if(Array.isArray(s)){if(c>=s.length)throw new qL("input param length missmatch",{param:e,input:t});n=RQ(r,s[c])}else{const o=s[null!==(i=r.name)&&void 0!==i?i:""];if(void 0===o||null===o)throw new qL("missing input defined in abi",{param:e,input:t,paramName:r.name});n=RQ(r,o)}n.dynamic&&(o=!0),a.push(n)}return o?{dynamic:!0,encoded:PQ(a)}:{dynamic:!1,encoded:Dz(...a.map((e=>e.encoded)))}}function MQ(e,t){const r={__length__:0};let n=0;if(!e.components)return{result:r,encoded:t,consumed:n};let i=0;for(const[o,s]of e.components.entries()){let e;if(yQ(s)){const r=kQ({type:"uint32",name:""},t.subarray(n));e=CQ(s,t.subarray(Number(r.result))),n+=r.consumed,i+=e.consumed}else e=CQ(s,t.subarray(n)),n+=e.consumed;r.__length__+=1,r[o]=e.result,s.name&&""!==s.name&&(r[s.name]=e.result)}return{encoded:t.subarray(n+i),result:r,consumed:n+i}}function NQ(e){const t=[];return e.forEach((e=>{if(Array.isArray(e)){const r=NQ(e);t.push({type:"tuple",components:r,name:""})}else t.push({type:oH(e,!0)})})),t}function OQ(e,t){if((null===e||void 0===e?void 0:e.length)!==t.length)throw new qL("Invalid number of values received for given ABI",{expected:null===e||void 0===e?void 0:e.length,received:t.length});return Xq(BQ({type:"tuple",name:"",components:gQ(e)},t).encoded)}function DQ(e){try{return Xq(BQ({type:"tuple",name:"",components:NQ(e)},e).encoded)}catch(t){throw new qL("Could not infer types from given params",{params:e})}}const LQ=(e,t)=>OQ([e],[t]),UQ=(e,t,r)=>{try{if(e.length>0&&(!t||"0x"===t||"0X"===t))throw new qL("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return function(e,t,r){return MQ({type:"tuple",name:"",components:gQ(e)},tz(t)).result}(e,"0x".concat(t.replace(/0x/i,"")))}catch(n){throw new qL("Parameter decoding error: ".concat(n.message),{internalErr:n})}},FQ=(e,t)=>UQ(e,t),jQ=(e,t)=>FQ([e],t)[0],qQ=e=>{if("string"!==typeof e&&!DW(e))throw new qL("Invalid parameter value in encodeFunctionSignature");let t;return t=!e||"function"!==typeof e&&"object"!==typeof e?e:qW(e),GH(t).slice(0,10)},zQ=["bool","string","int","uint","address","fixed","ufixed"],HQ=(e,t,r)=>{const n=Array.isArray(r)?r:[r],i={},o={};for(const[h,f]of e.entries())f.indexed?i[h]=f:o[h]=f;const s=t?UQ(Object.values(o),t):{__length__:0},a=n.length-Object.keys(i).length,c=Object.values(i).map(((e,t)=>{return zQ.some((t=>e.type.startsWith(t)))?(r=e.type,i=n[t+a],"string"===r?i:jQ(r,i)):n[t+a];var r,i})),u={__length__:0};let l=0,d=0;for(const[h,f]of e.entries())u[h]="string"===f.type?"":void 0,i[h]&&(u[h]=c[l],l+=1),o[h]&&(u[h]=s[String(d)],d+=1),f.name&&(u[f.name]=u[h]),u.__length__+=1;return u},KQ=(e,t)=>{if(null===t||void 0===t?void 0:t.data){let n,i,o;try{const r=t.data.slice(0,10),s=e.find((e=>(e=>{if("string"!==typeof e&&!NW(e))throw new qL("Invalid parameter value in encodeErrorSignature");let t;return t=!e||"function"!==typeof e&&"object"!==typeof e?e:qW(e),GH(t)})(e).startsWith(r)));(null===s||void 0===s?void 0:s.inputs)&&(n=s.name,i=qW(s),o=FQ([...s.inputs],t.data.substring(10)))}catch(r){console.error(r)}n&&t.setDecodedProperties(n,i,o)}};var VQ=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const GQ=(e,t)=>{var r,n,i,o,s;if(e instanceof BL&&e.cause instanceof CL){if(void 0!==t){const i=t.filter((e=>NW(e)));return KQ(i,e.cause),{reason:e.cause.message,signature:null===(r=e.cause.data)||void 0===r?void 0:r.slice(0,10),data:null===(n=e.cause.data)||void 0===n?void 0:n.substring(10),customErrorName:e.cause.errorName,customErrorDecodedSignature:e.cause.errorSignature,customErrorArguments:e.cause.errorArgs}}return{reason:e.cause.message,signature:null===(i=e.cause.data)||void 0===i?void 0:i.slice(0,10),data:null===(o=e.cause.data)||void 0===o?void 0:o.substring(10)}}if(e instanceof GU&&!Array.isArray(null===(s=e.cause)||void 0===s?void 0:s.errors)&&void 0!==e.cause)return e.cause.message;throw e};function WQ(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uz;return VQ(this,void 0,void 0,(function*(){try{return void(yield bJ(e,t,e.defaultBlock,n))}catch(i){return GQ(i,r)}}))}var QQ=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function JQ(e,t,r,n,i,o){return QQ(this,void 0,void 0,(function*(){let s,a=o;if(void 0===a&&(void 0!==n?a=GQ(n):e.handleRevert&&void 0!==t&&(a=yield WQ(e,t,i))),void 0===a)s=new YL(r);else if("string"===typeof a)s=new JL(a,void 0,r);else if(void 0!==a.customErrorName&&void 0!==a.customErrorDecodedSignature&&void 0!==a.customErrorArguments){const e=a;s=new ZL(e.reason,e.customErrorName,e.customErrorDecodedSignature,e.customErrorArguments,e.signature,r,e.data)}else s=new JL(a.reason,a.signature,r,a.data);return s}))}const ZQ=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uz;var i,o,s,a,c;let u=Object.assign({},e);const l=HH(tW,t,n);if([pW,"allEvents"].includes(u.name)){const e=r.find((e=>e.signature===t.topics[0]));u=e||{anonymous:!0}}if(u.inputs=null!==(o=null!==(i=u.inputs)&&void 0!==i?i:e.inputs)&&void 0!==o?o:[],!u.anonymous){let e=0;(null!==(s=u.inputs)&&void 0!==s?s:[]).forEach((t=>{t.indexed&&(e+=1)})),e>0&&(null===t||void 0===t?void 0:t.topics)&&(null===t||void 0===t?void 0:t.topics.length)!==e+1&&(u=Object.assign(Object.assign({},u),{anonymous:!0,inputs:[]}))}const d=u.anonymous?t.topics:(null!==(a=t.topics)&&void 0!==a?a:[]).slice(1);return Object.assign(Object.assign({},l),{returnValues:HQ([...null!==(c=u.inputs)&&void 0!==c?c:[]],t.data,d),event:u.name,signature:!u.anonymous&&t.topics&&0!==t.topics.length&&t.topics[0]?t.topics[0]:void 0,raw:{data:t.data,topics:t.topics}})};var YQ=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class XQ{constructor(e){let{options:t,web3Context:r,promiEvent:n,returnFormat:i}=e;this.options={checkRevertBeforeSending:!0},this.options=t,this.web3Context=r,this.promiEvent=n,this.returnFormat=i}getReceiptWithEvents(e){var t,r;const n=Object.assign({},null!==e&&void 0!==e?e:{});if((null===(t=this.options)||void 0===t?void 0:t.contractAbi)&&n.logs&&n.logs.length>0){n.events={};for(const e of n.logs){const t=ZQ(gW,e,null===(r=this.options)||void 0===r?void 0:r.contractAbi,this.returnFormat);t.event&&(n.events[t.event]=t)}}return n}checkRevertBeforeSending(e){return YQ(this,void 0,void 0,(function*(){if(!1!==this.options.checkRevertBeforeSending){const t=yield WQ(this.web3Context,e,this.options.contractAbi);if(void 0!==t)throw yield JQ(this.web3Context,e,void 0,void 0,this.options.contractAbi,t)}}))}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice(e){let{transactionFormatted:t,transaction:r}=e;var n;return YQ(this,void 0,void 0,(function*(){let e=t;return!(null===(n=this.options)||void 0===n?void 0:n.ignoreGasPricing)&&Iz(t.gasPrice)&&(Iz(r.maxPriorityFeePerGas)||Iz(r.maxFeePerGas))&&(e=Object.assign(Object.assign({},t),yield vW(t,this.web3Context,lz))),e}))}signAndSend(e){let{wallet:t,tx:r}=e;return YQ(this,void 0,void 0,(function*(){if(t){const e=yield t.signTransaction(r);return IW(this.web3Context,(()=>YQ(this,void 0,void 0,(function*(){return DG(this.web3Context.requestManager,e.rawTransaction)}))),e.transactionHash)}return IW(this.web3Context,(()=>YQ(this,void 0,void 0,(function*(){return function(e,t){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_sendTransaction",params:[t]})}))}(this.web3Context.requestManager,r)}))))}))}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError(e){let{error:t,tx:r}=e;var n;return YQ(this,void 0,void 0,(function*(){let e=t;return e instanceof BL&&this.web3Context.handleRevert&&(e=yield JQ(this.web3Context,r,void 0,void 0,null===(n=this.options)||void 0===n?void 0:n.contractAbi)),(e instanceof GU||e instanceof BL||e instanceof ZL||e instanceof YL||e instanceof JL||e instanceof kU)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",e),e}))}emitConfirmation(e){let{receipt:t,transactionHash:r}=e;this.promiEvent.listenerCount("confirmation")>0&&MW(this.web3Context,this.promiEvent,t,r,this.returnFormat)}handleResolve(e){let{receipt:t,tx:r}=e;var n,i,o;return YQ(this,void 0,void 0,(function*(){if(null===(n=this.options)||void 0===n?void 0:n.transactionResolver)return null===(i=this.options)||void 0===i?void 0:i.transactionResolver(t);if(t.status===BigInt(0)){const e=yield JQ(this.web3Context,r,t,void 0,null===(o=this.options)||void 0===o?void 0:o.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",e),e}return t}))}}var $Q=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},eJ=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};function tJ(e,t){return $Q(this,void 0,void 0,(function*(){const r=yield function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_hashrate",params:[]})}))}(e.requestManager);return HH({format:"uint"},r,t)}))}function rJ(e,t){return $Q(this,void 0,void 0,(function*(){const r=yield function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_gasPrice",params:[]})}))}(e.requestManager);return HH({format:"uint"},r,t)}))}function nJ(e,t){return $Q(this,void 0,void 0,(function*(){const r=yield function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_blockNumber",params:[]})}))}(e.requestManager);return HH({format:"uint"},r,t)}))}function iJ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,n=arguments.length>3?arguments[3]:void 0;return $Q(this,void 0,void 0,(function*(){const i=Az(r)?r:HH({format:"uint"},r,lz),o=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getBalance",params:[t,r]})}))}(e.requestManager,t,i);return HH({format:"uint"},o,n)}))}function oJ(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.defaultBlock,i=arguments.length>4?arguments[4]:void 0;return $Q(this,void 0,void 0,(function*(){const o=HH({format:"uint"},r,lz),s=Az(n)?n:HH({format:"uint"},n,lz),a=yield function(e,t,r,n){return NG(this,void 0,void 0,(function*(){return Nz.validate(["address","hex","blockNumberOrTag"],[t,r,n]),e.send({method:"eth_getStorageAt",params:[t,r,n]})}))}(e.requestManager,t,o,s);return HH({format:"bytes"},a,i)}))}function sJ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,n=arguments.length>3?arguments[3]:void 0;return $Q(this,void 0,void 0,(function*(){const i=Az(r)?r:HH({format:"uint"},r,lz),o=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getCode",params:[t,r]})}))}(e.requestManager,t,i);return HH({format:"bytes"},o,n)}))}function aJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;return $Q(this,void 0,void 0,(function*(){let i;if(iz(t)){const n=HH({format:"bytes32"},t,lz);i=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["bytes32","bool"],[t,r]),e.send({method:"eth_getBlockByHash",params:[t,r]})}))}(e.requestManager,n,r)}else{const n=Az(t)?t:HH({format:"uint"},t,lz);i=yield LG(e.requestManager,n,r)}return HH($G,i,n)}))}function cJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,r=arguments.length>2?arguments[2]:void 0;return $Q(this,void 0,void 0,(function*(){let n;if(iz(t)){const r=HH({format:"bytes32"},t,lz);n=yield function(e,t){return NG(this,void 0,void 0,(function*(){return Nz.validate(["bytes32"],[t]),e.send({method:"eth_getBlockTransactionCountByHash",params:[t]})}))}(e.requestManager,r)}else{const r=Az(t)?t:HH({format:"uint"},t,lz);n=yield function(e,t){return NG(this,void 0,void 0,(function*(){return Nz.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getBlockTransactionCountByNumber",params:[t]})}))}(e.requestManager,r)}return HH({format:"uint"},n,r)}))}function uJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,r=arguments.length>2?arguments[2]:void 0;return $Q(this,void 0,void 0,(function*(){let n;if(iz(t)){const r=HH({format:"bytes32"},t,lz);n=yield function(e,t){return NG(this,void 0,void 0,(function*(){return Nz.validate(["bytes32"],[t]),e.send({method:"eth_getUncleCountByBlockHash",params:[t]})}))}(e.requestManager,r)}else{const r=Az(t)?t:HH({format:"uint"},t,lz);n=yield function(e,t){return NG(this,void 0,void 0,(function*(){return Nz.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getUncleCountByBlockNumber",params:[t]})}))}(e.requestManager,r)}return HH({format:"uint"},n,r)}))}function lJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return $Q(this,void 0,void 0,(function*(){const i=HH({format:"uint"},r,lz);let o;if(iz(t)){const r=HH({format:"bytes32"},t,lz);o=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["bytes32","hex"],[t,r]),e.send({method:"eth_getUncleByBlockHashAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}else{const r=Az(t)?t:HH({format:"uint"},t,lz);o=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["blockNumberOrTag","hex"],[t,r]),e.send({method:"eth_getUncleByBlockNumberAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}return HH($G,o,n)}))}function dJ(e,t,r){return $Q(this,void 0,void 0,(function*(){const n=HH({format:"bytes32"},t,uz),i=yield function(e,t){return NG(this,void 0,void 0,(function*(){return Nz.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionByHash",params:[t]})}))}(e.requestManager,n);return Iz(i)?i:aW(i,r,{fillInputAndData:!0})}))}function hJ(e,t){return $Q(this,void 0,void 0,(function*(){return(yield function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_pendingTransactions",params:[]})}))}(e.requestManager)).map((e=>aW(e,t,{fillInputAndData:!0})))}))}function fJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultBlock,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return $Q(this,void 0,void 0,(function*(){const i=HH({format:"uint"},r,lz);let o;if(iz(t)){const r=HH({format:"bytes32"},t,lz);o=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["bytes32","hex"],[t,r]),e.send({method:"eth_getTransactionByBlockHashAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}else{const r=Az(t)?t:HH({format:"uint"},t,lz);o=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["blockNumberOrTag","hex"],[t,r]),e.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[t,r]})}))}(e.requestManager,r,i)}return Iz(o)?o:aW(o,n,{fillInputAndData:!0})}))}function pJ(e,t,r){return $Q(this,void 0,void 0,(function*(){const n=HH({format:"bytes32"},t,uz),i=yield function(e,t){return NG(this,void 0,void 0,(function*(){return Nz.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionReceipt",params:[t]})}))}(e.requestManager,n);return Iz(i)?i:HH(nW,i,r)}))}function gJ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,n=arguments.length>3?arguments[3]:void 0;return $Q(this,void 0,void 0,(function*(){const i=Az(r)?r:HH({format:"uint"},r,lz),o=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getTransactionCount",params:[t,r]})}))}(e.requestManager,t,i);return HH({format:"uint"},o,n)}))}function mJ(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{checkRevertBeforeSending:!0};const i=new MG(((o,s)=>{setImmediate((()=>{(()=>{$Q(this,void 0,void 0,(function*(){const a=new XQ({web3Context:e,promiEvent:i,options:n,returnFormat:r});let c=aW(Object.assign(Object.assign({},t),{from:wW("from",e,t),to:wW("to",e,t)}),lz);try{let n;c=yield a.populateGasPrice({transaction:t,transactionFormatted:c}),yield a.checkRevertBeforeSending(c),a.emitSending(c),e.wallet&&!Iz(c.from)&&(n=e.wallet.get(c.from));const i=yield a.signAndSend({wallet:n,tx:c}),s=HH({format:"bytes32"},i,r);a.emitSent(c),a.emitTransactionHash(s);const u=yield PW(e,i,r),l=a.getReceiptWithEvents(HH(nW,u,r));a.emitReceipt(l),o(yield a.handleResolve({receipt:l,tx:c})),a.emitConfirmation({receipt:l,transactionHash:i})}catch(u){s(yield a.handleError({error:u,tx:c}))}}))})()}))}));return i}function yJ(e,t,r,n){var i;return $Q(this,void 0,void 0,(function*(){const o=HH({format:"bytes"},t,uz);if(null===(i=e.wallet)||void 0===i?void 0:i.get(r)){const t=e.wallet.get(r).sign(o);return HH(iW,t,n)}if("number"===typeof r)throw new WL(t,'RPC method "eth_sign" does not support index signatures');const s=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["address","hex"],[t,r]),e.send({method:"eth_sign",params:[t,r]})}))}(e.requestManager,r,o);return HH({format:"bytes"},s,n)}))}function vJ(e,t,r){return $Q(this,void 0,void 0,(function*(){const n=yield function(e,t){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_signTransaction",params:[t]})}))}(e.requestManager,aW(t,lz));return Oq(n)?function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{fillInputAndData:!1};return{raw:HH({format:"bytes"},e,t),tx:aW(Object.assign(Object.assign({},gG.fromSerializedData(zz(e)).toJSON()),{hash:qz(WH(zz(e))),type:GG(zz(e))}),t,{fillInputAndData:r.fillInputAndData})}}(n,r,{fillInputAndData:!0}):{raw:HH({format:"bytes"},n.raw,r),tx:aW(n.tx,r,{fillInputAndData:!0})}}))}function bJ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,n=arguments.length>3?arguments[3]:void 0;return $Q(this,void 0,void 0,(function*(){const i=Az(r)?r:HH({format:"uint"},r,lz),o=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_call",params:[t,r]})}))}(e.requestManager,aW(t,lz),i);return HH({format:"bytes"},o,n)}))}function wJ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,n=arguments.length>3?arguments[3]:void 0;return $Q(this,void 0,void 0,(function*(){const i=aW(t,lz),o=Az(r)?r:HH({format:"uint"},r,lz),s=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_estimateGas",params:[t,r]})}))}(e.requestManager,i,o);return HH({format:"uint"},s,n)}))}function _J(e,t,r){return $Q(this,void 0,void 0,(function*(){let{toBlock:n,fromBlock:i}=t;Iz(n)||"number"!==typeof n&&"bigint"!==typeof n||(n=Vz(n)),Iz(i)||"number"!==typeof i&&"bigint"!==typeof i||(i=Vz(i));const o=Object.assign(Object.assign({},t),{fromBlock:i,toBlock:n}),s=yield function(e,t){return NG(this,void 0,void 0,(function*(){return Nz.validate(["filter"],[t]),e.send({method:"eth_getLogs",params:[t]})}))}(e.requestManager,o);return s.map((e=>"string"===typeof e?e:HH(tW,e,r)))}))}function EJ(e,t){return $Q(this,void 0,void 0,(function*(){const r=yield function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_chainId",params:[]})}))}(e.requestManager);return HH({format:"uint"},r,t)}))}function AJ(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.defaultBlock,i=arguments.length>4?arguments[4]:void 0;return $Q(this,void 0,void 0,(function*(){const o=r.map((e=>HH({format:"bytes"},e,lz))),s=Az(n)?n:HH({format:"uint"},n,lz),a=yield function(e,t,r,n){return NG(this,void 0,void 0,(function*(){return Nz.validate(["address","bytes32[]","blockNumberOrTag"],[t,r,n]),e.send({method:"eth_getProof",params:[t,r,n]})}))}(e.requestManager,t,o,s);return HH(sW,a,i)}))}function SJ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;return $Q(this,void 0,void 0,(function*(){const o=HH({format:"uint"},t,lz),s=Az(r)?r:HH({format:"uint"},r,lz),a=HH({type:"array",items:{format:"uint"}},n,mW),c=yield function(e,t,r,n){return NG(this,void 0,void 0,(function*(){Nz.validate(["hex","blockNumberOrTag"],[t,r]);for(const e of n)Nz.validate(["number"],[e]);return e.send({method:"eth_feeHistory",params:[t,r,n]})}))}(e.requestManager,o,s,a);return HH(oW,c,i)}))}function kJ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.defaultBlock,n=arguments.length>3?arguments[3]:void 0;return $Q(this,void 0,void 0,(function*(){const i=Az(r)?r:HH({format:"uint"},r,lz),o=yield function(e,t,r){return NG(this,void 0,void 0,(function*(){return Nz.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_createAccessList",params:[t,r]})}))}(e.requestManager,aW(t,lz),i);return HH(QG,o,n)}))}function xJ(e,t,r,n,i){return $Q(this,void 0,void 0,(function*(){const o=yield function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return NG(this,void 0,void 0,(function*(){return Nz.validate(["address"],[t]),e.send({method:"eth_signTypedData".concat(n?"":"_v4"),params:[t,r]})}))}(e.requestManager,t,r,n);return HH({format:"bytes"},o,i)}))}class IJ extends tV{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return HH(tW,e,super.returnFormat)}}class TJ extends tV{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return HH({format:"string"},e,super.returnFormat)}}class PJ extends tV{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return HH(eW,e,super.returnFormat)}}class RJ extends tV{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if("boolean"===typeof e)this.emit("changed",e);else{const t=Object.fromEntries(Object.entries(e.status).map((e=>{let[t,r]=e;return[t.charAt(0).toLowerCase()+t.substring(1),r]})));this.emit("changed",e.syncing),this.emit("data",HH(rW,t,super.returnFormat))}}}var CJ=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const BJ={logs:IJ,newPendingTransactions:TJ,newHeads:PJ,syncing:RJ,pendingTransactions:TJ,newBlockHeaders:PJ};class MJ extends PG{constructor(e){"string"===typeof e||WK(e)?super({provider:e,registeredSubscriptions:BJ}):e.registeredSubscriptions?super(e):super(Object.assign(Object.assign({},e),{registeredSubscriptions:BJ}))}getProtocolVersion(){return CJ(this,void 0,void 0,(function*(){return function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_protocolVersion",params:[]})}))}(this.requestManager)}))}isSyncing(){return CJ(this,void 0,void 0,(function*(){return OG(this.requestManager)}))}getCoinbase(){return CJ(this,void 0,void 0,(function*(){return function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_coinbase",params:[]})}))}(this.requestManager)}))}isMining(){return CJ(this,void 0,void 0,(function*(){return function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_mining",params:[]})}))}(this.requestManager)}))}getHashrate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;return CJ(this,void 0,void 0,(function*(){return this.getHashRate(e)}))}getHashRate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;return CJ(this,void 0,void 0,(function*(){return tJ(this,e)}))}getGasPrice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;return CJ(this,void 0,void 0,(function*(){return rJ(this,e)}))}getAccounts(){var e;return CJ(this,void 0,void 0,(function*(){return(null!==(e=yield function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_accounts",params:[]})}))}(this.requestManager))&&void 0!==e?e:[]).map((e=>lH(e)))}))}getBlockNumber(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;return CJ(this,void 0,void 0,(function*(){return nJ(this,e)}))}getBalance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return iJ(this,e,t,r)}))}getStorageAt(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultBlock,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uz;return CJ(this,void 0,void 0,(function*(){return oJ(this,e,t,r,n)}))}getCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return sJ(this,e,t,r)}))}getBlock(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return aJ(this,e,t,r)}))}getBlockTransactionCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;return CJ(this,void 0,void 0,(function*(){return cJ(this,e,t)}))}getBlockUncleCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;return CJ(this,void 0,void 0,(function*(){return uJ(this,e,t)}))}getUncle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return lJ(this,e,t,r)}))}getTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;return CJ(this,void 0,void 0,(function*(){const r=yield dJ(this,e,t);if(!r)throw new $L;return r}))}getPendingTransactions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;return CJ(this,void 0,void 0,(function*(){return hJ(this,e)}))}getTransactionFromBlock(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultBlock,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return fJ(this,e,t,r)}))}getTransactionReceipt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;return CJ(this,void 0,void 0,(function*(){const r=yield pJ(this,e,t);if(!r)throw new $L;return r}))}getTransactionCount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return gJ(this,e,t,r)}))}sendTransaction(e){return mJ(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz,arguments.length>2?arguments[2]:void 0)}sendSignedTransaction(e){return function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{checkRevertBeforeSending:!0};const i=new MG(((o,s)=>{setImmediate((()=>{(()=>{$Q(this,void 0,void 0,(function*(){const a=new XQ({web3Context:e,promiEvent:i,options:n,returnFormat:r}),c=HH({format:"bytes"},t,lz),u=gG.fromSerializedData(Fz(zz(c))),l=Object.assign(Object.assign({},u.toJSON()),{from:u.getSenderAddress().toString()});try{const{v:t,r:n,s:i}=l,s=eJ(l,["v","r","s"]);yield a.checkRevertBeforeSending(s),a.emitSending(c);const u=yield IW(e,(()=>$Q(this,void 0,void 0,(function*(){return DG(e.requestManager,c)}))));a.emitSent(c);const d=HH({format:"bytes32"},u,r);a.emitTransactionHash(d);const h=yield PW(e,u,r),f=a.getReceiptWithEvents(HH(nW,h,r));a.emitReceipt(f),o(yield a.handleResolve({receipt:f,tx:l})),a.emitConfirmation({receipt:f,transactionHash:u})}catch(d){s(yield a.handleError({error:d,tx:l}))}}))})()}))}));return i}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz,arguments.length>2?arguments[2]:void 0)}sign(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return yJ(this,e,t,r)}))}signTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;return CJ(this,void 0,void 0,(function*(){return vJ(this,e,t)}))}call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return bJ(this,e,t,r)}))}estimateGas(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return wJ(this,e,t,r)}))}getPastLogs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;return CJ(this,void 0,void 0,(function*(){return _J(this,e,t)}))}getWork(){return CJ(this,void 0,void 0,(function*(){return function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_getWork",params:[]})}))}(this.requestManager)}))}submitWork(e,t,r){return CJ(this,void 0,void 0,(function*(){return function(e,t,r,n){return NG(this,void 0,void 0,(function*(){return Nz.validate(["bytes8","bytes32","bytes32"],[t,r,n]),e.send({method:"eth_submitWork",params:[t,r,n]})}))}(this.requestManager,e,t,r)}))}requestAccounts(){return CJ(this,void 0,void 0,(function*(){return function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"eth_requestAccounts",params:[]})}))}(this.requestManager)}))}getChainId(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uz;return CJ(this,void 0,void 0,(function*(){return EJ(this,e)}))}getNodeInfo(){return CJ(this,void 0,void 0,(function*(){return function(e){return NG(this,void 0,void 0,(function*(){return e.send({method:"web3_clientVersion",params:[]})}))}(this.requestManager)}))}getProof(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.defaultBlock,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uz;return CJ(this,void 0,void 0,(function*(){return AJ(this,e,t,r,n)}))}getFeeHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uz;return CJ(this,void 0,void 0,(function*(){return SJ(this,e,t,r,n)}))}createAccessList(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultBlock,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;return CJ(this,void 0,void 0,(function*(){return kJ(this,e,t,r)}))}signTypedData(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:uz;return CJ(this,void 0,void 0,(function*(){return xJ(this,e,t,r,n)}))}subscribe(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:uz;var n;return CJ(this,void 0,void 0,(function*(){const i=yield null===(n=this.subscriptionManager)||void 0===n?void 0:n.subscribe(e,t,r);return i instanceof IJ&&"logs"===e&&"object"===typeof t&&!PH(t.fromBlock)&&Number.isFinite(Number(t.fromBlock))&&setImmediate((()=>{this.getPastLogs(t).then((e=>{for(const t of e)i._processSubscriptionResult(t)})).catch((e=>{i._processSubscriptionError(e)}))})),i}))}static shouldClearSubscription(e){let{sub:t}=e;return!(t instanceof RJ)}clearSubscriptions(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;return null===(t=this.subscriptionManager)||void 0===t?void 0:t.unsubscribe(e?MJ.shouldClearSubscription:void 0)}}const NJ=e=>{if(Iz(e.gas)||!bz(e.gas)||Iz(e.gasPrice)||!bz(e.gasPrice))throw new fU({gas:e.gas,gasPrice:e.gasPrice});if(!Iz(e.maxFeePerGas)||!Iz(e.maxPriorityFeePerGas))throw new mU({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas})},OJ=e=>{if(!Iz(e.gasPrice)&&"0x2"===e.type)throw new gU(e.gasPrice);if("0x0"===e.type||"0x1"===e.type)throw new mU({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas});if(Iz(e.maxFeePerGas)||!bz(e.maxFeePerGas)||Iz(e.maxPriorityFeePerGas)||!bz(e.maxPriorityFeePerGas))throw new pU({maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas})},DJ=(e,t)=>{if(!Iz(t))return void t(e);if("object"!==typeof e||Iz(e))throw new yU(e);(e=>{if(!Iz(e.common)){if(Iz(e.common.customChain))throw new rU;if(Iz(e.common.customChain.chainId))throw new nU;if(!Iz(e.chainId)&&e.chainId!==e.common.customChain.chainId)throw new iU({txChainId:e.chainId,customChainId:e.common.customChain.chainId})}})(e),(e=>{if(!Iz(e.common)&&!Iz(e.chain)&&!Iz(e.hardfork))throw new aU;if(!Iz(e.chain)&&Iz(e.hardfork)||!Iz(e.hardfork)&&Iz(e.chain))throw new cU({chain:e.chain,hardfork:e.hardfork})})(e),(e=>{if(!Iz(e.common)&&!Iz(e.common.baseChain)&&!Iz(e.chain)&&e.chain!==e.common.baseChain)throw new oU({txChain:e.chain,baseChain:e.common.baseChain})})(e),(e=>{if(!Iz(e.common)&&!Iz(e.common.hardfork)&&!Iz(e.hardfork)&&e.hardfork!==e.common.hardfork)throw new sU({txHardfork:e.hardfork,commonHardfork:e.common.hardfork})})(e);const r=aW(e,lz);if((e=>{const t=!Iz(e.gas)||!Iz(e.gasLimit),r=t&&!Iz(e.gasPrice),n=t&&!Iz(e.maxPriorityFeePerGas)&&!Iz(e.maxFeePerGas);if(!r&&!n)throw new lU({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});if(r&&n)throw new hU({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});(r?NJ:OJ)(e),(!Iz(e.type)&&e.type>"0x1"?OJ:NJ)(e)})(r),Iz(r.nonce)||Iz(r.chainId)||r.nonce.startsWith("-")||r.chainId.startsWith("-"))throw new vU({nonce:e.nonce,chainId:e.chainId})};var LJ=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const UJ=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return LJ(void 0,void 0,void 0,(function*(){const o=yield(s={transaction:e,web3Context:t,privateKey:r,fillGasPrice:n,fillGasLimit:i},bW(void 0,void 0,void 0,(function*(){var e;return(null!==(e=s.web3Context.transactionBuilder)&&void 0!==e?e:EW)(Object.assign(Object.assign({},s),{transaction:s.transaction}))})));var s;const a=aW(o,lz);return DJ(a),gG.fromTxData((e=>{var t,r;return{nonce:e.nonce,gasPrice:e.gasPrice,gasLimit:null!==(t=e.gasLimit)&&void 0!==t?t:e.gas,to:e.to,value:e.value,data:null!==(r=e.data)&&void 0!==r?r:e.input,type:e.type,chainId:e.chainId,accessList:e.accessList,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas}})(a),((e,t)=>{var r,n,i,o,s,a,c,u,l,d,h,f,p,g,m,y,v,b;let w;if((Iz(e.chain)||Iz(e.hardfork))&&Iz(e.common))t.defaultCommon?(w=Object.assign({},t.defaultCommon),Iz(w.hardfork)&&(w.hardfork=null!==(r=e.hardfork)&&void 0!==r?r:t.defaultHardfork),Iz(w.baseChain)&&(w.baseChain=t.defaultChain)):w=$V.custom({name:"custom-network",chainId:sH(e.chainId),networkId:Iz(e.networkId)?void 0:sH(e.networkId),defaultHardfork:null!==(n=e.hardfork)&&void 0!==n?n:t.defaultHardfork},{baseChain:t.defaultChain});else{const r=null!==(a=null!==(s=null===(o=null===(i=null===e||void 0===e?void 0:e.common)||void 0===i?void 0:i.customChain)||void 0===o?void 0:o.name)&&void 0!==s?s:e.chain)&&void 0!==a?a:"custom-network",n=sH(null!==(l=null===(u=null===(c=null===e||void 0===e?void 0:e.common)||void 0===c?void 0:c.customChain)||void 0===u?void 0:u.chainId)&&void 0!==l?l:null===e||void 0===e?void 0:e.chainId),_=sH(null!==(f=null===(h=null===(d=null===e||void 0===e?void 0:e.common)||void 0===d?void 0:d.customChain)||void 0===h?void 0:h.networkId)&&void 0!==f?f:null===e||void 0===e?void 0:e.networkId),E=null!==(m=null!==(g=null===(p=null===e||void 0===e?void 0:e.common)||void 0===p?void 0:p.hardfork)&&void 0!==g?g:null===e||void 0===e?void 0:e.hardfork)&&void 0!==m?m:t.defaultHardfork,A=null!==(b=null!==(v=null===(y=e.common)||void 0===y?void 0:y.baseChain)&&void 0!==v?v:e.chain)&&void 0!==b?b:t.defaultChain;n&&_&&r&&(w=$V.custom({name:r,chainId:n,networkId:_,defaultHardfork:E},{baseChain:A}))}return{common:w}})(a,t))}))},FJ=(e,t,r)=>{let{address:n}=e;var i,o;const s=null===r||void 0===r?void 0:r.topics,a=null!==(i=null===r||void 0===r?void 0:r.filter)&&void 0!==i?i:{},c={};if(PH(null===r||void 0===r?void 0:r.fromBlock)||(c.fromBlock=HH($G.properties.number,null===r||void 0===r?void 0:r.fromBlock,{number:az.HEX,bytes:cz.HEX})),PH(null===r||void 0===r?void 0:r.toBlock)||(c.toBlock=HH($G.properties.number,null===r||void 0===r?void 0:r.toBlock,{number:az.HEX,bytes:cz.HEX})),s&&Array.isArray(s))c.topics=[...s];else if(c.topics=[],!t||t.anonymous||[pW,"allEvents"].includes(t.name)||c.topics.push(null!==(o=t.signature)&&void 0!==o?o:zW(qW(t))),![pW,"allEvents"].includes(t.name)&&t.inputs)for(const u of t.inputs){if(!u.indexed)continue;const e=a[u.name];e?Array.isArray(e)?c.topics.push(e.map((e=>LQ(u.type,e)))):"string"===u.type?c.topics.push(WH(e)):c.topics.push(LQ(u.type,e)):c.topics.push(null)}return c.topics.length||delete c.topics,n&&(c.address=n.toLowerCase()),c},jJ=(e,t,r)=>{const n=Array.isArray(e.inputs)?e.inputs.length:0;if(e.inputs&&n!==t.length)throw new PL("The number of arguments is not matching the methods required number. You need to pass ".concat(n," arguments."));let i;if(i=e.inputs?OQ(Array.isArray(e.inputs)?e.inputs:[],t).replace("0x",""):DQ(t).replace("0x",""),!PH(o=e)&&"object"===typeof o&&!PH(o.type)&&"constructor"===o.type){if(!r)throw new PL("The contract has no contract data option set. This is necessary to append the constructor parameters.");return r.startsWith("0x")?"".concat(r).concat(i):"0x".concat(r).concat(i)}var o;return"".concat(qQ(e)).concat(i)};class qJ extends tV{constructor(e,t){super(e,t),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return ZQ(this.abi,e,this.jsonInterface,super.returnFormat)}}const zJ=(e,t,r,n)=>{var i,o;const s={};return PH(e.data)&&"both"!==n||(s.data=jJ(t,r,null!==(i=e.data)&&void 0!==i?i:e.input)),PH(e.input)&&"both"!==n||(s.input=jJ(t,r,null!==(o=e.input)&&void 0!==o?o:e.data)),PH(s.input)&&PH(s.data)&&(s[n]=jJ(t,r)),{data:s.data,input:s.input}},HJ=e=>{let{abi:t,params:r,options:n,contractOptions:i}=e;var o,s,a;if(!(null!==(a=null!==(s=null!==(o=null===n||void 0===n?void 0:n.input)&&void 0!==o?o:null===n||void 0===n?void 0:n.data)&&void 0!==s?s:i.input)&&void 0!==a?a:i.data)&&!(null===n||void 0===n?void 0:n.to)&&!i.address)throw new PL("Contract address not specified");if(!(null===n||void 0===n?void 0:n.from)&&!i.from)throw new PL('Contract "from" address not specified');let c=CH({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,maxPriorityFeePerGas:i.maxPriorityFeePerGas,maxFeePerGas:i.maxFeePerGas,data:i.data},n);const u=zJ(c,t,r,null===n||void 0===n?void 0:n.dataInputFill);return c=Object.assign(Object.assign({},c),{data:u.data,input:u.input}),c},KJ=e=>"object"===typeof e&&!PH(e)&&0!==Object.keys(e).length&&!TH(e);var VJ=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const GJ={logs:qJ,newHeads:PJ,newBlockHeaders:PJ};class WJ extends PG{constructor(e,t,r,n,i){var o,s,a;const c=TH(t)?t:TH(r)?r:void 0;let u,l;if(u=KJ(t)?t:KJ(r)?r:n,l="object"===typeof t&&"provider"in t?t.provider:"object"===typeof r&&"provider"in r?r.provider:"object"===typeof n&&"provider"in n?n.provider:WJ.givenProvider,super(Object.assign(Object.assign({},u),{provider:l,registeredSubscriptions:GJ})),this.syncWithContext=!1,this._functions={},(null===u||void 0===u?void 0:u.wallet)&&(this._wallet=u.wallet),(null===u||void 0===u?void 0:u.accountProvider)&&(this._accountProvider=u.accountProvider),!Iz(c)&&!Iz(c.data)&&!Iz(c.input)&&"both"!==this.config.contractDataInputFill)throw new ML({data:c.data,input:c.input});this._overloadedMethodAbis=new Map;const d=FH(n)?n:FH(r)?r:null!==i&&void 0!==i?i:uz,h="string"===typeof t?t:void 0;this.config.contractDataInputFill=null!==(o=null===c||void 0===c?void 0:c.dataInputFill)&&void 0!==o?o:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,d),Iz(h)||this._parseAndSetAddress(h,d),this.options={address:h,jsonInterface:this._jsonInterface,gas:null!==(s=null===c||void 0===c?void 0:c.gas)&&void 0!==s?s:null===c||void 0===c?void 0:c.gasLimit,gasPrice:null===c||void 0===c?void 0:c.gasPrice,from:null===c||void 0===c?void 0:c.from,input:null===c||void 0===c?void 0:c.input,data:null===c||void 0===c?void 0:c.data},this.syncWithContext=null!==(a=null===c||void 0===c?void 0:c.syncWithContext)&&void 0!==a&&a,u instanceof PG&&this.subscribeToContextEvents(u),Object.defineProperty(this.options,"address",{set:e=>this._parseAndSetAddress(e,d),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:e=>this._parseAndSetJsonInterface(e,d),get:()=>this._jsonInterface}),u instanceof PG&&u.on(OK.CONFIG_CHANGE,(e=>{this.setConfig({[e.name]:e.newValue})}))}get events(){return this._events}get methods(){return this._methods}clone(){let e;return e=this.options.address?new WJ([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):new WJ([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){var t,r,n,i=this;let o=this._jsonInterface.find((e=>"constructor"===e.type));o||(o={type:"constructor",stateMutability:""});const s=HH({format:"bytes"},null!==(t=null===e||void 0===e?void 0:e.input)&&void 0!==t?t:this.options.input,uz),a=HH({format:"bytes"},null!==(r=null===e||void 0===e?void 0:e.data)&&void 0!==r?r:this.options.data,uz);if((!s||"0x"===s.trim())&&(!a||"0x"===a.trim()))throw new PL("contract creation without any data provided.");const c=null!==(n=null===e||void 0===e?void 0:e.arguments)&&void 0!==n?n:[],u=Object.assign(Object.assign({},this.options),{input:s,data:a}),l=null!==s&&void 0!==s?s:a;return{arguments:c,send:e=>{const t=Object.assign({},e);return this._contractMethodDeploySend(o,c,t,u)},estimateGas:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;return VJ(i,void 0,void 0,(function*(){const r=Object.assign({},e);return this._contractMethodEstimateGas({abi:o,params:c,returnFormat:t,options:r,contractOptions:u})}))},encodeABI:()=>jJ(o,c,HH({format:"bytes"},l,uz))}}getPastEvents(e,t,r){var n;return VJ(this,void 0,void 0,(function*(){const i="string"===typeof e?e:pW,o="string"===typeof e||FH(e)?FH(t)?{}:t:e,s=FH(e)?e:FH(t)?t:null!==r&&void 0!==r?r:uz,a="allEvents"===i||i===pW?gW:this._jsonInterface.find((e=>"name"in e&&e.name===i));if(!a)throw new PL("Event ".concat(i," not found."));const{fromBlock:c,toBlock:u,topics:l,address:d}=FJ(this.options,a,null!==o&&void 0!==o?o:{}),h=yield _J(this,{fromBlock:c,toBlock:u,topics:l,address:d},s),f=h?h.map((e=>"string"===typeof e?e:ZQ(a,e,this._jsonInterface,s))):[],p=null!==(n=null===o||void 0===o?void 0:o.filter)&&void 0!==n?n:{},g=Object.keys(p);return g.length>0?f.filter((e=>"string"===typeof e||g.every((t=>{var r;if(Array.isArray(p[t]))return p[t].some((r=>String(e.returnValues[t]).toUpperCase()===String(r).toUpperCase()));const n=null===(r=a.inputs)||void 0===r?void 0:r.filter((e=>e.name===t))[0];if((null===n||void 0===n?void 0:n.indexed)&&"string"===n.type){if(WH(p[t])===String(e.returnValues[t]))return!0}return String(e.returnValues[t]).toUpperCase()===String(p[t]).toUpperCase()})))):f}))}_parseAndSetAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;this._address=e?lH(HH({format:"address"},e,t)):e}_parseAndSetJsonInterface(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;var r,n,i,o,s;this._functions={},this._methods={},this._events={};let a=[];const c=e.filter((e=>"error"!==e.type)),u=e.filter((e=>NW(e)));for(const l of c){const e=Object.assign(Object.assign({},l),{signature:""});if(DW(e)){const t=qW(e),a=qQ(t);e.signature=a,e.constant=null!==(n=null!==(r="view"===e.stateMutability)&&void 0!==r?r:"pure"===e.stateMutability)&&void 0!==n?n:e.constant,e.payable=null!==(i="payable"===e.stateMutability)&&void 0!==i?i:e.payable,this._overloadedMethodAbis.set(e.name,[...null!==(o=this._overloadedMethodAbis.get(e.name))&&void 0!==o?o:[],e]);const c=null!==(s=this._overloadedMethodAbis.get(e.name))&&void 0!==s?s:[],l=this._createContractMethod(c,u);this._functions[t]={signature:a,method:l},this._methods[e.name]=this._functions[t].method,this._methods[t]=this._functions[t].method,this._methods[a]=this._functions[t].method}else if(OW(e)){const r=qW(e),n=zW(r),i=this._createContractEvent(e,t);e.signature=n,r in this._events&&"bound"!==e.name||(this._events[r]=i),this._events[e.name]=i,this._events[n]=i}a=[...a,e]}this._events.allEvents=this._createContractEvent(gW,t),this._jsonInterface=[...a],this._errorsInterface=u}_getAbiParams(e,t){var r;try{return Wq(null!==(r=e.inputs)&&void 0!==r?r:[],t)}catch(n){throw new PL("Invalid parameters for method ".concat(e.name,": ").concat(n.message))}}_createContractMethod(e,t){var r=this;const n=e[e.length-1];return function(){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];var s,a;let c;const u=null!==(s=r._overloadedMethodAbis.get(n.name))&&void 0!==s?s:[];let l=u[0];const d=t,h=u.filter((e=>{var t;return(null!==(t=e.inputs)&&void 0!==t?t:[]).length===i.length}));if(1===u.length||0===h.length)c=r._getAbiParams(l,i),Nz.validate(null!==(a=n.inputs)&&void 0!==a?a:[],c);else{const e=[];for(const t of h)try{c=r._getAbiParams(t,i),Nz.validate(t.inputs,c),l=t;break}catch(p){e.push(p)}if(e.length===h.length)throw new Bq(e)}const f={arguments:c,call:(e,t)=>VJ(r,void 0,void 0,(function*(){return this._contractMethodCall(l,c,d,e,t)})),send:e=>r._contractMethodSend(l,c,d,e),estimateGas:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;return VJ(r,void 0,void 0,(function*(){return this._contractMethodEstimateGas({abi:l,params:c,returnFormat:t,options:e})}))},encodeABI:()=>jJ(l,c),createAccessList:(e,t)=>VJ(r,void 0,void 0,(function*(){return this._contractMethodCreateAccessList(l,c,d,e,t)}))};return l.stateMutability,f}}_contractMethodCall(e,t,r,n,i){var o;return VJ(this,void 0,void 0,(function*(){const s=(e=>{let{abi:t,params:r,options:n,contractOptions:i}=e;if(!(null===n||void 0===n?void 0:n.to)&&!i.address)throw new PL("Contract address not specified");let o=CH({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,maxPriorityFeePerGas:i.maxPriorityFeePerGas,maxFeePerGas:i.maxFeePerGas,data:i.data},n);const s=zJ(o,t,r,null===n||void 0===n?void 0:n.dataInputFill);return o=Object.assign(Object.assign({},o),{data:s.data,input:s.input}),o})({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(o=this.options.from)&&void 0!==o?o:this.config.defaultAccount})});try{const t=yield bJ(this,s,i,uz);return((e,t)=>{if("constructor"===e.type)return t;if(!t)return null;const r=t.length>=2?t.slice(2):t;if(!e.outputs)return null;const n=FQ([...e.outputs],r);return 1===n.__length__?n[0]:n})(e,t)}catch(a){throw a instanceof BL&&KQ(r,a.cause),a}}))}_contractMethodCreateAccessList(e,t,r,n,i){var o;return VJ(this,void 0,void 0,(function*(){const s=(e=>{let{abi:t,params:r,options:n,contractOptions:i}=e;if(!(null===n||void 0===n?void 0:n.to)&&!i.address)throw new PL("Contract address not specified");if(!(null===n||void 0===n?void 0:n.from)&&!i.from)throw new PL('Contract "from" address not specified');let o=CH({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,maxPriorityFeePerGas:i.maxPriorityFeePerGas,maxFeePerGas:i.maxFeePerGas,data:i.data},n);const s=zJ(o,t,r,null===n||void 0===n?void 0:n.dataInputFill);return o=Object.assign(Object.assign({},o),{data:s.data,input:s.input}),o})({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(o=this.options.from)&&void 0!==o?o:this.config.defaultAccount})});try{return kJ(this,s,i,uz)}catch(a){throw a instanceof BL&&KQ(r,a.cause),a}}))}_contractMethodSend(e,t,r,n,i){var o,s;let a=null!==i&&void 0!==i?i:this.options;a=Object.assign(Object.assign({},a),{input:void 0,from:null!==(s=null!==(o=a.from)&&void 0!==o?o:this.defaultAccount)&&void 0!==s?s:void 0});const c=mJ(this,HJ({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:a}),uz,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface});return c.on("error",(e=>{e instanceof BL&&KQ(r,e.cause)})),c}_contractMethodDeploySend(e,t,r,n){var i,o;let s=null!==n&&void 0!==n?n:this.options;s=Object.assign(Object.assign({},s),{from:null!==(o=null!==(i=s.from)&&void 0!==i?i:this.defaultAccount)&&void 0!==o?o:void 0});return mJ(this,HJ({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:s}),uz,{transactionResolver:e=>{if(e.status===BigInt(0))throw new PL("code couldn't be stored",e);const t=this.clone();return t.options.address=e.contractAddress,t},contractAbi:this._jsonInterface,checkRevertBeforeSending:!1})}_contractMethodEstimateGas(e){let{abi:t,params:r,returnFormat:n,options:i,contractOptions:o}=e;return VJ(this,void 0,void 0,(function*(){const e=(e=>{let{abi:t,params:r,options:n,contractOptions:i}=e,o=CH({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,data:i.data},n);const s=zJ(o,t,r,null===n||void 0===n?void 0:n.dataInputFill);return o=Object.assign(Object.assign({},o),{data:s.data,input:s.input}),o})({abi:t,params:r,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:null!==o&&void 0!==o?o:this.options});return wJ(this,e,dz.LATEST,n)}))}_createContractEvent(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uz;return function(){var n;const{topics:i,fromBlock:o}=FJ(t.options,e,arguments.length<=0?void 0:arguments[0]),s=new qJ({address:t.options.address,topics:i,abi:e,jsonInterface:t._jsonInterface},{subscriptionManager:t.subscriptionManager,returnFormat:r});return Iz(o)||t.getPastEvents(e.name,{fromBlock:o,topics:i},r).then((e=>{e&&e.forEach((e=>s.emit("data",e)))})).catch((e=>{s.emit("error",new VL("Failed to get past events.",e))})),null===(n=t.subscriptionManager)||void 0===n||n.addSubscription(s).catch((e=>{s.emit("error",new VL("Failed to subscribe.",e))})),s}}subscribeToContextEvents(e){const t=this;this.context=e,t.syncWithContext&&e.on(OK.CONFIG_CHANGE,(e=>{t.setConfig({[e.name]:e.newValue})}))}}const QJ=WJ,JJ={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},ZJ="addr",YJ="pubkey",XJ="contenthash",$J={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},eZ={"0x1":"main","0x5":"goerli"},tZ=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],rZ=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"}];var nZ="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const iZ=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),oZ=4;function sZ(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,o=[0,1];for(let b=1;b<n;b++)o.push(i+=r());let s=r(),a=t;t+=s;let c=0,u=0;function l(){return 0==c&&(u=u<<8|e[t++],c=8),u>>--c&1}const d=2**31,h=d>>>1,f=d-1;let p=0;for(let b=0;b<31;b++)p=p<<1|l();let g=[],m=0,y=d;for(;;){let e=Math.floor(((p-m+1)*i-1)/y),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<o[n]?r=n:t=n}if(0==t)break;g.push(t);let s=m+Math.floor(y*o[t]/i),a=m+Math.floor(y*o[t+1]/i)-1;for(;0==((s^a)&h);)p=p<<1&f|l(),s=s<<1&f,a=a<<1&f|1;for(;s&~a&536870912;)p=p&h|p<<1&f>>>1|l(),s=s<<1^h,a=(a^h)<<1|h|1;m=s,y=1+a-s}let v=n-4;return g.map((t=>{switch(t-v){case 3:return v+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return v+256+(e[a++]<<8|e[a++]);case 1:return v+e[a++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,r)=>t[e.charCodeAt(0)]=r));let r=e.length,n=new Uint8Array(6*r>>3);for(let i=0,o=0,s=0,a=0;i<r;i++)a=a<<6|t[e.charCodeAt(i)],s+=6,s>=8&&(n[o++]=a>>(s-=8));return n}(e)))}function aZ(e){return 1&e?~e>>1:e>>1}function cZ(e,t){let r=Array(e);for(let n=0,i=0;n<e;n++)r[n]=i+=aZ(t());return r}function uZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[];for(;;){let n=e(),i=e();if(!i)break;t+=n;for(let e=0;e<i;e++)r.push(t+e);t+=i+1}return r}function lZ(e){return hZ((()=>{let t=uZ(e);if(t.length)return t}))}function dZ(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(pZ(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(gZ(r,e))}return t.flat()}function hZ(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function fZ(e,t,r){let n=Array(e).fill().map((()=>[]));for(let i=0;i<t;i++)cZ(e,r).forEach(((e,t)=>n[t].push(e)));return n}function pZ(e,t){let r=1+t(),n=t(),i=hZ(t);return fZ(i.length,1+e,t).flatMap(((e,t)=>{let[o,...s]=e;return Array(i[t]).fill().map(((e,t)=>{let i=t*n;return[o+t*r,s.map((e=>e+i))]}))}))}function gZ(e,t){return fZ(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}function mZ(e){return"{".concat(function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e),"}")}function yZ(e){let t=[];for(let r=0,n=e.length;r<n;){let n=e.codePointAt(r);r+=n<65536?1:2,t.push(n)}return t}function vZ(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let r=[];for(let n=0;n<t;)r.push(String.fromCodePoint(...e.slice(n,n+=4096)));return r.join("")}function bZ(e,t){let r=e.length,n=r-t.length;for(let i=0;0==n&&i<r;i++)n=e[i]-t[i];return n}var wZ="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const _Z=44032,EZ=4352,AZ=4449,SZ=4519,kZ=28,xZ=21*kZ,IZ=_Z+19*xZ,TZ=EZ+19,PZ=AZ+21,RZ=SZ+kZ;function CZ(e){return e>>24&255}function BZ(e){return 16777215&e}let MZ,NZ,OZ,DZ;function LZ(e){return e>=_Z&&e<IZ}function UZ(e,t){if(e>=EZ&&e<TZ&&t>=AZ&&t<PZ)return _Z+(e-EZ)*xZ+(t-AZ)*kZ;if(LZ(e)&&t>SZ&&t<RZ&&(e-_Z)%kZ==0)return e+(t-SZ);{let r=DZ.get(e);return r&&(r=r.get(t),r)?r:-1}}function FZ(e){MZ||function(){let e=sZ(wZ);MZ=new Map(lZ(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),NZ=new Set(uZ(e)),OZ=new Map,DZ=new Map;for(let[t,r]of dZ(e)){if(!NZ.has(t)&&2==r.length){let[e,n]=r,i=DZ.get(e);i||(i=new Map,DZ.set(e,i)),i.set(n,t)}OZ.set(t,r.reverse())}}();let t=[],r=[],n=!1;function i(e){let r=MZ.get(e);r&&(n=!0,e|=r),t.push(e)}for(let o of e)for(;;){if(o<128)t.push(o);else if(LZ(o)){let e=o-_Z,t=e%xZ/kZ|0,r=e%kZ;i(EZ+(e/xZ|0)),i(AZ+t),r>0&&i(SZ+r)}else{let e=OZ.get(o);e?r.push(...e):i(o)}if(!r.length)break;o=r.pop()}if(n&&t.length>1){let e=CZ(t[0]);for(let r=1;r<t.length;r++){let n=CZ(t[r]);if(0==n||e<=n){e=n;continue}let i=r-1;for(;;){let r=t[i+1];if(t[i+1]=t[i],t[i]=r,!i)break;if(e=CZ(t[--i]),e<=n)break}e=CZ(t[r])}}return t}function jZ(e){return FZ(e).map(BZ)}function qZ(e){return function(e){let t=[],r=[],n=-1,i=0;for(let o of e){let e=CZ(o),s=BZ(o);if(-1==n)0==e?n=s:t.push(s);else if(i>0&&i>=e)0==e?(t.push(n,...r),r.length=0,n=s):r.push(s),i=e;else{let o=UZ(n,s);o>=0?n=o:0==i&&0==e?(t.push(n),n=s):(r.push(s),i=e)}}return n>=0&&t.push(n,...r),t}(FZ(e))}const zZ=45,HZ=".",KZ=65039,VZ=1,GZ=e=>Array.from(e);function WZ(e,t){return e.P.has(t)||e.Q.has(t)}class QZ extends Array{get is_emoji(){return!0}}let JZ,ZZ,YZ,XZ,$Z,eY,tY,rY,nY,iY,oY,sY;function aY(){if(JZ)return;let e=sZ(nZ);const t=()=>uZ(e),r=()=>new Set(t()),n=(e,t)=>t.forEach((t=>e.add(t)));JZ=new Map(dZ(e)),ZZ=r(),YZ=t(),XZ=new Set(t().map((e=>YZ[e]))),YZ=new Set(YZ),$Z=r(),eY=r();let i=lZ(e),o=e();const s=()=>{let e=new Set;return t().forEach((t=>n(e,i[t]))),n(e,t()),e};tY=hZ((t=>{let r=hZ(e).map((e=>e+96));if(r.length){let n=t>=o;return r[0]-=32,r=vZ(r),n&&(r="Restricted[".concat(r,"]")),{N:r,P:s(),Q:s(),M:!e(),R:n}}})),rY=r(),nY=new Map;let a=t().concat(GZ(rY)).sort(((e,t)=>e-t));a.forEach(((t,r)=>{let n=e(),i=a[r]=n?a[r-n]:{V:[],M:new Map};i.V.push(t),rY.has(t)||nY.set(t,i)}));for(let{V:l,M:d}of new Set(nY.values())){let e=[];for(let r of l){let t=tY.filter((e=>WZ(e,r))),i=e.find((e=>{let{G:r}=e;return t.some((e=>r.has(e)))}));i||(i={G:new Set,V:[]},e.push(i)),i.V.push(r),n(i.G,t)}let t=e.flatMap((e=>GZ(e.G)));for(let{G:r,V:n}of e){let e=new Set(t.filter((e=>!r.has(e))));for(let t of n)d.set(t,e)}}iY=new Set;let c=new Set;const u=e=>iY.has(e)?c.add(e):iY.add(e);for(let l of tY){for(let e of l.P)u(e);for(let e of l.Q)u(e)}for(let l of iY)nY.has(l)||c.has(l)||nY.set(l,VZ);n(iY,jZ(iY)),oY=function(e){let t=[],r=uZ(e);return function e(r,n,i){let{S:o,B:s}=r;if(!(4&o&&i===n[n.length-1])){2&o&&(i=n[n.length-1]),1&o&&t.push(n);for(let t of s)for(let r of t.Q)e(t,[...n,r],i)}}(function t(n){return{S:e(),B:hZ((()=>{let n=uZ(e).map((e=>r[e]));if(n.length)return t(n)})),Q:n}}([]),[]),t}(e).map((e=>QZ.from(e))).sort(bZ),sY=new Map;for(let l of oY){let e=[sY];for(let t of l){let r=e.map((e=>{let r=e.get(t);return r||(r=new Map,e.set(t,r)),r}));t===KZ?e.push(...r):e=r}for(let t of e)t.V=l}}function cY(e){return(dY(e)?"":"".concat(uY(lY([e]))," "))+mZ(e)}function uY(e){return'"'.concat(e,'"\u200e')}function lY(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mZ,n=[];var i;i=e[0],aY(),YZ.has(i)&&n.push("\u25cc"),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let o=0,s=e.length;for(let a=0;a<s;a++){let t=e[a];dY(t)&&(n.push(vZ(e.slice(o,a))),n.push(r(t)),o=a+1)}return n.push(vZ(e.slice(o,s))),n.join("")}function dY(e){return aY(),$Z.has(e)}function hY(e,t,r){if(!e)return[];aY();let n=0;return e.split(HZ).map((e=>{let i=yZ(e),o={input:i,offset:n};n+=i.length+1;try{let e,n=o.tokens=yY(i,t,r),s=n.length;if(!s)throw new Error("empty label");let a=o.output=n.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(a),!(o.emoji=s>1||n[0].is_emoji)&&a.every((e=>e<128)))!function(e){if(e.length>=4&&e[2]==zZ&&e[3]==zZ)throw new Error('invalid label extension: "'.concat(vZ(e.slice(0,4)),'"'))}(a),e="ASCII";else{let t=n.flatMap((e=>e.is_emoji?[]:e));if(t.length){if(YZ.has(a[0]))throw mY("leading combining mark");for(let e=1;e<s;e++){let t=n[e];if(!t.is_emoji&&YZ.has(t[0]))throw mY('emoji + combining mark: "'.concat(vZ(n[e-1])," + ").concat(lY([t[0]]),'"'))}!function(e){let t=e[0],r=iZ.get(t);if(r)throw mY("leading ".concat(r));let n=e.length,i=-1;for(let o=1;o<n;o++){t=e[o];let n=iZ.get(t);if(n){if(i==o)throw mY("".concat(r," + ").concat(n));i=o+1,r=n}}if(i==n)throw mY("trailing ".concat(r))}(a);let r=GZ(new Set(t)),[i]=function(e){let t=tY;for(let r of e){let e=t.filter((e=>WZ(e,r)));if(!e.length)throw tY.some((e=>WZ(e,r)))?gY(t[0],r):pY(r);if(t=e,1==e.length)break}return t}(r);!function(e,t){for(let r of t)if(!WZ(e,r))throw gY(e,r);if(e.M){let e=jZ(t);for(let t=1,r=e.length;t<r;t++)if(XZ.has(e[t])){let n=t+1;for(let i;n<r&&XZ.has(i=e[n]);n++)for(let r=t;r<n;r++)if(e[r]==i)throw new Error("duplicate non-spacing marks: ".concat(cY(i)));if(n-t>oZ)throw new Error("excessive non-spacing marks: ".concat(uY(lY(e.slice(t-1,n)))," (").concat(n-t,"/").concat(oZ,")"));t=n}}}(i,t),function(e,t){let r,n=[];for(let i of t){let e=nY.get(i);if(e===VZ)return;if(e){let t=e.M.get(i);if(r=r?r.filter((e=>t.has(e))):GZ(t),!r.length)return}else n.push(i)}if(r)for(let i of r)if(n.every((e=>WZ(i,e))))throw new Error("whole-script confusable: ".concat(e.N,"/").concat(i.N))}(i,r),e=i.N}else e="Emoji"}o.type=e}catch(s){o.error=s}return o}))}function fY(e){return e.map((t=>{let{input:r,error:n,output:i}=t;if(n){let t=n.message;throw new Error(1==e.length?t:"Invalid label ".concat(uY(lY(r,63)),": ").concat(t))}return vZ(i)})).join(HZ)}function pY(e){return new Error("disallowed character: ".concat(cY(e)))}function gY(e,t){let r=cY(t),n=tY.find((e=>e.P.has(t)));return n&&(r="".concat(n.N," ").concat(r)),new Error("illegal mixture: ".concat(e.N," + ").concat(r))}function mY(e){return new Error("illegal placement: ".concat(e))}function yY(e,t,r){let n=[],i=[];for(e=e.slice().reverse();e.length;){let o=bY(e);if(o)i.length&&(n.push(t(i)),i=[]),n.push(r(o));else{let t=e.pop();if(iY.has(t))i.push(t);else{let e=JZ.get(t);if(e)i.push(...e);else if(!ZZ.has(t))throw pY(t)}}}return i.length&&n.push(t(i)),n}function vY(e){return e.filter((e=>e!=KZ))}function bY(e,t){let r,n=sY,i=e.length;for(;i&&(n=n.get(e[--i]),n);){let{V:o}=n;o&&(r=o,t&&t.push(...e.slice(i).reverse()),e.length=i)}return r}const wY=e=>function(e){return fY(hY(e,qZ,vY))}(e),_Y=e=>{let t="";for(let r=0;r<32;r+=1)t+="00";if(e){const r=wY(e).split(".");for(let e=r.length-1;e>=0;e-=1){const n=GH(r[e]).slice(2);t=GH("0x".concat(t).concat(n)).slice(2)}}return"0x".concat(t)};var EY=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class AY{constructor(e,t){this.contract=new WJ(tZ,null!==t&&void 0!==t?t:$J.main,e),this.context=e}getOwner(e){return EY(this,void 0,void 0,(function*(){try{return this.contract.methods.owner(_Y(e)).call()}catch(t){throw new Error}}))}getTTL(e){return EY(this,void 0,void 0,(function*(){try{return this.contract.methods.ttl(_Y(e)).call()}catch(t){throw new Error}}))}recordExists(e){return EY(this,void 0,void 0,(function*(){try{return this.contract.methods.recordExists(_Y(e)).call()}catch(t){throw new Error}}))}getResolver(e){return EY(this,void 0,void 0,(function*(){try{return this.contract.methods.resolver(_Y(e)).call().then((e=>{if("string"===typeof e){return new WJ(rZ,e,this.context)}throw new Error}))}catch(t){throw new Error}}))}get events(){return this.contract.events}}var SY=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class kY{constructor(e){this.registry=e}getResolverContractAdapter(e){return SY(this,void 0,void 0,(function*(){return this.registry.getResolver(e)}))}checkInterfaceSupport(e,t){var r,n;return SY(this,void 0,void 0,(function*(){if(PH(JJ[t]))throw new RL(null!==(r=e.options.address)&&void 0!==r?r:"",t);if(!(yield e.methods.supportsInterface(JJ[t]).call()))throw new RL(null!==(n=e.options.address)&&void 0!==n?n:"",t)}))}supportsInterface(e,t){var r;return SY(this,void 0,void 0,(function*(){const n=yield this.getResolverContractAdapter(e);let i=t;if(!Dq(i)){if(i=null!==(r=VH(t))&&void 0!==r?r:"",""===t)throw new Error("Invalid interface Id");i=i.slice(0,10)}return n.methods.supportsInterface(i).call()}))}getAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return SY(this,void 0,void 0,(function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,ZJ),r.methods.addr(_Y(e),t).call()}))}getPubkey(e){return SY(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,YJ),t.methods.pubkey(_Y(e)).call()}))}getContenthash(e){return SY(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,XJ),t.methods.contenthash(_Y(e)).call()}))}}var xY=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class IY extends PG{constructor(e,t){super(null!==t&&void 0!==t?t:""),this.registryAddress=null!==e&&void 0!==e?e:$J.main,this._registry=new AY(this.getContextObject(),e),this._resolver=new kY(this._registry)}getResolver(e){return xY(this,void 0,void 0,(function*(){return this._registry.getResolver(e)}))}recordExists(e){return xY(this,void 0,void 0,(function*(){return this._registry.recordExists(e)}))}getTTL(e){return xY(this,void 0,void 0,(function*(){return this._registry.getTTL(e)}))}getOwner(e){return xY(this,void 0,void 0,(function*(){return this._registry.getOwner(e)}))}getAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60;return xY(this,void 0,void 0,(function*(){return this._resolver.getAddress(e,t)}))}getPubkey(e){return xY(this,void 0,void 0,(function*(){return this._resolver.getPubkey(e)}))}getContenthash(e){return xY(this,void 0,void 0,(function*(){return this._resolver.getContenthash(e)}))}checkNetwork(){return xY(this,void 0,void 0,(function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const r=yield(t=this,$Q(void 0,void 0,void 0,(function*(){return OG(t.requestManager)})));if("boolean"!==typeof r||r)throw new OL;this._lastSyncCheck=e}var t;if(this._detectedAddress)return this._detectedAddress;const r=yield uW(this,Object.assign(Object.assign({},uz),{number:az.HEX})),n=$J[eZ[r]];if("undefined"===typeof n)throw new NL(r);return this._detectedAddress=n,this._detectedAddress}))}supportsInterface(e,t){return xY(this,void 0,void 0,(function*(){return this._resolver.supportsInterface(e,t)}))}get events(){return this._registry.events}}var TY=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const PY=e=>TY(void 0,void 0,void 0,(function*(){const t=yield(e=>FG(void 0,void 0,void 0,(function*(){return e.send({method:"personal_listAccounts",params:[]})})))(e);return t.map(lH)})),RY=(e,t)=>TY(void 0,void 0,void 0,(function*(){Nz.validate(["string"],[t]);const r=yield((e,t)=>FG(void 0,void 0,void 0,(function*(){return e.send({method:"personal_newAccount",params:[t]})})))(e,t);return lH(r)})),CY=(e,t,r,n)=>TY(void 0,void 0,void 0,(function*(){return Nz.validate(["address","string","uint"],[t,r,n]),((e,t,r,n)=>FG(void 0,void 0,void 0,(function*(){return e.send({method:"personal_unlockAccount",params:[t,r,n]})})))(e,t,r,n)})),BY=(e,t)=>TY(void 0,void 0,void 0,(function*(){return Nz.validate(["address"],[t]),((e,t)=>FG(void 0,void 0,void 0,(function*(){return e.send({method:"personal_lockAccount",params:[t]})})))(e,t)})),MY=(e,t,r)=>TY(void 0,void 0,void 0,(function*(){return Nz.validate(["string","string"],[t,r]),((e,t,r)=>FG(void 0,void 0,void 0,(function*(){return e.send({method:"personal_importRawKey",params:[t,r]})})))(e,t,r)})),NY=(e,t,r)=>TY(void 0,void 0,void 0,(function*(){const n=aW(t,lz);return((e,t,r)=>FG(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sendTransaction",params:[t,r]})})))(e,n,r)})),OY=(e,t,r)=>TY(void 0,void 0,void 0,(function*(){const n=aW(t,lz);return((e,t,r)=>FG(void 0,void 0,void 0,(function*(){return e.send({method:"personal_signTransaction",params:[t,r]})})))(e,n,r)})),DY=(e,t,r,n)=>TY(void 0,void 0,void 0,(function*(){Nz.validate(["string","address","string"],[t,r,n]);const i=Dq(t)?t:Qz(t);return((e,t,r,n)=>FG(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sign",params:[t,r,n]})})))(e,i,r,n)})),LY=(e,t,r)=>TY(void 0,void 0,void 0,(function*(){Nz.validate(["string","string"],[t,r]);const n=Dq(t)?t:Qz(t);return((e,t,r)=>FG(void 0,void 0,void 0,(function*(){return e.send({method:"personal_ecRecover",params:[t,r]})})))(e,n,r)}));var UY=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};class FY extends PG{getAccounts(){return UY(this,void 0,void 0,(function*(){return PY(this.requestManager)}))}newAccount(e){return UY(this,void 0,void 0,(function*(){return RY(this.requestManager,e)}))}unlockAccount(e,t,r){return UY(this,void 0,void 0,(function*(){return CY(this.requestManager,e,t,r)}))}lockAccount(e){return UY(this,void 0,void 0,(function*(){return BY(this.requestManager,e)}))}importRawKey(e,t){return UY(this,void 0,void 0,(function*(){return MY(this.requestManager,e,t)}))}sendTransaction(e,t){return UY(this,void 0,void 0,(function*(){return NY(this.requestManager,e,t)}))}signTransaction(e,t){return UY(this,void 0,void 0,(function*(){return OY(this.requestManager,e,t)}))}sign(e,t,r){return UY(this,void 0,void 0,(function*(){return DY(this.requestManager,e,t,r)}))}ecRecover(e,t){return UY(this,void 0,void 0,(function*(){return LY(this.requestManager,e,t)}))}}const jY={encodeEventSignature:zW,encodeFunctionCall:(e,t)=>{var r;if(!DW(e))throw new qL("Invalid parameter value in encodeFunctionCall");return"".concat(qQ(e)).concat(OQ(null!==(r=e.inputs)&&void 0!==r?r:[],null!==t&&void 0!==t?t:[]).replace("0x",""))},encodeFunctionSignature:qQ,encodeParameter:LQ,encodeParameters:OQ,decodeParameter:jQ,decodeParameters:FQ,decodeLog:HQ};var qY=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};const zY=e=>{const t=(t,r)=>qY(void 0,void 0,void 0,(function*(){return((e,t)=>mG(void 0,void 0,void 0,(function*(){const r=e.sign(zz(t));if(Iz(r.v)||Iz(r.r)||Iz(r.s))throw new PU("Signer Error");const n=r.validate(!0);if(n.length>0){let e="Signer Error ";for(const t of n)e+="".concat(e," ").concat(t,".");throw new PU(e)}const i=qz(r.serialize()),o=GH(i);return{messageHash:qz(r.getMessageToSign(!0)),v:"0x".concat(r.v.toString(16)),r:"0x".concat(r.r.toString(16).padStart(64,"0")),s:"0x".concat(r.s.toString(16).padStart(64,"0")),rawTransaction:i,transactionHash:qz(o)}})))(yield UJ(t,e),HH({format:"bytes"},r,lz))})),r=e=>{const r=kG(e);return Object.assign(Object.assign({},r),{signTransaction:e=>qY(void 0,void 0,void 0,(function*(){return t(e,r.privateKey)}))})},n=(e,r,n)=>qY(void 0,void 0,void 0,(function*(){var i;const o=yield((e,t,r)=>mG(void 0,void 0,void 0,(function*(){const n="object"===typeof e?e:JSON.parse(r?e.toLowerCase():e);if(Nz.validateJSONSchema(SV,n),3!==n.version)throw new wL;const i="string"===typeof t?zz(Qz(t)):t;let o;if(Nz.validate(["bytes"],[i]),"scrypt"===n.crypto.kdf){const e=n.crypto.kdfparams;o=vV(i,"string"===typeof e.salt?zz(e.salt):e.salt,e.n,e.p,e.r,e.dklen)}else{if("pbkdf2"!==n.crypto.kdf)throw new vL;{const e=n.crypto.kdfparams;o=hV(i,"string"===typeof e.salt?zz(e.salt):e.salt,e.c,e.dklen,"sha256")}}const s=zz(n.crypto.ciphertext);if(GH(Dz(o.slice(16,32),s)).replace("0x","")!==n.crypto.mac)throw new bL;const a=yield cV(zz(n.crypto.ciphertext),o.slice(0,16),zz(n.crypto.cipherparams.iv));return kG(a)})))(e,r,null===(i=null===n||void 0===n?void 0:n.nonStrict)||void 0===i||i);return Object.assign(Object.assign({},o),{signTransaction:e=>qY(void 0,void 0,void 0,(function*(){return t(e,o.privateKey)}))})})),i=()=>{const e=(()=>{const e=wV.utils.randomPrivateKey();return kG("".concat(qz(e)))})();return Object.assign(Object.assign({},e),{signTransaction:r=>qY(void 0,void 0,void 0,(function*(){return t(r,e.privateKey)}))})},o=new nV({create:i,privateKeyToAccount:r,decrypt:n});return{signTransaction:t,create:i,privateKeyToAccount:r,decrypt:n,recoverTransaction:wG,hashMessage:vG,sign:bG,recover:_G,encrypt:SG,wallet:o,privateKeyToAddress:EG,parseAndValidatePrivateKey:yG,privateKeyToPublicKey:AG}};class HY extends PG{constructor(e){var t;(PH(e)||"string"===typeof e&&""===e.trim()||"string"!==typeof e&&!WK(e)&&!e.provider)&&console.warn("NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!");let r={};"string"===typeof e||WK(e)?r.provider=e:r=e||{},r.registeredSubscriptions=Object.assign(Object.assign({},BJ),null!==(t=r.registeredSubscriptions)&&void 0!==t?t:{}),super(r);const n=zY(this);this._wallet=n.wallet,this._accountProvider=n,this.utils=Fe;const i=this;const o=i.use(MJ);this.eth=Object.assign(o,{ens:i.use(IY,$J.main),Iban:RG,net:i.use(fW),personal:i.use(FY),Contract:class extends QJ{constructor(e,t,r,n,o){if(TH(t)&&TH(r))throw new DL("Should not provide options at both 2nd and 3rd parameters");let s,a,c={},u=uz;if(!PH(t)&&"object"!==typeof t&&"string"!==typeof t)throw new DL;"string"===typeof t&&(s=t),c=TH(t)?t:TH(r)?r:{},a=t instanceof PG?t:r instanceof PG?r:n instanceof PG?n:i.getContextObject(),o?u=o:FH(r)?u=r:FH(n)&&(u=n),super(e,s,c,a,u),super.subscribeToContextEvents(i)}},abi:jY,accounts:n})}}HY.version="4.4.0",HY.utils=Fe,HY.modules={Web3Eth:MJ,Iban:RG,Net:fW,ENS:IY,Personal:FY};const KY=HY,VY=JSON.parse('[{"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"getPubKey","outputs":[{"internalType":"string","name":"key","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"key","type":"string"}],"name":"setPubKey","outputs":[],"stateMutability":"nonpayable","type":"function"}]');async function GY(e){return e?new KY(e):null}async function WY(e,t){return e?new e.eth.Contract(VY,t):null}async function QY(e,t){if(e){return await e.methods.getPubKey(t).call()}return null}const JY=function(){const e=(new URLSearchParams(window.location.search).get("to")||"").toString().toLowerCase(),[t,r]=(0,qe.useState)(),[n,i]=(0,qe.useState)(),[o,s]=(0,qe.useState)(),[a,c]=(0,qe.useState)(""),[u,l]=(0,qe.useState)(""),[d,h]=(0,qe.useState)("Connecting..."),[f,p]=(0,qe.useState)(),[g,m]=(0,qe.useState)("");(0,qe.useEffect)((()=>{(async()=>{const e=await(async()=>{const e=await EO({defaultBootstrap:!0});return await e.start(),await sv(e,[Yn.Filter,Yn.LightPush,Yn.Store]),e.isConnected()?e:null})();e&&(r(e),h("Connected"))})()})),window.ethereum.on("accountsChanged",(()=>{window.location.reload()}));const y="0xf44f4a08786BDD99A30b1765467f41b32650A6A4";return(0,QD.jsx)("div",{className:"App",children:(0,QD.jsxs)("header",{className:"App-header",children:[(0,QD.jsx)("h1",{children:"WhisUp3"}),(0,QD.jsx)("h2",{children:d}),(0,QD.jsx)("button",{onClick:async()=>ZY(i,m,s),children:"Connect MetaMask"}),(0,QD.jsxs)("h5",{children:["User: ",g.slice(-42)," ",(0,QD.jsx)("a",{href:g,target:"_blank",children:"(Go!)"})]}),(0,QD.jsx)("button",{onClick:async()=>c(await async function(e,t){if(e)return await e.request({method:"eth_getEncryptionPublicKey",params:[t]});return null}(n,g.slice(-42))),children:"Get Pub Enc Key From MetaMask"}),(0,QD.jsx)("button",{onClick:async()=>async function(e,t,r){if(e){const n=await e.methods.setPubKey(r).send({from:t});console.log(n)}}(await WY(o,y),g.slice(-42),a),children:"Publish On-Chain"}),(0,QD.jsx)("button",{onClick:async()=>l(await QY(await WY(o,y),g.slice(-42))),children:"Get Pub Enc Key (On-Chain)"}),(0,QD.jsxs)("h5",{children:["To Public Enc. Key: ",u]}),(0,QD.jsx)(JD,{to:e,waku:t,onClickSend:XY}),(0,QD.jsx)("button",{onClick:async()=>p(await YY(t)),children:"Get Messages"}),(0,QD.jsx)("ul",{children:f})]})})},ZY=async(e,t,r)=>{const n=await ZD();e(n),await async function(e){e&&await e.request({method:"wallet_switchEthereumChain",params:[{chainId:"0xaa36a7"}]})}(n);const i=(await YD(n)).toLowerCase();t(window.location.pathname+"?to="+i);r(await GY(n))},YY=async e=>{const t=await ZD(),r=(await YD(t)).toLowerCase(),n=(await IO(e,r)).map(((e,t)=>(0,QD.jsxs)("li",{children:[(0,QD.jsx)("input",{type:"textbox",id:"msg"+t.toString(),value:e.message}),(0,QD.jsx)("button",{onClick:async()=>await $Y("msg"+t.toString()),children:"Decrypt"})]})));return n},XY=async(e,t,r)=>{const n=await GY(await ZD()),i=await QY(await WY(n,"0xf44f4a08786BDD99A30b1765467f41b32650A6A4"),t),o=await((e,t)=>{window.Buffer=eL.Buffer;const r=XD.encrypt({publicKey:e,data:t,version:"x25519-xsalsa20-poly1305"});return $D.bufferToHex(eL.Buffer.from(JSON.stringify(r),"utf8"))})(i,r),s=await async function(e,t,r){console.log("You're in Waku.");const n=(new Date).getTime(),i=xO.create({timestamp:n,text:r}),o=xO.encode(i).finish(),s=Mm({contentTopic:kO+t}),a=await e.lightPush.send(s,{payload:o});return a&&a.errors&&a.errors.length>0?(console.log("Error sending message"),console.log(a.errors),!1):(console.log("Message Sent:\n"+t+"\n"+r),!0)}(e,t,o);return s},$Y=async e=>{const t=await ZD(),r=(await YD(t)).toLowerCase(),n=document.getElementById(e).value,i=await(async(e,t,r)=>await e.request({method:"eth_decrypt",params:[r,t]}))(t,r,n);document.getElementById(e).value=i},eX=e=>{e&&e instanceof Function&&__webpack_require__.e(787).then(__webpack_require__.bind(__webpack_require__,787)).then((t=>{let{getCLS:r,getFID:n,getFCP:i,getLCP:o,getTTFB:s}=t;r(e),n(e),i(e),o(e),s(e)}))};ze.createRoot(document.getElementById("root")).render((0,QD.jsx)(qe.StrictMode,{children:(0,QD.jsx)(JY,{})})),eX()})()})();
//# sourceMappingURL=main.7c2e1d7a.js.map